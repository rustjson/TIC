(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["TIC"] = factory();
	else
		root["TIC"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/TIC.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/core-js/modules/_a-function.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_a-function.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_a-function.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_add-to-unscopables.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/modules/_add-to-unscopables.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\")(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_add-to-unscopables.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_an-instance.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_an-instance.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_an-instance.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_an-object.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_an-object.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_an-object.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_array-includes.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/_array-includes.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\nvar toLength = __webpack_require__(/*! ./_to-length */ \"./node_modules/core-js/modules/_to-length.js\");\nvar toAbsoluteIndex = __webpack_require__(/*! ./_to-absolute-index */ \"./node_modules/core-js/modules/_to-absolute-index.js\");\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_array-includes.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_classof.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/modules/_classof.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\");\nvar TAG = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_classof.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_cof.js":
/*!**********************************************!*\
  !*** ./node_modules/core-js/modules/_cof.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_cof.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_core.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/modules/_core.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var core = module.exports = { version: '2.6.1' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_core.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_ctx.js":
/*!**********************************************!*\
  !*** ./node_modules/core-js/modules/_ctx.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// optional / simple context binding\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_ctx.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_defined.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/modules/_defined.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_defined.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_descriptors.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_descriptors.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Thank's IE8 for his funny defineProperty\nmodule.exports = !__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_descriptors.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_dom-create.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_dom-create.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar document = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\").document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_dom-create.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_enum-bug-keys.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/_enum-bug-keys.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_enum-bug-keys.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_enum-keys.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_enum-keys.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// all enumerable object keys, includes symbols\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\nvar gOPS = __webpack_require__(/*! ./_object-gops */ \"./node_modules/core-js/modules/_object-gops.js\");\nvar pIE = __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\");\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_enum-keys.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_export.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/_export.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\nvar ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_export.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_fails.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/modules/_fails.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_fails.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_flags.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/modules/_flags.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_flags.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_for-of.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/_for-of.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\nvar call = __webpack_require__(/*! ./_iter-call */ \"./node_modules/core-js/modules/_iter-call.js\");\nvar isArrayIter = __webpack_require__(/*! ./_is-array-iter */ \"./node_modules/core-js/modules/_is-array-iter.js\");\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar toLength = __webpack_require__(/*! ./_to-length */ \"./node_modules/core-js/modules/_to-length.js\");\nvar getIterFn = __webpack_require__(/*! ./core.get-iterator-method */ \"./node_modules/core-js/modules/core.get-iterator-method.js\");\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_for-of.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_global.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/_global.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_global.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_has.js":
/*!**********************************************!*\
  !*** ./node_modules/core-js/modules/_has.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_has.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_hide.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/modules/_hide.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\nvar createDesc = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\nmodule.exports = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_hide.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_html.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/modules/_html.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var document = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\").document;\nmodule.exports = document && document.documentElement;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_html.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_ie8-dom-define.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/modules/_ie8-dom-define.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = !__webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") && !__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  return Object.defineProperty(__webpack_require__(/*! ./_dom-create */ \"./node_modules/core-js/modules/_dom-create.js\")('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_ie8-dom-define.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_inherit-if-required.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/_inherit-if-required.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar setPrototypeOf = __webpack_require__(/*! ./_set-proto */ \"./node_modules/core-js/modules/_set-proto.js\").set;\nmodule.exports = function (that, target, C) {\n  var S = target.constructor;\n  var P;\n  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {\n    setPrototypeOf(that, P);\n  } return that;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_inherit-if-required.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_invoke.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/_invoke.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_invoke.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iobject.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/modules/_iobject.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\");\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iobject.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_is-array-iter.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/_is-array-iter.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// check on default Array iterator\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\nvar ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_is-array-iter.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_is-array.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/modules/_is-array.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 7.2.2 IsArray(argument)\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\");\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_is-array.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_is-object.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_is-object.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_is-object.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iter-call.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_iter-call.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// call something on iterator step with safe closing on error\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iter-call.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iter-create.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_iter-create.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar create = __webpack_require__(/*! ./_object-create */ \"./node_modules/core-js/modules/_object-create.js\");\nvar descriptor = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\");\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n__webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\")(IteratorPrototype, __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iter-create.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iter-define.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_iter-define.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar LIBRARY = __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\");\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\nvar $iterCreate = __webpack_require__(/*! ./_iter-create */ \"./node_modules/core-js/modules/_iter-create.js\");\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\");\nvar getPrototypeOf = __webpack_require__(/*! ./_object-gpo */ \"./node_modules/core-js/modules/_object-gpo.js\");\nvar ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iter-define.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iter-detect.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_iter-detect.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iter-detect.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iter-step.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_iter-step.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iter-step.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_iterators.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_iterators.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = {};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_iterators.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_library.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/modules/_library.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = false;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_library.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_meta.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/modules/_meta.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var META = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\")('meta');\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar setDesc = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_meta.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_microtask.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_microtask.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar macrotask = __webpack_require__(/*! ./_task */ \"./node_modules/core-js/modules/_task.js\").set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\")(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_microtask.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_new-promise-capability.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/modules/_new-promise-capability.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_new-promise-capability.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-assign.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/_object-assign.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\nvar gOPS = __webpack_require__(/*! ./_object-gops */ \"./node_modules/core-js/modules/_object-gops.js\");\nvar pIE = __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\");\nvar toObject = __webpack_require__(/*! ./_to-object */ \"./node_modules/core-js/modules/_to-object.js\");\nvar IObject = __webpack_require__(/*! ./_iobject */ \"./node_modules/core-js/modules/_iobject.js\");\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || __webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-assign.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-create.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/_object-create.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar dPs = __webpack_require__(/*! ./_object-dps */ \"./node_modules/core-js/modules/_object-dps.js\");\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ \"./node_modules/core-js/modules/_enum-bug-keys.js\");\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ \"./node_modules/core-js/modules/_shared-key.js\")('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = __webpack_require__(/*! ./_dom-create */ \"./node_modules/core-js/modules/_dom-create.js\")('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  __webpack_require__(/*! ./_html */ \"./node_modules/core-js/modules/_html.js\").appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-create.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-dp.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_object-dp.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ \"./node_modules/core-js/modules/_ie8-dom-define.js\");\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\nvar dP = Object.defineProperty;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-dp.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-dps.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_object-dps.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\n\nmodule.exports = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-dps.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-gopd.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_object-gopd.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var pIE = __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\");\nvar createDesc = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar IE8_DOM_DEFINE = __webpack_require__(/*! ./_ie8-dom-define */ \"./node_modules/core-js/modules/_ie8-dom-define.js\");\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-gopd.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-gopn-ext.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/_object-gopn-ext.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\nvar gOPN = __webpack_require__(/*! ./_object-gopn */ \"./node_modules/core-js/modules/_object-gopn.js\").f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-gopn-ext.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-gopn.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_object-gopn.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ \"./node_modules/core-js/modules/_object-keys-internal.js\");\nvar hiddenKeys = __webpack_require__(/*! ./_enum-bug-keys */ \"./node_modules/core-js/modules/_enum-bug-keys.js\").concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-gopn.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-gops.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_object-gops.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.f = Object.getOwnPropertySymbols;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-gops.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-gpo.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_object-gpo.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar toObject = __webpack_require__(/*! ./_to-object */ \"./node_modules/core-js/modules/_to-object.js\");\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ \"./node_modules/core-js/modules/_shared-key.js\")('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-gpo.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-keys-internal.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/modules/_object-keys-internal.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\nvar arrayIndexOf = __webpack_require__(/*! ./_array-includes */ \"./node_modules/core-js/modules/_array-includes.js\")(false);\nvar IE_PROTO = __webpack_require__(/*! ./_shared-key */ \"./node_modules/core-js/modules/_shared-key.js\")('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-keys-internal.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-keys.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_object-keys.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = __webpack_require__(/*! ./_object-keys-internal */ \"./node_modules/core-js/modules/_object-keys-internal.js\");\nvar enumBugKeys = __webpack_require__(/*! ./_enum-bug-keys */ \"./node_modules/core-js/modules/_enum-bug-keys.js\");\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-keys.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_object-pie.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_object-pie.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.f = {}.propertyIsEnumerable;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_object-pie.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_perform.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/modules/_perform.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_perform.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_promise-resolve.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/_promise-resolve.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar newPromiseCapability = __webpack_require__(/*! ./_new-promise-capability */ \"./node_modules/core-js/modules/_new-promise-capability.js\");\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_promise-resolve.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_property-desc.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/modules/_property-desc.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_property-desc.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_redefine-all.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/_redefine-all.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\nmodule.exports = function (target, src, safe) {\n  for (var key in src) redefine(target, key, src[key], safe);\n  return target;\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_redefine-all.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_redefine.js":
/*!***************************************************!*\
  !*** ./node_modules/core-js/modules/_redefine.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar SRC = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\")('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\n__webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\").inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_redefine.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_set-proto.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_set-proto.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\")(Function.call, __webpack_require__(/*! ./_object-gopd */ \"./node_modules/core-js/modules/_object-gopd.js\").f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_set-proto.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_set-species.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_set-species.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\");\nvar SPECIES = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_set-species.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_set-to-string-tag.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/_set-to-string-tag.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var def = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar TAG = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_set-to-string-tag.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_shared-key.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_shared-key.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var shared = __webpack_require__(/*! ./_shared */ \"./node_modules/core-js/modules/_shared.js\")('keys');\nvar uid = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\");\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_shared-key.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_shared.js":
/*!*************************************************!*\
  !*** ./node_modules/core-js/modules/_shared.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\") ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_shared.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_species-constructor.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/_species-constructor.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\nvar SPECIES = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_species-constructor.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_string-trim.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/modules/_string-trim.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\nvar defined = __webpack_require__(/*! ./_defined */ \"./node_modules/core-js/modules/_defined.js\");\nvar fails = __webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\");\nvar spaces = __webpack_require__(/*! ./_string-ws */ \"./node_modules/core-js/modules/_string-ws.js\");\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_string-trim.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_string-ws.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_string-ws.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_string-ws.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_task.js":
/*!***********************************************!*\
  !*** ./node_modules/core-js/modules/_task.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\nvar invoke = __webpack_require__(/*! ./_invoke */ \"./node_modules/core-js/modules/_invoke.js\");\nvar html = __webpack_require__(/*! ./_html */ \"./node_modules/core-js/modules/_html.js\");\nvar cel = __webpack_require__(/*! ./_dom-create */ \"./node_modules/core-js/modules/_dom-create.js\");\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (__webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\")(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_task.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_to-absolute-index.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/_to-absolute-index.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var toInteger = __webpack_require__(/*! ./_to-integer */ \"./node_modules/core-js/modules/_to-integer.js\");\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_to-absolute-index.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_to-integer.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_to-integer.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_to-integer.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_to-iobject.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_to-iobject.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = __webpack_require__(/*! ./_iobject */ \"./node_modules/core-js/modules/_iobject.js\");\nvar defined = __webpack_require__(/*! ./_defined */ \"./node_modules/core-js/modules/_defined.js\");\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_to-iobject.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_to-length.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_to-length.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 7.1.15 ToLength\nvar toInteger = __webpack_require__(/*! ./_to-integer */ \"./node_modules/core-js/modules/_to-integer.js\");\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_to-length.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_to-object.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/_to-object.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 7.1.13 ToObject(argument)\nvar defined = __webpack_require__(/*! ./_defined */ \"./node_modules/core-js/modules/_defined.js\");\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_to-object.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_to-primitive.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/modules/_to-primitive.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_to-primitive.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_uid.js":
/*!**********************************************!*\
  !*** ./node_modules/core-js/modules/_uid.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_uid.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_user-agent.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_user-agent.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_user-agent.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_wks-define.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/_wks-define.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar core = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\");\nvar LIBRARY = __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\");\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ \"./node_modules/core-js/modules/_wks-ext.js\");\nvar defineProperty = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_wks-define.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_wks-ext.js":
/*!**************************************************!*\
  !*** ./node_modules/core-js/modules/_wks-ext.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports.f = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\");\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_wks-ext.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/_wks.js":
/*!**********************************************!*\
  !*** ./node_modules/core-js/modules/_wks.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var store = __webpack_require__(/*! ./_shared */ \"./node_modules/core-js/modules/_shared.js\")('wks');\nvar uid = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\");\nvar Symbol = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\").Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/_wks.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/core.get-iterator-method.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/modules/core.get-iterator-method.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var classof = __webpack_require__(/*! ./_classof */ \"./node_modules/core-js/modules/_classof.js\");\nvar ITERATOR = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('iterator');\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\nmodule.exports = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\").getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/core.get-iterator-method.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.array.iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es6.array.iterator.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar addToUnscopables = __webpack_require__(/*! ./_add-to-unscopables */ \"./node_modules/core-js/modules/_add-to-unscopables.js\");\nvar step = __webpack_require__(/*! ./_iter-step */ \"./node_modules/core-js/modules/_iter-step.js\");\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = __webpack_require__(/*! ./_iter-define */ \"./node_modules/core-js/modules/_iter-define.js\")(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.array.iterator.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.date.to-string.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/modules/es6.date.to-string.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var DateProto = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar $toString = DateProto[TO_STRING];\nvar getTime = DateProto.getTime;\nif (new Date(NaN) + '' != INVALID_DATE) {\n  __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\")(DateProto, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.date.to-string.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.number.constructor.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/modules/es6.number.constructor.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar cof = __webpack_require__(/*! ./_cof */ \"./node_modules/core-js/modules/_cof.js\");\nvar inheritIfRequired = __webpack_require__(/*! ./_inherit-if-required */ \"./node_modules/core-js/modules/_inherit-if-required.js\");\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\nvar fails = __webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\");\nvar gOPN = __webpack_require__(/*! ./_object-gopn */ \"./node_modules/core-js/modules/_object-gopn.js\").f;\nvar gOPD = __webpack_require__(/*! ./_object-gopd */ \"./node_modules/core-js/modules/_object-gopd.js\").f;\nvar dP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f;\nvar $trim = __webpack_require__(/*! ./_string-trim */ \"./node_modules/core-js/modules/_string-trim.js\").trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(__webpack_require__(/*! ./_object-create */ \"./node_modules/core-js/modules/_object-create.js\")(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\")(global, NUMBER, $Number);\n}\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.number.constructor.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.object.assign.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/modules/es6.object.assign.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 19.1.3.1 Object.assign(target, source)\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\n\n$export($export.S + $export.F, 'Object', { assign: __webpack_require__(/*! ./_object-assign */ \"./node_modules/core-js/modules/_object-assign.js\") });\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.object.assign.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.promise.js":
/*!*****************************************************!*\
  !*** ./node_modules/core-js/modules/es6.promise.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar LIBRARY = __webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\");\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar ctx = __webpack_require__(/*! ./_ctx */ \"./node_modules/core-js/modules/_ctx.js\");\nvar classof = __webpack_require__(/*! ./_classof */ \"./node_modules/core-js/modules/_classof.js\");\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar aFunction = __webpack_require__(/*! ./_a-function */ \"./node_modules/core-js/modules/_a-function.js\");\nvar anInstance = __webpack_require__(/*! ./_an-instance */ \"./node_modules/core-js/modules/_an-instance.js\");\nvar forOf = __webpack_require__(/*! ./_for-of */ \"./node_modules/core-js/modules/_for-of.js\");\nvar speciesConstructor = __webpack_require__(/*! ./_species-constructor */ \"./node_modules/core-js/modules/_species-constructor.js\");\nvar task = __webpack_require__(/*! ./_task */ \"./node_modules/core-js/modules/_task.js\").set;\nvar microtask = __webpack_require__(/*! ./_microtask */ \"./node_modules/core-js/modules/_microtask.js\")();\nvar newPromiseCapabilityModule = __webpack_require__(/*! ./_new-promise-capability */ \"./node_modules/core-js/modules/_new-promise-capability.js\");\nvar perform = __webpack_require__(/*! ./_perform */ \"./node_modules/core-js/modules/_perform.js\");\nvar userAgent = __webpack_require__(/*! ./_user-agent */ \"./node_modules/core-js/modules/_user-agent.js\");\nvar promiseResolve = __webpack_require__(/*! ./_promise-resolve */ \"./node_modules/core-js/modules/_promise-resolve.js\");\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[__webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\")('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = __webpack_require__(/*! ./_redefine-all */ \"./node_modules/core-js/modules/_redefine-all.js\")($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\n__webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\")($Promise, PROMISE);\n__webpack_require__(/*! ./_set-species */ \"./node_modules/core-js/modules/_set-species.js\")(PROMISE);\nWrapper = __webpack_require__(/*! ./_core */ \"./node_modules/core-js/modules/_core.js\")[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(/*! ./_iter-detect */ \"./node_modules/core-js/modules/_iter-detect.js\")(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.promise.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.regexp.flags.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es6.regexp.flags.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// 21.2.5.3 get RegExp.prototype.flags()\nif (__webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\") && /./g.flags != 'g') __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\").f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: __webpack_require__(/*! ./_flags */ \"./node_modules/core-js/modules/_flags.js\")\n});\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.regexp.flags.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.regexp.to-string.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/modules/es6.regexp.to-string.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n__webpack_require__(/*! ./es6.regexp.flags */ \"./node_modules/core-js/modules/es6.regexp.flags.js\");\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar $flags = __webpack_require__(/*! ./_flags */ \"./node_modules/core-js/modules/_flags.js\");\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\");\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\")(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (__webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\")(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.regexp.to-string.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es6.symbol.js":
/*!****************************************************!*\
  !*** ./node_modules/core-js/modules/es6.symbol.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n// ECMAScript 6 symbols shim\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar has = __webpack_require__(/*! ./_has */ \"./node_modules/core-js/modules/_has.js\");\nvar DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/modules/_descriptors.js\");\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/modules/_export.js\");\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\nvar META = __webpack_require__(/*! ./_meta */ \"./node_modules/core-js/modules/_meta.js\").KEY;\nvar $fails = __webpack_require__(/*! ./_fails */ \"./node_modules/core-js/modules/_fails.js\");\nvar shared = __webpack_require__(/*! ./_shared */ \"./node_modules/core-js/modules/_shared.js\");\nvar setToStringTag = __webpack_require__(/*! ./_set-to-string-tag */ \"./node_modules/core-js/modules/_set-to-string-tag.js\");\nvar uid = __webpack_require__(/*! ./_uid */ \"./node_modules/core-js/modules/_uid.js\");\nvar wks = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\");\nvar wksExt = __webpack_require__(/*! ./_wks-ext */ \"./node_modules/core-js/modules/_wks-ext.js\");\nvar wksDefine = __webpack_require__(/*! ./_wks-define */ \"./node_modules/core-js/modules/_wks-define.js\");\nvar enumKeys = __webpack_require__(/*! ./_enum-keys */ \"./node_modules/core-js/modules/_enum-keys.js\");\nvar isArray = __webpack_require__(/*! ./_is-array */ \"./node_modules/core-js/modules/_is-array.js\");\nvar anObject = __webpack_require__(/*! ./_an-object */ \"./node_modules/core-js/modules/_an-object.js\");\nvar isObject = __webpack_require__(/*! ./_is-object */ \"./node_modules/core-js/modules/_is-object.js\");\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/modules/_to-iobject.js\");\nvar toPrimitive = __webpack_require__(/*! ./_to-primitive */ \"./node_modules/core-js/modules/_to-primitive.js\");\nvar createDesc = __webpack_require__(/*! ./_property-desc */ \"./node_modules/core-js/modules/_property-desc.js\");\nvar _create = __webpack_require__(/*! ./_object-create */ \"./node_modules/core-js/modules/_object-create.js\");\nvar gOPNExt = __webpack_require__(/*! ./_object-gopn-ext */ \"./node_modules/core-js/modules/_object-gopn-ext.js\");\nvar $GOPD = __webpack_require__(/*! ./_object-gopd */ \"./node_modules/core-js/modules/_object-gopd.js\");\nvar $DP = __webpack_require__(/*! ./_object-dp */ \"./node_modules/core-js/modules/_object-dp.js\");\nvar $keys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  __webpack_require__(/*! ./_object-gopn */ \"./node_modules/core-js/modules/_object-gopn.js\").f = gOPNExt.f = $getOwnPropertyNames;\n  __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/modules/_object-pie.js\").f = $propertyIsEnumerable;\n  __webpack_require__(/*! ./_object-gops */ \"./node_modules/core-js/modules/_object-gops.js\").f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !__webpack_require__(/*! ./_library */ \"./node_modules/core-js/modules/_library.js\")) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\")($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es6.symbol.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es7.symbol.async-iterator.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/modules/es7.symbol.async-iterator.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! ./_wks-define */ \"./node_modules/core-js/modules/_wks-define.js\")('asyncIterator');\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/es7.symbol.async-iterator.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/web.dom.iterable.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/web.dom.iterable.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var $iterators = __webpack_require__(/*! ./es6.array.iterator */ \"./node_modules/core-js/modules/es6.array.iterator.js\");\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/modules/_object-keys.js\");\nvar redefine = __webpack_require__(/*! ./_redefine */ \"./node_modules/core-js/modules/_redefine.js\");\nvar global = __webpack_require__(/*! ./_global */ \"./node_modules/core-js/modules/_global.js\");\nvar hide = __webpack_require__(/*! ./_hide */ \"./node_modules/core-js/modules/_hide.js\");\nvar Iterators = __webpack_require__(/*! ./_iterators */ \"./node_modules/core-js/modules/_iterators.js\");\nvar wks = __webpack_require__(/*! ./_wks */ \"./node_modules/core-js/modules/_wks.js\");\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n\n\n//# sourceURL=webpack://TIC/./node_modules/core-js/modules/web.dom.iterable.js?");

/***/ }),

/***/ "./node_modules/js-md5/src/md5.js":
/*!****************************************!*\
  !*** ./node_modules/js-md5/src/md5.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/**\n * [js-md5]{@link https://github.com/emn178/js-md5}\n *\n * @namespace md5\n * @version 0.7.3\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_MD5_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_MD5_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_MD5_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD =  true && __webpack_require__(/*! !webpack amd options */ \"./node_modules/webpack/buildin/amd-options.js\");\n  var ARRAY_BUFFER = !root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [128, 32768, 8388608, -2147483648];\n  var SHIFT = [0, 8, 16, 24];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'buffer', 'arrayBuffer', 'base64'];\n  var BASE64_ENCODE_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n  var blocks = [], buffer8;\n  if (ARRAY_BUFFER) {\n    var buffer = new ArrayBuffer(68);\n    buffer8 = new Uint8Array(buffer);\n    blocks = new Uint32Array(buffer);\n  }\n\n  if (root.JS_MD5_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  /**\n   * @method hex\n   * @memberof md5\n   * @description Output hash as hex string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} Hex string\n   * @example\n   * md5.hex('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * md5('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method digest\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.digest('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method array\n   * @memberof md5\n   * @description Output hash as bytes array\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Array} Bytes array\n   * @example\n   * md5.array('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method arrayBuffer\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.arrayBuffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof md5\n   * @description Output hash as ArrayBuffer\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @example\n   * md5.buffer('The quick brown fox jumps over the lazy dog');\n   */\n  /**\n   * @method base64\n   * @memberof md5\n   * @description Output hash as base64 string\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {String} base64 string\n   * @example\n   * md5.base64('The quick brown fox jumps over the lazy dog');\n   */\n  var createOutputMethod = function (outputType) {\n    return function (message) {\n      return new Md5(true).update(message)[outputType]();\n    };\n  };\n\n  /**\n   * @method create\n   * @memberof md5\n   * @description Create Md5 object\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.create();\n   */\n  /**\n   * @method update\n   * @memberof md5\n   * @description Create and update Md5 object\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @example\n   * var hash = md5.update('The quick brown fox jumps over the lazy dog');\n   * // equal to\n   * var hash = md5.create();\n   * hash.update('The quick brown fox jumps over the lazy dog');\n   */\n  var createMethod = function () {\n    var method = createOutputMethod('hex');\n    if (NODE_JS) {\n      method = nodeWrap(method);\n    }\n    method.create = function () {\n      return new Md5();\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash('md5').update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw ERROR;\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash('md5').update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  /**\n   * Md5 class\n   * @class Md5\n   * @description This is internal class.\n   * @see {@link md5.create}\n   */\n  function Md5(sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n      this.buffer8 = buffer8;\n    } else {\n      if (ARRAY_BUFFER) {\n        var buffer = new ArrayBuffer(68);\n        this.buffer8 = new Uint8Array(buffer);\n        this.blocks = new Uint32Array(buffer);\n      } else {\n        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      }\n    }\n    this.h0 = this.h1 = this.h2 = this.h3 = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n  }\n\n  /**\n   * @method update\n   * @memberof Md5\n   * @instance\n   * @description Update hash\n   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n   * @returns {Md5} Md5 object.\n   * @see {@link md5.update}\n   */\n  Md5.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw ERROR;\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw ERROR;\n          }\n        }\n      } else {\n        throw ERROR;\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    var buffer8 = this.buffer8;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = blocks[16];\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            buffer8[i++] = message[index];\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n          }\n        }\n      } else {\n        if (ARRAY_BUFFER) {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              buffer8[i++] = code;\n            } else if (code < 0x800) {\n              buffer8[i++] = 0xc0 | (code >> 6);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else if (code < 0xd800 || code >= 0xe000) {\n              buffer8[i++] = 0xe0 | (code >> 12);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              buffer8[i++] = 0xf0 | (code >> 18);\n              buffer8[i++] = 0x80 | ((code >> 12) & 0x3f);\n              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);\n              buffer8[i++] = 0x80 | (code & 0x3f);\n            }\n          }\n        } else {\n          for (i = this.start; index < length && i < 64; ++index) {\n            code = message.charCodeAt(index);\n            if (code < 0x80) {\n              blocks[i >> 2] |= code << SHIFT[i++ & 3];\n            } else if (code < 0x800) {\n              blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else if (code < 0xd800 || code >= 0xe000) {\n              blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            } else {\n              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n              blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n            }\n          }\n        }\n      }\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Md5.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = blocks[16];\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n      blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n      blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.bytes << 3;\n    blocks[15] = this.hBytes << 3 | this.bytes >>> 29;\n    this.hash();\n  };\n\n  Md5.prototype.hash = function () {\n    var a, b, c, d, bc, da, blocks = this.blocks;\n\n    if (this.first) {\n      a = blocks[0] - 680876937;\n      a = (a << 7 | a >>> 25) - 271733879 << 0;\n      d = (-1732584194 ^ a & 2004318071) + blocks[1] - 117830708;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c = (-271733879 ^ (d & (a ^ -271733879))) + blocks[2] - 1126478375;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b = (a ^ (c & (d ^ a))) + blocks[3] - 1316259209;\n      b = (b << 22 | b >>> 10) + c << 0;\n    } else {\n      a = this.h0;\n      b = this.h1;\n      c = this.h2;\n      d = this.h3;\n      a += (d ^ (b & (c ^ d))) + blocks[0] - 680876936;\n      a = (a << 7 | a >>> 25) + b << 0;\n      d += (c ^ (a & (b ^ c))) + blocks[1] - 389564586;\n      d = (d << 12 | d >>> 20) + a << 0;\n      c += (b ^ (d & (a ^ b))) + blocks[2] + 606105819;\n      c = (c << 17 | c >>> 15) + d << 0;\n      b += (a ^ (c & (d ^ a))) + blocks[3] - 1044525330;\n      b = (b << 22 | b >>> 10) + c << 0;\n    }\n\n    a += (d ^ (b & (c ^ d))) + blocks[4] - 176418897;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[5] + 1200080426;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[6] - 1473231341;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[7] - 45705983;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[8] + 1770035416;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[9] - 1958414417;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[10] - 42063;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[11] - 1990404162;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (d ^ (b & (c ^ d))) + blocks[12] + 1804603682;\n    a = (a << 7 | a >>> 25) + b << 0;\n    d += (c ^ (a & (b ^ c))) + blocks[13] - 40341101;\n    d = (d << 12 | d >>> 20) + a << 0;\n    c += (b ^ (d & (a ^ b))) + blocks[14] - 1502002290;\n    c = (c << 17 | c >>> 15) + d << 0;\n    b += (a ^ (c & (d ^ a))) + blocks[15] + 1236535329;\n    b = (b << 22 | b >>> 10) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[1] - 165796510;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[6] - 1069501632;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[11] + 643717713;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[0] - 373897302;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[5] - 701558691;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[10] + 38016083;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[15] - 660478335;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[4] - 405537848;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[9] + 568446438;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[14] - 1019803690;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[3] - 187363961;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[8] + 1163531501;\n    b = (b << 20 | b >>> 12) + c << 0;\n    a += (c ^ (d & (b ^ c))) + blocks[13] - 1444681467;\n    a = (a << 5 | a >>> 27) + b << 0;\n    d += (b ^ (c & (a ^ b))) + blocks[2] - 51403784;\n    d = (d << 9 | d >>> 23) + a << 0;\n    c += (a ^ (b & (d ^ a))) + blocks[7] + 1735328473;\n    c = (c << 14 | c >>> 18) + d << 0;\n    b += (d ^ (a & (c ^ d))) + blocks[12] - 1926607734;\n    b = (b << 20 | b >>> 12) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[5] - 378558;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[8] - 2022574463;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[11] + 1839030562;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[14] - 35309556;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[1] - 1530992060;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[4] + 1272893353;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[7] - 155497632;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[10] - 1094730640;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[13] + 681279174;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[0] - 358537222;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[3] - 722521979;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[6] + 76029189;\n    b = (b << 23 | b >>> 9) + c << 0;\n    bc = b ^ c;\n    a += (bc ^ d) + blocks[9] - 640364487;\n    a = (a << 4 | a >>> 28) + b << 0;\n    d += (bc ^ a) + blocks[12] - 421815835;\n    d = (d << 11 | d >>> 21) + a << 0;\n    da = d ^ a;\n    c += (da ^ b) + blocks[15] + 530742520;\n    c = (c << 16 | c >>> 16) + d << 0;\n    b += (da ^ c) + blocks[2] - 995338651;\n    b = (b << 23 | b >>> 9) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[0] - 198630844;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[7] + 1126891415;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[14] - 1416354905;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[5] - 57434055;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[12] + 1700485571;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[3] - 1894986606;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[10] - 1051523;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[1] - 2054922799;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[8] + 1873313359;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[15] - 30611744;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[6] - 1560198380;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[13] + 1309151649;\n    b = (b << 21 | b >>> 11) + c << 0;\n    a += (c ^ (b | ~d)) + blocks[4] - 145523070;\n    a = (a << 6 | a >>> 26) + b << 0;\n    d += (b ^ (a | ~c)) + blocks[11] - 1120210379;\n    d = (d << 10 | d >>> 22) + a << 0;\n    c += (a ^ (d | ~b)) + blocks[2] + 718787259;\n    c = (c << 15 | c >>> 17) + d << 0;\n    b += (d ^ (c | ~a)) + blocks[9] - 343485551;\n    b = (b << 21 | b >>> 11) + c << 0;\n\n    if (this.first) {\n      this.h0 = a + 1732584193 << 0;\n      this.h1 = b - 271733879 << 0;\n      this.h2 = c - 1732584194 << 0;\n      this.h3 = d + 271733878 << 0;\n      this.first = false;\n    } else {\n      this.h0 = this.h0 + a << 0;\n      this.h1 = this.h1 + b << 0;\n      this.h2 = this.h2 + c << 0;\n      this.h3 = this.h3 + d << 0;\n    }\n  };\n\n  /**\n   * @method hex\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.hex();\n   */\n  Md5.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n\n    return HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F];\n  };\n\n  /**\n   * @method toString\n   * @memberof Md5\n   * @instance\n   * @description Output hash as hex string\n   * @returns {String} Hex string\n   * @see {@link md5.hex}\n   * @example\n   * hash.toString();\n   */\n  Md5.prototype.toString = Md5.prototype.hex;\n\n  /**\n   * @method digest\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.digest}\n   * @example\n   * hash.digest();\n   */\n  Md5.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;\n    return [\n      h0 & 0xFF, (h0 >> 8) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 24) & 0xFF,\n      h1 & 0xFF, (h1 >> 8) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 24) & 0xFF,\n      h2 & 0xFF, (h2 >> 8) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 24) & 0xFF,\n      h3 & 0xFF, (h3 >> 8) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 24) & 0xFF\n    ];\n  };\n\n  /**\n   * @method array\n   * @memberof Md5\n   * @instance\n   * @description Output hash as bytes array\n   * @returns {Array} Bytes array\n   * @see {@link md5.array}\n   * @example\n   * hash.array();\n   */\n  Md5.prototype.array = Md5.prototype.digest;\n\n  /**\n   * @method arrayBuffer\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.arrayBuffer}\n   * @example\n   * hash.arrayBuffer();\n   */\n  Md5.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(16);\n    var blocks = new Uint32Array(buffer);\n    blocks[0] = this.h0;\n    blocks[1] = this.h1;\n    blocks[2] = this.h2;\n    blocks[3] = this.h3;\n    return buffer;\n  };\n\n  /**\n   * @method buffer\n   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.\n   * @memberof Md5\n   * @instance\n   * @description Output hash as ArrayBuffer\n   * @returns {ArrayBuffer} ArrayBuffer\n   * @see {@link md5.buffer}\n   * @example\n   * hash.buffer();\n   */\n  Md5.prototype.buffer = Md5.prototype.arrayBuffer;\n\n  /**\n   * @method base64\n   * @memberof Md5\n   * @instance\n   * @description Output hash as base64 string\n   * @returns {String} base64 string\n   * @see {@link md5.base64}\n   * @example\n   * hash.base64();\n   */\n  Md5.prototype.base64 = function () {\n    var v1, v2, v3, base64Str = '', bytes = this.array();\n    for (var i = 0; i < 15;) {\n      v1 = bytes[i++];\n      v2 = bytes[i++];\n      v3 = bytes[i++];\n      base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n        BASE64_ENCODE_CHAR[(v1 << 4 | v2 >>> 4) & 63] +\n        BASE64_ENCODE_CHAR[(v2 << 2 | v3 >>> 6) & 63] +\n        BASE64_ENCODE_CHAR[v3 & 63];\n    }\n    v1 = bytes[i];\n    base64Str += BASE64_ENCODE_CHAR[v1 >>> 2] +\n      BASE64_ENCODE_CHAR[(v1 << 4) & 63] +\n      '==';\n    return base64Str;\n  };\n\n  var exports = createMethod();\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    /**\n     * @method md5\b\n     * @description Md5 hash function, export to global in browsers.\n     * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash\n     * @returns {String} md5 hashes\n     * @example\n     * md5(''); // d41d8cd98f00b204e9800998ecf8427e\n     * md5('The quick brown fox jumps over the lazy dog'); // 9e107d9d372bb6826bd81d3542a419d6\n     * md5('The quick brown fox jumps over the lazy dog.'); // e4d909c290d0fb1ca068ffaddf22cbd0\n     *\n     * // It also supports UTF-8 encoding\n     * md5('中文'); // a7bac2239fcdcb3a067903d8077c4a07\n     *\n     * // It also supports byte `Array`, `Uint8Array`, `ArrayBuffer`\n     * md5([]); // d41d8cd98f00b204e9800998ecf8427e\n     * md5(new Uint8Array([])); // d41d8cd98f00b204e9800998ecf8427e\n     */\n    root.md5 = exports;\n    if (AMD) {\n      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n        return exports;\n      }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    }\n  }\n})();\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://TIC/./node_modules/js-md5/src/md5.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack://TIC/./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/tim-js-sdk/tim-js.js":
/*!*******************************************!*\
  !*** ./node_modules/tim-js-sdk/tim-js.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {!function(e,t){ true?module.exports=t():undefined}(this,function(){var e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n,r,o,i=\"object\",a=function(e){return e&&e.Math==Math&&e},s=a(typeof globalThis==i&&globalThis)||a(typeof window==i&&window)||a(typeof self==i&&self)||a(typeof e==i&&e)||Function(\"return this\")(),u=function(e){try{return!!e()}catch(t){return 1}},c=!u(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a}),l={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,f={f:p&&!l.call({1:2},1)?function(e){var t=p(this,e);return!!t&&t.enumerable}:l},h=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},g={}.toString,d=function(e){return g.call(e).slice(8,-1)},m=\"\".split,_=u(function(){return!Object(\"z\").propertyIsEnumerable(0)})?function(e){return\"String\"==d(e)?m.call(e,\"\"):Object(e)}:Object,v=function(e){if(null==e)throw TypeError(\"Can't call method on \"+e);return e},y=function(e){return _(v(e))},E=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e},I=function(e,t){if(!E(e))return e;var n,r;if(t&&\"function\"==typeof(n=e.toString)&&!E(r=n.call(e)))return r;if(\"function\"==typeof(n=e.valueOf)&&!E(r=n.call(e)))return r;if(!t&&\"function\"==typeof(n=e.toString)&&!E(r=n.call(e)))return r;throw TypeError(\"Can't convert object to primitive value\")},S={}.hasOwnProperty,C=function(e,t){return S.call(e,t)},T=s.document,M=E(T)&&E(T.createElement),A=function(e){return M?T.createElement(e):{}},O=!c&&!u(function(){return 7!=Object.defineProperty(A(\"div\"),\"a\",{get:function(){return 7}}).a}),D=Object.getOwnPropertyDescriptor,N={f:c?D:function(e,t){if(e=y(e),t=I(t,1),O)try{return D(e,t)}catch(n){}if(C(e,t))return h(!f.f.call(e,t),e[t])}},L=function(e){if(!E(e))throw TypeError(String(e)+\" is not an object\");return e},R=Object.defineProperty,P={f:c?R:function(e,t,n){if(L(e),t=I(t,1),L(n),O)try{return R(e,t,n)}catch(r){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported\");return\"value\"in n&&(e[t]=n.value),e}},G=c?function(e,t,n){return P.f(e,t,h(1,n))}:function(e,t,n){return e[t]=n,e},k=function(e,t){try{G(s,e,t)}catch(n){s[e]=t}return t},w=t(function(e){var t=s[\"__core-js_shared__\"]||k(\"__core-js_shared__\",{});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})(\"versions\",[]).push({version:\"3.2.1\",mode:\"global\",copyright:\"© 2019 Denis Pushkarev (zloirock.ru)\"})}),b=w(\"native-function-to-string\",Function.toString),U=s.WeakMap,F=\"function\"==typeof U&&/native code/.test(b.call(U)),x=0,q=Math.random(),V=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++x+q).toString(36)},B=w(\"keys\"),j=function(e){return B[e]||(B[e]=V(e))},H={},K=s.WeakMap;if(F){var Y=new K,z=Y.get,W=Y.has,X=Y.set;n=function(e,t){return X.call(Y,e,t),t},r=function(e){return z.call(Y,e)||{}},o=function(e){return W.call(Y,e)}}else{var J=j(\"state\");H[J]=1,n=function(e,t){return G(e,J,t),t},r=function(e){return C(e,J)?e[J]:{}},o=function(e){return C(e,J)}}var Q={set:n,get:r,has:o,enforce:function(e){return o(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var n;if(!E(t)||(n=r(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return n}}},Z=t(function(e){var t=Q.get,n=Q.enforce,r=String(b).split(\"toString\");w(\"inspectSource\",function(e){return b.call(e)}),(e.exports=function(e,t,o,i){var a=i?!!i.unsafe:0,u=i?!!i.enumerable:0,c=i?!!i.noTargetGet:0;\"function\"==typeof o&&(\"string\"!=typeof t||C(o,\"name\")||G(o,\"name\",t),n(o).source=r.join(\"string\"==typeof t?t:\"\")),e!==s?(a?!c&&e[t]&&(u=1):delete e[t],u?e[t]=o:G(e,t,o)):u?e[t]=o:k(t,o)})(Function.prototype,\"toString\",function(){return\"function\"==typeof this&&t(this).source||b.call(this)})}),$=s,ee=function(e){return\"function\"==typeof e?e:void 0},te=function(e,t){return arguments.length<2?ee($[e])||ee(s[e]):$[e]&&$[e][t]||s[e]&&s[e][t]},ne=Math.ceil,re=Math.floor,oe=function(e){return isNaN(e=+e)?0:(e>0?re:ne)(e)},ie=Math.min,ae=function(e){return e>0?ie(oe(e),9007199254740991):0},se=Math.max,ue=Math.min,ce=function(e,t){var n=oe(e);return n<0?se(n+t,0):ue(n,t)},le=function(e){return function(t,n,r){var o,i=y(t),a=ae(i.length),s=ce(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return 1}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},pe={includes:le(1),indexOf:le(0)},fe=pe.indexOf,he=function(e,t){var n,r=y(e),o=0,i=[];for(n in r)!C(H,n)&&C(r,n)&&i.push(n);for(;t.length>o;)C(r,n=t[o++])&&(~fe(i,n)||i.push(n));return i},ge=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],de=ge.concat(\"length\",\"prototype\"),me={f:Object.getOwnPropertyNames||function(e){return he(e,de)}},_e={f:Object.getOwnPropertySymbols},ve=te(\"Reflect\",\"ownKeys\")||function(e){var t=me.f(L(e)),n=_e.f;return n?t.concat(n(e)):t},ye=function(e,t){for(var n=ve(t),r=P.f,o=N.f,i=0;i<n.length;i++){var a=n[i];C(e,a)||r(e,a,o(t,a))}},Ee=/#|\\.prototype\\./,Ie=function(e,t){var n=Ce[Se(e)];return n==Me?1:n==Te?0:\"function\"==typeof t?u(t):!!t},Se=Ie.normalize=function(e){return String(e).replace(Ee,\".\").toLowerCase()},Ce=Ie.data={},Te=Ie.NATIVE=\"N\",Me=Ie.POLYFILL=\"P\",Ae=Ie,Oe=N.f,De=function(e,t){var n,r,o,i,a,u=e.target,c=e.global,l=e.stat;if(n=c?s:l?s[u]||k(u,{}):(s[u]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=Oe(n,r))&&a.value:n[r],!Ae(c?r:u+(l?\".\":\"#\")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;ye(i,o)}(e.sham||o&&o.sham)&&G(i,\"sham\",1),Z(n,r,i,e)}},Ne=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e},Le=function(e,t,n){if(Ne(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},Re=function(e){return Object(v(e))},Pe=Array.isArray||function(e){return\"Array\"==d(e)},Ge=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())}),ke=s.Symbol,we=w(\"wks\"),be=function(e){return we[e]||(we[e]=Ge&&ke[e]||(Ge?ke:V)(\"Symbol.\"+e))},Ue=be(\"species\"),Fe=function(e,t){var n;return Pe(e)&&(\"function\"!=typeof(n=e.constructor)||n!==Array&&!Pe(n.prototype)?E(n)&&null===(n=n[Ue])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},xe=[].push,qe=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=5==e||i;return function(s,u,c,l){for(var p,f,h=Re(s),g=_(h),d=Le(u,c,3),m=ae(g.length),v=0,y=l||Fe,E=t?y(s,m):n?y(s,0):void 0;m>v;v++)if((a||v in g)&&(f=d(p=g[v],v,h),e))if(t)E[v]=f;else if(f)switch(e){case 3:return 1;case 5:return p;case 6:return v;case 2:xe.call(E,p)}else if(o)return 0;return i?-1:r||o?o:E}},Ve={forEach:qe(0),map:qe(1),filter:qe(2),some:qe(3),every:qe(4),find:qe(5),findIndex:qe(6)},Be=function(e,t){var n=[][e];return!n||!u(function(){n.call(null,t||function(){throw 1},1)})},je=Ve.forEach,He=Be(\"forEach\")?function(e){return je(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach;De({target:\"Array\",proto:1,forced:[].forEach!=He},{forEach:He});var Ke=function(e,t,n,r){try{return r?t(L(n)[0],n[1]):t(n)}catch(i){var o=e.return;throw void 0!==o&&L(o.call(e)),i}},Ye={},ze=be(\"iterator\"),We=Array.prototype,Xe=function(e){return void 0!==e&&(Ye.Array===e||We[ze]===e)},Je=function(e,t,n){var r=I(t);r in e?P.f(e,r,h(0,n)):e[r]=n},Qe=be(\"toStringTag\"),Ze=\"Arguments\"==d(function(){return arguments}()),$e=function(e){var t,n,r;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),Qe))?n:Ze?d(t):\"Object\"==(r=d(t))&&\"function\"==typeof t.callee?\"Arguments\":r},et=be(\"iterator\"),tt=function(e){if(null!=e)return e[et]||e[\"@@iterator\"]||Ye[$e(e)]},nt=function(e){var t,n,r,o,i=Re(e),a=\"function\"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,c=void 0!==u,l=0,p=tt(i);if(c&&(u=Le(u,s>2?arguments[2]:void 0,2)),null==p||a==Array&&Xe(p))for(n=new a(t=ae(i.length));t>l;l++)Je(n,l,c?u(i[l],l):i[l]);else for(o=p.call(i),n=new a;!(r=o.next()).done;l++)Je(n,l,c?Ke(o,u,[r.value,l],1):r.value);return n.length=l,n},rt=be(\"iterator\"),ot=0;try{var it=0,at={next:function(){return{done:!!it++}},return:function(){ot=1}};at[rt]=function(){return this},Array.from(at,function(){throw 2})}catch(Jg){}var st=function(e,t){if(!t&&!ot)return 0;var n=0;try{var r={};r[rt]=function(){return{next:function(){return{done:n=1}}}},e(r)}catch(Jg){}return n},ut=!st(function(e){Array.from(e)});De({target:\"Array\",stat:1,forced:ut},{from:nt});var ct=Object.keys||function(e){return he(e,ge)},lt=c?Object.defineProperties:function(e,t){L(e);for(var n,r=ct(t),o=r.length,i=0;o>i;)P.f(e,n=r[i++],t[n]);return e},pt=te(\"document\",\"documentElement\"),ft=j(\"IE_PROTO\"),ht=function(){},gt=function(){var e,t=A(\"iframe\"),n=ge.length;for(t.style.display=\"none\",pt.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),gt=e.F;n--;)delete gt.prototype[ge[n]];return gt()},dt=Object.create||function(e,t){var n;return null!==e?(ht.prototype=L(e),n=new ht,ht.prototype=null,n[ft]=e):n=gt(),void 0===t?n:lt(n,t)};H[ft]=1,De({target:\"Object\",stat:1,sham:!c},{create:dt});var mt=u(function(){ct(1)});De({target:\"Object\",stat:1,forced:mt},{keys:function(e){return ct(Re(e))}});var _t,vt,yt,Et=function(e){return function(t,n){var r,o,i=String(v(t)),a=oe(n),s=i.length;return a<0||a>=s?e?\"\":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},It={codeAt:Et(0),charAt:Et(1)},St=!u(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Ct=j(\"IE_PROTO\"),Tt=Object.prototype,Mt=St?Object.getPrototypeOf:function(e){return e=Re(e),C(e,Ct)?e[Ct]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Tt:null},At=be(\"iterator\"),Ot=0;[].keys&&(\"next\"in(yt=[].keys())?(vt=Mt(Mt(yt)))!==Object.prototype&&(_t=vt):Ot=1),null==_t&&(_t={}),C(_t,At)||G(_t,At,function(){return this});var Dt={IteratorPrototype:_t,BUGGY_SAFARI_ITERATORS:Ot},Nt=P.f,Lt=be(\"toStringTag\"),Rt=function(e,t,n){e&&!C(e=n?e:e.prototype,Lt)&&Nt(e,Lt,{configurable:1,value:t})},Pt=Dt.IteratorPrototype,Gt=function(){return this},kt=function(e,t,n){var r=t+\" Iterator\";return e.prototype=dt(Pt,{next:h(1,n)}),Rt(e,r,0),Ye[r]=Gt,e},wt=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=0,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(n,[]),t=n instanceof Array}catch(Jg){}return function(n,r){return L(n),function(e){if(!E(e)&&null!==e)throw TypeError(\"Can't set \"+String(e)+\" as a prototype\")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),bt=Dt.IteratorPrototype,Ut=Dt.BUGGY_SAFARI_ITERATORS,Ft=be(\"iterator\"),xt=function(){return this},qt=function(e,t,n,r,o,i,a){kt(n,t,r);var s,u,c,l=function(e){if(e===o&&d)return d;if(!Ut&&e in h)return h[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new n(this,e)}}return function(){return new n(this)}},p=t+\" Iterator\",f=0,h=e.prototype,g=h[Ft]||h[\"@@iterator\"]||o&&h[o],d=!Ut&&g||l(o),m=\"Array\"==t&&h.entries||g;if(m&&(s=Mt(m.call(new e)),bt!==Object.prototype&&s.next&&(Mt(s)!==bt&&(wt?wt(s,bt):\"function\"!=typeof s[Ft]&&G(s,Ft,xt)),Rt(s,p,1))),\"values\"==o&&g&&\"values\"!==g.name&&(f=1,d=function(){return g.call(this)}),h[Ft]!==d&&G(h,Ft,d),Ye[t]=d,o)if(u={values:l(\"values\"),keys:i?d:l(\"keys\"),entries:l(\"entries\")},a)for(c in u)!Ut&&!f&&c in h||Z(h,c,u[c]);else De({target:t,proto:1,forced:Ut||f},u);return u},Vt=It.charAt,Bt=Q.set,jt=Q.getterFor(\"String Iterator\");qt(String,\"String\",function(e){Bt(this,{type:\"String Iterator\",string:String(e),index:0})},function(){var e,t=jt(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:1}:(e=Vt(n,r),t.index+=e.length,{value:e,done:0})});var Ht={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Kt in Ht){var Yt=s[Kt],zt=Yt&&Yt.prototype;if(zt&&zt.forEach!==He)try{G(zt,\"forEach\",He)}catch(Jg){zt.forEach=He}}var Wt={SDK_READY:\"sdkStateReady\",SDK_NOT_READY:\"sdkStateNotReady\",SDK_DESTROY:\"sdkDestroy\",MESSAGE_SENDING:\"onMessageSending\",MESSAGE_SEND_SUCCESS:\"onMessageSendSuccess\",MESSAGE_SEND_FAIL:\"onMessageSendFail\",MESSAGE_RECEIVED:\"onMessageReceived\",APPLY_ADD_FRIEND_SUCCESS:\"addFriendApplySendSuccess\",APPLY_ADD_FRIEND_FAIL:\"addFriendApplySendFail\",GET_PENDENCY_SUCCESS:\"getPendencySuccess\",GET_PENDENCY_FAIL:\"getPendencyFail\",DELETE_PENDENCY_SUCCESS:\"deletePendencySuccess\",DELETE_PENDENCY_FAIL:\"deletePendencyFail\",REPLY_PENDENCY_SUCCESS:\"replyPendencySuccess\",REPLY_PENDENCY_FAIL:\"replyPendencyFail\",CONVERSATION_LIST_UPDATED:\"onConversationListUpdated\",GROUP_LIST_UPDATED:\"onGroupListUpdated\",GROUP_SYSTEM_NOTICE_RECEIVED:\"receiveGroupSystemNotice\",LOGIN_CHANGE:\"loginStatusChange\",LOGOUT_SUCCESS:\"logoutSuccess\",PROFILE_GET_SUCCESS:\"getProfileSuccess\",PROFILE_GET_FAIL:\"getProfileFail\",PROFILE_UPDATED:\"onProfileUpdated\",PROFILE_UPDATE_MY_PROFILE_FAIL:\"updateMyProfileFail\",FRIENDLIST_GET_SUCCESS:\"getFriendListSuccess\",FRIENDLIST_GET_FAIL:\"getFriendsFail\",FRIEND_DELETE_SUCCESS:\"deleteFriendSuccess\",FRIEND_DELETE_FAIL:\"deleteFriendFail\",BLACKLIST_ADD_SUCCESS:\"addBlacklistSuccess\",BLACKLIST_ADD_FAIL:\"addBlacklistFail\",BLACKLIST_GET_SUCCESS:\"getBlacklistSuccess\",BLACKLIST_GET_FAIL:\"getBlacklistFail\",BLACKLIST_UPDATED:\"blacklistUpdated\",BLACKLIST_DELETE_FAIL:\"deleteBlacklistFail\",KICKED_OUT:\"kickedOut\",ERROR:\"error\"},Xt={MSG_TEXT:\"TIMTextElem\",MSG_IMAGE:\"TIMImageElem\",MSG_SOUND:\"TIMSoundElem\",MSG_AUDIO:\"TIMSoundElem\",MSG_FILE:\"TIMFileElem\",MSG_FACE:\"TIMFaceElem\",MSG_VIDEO:\"TIMVideoFileElem\",MSG_GEO:\"TIMLocationElem\",MSG_GRP_TIP:\"TIMGroupTipElem\",MSG_GRP_SYS_NOTICE:\"TIMGroupSystemNoticeElem\",MSG_CUSTOM:\"TIMCustomElem\",CONV_C2C:\"C2C\",CONV_GROUP:\"GROUP\",CONV_SYSTEM:\"@TIM#SYSTEM\",GRP_PRIVATE:\"Private\",GRP_PUBLIC:\"Public\",GRP_CHATROOM:\"ChatRoom\",GRP_AVCHATROOM:\"AVChatRoom\",GRP_MBR_ROLE_OWNER:\"Owner\",GRP_MBR_ROLE_ADMIN:\"Admin\",GRP_MBR_ROLE_MEMBER:\"Member\",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:\"AcceptAndNotify\",MSG_REMIND_ACPT_NOT_NOTE:\"AcceptNotNotify\",MSG_REMIND_DISCARD:\"Discard\",GENDER_UNKNOWN:\"Gender_Type_Unknown\",GENDER_FEMALE:\"Gender_Type_Female\",GENDER_MALE:\"Gender_Type_Male\",KICKED_OUT_MULT_ACCOUNT:\"mutipleAccount\",KICKED_OUT_MULT_DEVICE:\"mutipleDevice\",ALLOW_TYPE_ALLOW_ANY:\"AllowType_Type_AllowAny\",ALLOW_TYPE_NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_TYPE_DENY_ANY:\"AllowType_Type_DenyAny\",FORBID_TYPE_NONE:\"AdminForbid_Type_None\",FORBID_TYPE_SEND_OUT:\"AdminForbid_Type_SendOut\",JOIN_OPTIONS_FREE_ACCESS:\"FreeAccess\",JOIN_OPTIONS_NEED_PERMISSION:\"NeedPermission\",JOIN_OPTIONS_DISABLE_APPLY:\"DisableApply\",JOIN_STATUS_SUCCESS:\"JoinedSuccess\",JOIN_STATUS_ALREADY_IN_GROUP:\"AlreadyInGroup\",JOIN_STATUS_WAIT_APPROVAL:\"WaitAdminApproval\",GRP_PROFILE_OWNER_ID:\"ownerID\",GRP_PROFILE_CREATE_TIME:\"createTime\",GRP_PROFILE_LAST_INFO_TIME:\"lastInfoTime\",GRP_PROFILE_MEMBER_NUM:\"memberNum\",GRP_PROFILE_MAX_MEMBER_NUM:\"maxMemberNum\",GRP_PROFILE_JOIN_OPTION:\"joinOption\",GRP_PROFILE_INTRODUCTION:\"introduction\",GRP_PROFILE_NOTIFICATION:\"notification\"},Jt=be(\"species\"),Qt=function(e){return!u(function(){var t=[];return(t.constructor={})[Jt]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Zt=Ve.map;De({target:\"Array\",proto:1,forced:!Qt(\"map\")},{map:function(e){return Zt(this,e,arguments.length>1?arguments[1]:void 0)}});var $t=[].slice,en={},tn=function(e,t,n){if(!(t in en)){for(var r=[],o=0;o<t;o++)r[o]=\"a[\"+o+\"]\";en[t]=Function(\"C,a\",\"return new C(\"+r.join(\",\")+\")\")}return en[t](e,n)},nn=Function.bind||function(e){var t=Ne(this),n=$t.call(arguments,1),r=function(){var o=n.concat($t.call(arguments));return this instanceof r?tn(t,o.length,o):t.apply(e,o)};return E(t.prototype)&&(r.prototype=t.prototype),r};function rn(e){return(rn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function on(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||0,r.configurable=1,\"value\"in r&&(r.writable=1),Object.defineProperty(e,r.key,r)}}function sn(e,t,n){return t&&an(e.prototype,t),n&&an(e,n),e}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(n,1).forEach(function(t){un(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pn(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:1,configurable:1}}),t&&hn(e,t)}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(e,t,n){return(gn=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return 0;if(Reflect.construct.sham)return 0;if(\"function\"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return 0}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&hn(o,n.prototype),o}).apply(null,arguments)}function dn(e){var t=\"function\"==typeof Map?new Map:void 0;return(dn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return gn(e,arguments,fn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:0,writable:1,configurable:1}}),hn(r,e)})(e)}function mn(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _n(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?mn(e):t}function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=1,o=0,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=1);}catch(u){o=1,i=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function yn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}De({target:\"Function\",proto:1},{bind:nn});var En=function(){function e(){on(this,e),this.cache=[],this.options=null}return sn(e,[{key:\"use\",value:function(e){if(\"function\"!=typeof e)throw\"middleware must be a function\";return this.cache.push(e),this}},{key:\"next\",value:function(e){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:\"run\",value:function(e){return this.middlewares=this.cache.map(function(e){return e}),this.options=e,this.next()}}]),e}(),In=be(\"isConcatSpreadable\"),Sn=!u(function(){var e=[];return e[In]=0,e.concat()[0]!==e}),Cn=Qt(\"concat\"),Tn=function(e){if(!E(e))return 0;var t=e[In];return void 0!==t?!!t:Pe(e)};De({target:\"Array\",proto:1,forced:!Sn||!Cn},{concat:function(e){var t,n,r,o,i,a=Re(this),s=Fe(a,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],Tn(i)){if(u+(o=ae(i.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(n=0;n<o;n++,u++)n in i&&Je(s,u,i[n])}else{if(u>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");Je(s,u++,i)}return s.length=u,s}});var Mn=P.f,An=Function.prototype,On=An.toString,Dn=/^\\s*function ([^ (]*)/;!c||\"name\"in An||Mn(An,\"name\",{configurable:1,get:function(){try{return On.call(this).match(Dn)[1]}catch(Jg){return\"\"}}});var Nn=t(function(t,n){var r,o,i,a,s,u,c,l,p,f,h,g,d,m,_,v,y,E,I,S;t.exports=(r=\"function\"==typeof Promise,o=\"object\"==typeof self?self:e,i=\"undefined\"!=typeof Symbol,a=\"undefined\"!=typeof Map,s=\"undefined\"!=typeof Set,u=\"undefined\"!=typeof WeakMap,c=\"undefined\"!=typeof WeakSet,l=\"undefined\"!=typeof DataView,p=i&&void 0!==Symbol.iterator,f=i&&void 0!==Symbol.toStringTag,h=s&&\"function\"==typeof Set.prototype.entries,g=a&&\"function\"==typeof Map.prototype.entries,d=h&&Object.getPrototypeOf((new Set).entries()),m=g&&Object.getPrototypeOf((new Map).entries()),_=p&&\"function\"==typeof Array.prototype[Symbol.iterator],v=_&&Object.getPrototypeOf([][Symbol.iterator]()),y=p&&\"function\"==typeof String.prototype[Symbol.iterator],E=y&&Object.getPrototypeOf(\"\"[Symbol.iterator]()),I=8,S=-1,function(e){var t=typeof e;if(\"object\"!==t)return t;if(null===e)return\"null\";if(e===o)return\"global\";if(Array.isArray(e)&&(0==f||!(Symbol.toStringTag in e)))return\"Array\";if(\"object\"==typeof window&&null!==window){if(\"object\"==typeof window.location&&e===window.location)return\"Location\";if(\"object\"==typeof window.document&&e===window.document)return\"Document\";if(\"object\"==typeof window.navigator){if(\"object\"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return\"MimeTypeArray\";if(\"object\"==typeof window.navigator.plugins&&e===window.navigator.plugins)return\"PluginArray\"}if((\"function\"==typeof window.HTMLElement||\"object\"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if(\"BLOCKQUOTE\"===e.tagName)return\"HTMLQuoteElement\";if(\"TD\"===e.tagName)return\"HTMLTableDataCellElement\";if(\"TH\"===e.tagName)return\"HTMLTableHeaderCellElement\"}}var n=f&&e[Symbol.toStringTag];if(\"string\"==typeof n)return n;var i=Object.getPrototypeOf(e);return i===RegExp.prototype?\"RegExp\":i===Date.prototype?\"Date\":r&&i===Promise.prototype?\"Promise\":s&&i===Set.prototype?\"Set\":a&&i===Map.prototype?\"Map\":c&&i===WeakSet.prototype?\"WeakSet\":u&&i===WeakMap.prototype?\"WeakMap\":l&&i===DataView.prototype?\"DataView\":a&&i===m?\"Map Iterator\":s&&i===d?\"Set Iterator\":_&&i===v?\"Array Iterator\":y&&i===E?\"String Iterator\":null===i?\"Object\":Object.prototype.toString.call(e).slice(I,S)})});De({target:\"Array\",stat:1},{isArray:Pe});var Ln=me.f,Rn={}.toString,Pn=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gn={f:function(e){return Pn&&\"[object Window]\"==Rn.call(e)?function(e){try{return Ln(e)}catch(Jg){return Pn.slice()}}(e):Ln(y(e))}},kn={f:be},wn=P.f,bn=function(e){var t=$.Symbol||($.Symbol={});C(t,e)||wn(t,e,{value:kn.f(e)})},Un=Ve.forEach,Fn=j(\"hidden\"),xn=be(\"toPrimitive\"),qn=Q.set,Vn=Q.getterFor(\"Symbol\"),Bn=Object.prototype,jn=s.Symbol,Hn=s.JSON,Kn=Hn&&Hn.stringify,Yn=N.f,zn=P.f,Wn=Gn.f,Xn=f.f,Jn=w(\"symbols\"),Qn=w(\"op-symbols\"),Zn=w(\"string-to-symbol-registry\"),$n=w(\"symbol-to-string-registry\"),er=w(\"wks\"),tr=s.QObject,nr=!tr||!tr.prototype||!tr.prototype.findChild,rr=c&&u(function(){return 7!=dt(zn({},\"a\",{get:function(){return zn(this,\"a\",{value:7}).a}})).a})?function(e,t,n){var r=Yn(Bn,t);r&&delete Bn[t],zn(e,t,n),r&&e!==Bn&&zn(Bn,t,r)}:zn,or=function(e,t){var n=Jn[e]=dt(jn.prototype);return qn(n,{type:\"Symbol\",tag:e,description:t}),c||(n.description=t),n},ir=Ge&&\"symbol\"==typeof jn.iterator?function(e){return\"symbol\"==typeof e}:function(e){return Object(e)instanceof jn},ar=function(e,t,n){e===Bn&&ar(Qn,t,n),L(e);var r=I(t,1);return L(n),C(Jn,r)?(n.enumerable?(C(e,Fn)&&e[Fn][r]&&(e[Fn][r]=0),n=dt(n,{enumerable:h(0,0)})):(C(e,Fn)||zn(e,Fn,h(1,{})),e[Fn][r]=1),rr(e,r,n)):zn(e,r,n)},sr=function(e,t){L(e);var n=y(t),r=ct(n).concat(pr(n));return Un(r,function(t){c&&!ur.call(n,t)||ar(e,t,n[t])}),e},ur=function(e){var t=I(e,1),n=Xn.call(this,t);return this===Bn&&C(Jn,t)&&!C(Qn,t)?0:n||!C(this,t)||!C(Jn,t)||C(this,Fn)&&this[Fn][t]?n:1},cr=function(e,t){var n=y(e),r=I(t,1);if(n!==Bn||!C(Jn,r)||C(Qn,r)){var o=Yn(n,r);return!o||!C(Jn,r)||C(n,Fn)&&n[Fn][r]||(o.enumerable=1),o}},lr=function(e){var t=Wn(y(e)),n=[];return Un(t,function(e){C(Jn,e)||C(H,e)||n.push(e)}),n},pr=function(e){var t=e===Bn,n=Wn(t?Qn:y(e)),r=[];return Un(n,function(e){!C(Jn,e)||t&&!C(Bn,e)||r.push(Jn[e])}),r};Ge||(Z((jn=function(){if(this instanceof jn)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=V(e),n=function(e){this===Bn&&n.call(Qn,e),C(this,Fn)&&C(this[Fn],t)&&(this[Fn][t]=0),rr(this,t,h(1,e))};return c&&nr&&rr(Bn,t,{configurable:1,set:n}),or(t,e)}).prototype,\"toString\",function(){return Vn(this).tag}),f.f=ur,P.f=ar,N.f=cr,me.f=Gn.f=lr,_e.f=pr,c&&(zn(jn.prototype,\"description\",{configurable:1,get:function(){return Vn(this).description}}),Z(Bn,\"propertyIsEnumerable\",ur,{unsafe:1})),kn.f=function(e){return or(be(e),e)}),De({global:1,wrap:1,forced:!Ge,sham:!Ge},{Symbol:jn}),Un(ct(er),function(e){bn(e)}),De({target:\"Symbol\",stat:1,forced:!Ge},{for:function(e){var t=String(e);if(C(Zn,t))return Zn[t];var n=jn(t);return Zn[t]=n,$n[n]=t,n},keyFor:function(e){if(!ir(e))throw TypeError(e+\" is not a symbol\");if(C($n,e))return $n[e]},useSetter:function(){nr=1},useSimple:function(){nr=0}}),De({target:\"Object\",stat:1,forced:!Ge,sham:!c},{create:function(e,t){return void 0===t?dt(e):sr(dt(e),t)},defineProperty:ar,defineProperties:sr,getOwnPropertyDescriptor:cr}),De({target:\"Object\",stat:1,forced:!Ge},{getOwnPropertyNames:lr,getOwnPropertySymbols:pr}),De({target:\"Object\",stat:1,forced:u(function(){_e.f(1)})},{getOwnPropertySymbols:function(e){return _e.f(Re(e))}}),Hn&&De({target:\"JSON\",stat:1,forced:!Ge||u(function(){var e=jn();return\"[null]\"!=Kn([e])||\"{}\"!=Kn({a:e})||\"{}\"!=Kn(Object(e))})},{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(E(t)||void 0!==e)&&!ir(e))return Pe(t)||(t=function(e,t){if(\"function\"==typeof n&&(t=n.call(this,e,t)),!ir(t))return t}),r[1]=t,Kn.apply(Hn,r)}}),jn.prototype[xn]||G(jn.prototype,xn,jn.prototype.valueOf),Rt(jn,\"Symbol\"),H[Fn]=1;var fr=P.f,hr=s.Symbol;if(c&&\"function\"==typeof hr&&(!(\"description\"in hr.prototype)||void 0!==hr().description)){var gr={},dr=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof dr?new hr(e):void 0===e?hr():hr(e);return\"\"===e&&(gr[t]=1),t};ye(dr,hr);var mr=dr.prototype=hr.prototype;mr.constructor=dr;var _r=mr.toString,vr=\"Symbol(test)\"==String(hr(\"test\")),yr=/^Symbol\\((.*)\\)[^)]+$/;fr(mr,\"description\",{configurable:1,get:function(){var e=E(this)?this.valueOf():this,t=_r.call(e);if(C(gr,e))return\"\";var n=vr?t.slice(7,-1):t.replace(yr,\"$1\");return\"\"===n?void 0:n}}),De({global:1,forced:1},{Symbol:dr})}bn(\"iterator\");var Er=be(\"unscopables\"),Ir=Array.prototype;null==Ir[Er]&&G(Ir,Er,dt(null));var Sr=function(e){Ir[Er][e]=1},Cr=pe.includes;De({target:\"Array\",proto:1},{includes:function(e){return Cr(this,e,arguments.length>1?arguments[1]:void 0)}}),Sr(\"includes\");var Tr=pe.indexOf,Mr=[].indexOf,Ar=!!Mr&&1/[1].indexOf(1,-0)<0,Or=Be(\"indexOf\");De({target:\"Array\",proto:1,forced:Ar||Or},{indexOf:function(e){return Ar?Mr.apply(this,arguments)||0:Tr(this,e,arguments.length>1?arguments[1]:void 0)}});var Dr=Q.set,Nr=Q.getterFor(\"Array Iterator\"),Lr=qt(Array,\"Array\",function(e,t){Dr(this,{type:\"Array Iterator\",target:y(e),index:0,kind:t})},function(){var e=Nr(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:1}):\"keys\"==n?{value:r,done:0}:\"values\"==n?{value:t[r],done:0}:{value:[r,t[r]],done:0}},\"values\");Ye.Arguments=Ye.Array,Sr(\"keys\"),Sr(\"values\"),Sr(\"entries\");var Rr=[].join,Pr=_!=Object,Gr=Be(\"join\",\",\");De({target:\"Array\",proto:1,forced:Pr||Gr},{join:function(e){return Rr.call(y(this),void 0===e?\",\":e)}});var kr=be(\"species\"),wr=[].slice,br=Math.max;De({target:\"Array\",proto:1,forced:!Qt(\"slice\")},{slice:function(e,t){var n,r,o,i=y(this),a=ae(i.length),s=ce(e,a),u=ce(void 0===t?a:t,a);if(Pe(i)&&(\"function\"!=typeof(n=i.constructor)||n!==Array&&!Pe(n.prototype)?E(n)&&null===(n=n[kr])&&(n=void 0):n=void 0,n===Array||void 0===n))return wr.call(i,s,u);for(r=new(void 0===n?Array:n)(br(u-s,0)),o=0;s<u;s++,o++)s in i&&Je(r,o,i[s]);return r.length=o,r}}),De({target:\"Date\",stat:1},{now:function(){return(new Date).getTime()}});var Ur=Date.prototype,Fr=Ur.toString,xr=Ur.getTime;new Date(NaN)+\"\"!=\"Invalid Date\"&&Z(Ur,\"toString\",function(){var e=xr.call(this);return e==e?Fr.call(this):\"Invalid Date\"});var qr=function(e,t,n){var r,o;return wt&&\"function\"==typeof(r=t.constructor)&&r!==n&&E(o=r.prototype)&&o!==n.prototype&&wt(e,o),e},Vr=\"\\t\\n\\v\\f\\r                　\\u2028\\u2029\\ufeff\",Br=\"[\"+Vr+\"]\",jr=RegExp(\"^\"+Br+Br+\"*\"),Hr=RegExp(Br+Br+\"*$\"),Kr=function(e){return function(t){var n=String(v(t));return 1&e&&(n=n.replace(jr,\"\")),2&e&&(n=n.replace(Hr,\"\")),n}},Yr={start:Kr(1),end:Kr(2),trim:Kr(3)},zr=me.f,Wr=N.f,Xr=P.f,Jr=Yr.trim,Qr=s.Number,Zr=Qr.prototype,$r=\"Number\"==d(dt(Zr)),eo=function(e){var t,n,r,o,i,a,s,u,c=I(e,0);if(\"string\"==typeof c&&c.length>2)if(43===(t=(c=Jr(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(a=(i=c.slice(2)).length,s=0;s<a;s++)if((u=i.charCodeAt(s))<48||u>o)return NaN;return parseInt(i,r)}return+c};if(Ae(\"Number\",!Qr(\" 0o1\")||!Qr(\"0b1\")||Qr(\"+0x1\"))){for(var to,no=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof no&&($r?u(function(){Zr.valueOf.call(n)}):\"Number\"!=d(n))?qr(new Qr(eo(t)),n,no):eo(t)},ro=c?zr(Qr):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),oo=0;ro.length>oo;oo++)C(Qr,to=ro[oo])&&!C(no,to)&&Xr(no,to,Wr(Qr,to));no.prototype=Zr,Zr.constructor=no,Z(s,\"Number\",no)}var io=Gn.f,ao=u(function(){return!Object.getOwnPropertyNames(1)});De({target:\"Object\",stat:1,forced:ao},{getOwnPropertyNames:io});var so=u(function(){Mt(1)});De({target:\"Object\",stat:1,forced:so,sham:!St},{getPrototypeOf:function(e){return Mt(Re(e))}});var uo={};uo[be(\"toStringTag\")]=\"z\";var co=\"[object z]\"!==String(uo)?function(){return\"[object \"+$e(this)+\"]\"}:uo.toString,lo=Object.prototype;co!==lo.toString&&Z(lo,\"toString\",co,{unsafe:1});var po=Yr.trim,fo=s.parseInt,ho=/^[+-]?0[Xx]/,go=8!==fo(Vr+\"08\")||22!==fo(Vr+\"0x16\")?function(e,t){var n=po(String(e));return fo(n,t>>>0||(ho.test(n)?16:10))}:fo;De({global:1,forced:parseInt!=go},{parseInt:go});var mo,_o,vo,yo=s.Promise,Eo=function(e,t,n){for(var r in t)Z(e,r,t[r],n);return e},Io=be(\"species\"),So=function(e){var t=te(e),n=P.f;c&&t&&!t[Io]&&n(t,Io,{configurable:1,get:function(){return this}})},Co=function(e,t,n){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(n?n+\" \":\"\")+\"invocation\");return e},To=t(function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,o,i){var a,s,u,c,l,p,f=Le(n,r,o?2:1);if(i)a=e;else{if(\"function\"!=typeof(s=tt(e)))throw TypeError(\"Target is not iterable\");if(Xe(s)){for(u=0,c=ae(e.length);c>u;u++)if((l=o?f(L(p=e[u])[0],p[1]):f(e[u]))&&l instanceof t)return l;return new t(0)}a=s.call(e)}for(;!(p=a.next()).done;)if((l=Ke(a,f,p.value,o))&&l instanceof t)return l;return new t(0)}).stop=function(e){return new t(1,e)}}),Mo=be(\"species\"),Ao=function(e,t){var n,r=L(e).constructor;return void 0===r||null==(n=L(r)[Mo])?t:Ne(n)},Oo=s.location,Do=s.setImmediate,No=s.clearImmediate,Lo=s.process,Ro=s.MessageChannel,Po=s.Dispatch,Go=0,ko={},wo=function(e){if(ko.hasOwnProperty(e)){var t=ko[e];delete ko[e],t()}},bo=function(e){return function(){wo(e)}},Uo=function(e){wo(e.data)},Fo=function(e){s.postMessage(e+\"\",Oo.protocol+\"//\"+Oo.host)};Do&&No||(Do=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ko[++Go]=function(){(\"function\"==typeof e?e:Function(e)).apply(void 0,t)},mo(Go),Go},No=function(e){delete ko[e]},\"process\"==d(Lo)?mo=function(e){Lo.nextTick(bo(e))}:Po&&Po.now?mo=function(e){Po.now(bo(e))}:Ro?(vo=(_o=new Ro).port2,_o.port1.onmessage=Uo,mo=Le(vo.postMessage,vo,1)):!s.addEventListener||\"function\"!=typeof postMessage||s.importScripts||u(Fo)?mo=\"onreadystatechange\"in A(\"script\")?function(e){pt.appendChild(A(\"script\")).onreadystatechange=function(){pt.removeChild(this),wo(e)}}:function(e){setTimeout(bo(e),0)}:(mo=Fo,s.addEventListener(\"message\",Uo,0)));var xo,qo,Vo,Bo,jo,Ho,Ko,Yo,zo={set:Do,clear:No},Wo=te(\"navigator\",\"userAgent\")||\"\",Xo=N.f,Jo=zo.set,Qo=s.MutationObserver||s.WebKitMutationObserver,Zo=s.process,$o=s.Promise,ei=\"process\"==d(Zo),ti=Xo(s,\"queueMicrotask\"),ni=ti&&ti.value;ni||(xo=function(){var e,t;for(ei&&(e=Zo.domain)&&e.exit();qo;){t=qo.fn,qo=qo.next;try{t()}catch(Jg){throw qo?Bo():Vo=void 0,Jg}}Vo=void 0,e&&e.enter()},ei?Bo=function(){Zo.nextTick(xo)}:Qo&&!/(iphone|ipod|ipad).*applewebkit/i.test(Wo)?(jo=1,Ho=document.createTextNode(\"\"),new Qo(xo).observe(Ho,{characterData:1}),Bo=function(){Ho.data=jo=!jo}):$o&&$o.resolve?(Ko=$o.resolve(void 0),Yo=Ko.then,Bo=function(){Yo.call(Ko,xo)}):Bo=function(){Jo.call(s,xo)});var ri,oi,ii,ai,si=ni||function(e){var t={fn:e,next:void 0};Vo&&(Vo.next=t),qo||(qo=t,Bo()),Vo=t},ui=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=r}),this.resolve=Ne(t),this.reject=Ne(n)},ci={f:function(e){return new ui(e)}},li=function(e,t){if(L(e),E(t)&&t.constructor===e)return t;var n=ci.f(e);return(0,n.resolve)(t),n.promise},pi=function(e){try{return{error:0,value:e()}}catch(Jg){return{error:1,value:Jg}}},fi=zo.set,hi=be(\"species\"),gi=\"Promise\",di=Q.get,mi=Q.set,_i=Q.getterFor(gi),vi=yo,yi=s.TypeError,Ei=s.document,Ii=s.process,Si=s.fetch,Ci=Ii&&Ii.versions,Ti=Ci&&Ci.v8||\"\",Mi=ci.f,Ai=Mi,Oi=\"process\"==d(Ii),Di=!!(Ei&&Ei.createEvent&&s.dispatchEvent),Ni=Ae(gi,function(){var e=vi.resolve(1),t=function(){},n=(e.constructor={})[hi]=function(e){e(t,t)};return!((Oi||\"function\"==typeof PromiseRejectionEvent)&&e.then(t)instanceof n&&0!==Ti.indexOf(\"6.6\")&&-1===Wo.indexOf(\"Chrome/66\"))}),Li=Ni||!st(function(e){vi.all(e).catch(function(){})}),Ri=function(e){var t;return E(e)&&\"function\"==typeof(t=e.then)?t:0},Pi=function(e,t,n){if(!t.notified){t.notified=1;var r=t.reactions;si(function(){for(var o=t.value,i=1==t.state,a=0;r.length>a;){var s,u,c,l=r[a++],p=i?l.ok:l.fail,f=l.resolve,h=l.reject,g=l.domain;try{p?(i||(2===t.rejection&&bi(e,t),t.rejection=1),1==p?s=o:(g&&g.enter(),s=p(o),g&&(g.exit(),c=1)),s===l.promise?h(yi(\"Promise-chain cycle\")):(u=Ri(s))?u.call(s,f,h):f(s)):h(o)}catch(Jg){g&&!c&&g.exit(),h(Jg)}}t.reactions=[],t.notified=0,n&&!t.rejection&&ki(e,t)})}},Gi=function(e,t,n){var r,o;Di?((r=Ei.createEvent(\"Event\")).promise=t,r.reason=n,r.initEvent(e,0,1),s.dispatchEvent(r)):r={promise:t,reason:n},(o=s[\"on\"+e])?o(r):\"unhandledrejection\"===e&&function(e,t){var n=s.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}(\"Unhandled promise rejection\",n)},ki=function(e,t){fi.call(s,function(){var n,r=t.value;if(wi(t)&&(n=pi(function(){Oi?Ii.emit(\"unhandledRejection\",r,e):Gi(\"unhandledrejection\",e,r)}),t.rejection=Oi||wi(t)?2:1,n.error))throw n.value})},wi=function(e){return 1!==e.rejection&&!e.parent},bi=function(e,t){fi.call(s,function(){Oi?Ii.emit(\"rejectionHandled\",e):Gi(\"rejectionhandled\",e,t.value)})},Ui=function(e,t,n,r){return function(o){e(t,n,o,r)}},Fi=function(e,t,n,r){t.done||(t.done=1,r&&(t=r),t.value=n,t.state=2,Pi(e,t,1))},xi=function(e,t,n,r){if(!t.done){t.done=1,r&&(t=r);try{if(e===n)throw yi(\"Promise can't be resolved itself\");var o=Ri(n);o?si(function(){var r={done:0};try{o.call(n,Ui(xi,e,r,t),Ui(Fi,e,r,t))}catch(Jg){Fi(e,r,Jg,t)}}):(t.value=n,t.state=1,Pi(e,t,0))}catch(Jg){Fi(e,{done:0},Jg,t)}}};Ni&&(vi=function(e){Co(this,vi,gi),Ne(e),ri.call(this);var t=di(this);try{e(Ui(xi,this,t),Ui(Fi,this,t))}catch(Jg){Fi(this,t,Jg)}},(ri=function(e){mi(this,{type:gi,done:0,notified:0,parent:0,reactions:[],rejection:0,state:0,value:void 0})}).prototype=Eo(vi.prototype,{then:function(e,t){var n=_i(this),r=Mi(Ao(this,vi));return r.ok=\"function\"==typeof e?e:1,r.fail=\"function\"==typeof t&&t,r.domain=Oi?Ii.domain:void 0,n.parent=1,n.reactions.push(r),0!=n.state&&Pi(this,n,0),r.promise},catch:function(e){return this.then(void 0,e)}}),oi=function(){var e=new ri,t=di(e);this.promise=e,this.resolve=Ui(xi,e,t),this.reject=Ui(Fi,e,t)},ci.f=Mi=function(e){return e===vi||e===ii?new oi(e):Ai(e)},\"function\"==typeof yo&&(ai=yo.prototype.then,Z(yo.prototype,\"then\",function(e,t){var n=this;return new vi(function(e,t){ai.call(n,e,t)}).then(e,t)}),\"function\"==typeof Si&&De({global:1,enumerable:1,forced:1},{fetch:function(e){return li(vi,Si.apply(s,arguments))}}))),De({global:1,wrap:1,forced:Ni},{Promise:vi}),Rt(vi,gi,0),So(gi),ii=$.Promise,De({target:gi,stat:1,forced:Ni},{reject:function(e){var t=Mi(this);return t.reject.call(void 0,e),t.promise}}),De({target:gi,stat:1,forced:Ni},{resolve:function(e){return li(this,e)}}),De({target:gi,stat:1,forced:Li},{all:function(e){var t=this,n=Mi(t),r=n.resolve,o=n.reject,i=pi(function(){var n=Ne(t.resolve),i=[],a=0,s=1;To(e,function(e){var u=a++,c=0;i.push(void 0),s++,n.call(t,e).then(function(e){c||(c=1,i[u]=e,--s||r(i))},o)}),--s||r(i)});return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Mi(t),r=n.reject,o=pi(function(){var o=Ne(t.resolve);To(e,function(e){o.call(t,e).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}});var qi,Vi,Bi=function(){var e=L(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t},ji=RegExp.prototype.exec,Hi=String.prototype.replace,Ki=ji,Yi=(qi=/a/,Vi=/b*/g,ji.call(qi,\"a\"),ji.call(Vi,\"a\"),0!==qi.lastIndex||0!==Vi.lastIndex),zi=void 0!==/()??/.exec(\"\")[1];(Yi||zi)&&(Ki=function(e){var t,n,r,o,i=this;return zi&&(n=new RegExp(\"^\"+i.source+\"$(?!\\\\s)\",Bi.call(i))),Yi&&(t=i.lastIndex),r=ji.call(i,e),Yi&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),zi&&r&&r.length>1&&Hi.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var Wi=Ki;De({target:\"RegExp\",proto:1,forced:/./.exec!==Wi},{exec:Wi});var Xi=RegExp.prototype,Ji=Xi.toString,Qi=u(function(){return\"/a/b\"!=Ji.call({source:\"a\",flags:\"b\"})}),Zi=\"toString\"!=Ji.name;(Qi||Zi)&&Z(RegExp.prototype,\"toString\",function(){var e=L(this),t=String(e.source),n=e.flags;return\"/\"+t+\"/\"+String(void 0===n&&e instanceof RegExp&&!(\"flags\"in Xi)?Bi.call(e):n)},{unsafe:1});var $i=be(\"match\"),ea=function(e){var t;return E(e)&&(void 0!==(t=e[$i])?!!t:\"RegExp\"==d(e))},ta=function(e){if(ea(e))throw TypeError(\"The method doesn't accept regular expressions\");return e},na=be(\"match\");De({target:\"String\",proto:1,forced:!function(e){var t=/./;try{\"/./\"[e](t)}catch(n){try{return t[na]=0,\"/./\"[e](t)}catch(r){}}return 0}(\"includes\")},{includes:function(e){return!!~String(v(this)).indexOf(ta(e),arguments.length>1?arguments[1]:void 0)}});var ra=be(\"species\"),oa=!u(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")}),ia=!u(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n=\"ab\".split(e);return 2!==n.length||\"a\"!==n[0]||\"b\"!==n[1]}),aa=function(e,t,n,r){var o=be(e),i=!u(function(){var t={};return t[o]=function(){return 7},7!=\"\"[e](t)}),a=i&&!u(function(){var t=0,n=/a/;return n.exec=function(){return t=1,null},\"split\"===e&&(n.constructor={},n.constructor[ra]=function(){return n}),n[o](\"\"),!t});if(!i||!a||\"replace\"===e&&!oa||\"split\"===e&&!ia){var s=/./[o],c=n(o,\"\"[e],function(e,t,n,r,o){return t.exec===Wi?i&&!o?{done:1,value:s.call(t,n,r)}:{done:1,value:e.call(n,t,r)}:{done:0}}),l=c[0],p=c[1];Z(String.prototype,e,l),Z(RegExp.prototype,o,2==t?function(e,t){return p.call(e,this,t)}:function(e){return p.call(e,this)}),r&&G(RegExp.prototype[o],\"sham\",1)}},sa=It.charAt,ua=function(e,t,n){return t+(n?sa(e,t).length:1)},ca=function(e,t){var n=e.exec;if(\"function\"==typeof n){var r=n.call(e,t);if(\"object\"!=typeof r)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return r}if(\"RegExp\"!==d(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return Wi.call(e,t)};aa(\"match\",1,function(e,t,n){return[function(t){var n=v(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=L(e),i=String(this);if(!o.global)return ca(o,i);var a=o.unicode;o.lastIndex=0;for(var s,u=[],c=0;null!==(s=ca(o,i));){var l=String(s[0]);u[c]=l,\"\"===l&&(o.lastIndex=ua(i,ae(o.lastIndex),a)),c++}return 0===c?null:u}]});var la=Math.max,pa=Math.min,fa=Math.floor,ha=/\\$([$&'`]|\\d\\d?|<[^>]*>)/g,ga=/\\$([$&'`]|\\d\\d?)/g;aa(\"replace\",2,function(e,t,n){return[function(n,r){var o=v(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,o){var i=n(t,e,this,o);if(i.done)return i.value;var a=L(e),s=String(this),u=\"function\"==typeof o;u||(o=String(o));var c=a.global;if(c){var l=a.unicode;a.lastIndex=0}for(var p=[];;){var f=ca(a,s);if(null===f)break;if(p.push(f),!c)break;\"\"===String(f[0])&&(a.lastIndex=ua(s,ae(a.lastIndex),l))}for(var h,g=\"\",d=0,m=0;m<p.length;m++){f=p[m];for(var _=String(f[0]),v=la(pa(oe(f.index),s.length),0),y=[],E=1;E<f.length;E++)y.push(void 0===(h=f[E])?h:String(h));var I=f.groups;if(u){var S=[_].concat(y,v,s);void 0!==I&&S.push(I);var C=String(o.apply(void 0,S))}else C=r(_,s,v,y,I,o);v>=d&&(g+=s.slice(d,v)+C,d=v+_.length)}return g+s.slice(d)}];function r(e,n,r,o,i,a){var s=r+e.length,u=o.length,c=ga;return void 0!==i&&(i=Re(i),c=ha),t.call(a,c,function(t,a){var c;switch(a.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return n.slice(0,r);case\"'\":return n.slice(s);case\"<\":c=i[a.slice(1,-1)];break;default:var l=+a;if(0===l)return t;if(l>u){var p=fa(l/10);return 0===p?t:p<=u?void 0===o[p-1]?a.charAt(1):o[p-1]+a.charAt(1):t}c=o[l-1]}return void 0===c?\"\":c})}});var da=be(\"iterator\"),ma=be(\"toStringTag\"),_a=Lr.values;for(var va in Ht){var ya=s[va],Ea=ya&&ya.prototype;if(Ea){if(Ea[da]!==_a)try{G(Ea,da,_a)}catch(Jg){Ea[da]=_a}if(Ea[ma]||G(Ea,ma,va),Ht[va])for(var Ia in Lr)if(Ea[Ia]!==Lr[Ia])try{G(Ea,Ia,Lr[Ia])}catch(Jg){Ea[Ia]=Lr[Ia]}}}var Sa=Yr.trim,Ca=s.parseFloat,Ta=1/Ca(Vr+\"-0\")!=-Infinity?function(e){var t=Sa(String(e)),n=Ca(t);return 0===n&&\"-\"==t.charAt(0)?-0:n}:Ca;De({global:1,forced:parseFloat!=Ta},{parseFloat:Ta});var Ma,Aa=\"undefined\"!=typeof window,Oa=\"undefined\"!=typeof wx&&\"function\"==typeof wx.getSystemInfoSync&&\"function\"==typeof wx.canIUse,Da=Aa&&window.navigator&&window.navigator.userAgent||\"\",Na=/AppleWebKit\\/([\\d.]+)/i.exec(Da),La=(Na&&parseFloat(Na.pop()),/iPad/i.test(Da)),Ra=(/iPhone/i.test(Da),/iPod/i.test(Da),(Ma=Da.match(/OS (\\d+)_/i))&&Ma[1]&&Ma[1],/Android/i.test(Da)),Pa=function(){var e=Da.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+\".\"+e[2]):t||null}(),Ga=(Ra&&/webkit/i.test(Da),/Firefox/i.test(Da),/Edge/i.test(Da)),ka=!Ga&&/Chrome/i.test(Da),wa=(function(){var e=Da.match(/Chrome\\/(\\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE/.test(Da)),ba=(/MSIE\\s8\\.0/.test(Da),function(){var e=/MSIE\\s(\\d+)\\.\\d/.exec(Da),t=e&&parseFloat(e[1]);return!t&&/Trident\\/7.0/i.test(Da)&&/rv:11.0/.test(Da)&&(t=11),t}()),Ua=(/Safari/i.test(Da),/TBS\\/\\d+/i.test(Da)),Fa=(function(){var e=Da.match(/TBS\\/(\\d+)/i);if(e&&e[1])e[1]}(),!Ua&&/MQQBrowser\\/\\d+/i.test(Da),!Ua&&/ QQBrowser\\/\\d+/i.test(Da),/(micromessenger|webbrowser)/i.test(Da),/Windows/i.test(Da),/MAC OS X/i.test(Da),/MicroMessenger/i.test(Da),Math.max),xa=Math.min;De({target:\"Array\",proto:1,forced:!Qt(\"splice\")},{splice:function(e,t){var n,r,o,i,a,s,u=Re(this),c=ae(u.length),l=ce(e,c),p=arguments.length;if(0===p?n=r=0:1===p?(n=0,r=c-l):(n=p-2,r=xa(Fa(oe(t),0),c-l)),c+n-r>9007199254740991)throw TypeError(\"Maximum allowed length exceeded\");for(o=Fe(u,r),i=0;i<r;i++)(a=l+i)in u&&Je(o,i,u[a]);if(o.length=r,n<r){for(i=l;i<c-r;i++)s=i+n,(a=i+r)in u?u[s]=u[a]:delete u[s];for(i=c;i>c-r+n;i--)delete u[i-1]}else if(n>r)for(i=c-r;i>l;i--)s=i+n-1,(a=i+r-1)in u?u[s]=u[a]:delete u[s];for(i=0;i<n;i++)u[i+l]=arguments[i+2];return u.length=c-r+n,o}});var qa=!u(function(){return Object.isExtensible(Object.preventExtensions({}))}),Va=t(function(e){var t=P.f,n=V(\"meta\"),r=0,o=Object.isExtensible||function(){return 1},i=function(e){t(e,n,{value:{objectID:\"O\"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:0,fastKey:function(e,t){if(!E(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!C(e,n)){if(!o(e))return\"F\";if(!t)return\"E\";i(e)}return e[n].objectID},getWeakData:function(e,t){if(!C(e,n)){if(!o(e))return 1;if(!t)return 0;i(e)}return e[n].weakData},onFreeze:function(e){return qa&&a.REQUIRED&&o(e)&&!C(e,n)&&i(e),e}};H[n]=1}),Ba=(Va.REQUIRED,Va.fastKey,Va.getWeakData,Va.onFreeze,P.f),ja=Va.fastKey,Ha=Q.set,Ka=Q.getterFor,Ya=(function(e,t,n,r,o){var i=s[e],a=i&&i.prototype,c=i,l=r?\"set\":\"add\",p={},f=function(e){var t=a[e];Z(a,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return o&&!E(e)?0:t.call(this,0===e?0:e)}:\"get\"==e?function(e){return o&&!E(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return o&&!E(e)?0:t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Ae(e,\"function\"!=typeof i||!(o||a.forEach&&!u(function(){(new i).entries().next()}))))c=n.getConstructor(t,e,r,l),Va.REQUIRED=1;else if(Ae(e,1)){var h=new c,g=h[l](o?{}:-0,1)!=h,d=u(function(){h.has(1)}),m=st(function(e){new i(e)}),_=!o&&u(function(){for(var e=new i,t=5;t--;)e[l](t,t);return!e.has(-0)});m||((c=t(function(t,n){Co(t,c,e);var o=qr(new i,t,c);return null!=n&&To(n,o[l],o,r),o})).prototype=a,a.constructor=c),(d||_)&&(f(\"delete\"),f(\"has\"),r&&f(\"get\")),(_||g)&&f(l),o&&a.clear&&delete a.clear}p[e]=c,De({global:1,forced:c!=i},p),Rt(c,e),o||n.setStrong(c,e,r)}(\"Map\",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(e,t,n,r){var o=e(function(e,i){Co(e,o,t),Ha(e,{type:t,index:dt(null),first:void 0,last:void 0,size:0}),c||(e.size=0),null!=i&&To(i,e[r],e,n)}),i=Ka(t),a=function(e,t,n){var r,o,a=i(e),u=s(e,t);return u?u.value=n:(a.last=u={index:o=ja(t,1),key:t,value:n,previous:r=a.last,next:void 0,removed:0},a.first||(a.first=u),r&&(r.next=u),c?a.size++:e.size++,\"F\"!==o&&(a.index[o]=u)),e},s=function(e,t){var n,r=i(e),o=ja(t);if(\"F\"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Eo(o.prototype,{clear:function(){for(var e=i(this),t=e.index,n=e.first;n;)n.removed=1,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,c?e.size=0:this.size=0},delete:function(e){var t=i(this),n=s(this,e);if(n){var r=n.next,o=n.previous;delete t.index[n.index],n.removed=1,o&&(o.next=r),r&&(r.previous=o),t.first==n&&(t.first=r),t.last==n&&(t.last=o),c?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=i(this),r=Le(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Eo(o.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),c&&Ba(o.prototype,\"size\",{get:function(){return i(this).size}}),o},setStrong:function(e,t,n){var r=t+\" Iterator\",o=Ka(t),i=Ka(r);qt(e,t,function(e,t){Ha(this,{type:r,target:e,state:o(e),kind:t,last:void 0})},function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?\"keys\"==t?{value:n.key,done:0}:\"values\"==t?{value:n.value,done:0}:{value:[n.key,n.value],done:0}:(e.target=void 0,{value:void 0,done:1})},n?\"entries\":\"values\",!n,1),So(t)}},1),[].push),za=Math.min,Wa=!u(function(){return!RegExp(4294967295,\"y\")});aa(\"split\",2,function(e,t,n){var r;return r=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,n){var r=String(v(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!ea(e))return t.call(r,e,o);for(var i,a,s,u=[],c=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),l=0,p=new RegExp(e.source,c+\"g\");(i=Wi.call(p,r))&&!((a=p.lastIndex)>l&&(u.push(r.slice(l,i.index)),i.length>1&&i.index<r.length&&Ya.apply(u,i.slice(1)),s=i[0].length,l=a,u.length>=o));)p.lastIndex===i.index&&p.lastIndex++;return l===r.length?!s&&p.test(\"\")||u.push(\"\"):u.push(r.slice(l)),u.length>o?u.slice(0,o):u}:\"0\".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=v(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var i=n(r,e,this,o,r!==t);if(i.done)return i.value;var a=L(e),s=String(this),u=Ao(a,RegExp),c=a.unicode,l=(a.ignoreCase?\"i\":\"\")+(a.multiline?\"m\":\"\")+(a.unicode?\"u\":\"\")+(Wa?\"y\":\"g\"),p=new u(Wa?a:\"^(?:\"+a.source+\")\",l),f=void 0===o?4294967295:o>>>0;if(0===f)return[];if(0===s.length)return null===ca(p,s)?[s]:[];for(var h=0,g=0,d=[];g<s.length;){p.lastIndex=Wa?g:0;var m,_=ca(p,Wa?s:s.slice(g));if(null===_||(m=za(ae(p.lastIndex+(Wa?0:g)),s.length))===h)g=ua(s,g,c);else{if(d.push(s.slice(h,g)),d.length===f)return d;for(var v=1;v<=_.length-1;v++)if(d.push(_[v]),d.length===f)return d;g=h=m}}return d.push(s.slice(h)),d}]},!Wa);var Xa,Ja,Qa=\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{};Xa=\"undefined\"!=typeof console?console:void 0!==Qa&&Qa.console?Qa.console:\"undefined\"!=typeof window&&window.console?window.console:{};for(var Za=function(){},$a=[\"assert\",\"clear\",\"count\",\"debug\",\"dir\",\"dirxml\",\"error\",\"exception\",\"group\",\"groupCollapsed\",\"groupEnd\",\"info\",\"log\",\"markTimeline\",\"profile\",\"profileEnd\",\"table\",\"time\",\"timeEnd\",\"timeStamp\",\"trace\",\"warn\"],es=$a.length;es--;)Ja=$a[es],console[Ja]||(Xa[Ja]=Za);Xa.methods=$a;var ts=Xa,ns=-1,rs=function(){if(Oa){var e=wx.getSystemInfoSync().SDKVersion;if(void 0===e||void 0===wx.getLogManager)return 0;if(function(e,t){e=e.split(\".\"),t=t.split(\".\");var n=Math.max(e.length,t.length);for(;e.length<n;)e.push(\"0\");for(;t.length<n;)t.push(\"0\");for(var r=0;r<n;r++){var o=parseInt(e[r]),i=parseInt(t[r]);if(o>i)return 1;if(o<i)return-1}return 0}(e,\"2.1.0\")>=0)return wx.getLogManager().log(\"I can use wx log. SDKVersion=\"+e),1}return 0}(),os=new Map;function is(){var e=new Date;return\"TIM \"+e.toLocaleTimeString(\"en-US\",{hour12:0})+\".\"+function(e){var t;switch(e.toString().length){case 1:t=\"00\"+e;break;case 2:t=\"0\"+e;break;default:t=e}return t}(e.getMilliseconds())+\":\"}var as={_data:[],_length:0,_visible:0,arguments2String:function(e){var t;if(1===e.length)t=is()+e[0];else{t=is();for(var n=0,r=e.length;n<r;n++)ms(e[n])?vs(e[n])?t+=Ts(e[n]):t+=JSON.stringify(e[n]):t+=e[n],t+=\" \"}return t},debug:function(){if(ns<=-1){var e=this.arguments2String(arguments);as.record(e,\"debug\"),ts.debug(e),rs&&wx.getLogManager().debug(e)}},log:function(){if(ns<=0){var e=this.arguments2String(arguments);as.record(e,\"log\"),ts.log(e),rs&&wx.getLogManager().log(e)}},info:function(){if(ns<=1){var e=this.arguments2String(arguments);as.record(e,\"info\"),ts.info(e),rs&&wx.getLogManager().info(e)}},warn:function(){if(ns<=2){var e=this.arguments2String(arguments);as.record(e,\"warn\"),ts.warn(e),rs&&wx.getLogManager().warn(e)}},error:function(){if(ns<=3){var e=this.arguments2String(arguments);as.record(e,\"error\"),ts.error(e),rs&&wx.getLogManager().warn(e)}},time:function(e){os.set(e,Ss.now())},timeEnd:function(e){if(os.has(e)){var t=Ss.now()-os.get(e);return os.delete(e),t}return ts.warn(\"未找到对应label: \".concat(e,\", 请在调用 logger.timeEnd 前，调用 logger.time\")),0},setLevel:function(e){e<4&&ts.log(is()+\"set level from \"+ns+\" to \"+e),ns=e},record:function(e,t){rs||(1100===as._length&&(as._data.splice(0,100),as._length=1e3),as._length++,as._data.push(\"\".concat(e,\" [\").concat(t,\"] \\n\")))},getLog:function(){return as._data}},ss=function(e){return\"map\"===ys(e)},us=function(e){return\"set\"===ys(e)},cs=function(e){return\"file\"===ys(e)},ls=function(e){return null!==e&&(\"number\"==typeof e&&!isNaN(e-0)||\"object\"===rn(e)&&e.constructor===Number)},ps=function(e){return\"string\"==typeof e},fs=function(e){return null!==e&&\"object\"===rn(e)},hs=function(e){if(\"object\"!==rn(e)||null===e)return 0;var t=Object.getPrototypeOf(e);if(null===t)return 1;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n},gs=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"array\"===ys(e)},ds=function(e){return void 0===e},ms=function(e){return gs(e)||fs(e)},_s=function(e){return\"function\"==typeof e},vs=function(e){return e instanceof Error},ys=function(e){return Object.prototype.toString.call(e).match(/^\\[object (.*)\\]$/)[1].toLowerCase()},Es=function(e){if(\"string\"!=typeof e)return 0;var t=e[0];return/[^a-zA-Z0-9]/.test(t)?0:1},Is=0;Date.now||(Date.now=function(){return(new Date).getTime()});var Ss={now:function(){0===Is&&(Is=Date.now()-1);var e=Date.now()-Is;return e>4294967295?(Is+=4294967295,Date.now()-Is):e},utc:function(){return Math.round(Date.now()/1e3)}},Cs=function e(t,n,r,o){if(!ms(t)||!ms(n))return 0;for(var i,a=0,s=Object.keys(n),u=0,c=s.length;u<c;u++)if(i=s[u],!(ds(n[i])||r&&r.includes(i)))if(ms(t[i])&&ms(n[i]))a+=e(t[i],n[i],r,o);else{if(o&&o.includes(n[i]))continue;t[i]!==n[i]&&(t[i]=n[i],a+=1)}return a},Ts=function(e){return JSON.stringify(e,[\"message\",\"code\"])},Ms=function(e){if(0===e.length)return 0;for(var t=0,n=0,r=\"undefined\"!=typeof document&&void 0!==document.characterSet?document.characterSet:\"UTF-8\";void 0!==e[t];)n+=e[t++].charCodeAt[t]<=255?1:0==r?3:2;return n},As=function(e){var t=e||99999999;return Math.round(Math.random()*t)},Os=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",Ds=Os.length,Ns=function(e,t){for(var n in e)if(e[n]===t)return 1;return 0},Ls={},Rs=function(e){return-1===e.indexOf(\"http://\")||-1===e.indexOf(\"https://\")?\"https://\"+e:e.replace(/https|http/,\"https\")},Ps=function(e){return e===Xt.GRP_PUBLIC},Gs=function(e){return e===Xt.GRP_AVCHATROOM};function ks(e,t){var n={};return Object.keys(e).forEach(function(r){n[r]=t(e[r],r)}),n}var ws=Object.prototype.hasOwnProperty;function bs(e){if(null==e)return 1;if(\"boolean\"==typeof e)return 0;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(hs(e)){for(var t in e)if(ws.call(e,t))return 0;return 1}return ss(e)||us(e)||cs(e)?0===e.size:0}function Us(e,t,n){if(void 0===t)return 1;var r=1;if(\"object\"===Nn(t).toLowerCase())Object.keys(t).forEach(function(o){var i=1===e.length?e[0][o]:void 0;r=Fs(i,t[o],n,o)?r:0});else if(\"array\"===Nn(t).toLowerCase())for(var o=0;o<t.length;o++)r=Fs(e[o],t[o],n,t[o].name)?r:0;if(r)return r;throw new Error(\"Params validate failed.\")}function Fs(e,t,n,r){if(void 0===t)return 1;var o=1;return t.required&&bs(e)&&(ts.error(\"TIM [\".concat(n,'] Missing required params: \"').concat(r,'\".')),o=0),bs(e)||Nn(e).toLowerCase()===t.type.toLowerCase()||(ts.error(\"TIM [\".concat(n,'] Invalid params: type check failed for \"').concat(r,'\".Expected ').concat(t.type,\".\")),o=0),t.validator&&!t.validator(e)&&(ts.error(\"TIM [\".concat(n,\"] Invalid params: custom validator check failed for params.\")),o=0),o}var xs={login:{userID:{type:\"String\",required:1},userSig:{type:\"String\",required:1}},addToBlacklist:{userIDList:{type:\"Array\",required:1}},mutilParam:[{name:\"paramName\",type:\"Number\",required:1},{name:\"paramName\",type:\"String\",required:1}],on:[{name:\"eventName\",type:\"String\",required:1},{name:\"listener\",type:\"Function\",required:0}],sendMessage:[{name:\"message\",type:\"Object\",required:1}],getMessageList:{conversationID:{type:\"String\",required:1},nextReqMessageID:{type:\"String\"},count:{type:\"Number\",validator:function(e){return ds(e)||/^[1-9][0-9]*$/.test(e)?1:(console.warn(\"getMessageList 接口的 count 参数必须为正整数\"),0)}}},getConversationProfile:[{name:\"conversationID\",type:\"String\",required:1,validator:function(e){return e?ps(t=e)&&t.slice(0,3)===Xt.CONV_C2C||function(e){return ps(e)&&e.slice(0,5)===Xt.CONV_GROUP}(e)||function(e){return ps(e)&&e===Xt.CONV_SYSTEM}(e)?1:(console.warn(\"非法的会话 ID:\".concat(e,\"。会话 ID 组成方式：\\n      C2C + userID（单聊）\\n      GROUP + groupID（群聊）\\n      @TIM#SYSTEM（系统通知会话）\")),0):0;var t}}],deleteConversation:[{name:\"conversationID\",type:\"String\",required:1}],getGroupList:{groupProfileFilter:{type:\"Array\"}},getGroupProfile:{groupID:{type:\"String\",required:1},groupCustomFieldFilter:{type:\"Array\"},memberCustomFieldFilter:{type:\"Array\"}},getGroupProfileAdvance:{groupIDList:{type:\"Array\",required:1}},createGroup:{name:{type:\"String\",required:1}},joinGroup:{groupID:{type:\"String\",required:1},type:{type:\"String\"},applyMessage:{type:\"String\"}},quitGroup:[{name:\"groupID\",type:\"String\",required:1}],handleApplication:{message:{type:\"Object\",required:1},handleAction:{type:\"String\",required:1},handleMessage:{type:\"String\"}},changeGroupOwner:{groupID:{type:\"String\",required:1},newOwnerID:{type:\"String\",required:1}},updateGroupProfile:{groupID:{type:\"String\",required:1}},dismissGroup:[{name:\"groupID\",type:\"String\",required:1}],searchGroupByID:[{name:\"groupID\",type:\"String\",required:1}],getGroupMemberList:{groupID:{type:\"String\",required:1},offset:{type:\"Number\"},count:{type:\"Number\"}},getGroupMemberProfile:{groupID:{type:\"String\",required:1},userIDList:{type:\"Array\",required:1},memberCustomFieldFilter:{type:\"Array\"}},addGroupMemeber:{groupID:{type:\"String\",required:1},userIDList:{type:\"Array\",required:1}},setGroupMemberRole:{groupID:{type:\"String\",required:1},userID:{type:\"String\",required:1},role:{type:\"String\",required:1}},setGroupMemberMuteTime:{groupID:{type:\"String\",required:1},userID:{type:\"String\"},muteTime:{type:\"Number\",validator:function(e){return e>=0}}},setGroupMemberNameCard:{groupID:{type:\"String\",required:1},userID:{type:\"String\"},nameCard:{type:\"String\",required:1,validator:function(e){return 1==/^\\s+$/.test(e)?0:1}}},setMessageRemindType:{groupID:{type:\"String\",required:1},messageRemindType:{type:\"String\",required:1}},setGroupMemberCustomField:{groupID:{type:\"String\",required:1},userID:{type:\"String\"},memberCustomField:{type:\"Array\",required:1}},deleteGroupMember:{groupID:{type:\"String\",required:1}},createTextMessage:{to:{type:\"String\",required:1},conversationType:{type:\"String\",required:1},payload:{type:\"Object\",required:1}},createCustomMessage:{to:{type:\"String\",required:1},conversationType:{type:\"String\",required:1},payload:{type:\"Object\",required:1}},createImageMessage:{to:{type:\"String\",required:1},conversationType:{type:\"String\",required:1},payload:{type:\"Object\",required:1}},createAudioMessage:{to:{type:\"String\",required:1},conversationType:{type:\"String\",required:1},payload:{type:\"Object\",required:1}},createVideoMessage:{to:{type:\"String\",required:1},conversationType:{type:\"String\",required:1},payload:{type:\"Object\",required:1}},createFileMessage:{to:{type:\"String\",required:1},conversationType:{type:\"String\",required:1},payload:{type:\"Object\",required:1}}},qs={login:\"login\",logout:\"logout\",on:\"on\",once:\"once\",off:\"off\",setLogLevel:\"setLogLevel\",downloadLog:\"downloadLog\",registerPlugin:\"registerPlugin\",destroy:\"destroy\",createTextMessage:\"createTextMessage\",createFileMessage:\"createFileMessage\",createAudioMessage:\"createAudioMessage\",createImageMessage:\"createImageMessage\",createCustomMessage:\"createCustomMessage\",createVideoMessage:\"createVideoMessage\",sendMessage:\"sendMessage\",resendMessage:\"resendMessage\",getMessageList:\"getMessageList\",setMessageRead:\"setMessageRead\",getConversationList:\"getConversationList\",getConversationProfile:\"getConversationProfile\",deleteConversation:\"deleteConversation\",getGroupList:\"getGroupList\",getGroupProfile:\"getGroupProfile\",createGroup:\"createGroup\",joinGroup:\"joinGroup\",updateGroupProfile:\"updateGroupProfile\",quitGroup:\"quitGroup\",dismissGroup:\"dismissGroup\",changeGroupOwner:\"changeGroupOwner\",searchGroupByID:\"searchGroupByID\",setMessageRemindType:\"setMessageRemindType\",handleGroupApplication:\"handleGroupApplication\",getGroupMemberProfile:\"getGroupMemberProfile\",getGroupMemberList:\"getGroupMemberList\",addGroupMember:\"addGroupMember\",deleteGroupMember:\"deleteGroupMember\",setGroupMemberNameCard:\"setGroupMemberNameCard\",setGroupMemberMuteTime:\"setGroupMemberMuteTime\",setGroupMemberRole:\"setGroupMemberRole\",setGroupMemberCustomField:\"setGroupMemberCustomField\",getMyProfile:\"getMyProfile\",getUserProfile:\"getUserProfile\",updateMyProfile:\"updateMyProfile\",getBlacklist:\"getBlacklist\",addToBlacklist:\"addToBlacklist\",removeFromBlacklist:\"removeFromBlacklist\",getFriendList:\"getFriendList\"},Vs=be(\"iterator\"),Bs=!u(function(){var e=new URL(\"b?e=1\",\"http://a\"),t=e.searchParams;return e.pathname=\"c%20d\",!t.sort||\"http://a/c%20d?e=1\"!==e.href||\"1\"!==t.get(\"e\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[Vs]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://тест\").host||\"#%D0%B1\"!==new URL(\"http://a#б\").hash}),js=Object.assign,Hs=!js||u(function(){var e={},t={},n=Symbol();return e[n]=7,\"abcdefghijklmnopqrst\".split(\"\").forEach(function(e){t[e]=e}),7!=js({},e)[n]||\"abcdefghijklmnopqrst\"!=ct(js({},t)).join(\"\")})?function(e,t){for(var n=Re(e),r=arguments.length,o=1,i=_e.f,a=f.f;r>o;)for(var s,u=_(arguments[o++]),l=i?ct(u).concat(i(u)):ct(u),p=l.length,h=0;p>h;)s=l[h++],c&&!a.call(u,s)||(n[s]=u[s]);return n}:js,Ks=/[^\\0-\\u007E]/,Ys=/[.\\u3002\\uFF0E\\uFF61]/g,zs=\"Overflow: input needs wider integers to process\",Ws=Math.floor,Xs=String.fromCharCode,Js=function(e){return e+22+75*(e<26)},Qs=function(e,t,n){var r=0;for(e=n?Ws(e/700):e>>1,e+=Ws(e/t);e>455;r+=36)e=Ws(e/35);return Ws(r+36*e/(e+38))},Zs=function(e){var t,n,r=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}(e)).length,i=128,a=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(Xs(n));var u=r.length,c=u;for(u&&r.push(\"-\");c<o;){var l=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=i&&n<l&&(l=n);var p=c+1;if(l-i>Ws((2147483647-a)/p))throw RangeError(zs);for(a+=(l-i)*p,i=l,t=0;t<e.length;t++){if((n=e[t])<i&&++a>2147483647)throw RangeError(zs);if(n==i){for(var f=a,h=36;;h+=36){var g=h<=s?1:h>=s+26?26:h-s;if(f<g)break;var d=f-g,m=36-g;r.push(Xs(Js(g+d%m))),f=Ws(d/m)}r.push(Xs(Js(f))),s=Qs(a,p,c==u),a=0,++c}}++a,++i}return r.join(\"\")},$s=function(e){var t=tt(e);if(\"function\"!=typeof t)throw TypeError(String(e)+\" is not iterable\");return L(t.call(e))},eu=be(\"iterator\"),tu=Q.set,nu=Q.getterFor(\"URLSearchParams\"),ru=Q.getterFor(\"URLSearchParamsIterator\"),ou=/\\+/g,iu=Array(4),au=function(e){return iu[e-1]||(iu[e-1]=RegExp(\"((?:%[\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},su=function(e){try{return decodeURIComponent(e)}catch(Jg){return e}},uu=function(e){var t=e.replace(ou,\" \"),n=4;try{return decodeURIComponent(t)}catch(Jg){for(;n;)t=t.replace(au(n--),su);return t}},cu=/[!'()~]|%20/g,lu={\"!\":\"%21\",\"'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},pu=function(e){return lu[e]},fu=function(e){return encodeURIComponent(e).replace(cu,pu)},hu=function(e,t){if(t)for(var n,r,o=t.split(\"&\"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split(\"=\"),e.push({key:uu(r.shift()),value:uu(r.join(\"=\"))}))},gu=function(e){this.entries.length=0,hu(this.entries,e)},du=function(e,t){if(e<t)throw TypeError(\"Not enough arguments\")},mu=kt(function(e,t){tu(this,{type:\"URLSearchParamsIterator\",iterator:$s(nu(e).entries),kind:t})},\"Iterator\",function(){var e=ru(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value=\"keys\"===t?r.key:\"values\"===t?r.value:[r.key,r.value]),n}),_u=function(){Co(this,_u,\"URLSearchParams\");var e,t,n,r,o,i,a,s=arguments.length>0?arguments[0]:void 0,u=this,c=[];if(tu(u,{type:\"URLSearchParams\",entries:c,updateURL:function(){},updateSearchParams:gu}),void 0!==s)if(E(s))if(\"function\"==typeof(e=tt(s)))for(t=e.call(s);!(n=t.next()).done;){if((o=(r=$s(L(n.value))).next()).done||(i=r.next()).done||!r.next().done)throw TypeError(\"Expected sequence with length 2\");c.push({key:o.value+\"\",value:i.value+\"\"})}else for(a in s)C(s,a)&&c.push({key:a,value:s[a]+\"\"});else hu(c,\"string\"==typeof s?\"?\"===s.charAt(0)?s.slice(1):s:s+\"\")},vu=_u.prototype;Eo(vu,{append:function(e,t){du(arguments.length,2);var n=nu(this);n.entries.push({key:e+\"\",value:t+\"\"}),n.updateURL()},delete:function(e){du(arguments.length,1);for(var t=nu(this),n=t.entries,r=e+\"\",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){du(arguments.length,1);for(var t=nu(this).entries,n=e+\"\",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){du(arguments.length,1);for(var t=nu(this).entries,n=e+\"\",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){du(arguments.length,1);for(var t=nu(this).entries,n=e+\"\",r=0;r<t.length;)if(t[r++].key===n)return 1;return 0},set:function(e,t){du(arguments.length,1);for(var n,r=nu(this),o=r.entries,i=0,a=e+\"\",s=t+\"\",u=0;u<o.length;u++)(n=o[u]).key===a&&(i?o.splice(u--,1):(i=1,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=nu(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=nu(this).entries,r=Le(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new mu(this,\"keys\")},values:function(){return new mu(this,\"values\")},entries:function(){return new mu(this,\"entries\")}},{enumerable:1}),Z(vu,eu,vu.entries),Z(vu,\"toString\",function(){for(var e,t=nu(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(fu(e.key)+\"=\"+fu(e.value));return n.join(\"&\")},{enumerable:1}),Rt(_u,\"URLSearchParams\"),De({global:1,forced:!Bs},{URLSearchParams:_u});var yu,Eu={URLSearchParams:_u,getState:nu},Iu=It.codeAt,Su=s.URL,Cu=Eu.URLSearchParams,Tu=Eu.getState,Mu=Q.set,Au=Q.getterFor(\"URL\"),Ou=Math.floor,Du=Math.pow,Nu=/[A-Za-z]/,Lu=/[\\d+\\-.A-Za-z]/,Ru=/\\d/,Pu=/^(0x|0X)/,Gu=/^[0-7]+$/,ku=/^\\d+$/,wu=/^[\\dA-Fa-f]+$/,bu=/[\\u0000\\u0009\\u000A\\u000D #%\\/:?@[\\\\]]/,Uu=/[\\u0000\\u0009\\u000A\\u000D #\\/:?@[\\\\]]/,Fu=/^[\\u0000-\\u001F ]+|[\\u0000-\\u001F ]+$/g,xu=/[\\u0009\\u000A\\u000D]/g,qu=function(e,t){var n,r,o;if(\"[\"==t.charAt(0)){if(\"]\"!=t.charAt(t.length-1))return\"Invalid host\";if(!(n=Bu(t.slice(1,-1))))return\"Invalid host\";e.host=n}else if(Ju(e)){if(t=function(e){var t,n,r=[],o=e.toLowerCase().replace(Ys,\".\").split(\".\");for(t=0;t<o.length;t++)n=o[t],r.push(Ks.test(n)?\"xn--\"+Zs(n):n);return r.join(\".\")}(t),bu.test(t))return\"Invalid host\";if(null===(n=Vu(t)))return\"Invalid host\";e.host=n}else{if(Uu.test(t))return\"Invalid host\";for(n=\"\",r=nt(t),o=0;o<r.length;o++)n+=Wu(r[o],Hu);e.host=n}},Vu=function(e){var t,n,r,o,i,a,s,u=e.split(\".\");if(u.length&&\"\"==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(\"\"==(o=u[r]))return e;if(i=10,o.length>1&&\"0\"==o.charAt(0)&&(i=Pu.test(o)?16:8,o=o.slice(8==i?1:2)),\"\"===o)a=0;else{if(!(10==i?ku:8==i?Gu:wu).test(o))return e;a=parseInt(o,i)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=Du(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Du(256,3-r);return s},Bu=function(e){var t,n,r,o,i,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,p=0,f=function(){return e.charAt(p)};if(\":\"==f()){if(\":\"!=e.charAt(1))return;p+=2,l=++c}for(;f();){if(8==c)return;if(\":\"!=f()){for(t=n=0;n<4&&wu.test(f());)t=16*t+parseInt(f(),16),p++,n++;if(\".\"==f()){if(0==n)return;if(p-=n,c>6)return;for(r=0;f();){if(o=null,r>0){if(!(\".\"==f()&&r<4))return;p++}if(!Ru.test(f()))return;for(;Ru.test(f());){if(i=parseInt(f(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;p++}u[c]=256*u[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(\":\"==f()){if(p++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;p++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},ju=function(e){var t,n,r,o;if(\"number\"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Ou(e/256);return t.join(\".\")}if(\"object\"==typeof e){for(t=\"\",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=0),r===n?(t+=n?\":\":\"::\",o=1):(t+=e[n].toString(16),n<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},Hu={},Ku=Hs({},Hu,{\" \":1,'\"':1,\"<\":1,\">\":1,\"`\":1}),Yu=Hs({},Ku,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),zu=Hs({},Yu,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),Wu=function(e,t){var n=Iu(e,0);return n>32&&n<127&&!C(t,e)?e:encodeURIComponent(e)},Xu={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Ju=function(e){return C(Xu,e.scheme)},Qu=function(e){return\"\"!=e.username||\"\"!=e.password},Zu=function(e){return!e.host||e.cannotBeABaseURL||\"file\"==e.scheme},$u=function(e,t){var n;return 2==e.length&&Nu.test(e.charAt(0))&&(\":\"==(n=e.charAt(1))||!t&&\"|\"==n)},ec=function(e){var t;return e.length>1&&$u(e.slice(0,2))&&(2==e.length||\"/\"===(t=e.charAt(2))||\"\\\\\"===t||\"?\"===t||\"#\"===t)},tc=function(e){var t=e.path,n=t.length;!n||\"file\"==e.scheme&&1==n&&$u(t[0],1)||t.pop()},nc=function(e){return\".\"===e||\"%2e\"===e.toLowerCase()},rc={},oc={},ic={},ac={},sc={},uc={},cc={},lc={},pc={},fc={},hc={},gc={},dc={},mc={},_c={},vc={},yc={},Ec={},Ic={},Sc={},Cc={},Tc=function(e,t,n,r){var o,i,a,s,u,c=n||rc,l=0,p=\"\",f=0,h=0,g=0;for(n||(e.scheme=\"\",e.username=\"\",e.password=\"\",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=0,t=t.replace(Fu,\"\")),t=t.replace(xu,\"\"),o=nt(t);l<=o.length;){switch(i=o[l],c){case rc:if(!i||!Nu.test(i)){if(n)return\"Invalid scheme\";c=ic;continue}p+=i.toLowerCase(),c=oc;break;case oc:if(i&&(Lu.test(i)||\"+\"==i||\"-\"==i||\".\"==i))p+=i.toLowerCase();else{if(\":\"!=i){if(n)return\"Invalid scheme\";p=\"\",c=ic,l=0;continue}if(n&&(Ju(e)!=C(Xu,p)||\"file\"==p&&(Qu(e)||null!==e.port)||\"file\"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(Ju(e)&&Xu[e.scheme]==e.port&&(e.port=null));p=\"\",\"file\"==e.scheme?c=mc:Ju(e)&&r&&r.scheme==e.scheme?c=ac:Ju(e)?c=lc:\"/\"==o[l+1]?(c=sc,l++):(e.cannotBeABaseURL=1,e.path.push(\"\"),c=Ic)}break;case ic:if(!r||r.cannotBeABaseURL&&\"#\"!=i)return\"Invalid scheme\";if(r.cannotBeABaseURL&&\"#\"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment=\"\",e.cannotBeABaseURL=1,c=Cc;break}c=\"file\"==r.scheme?mc:uc;continue;case ac:if(\"/\"!=i||\"/\"!=o[l+1]){c=uc;continue}c=pc,l++;break;case sc:if(\"/\"==i){c=fc;break}c=Ec;continue;case uc:if(e.scheme=r.scheme,i==yu)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if(\"/\"==i||\"\\\\\"==i&&Ju(e))c=cc;else if(\"?\"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=\"\",c=Sc;else{if(\"#\"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),c=Ec;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment=\"\",c=Cc}break;case cc:if(!Ju(e)||\"/\"!=i&&\"\\\\\"!=i){if(\"/\"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,c=Ec;continue}c=fc}else c=pc;break;case lc:if(c=pc,\"/\"!=i||\"/\"!=p.charAt(l+1))continue;l++;break;case pc:if(\"/\"!=i&&\"\\\\\"!=i){c=fc;continue}break;case fc:if(\"@\"==i){f&&(p=\"%40\"+p),f=1,a=nt(p);for(var d=0;d<a.length;d++){var m=a[d];if(\":\"!=m||g){var _=Wu(m,zu);g?e.password+=_:e.username+=_}else g=1}p=\"\"}else if(i==yu||\"/\"==i||\"?\"==i||\"#\"==i||\"\\\\\"==i&&Ju(e)){if(f&&\"\"==p)return\"Invalid authority\";l-=nt(p).length+1,p=\"\",c=hc}else p+=i;break;case hc:case gc:if(n&&\"file\"==e.scheme){c=vc;continue}if(\":\"!=i||h){if(i==yu||\"/\"==i||\"?\"==i||\"#\"==i||\"\\\\\"==i&&Ju(e)){if(Ju(e)&&\"\"==p)return\"Invalid host\";if(n&&\"\"==p&&(Qu(e)||null!==e.port))return;if(s=qu(e,p))return s;if(p=\"\",c=yc,n)return;continue}\"[\"==i?h=1:\"]\"==i&&(h=0),p+=i}else{if(\"\"==p)return\"Invalid host\";if(s=qu(e,p))return s;if(p=\"\",c=dc,n==gc)return}break;case dc:if(!Ru.test(i)){if(i==yu||\"/\"==i||\"?\"==i||\"#\"==i||\"\\\\\"==i&&Ju(e)||n){if(\"\"!=p){var v=parseInt(p,10);if(v>65535)return\"Invalid port\";e.port=Ju(e)&&v===Xu[e.scheme]?null:v,p=\"\"}if(n)return;c=yc;continue}return\"Invalid port\"}p+=i;break;case mc:if(e.scheme=\"file\",\"/\"==i||\"\\\\\"==i)c=_c;else{if(!r||\"file\"!=r.scheme){c=Ec;continue}if(i==yu)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if(\"?\"==i)e.host=r.host,e.path=r.path.slice(),e.query=\"\",c=Sc;else{if(\"#\"!=i){ec(o.slice(l).join(\"\"))||(e.host=r.host,e.path=r.path.slice(),tc(e)),c=Ec;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment=\"\",c=Cc}}break;case _c:if(\"/\"==i||\"\\\\\"==i){c=vc;break}r&&\"file\"==r.scheme&&!ec(o.slice(l).join(\"\"))&&($u(r.path[0],1)?e.path.push(r.path[0]):e.host=r.host),c=Ec;continue;case vc:if(i==yu||\"/\"==i||\"\\\\\"==i||\"?\"==i||\"#\"==i){if(!n&&$u(p))c=Ec;else if(\"\"==p){if(e.host=\"\",n)return;c=yc}else{if(s=qu(e,p))return s;if(\"localhost\"==e.host&&(e.host=\"\"),n)return;p=\"\",c=yc}continue}p+=i;break;case yc:if(Ju(e)){if(c=Ec,\"/\"!=i&&\"\\\\\"!=i)continue}else if(n||\"?\"!=i)if(n||\"#\"!=i){if(i!=yu&&(c=Ec,\"/\"!=i))continue}else e.fragment=\"\",c=Cc;else e.query=\"\",c=Sc;break;case Ec:if(i==yu||\"/\"==i||\"\\\\\"==i&&Ju(e)||!n&&(\"?\"==i||\"#\"==i)){if(\"..\"===(u=(u=p).toLowerCase())||\"%2e.\"===u||\".%2e\"===u||\"%2e%2e\"===u?(tc(e),\"/\"==i||\"\\\\\"==i&&Ju(e)||e.path.push(\"\")):nc(p)?\"/\"==i||\"\\\\\"==i&&Ju(e)||e.path.push(\"\"):(\"file\"==e.scheme&&!e.path.length&&$u(p)&&(e.host&&(e.host=\"\"),p=p.charAt(0)+\":\"),e.path.push(p)),p=\"\",\"file\"==e.scheme&&(i==yu||\"?\"==i||\"#\"==i))for(;e.path.length>1&&\"\"===e.path[0];)e.path.shift();\"?\"==i?(e.query=\"\",c=Sc):\"#\"==i&&(e.fragment=\"\",c=Cc)}else p+=Wu(i,Yu);break;case Ic:\"?\"==i?(e.query=\"\",c=Sc):\"#\"==i?(e.fragment=\"\",c=Cc):i!=yu&&(e.path[0]+=Wu(i,Hu));break;case Sc:n||\"#\"!=i?i!=yu&&(\"'\"==i&&Ju(e)?e.query+=\"%27\":e.query+=\"#\"==i?\"%23\":Wu(i,Hu)):(e.fragment=\"\",c=Cc);break;case Cc:i!=yu&&(e.fragment+=Wu(i,Ku))}l++}},Mc=function(e){var t,n,r=Co(this,Mc,\"URL\"),o=arguments.length>1?arguments[1]:void 0,i=String(e),a=Mu(r,{type:\"URL\"});if(void 0!==o)if(o instanceof Mc)t=Au(o);else if(n=Tc(t={},String(o)))throw TypeError(n);if(n=Tc(a,i,null,t))throw TypeError(n);var s=a.searchParams=new Cu,u=Tu(s);u.updateSearchParams(a.query),u.updateURL=function(){a.query=String(s)||null},c||(r.href=Oc.call(r),r.origin=Dc.call(r),r.protocol=Nc.call(r),r.username=Lc.call(r),r.password=Rc.call(r),r.host=Pc.call(r),r.hostname=Gc.call(r),r.port=kc.call(r),r.pathname=wc.call(r),r.search=bc.call(r),r.searchParams=Uc.call(r),r.hash=Fc.call(r))},Ac=Mc.prototype,Oc=function(){var e=Au(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,s=e.query,u=e.fragment,c=t+\":\";return null!==o?(c+=\"//\",Qu(e)&&(c+=n+(r?\":\"+r:\"\")+\"@\"),c+=ju(o),null!==i&&(c+=\":\"+i)):\"file\"==t&&(c+=\"//\"),c+=e.cannotBeABaseURL?a[0]:a.length?\"/\"+a.join(\"/\"):\"\",null!==s&&(c+=\"?\"+s),null!==u&&(c+=\"#\"+u),c},Dc=function(){var e=Au(this),t=e.scheme,n=e.port;if(\"blob\"==t)try{return new URL(t.path[0]).origin}catch(Jg){return\"null\"}return\"file\"!=t&&Ju(e)?t+\"://\"+ju(e.host)+(null!==n?\":\"+n:\"\"):\"null\"},Nc=function(){return Au(this).scheme+\":\"},Lc=function(){return Au(this).username},Rc=function(){return Au(this).password},Pc=function(){var e=Au(this),t=e.host,n=e.port;return null===t?\"\":null===n?ju(t):ju(t)+\":\"+n},Gc=function(){var e=Au(this).host;return null===e?\"\":ju(e)},kc=function(){var e=Au(this).port;return null===e?\"\":String(e)},wc=function(){var e=Au(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?\"/\"+t.join(\"/\"):\"\"},bc=function(){var e=Au(this).query;return e?\"?\"+e:\"\"},Uc=function(){return Au(this).searchParams},Fc=function(){var e=Au(this).fragment;return e?\"#\"+e:\"\"},xc=function(e,t){return{get:e,set:t,configurable:1,enumerable:1}};if(c&&lt(Ac,{href:xc(Oc,function(e){var t=Au(this),n=String(e),r=Tc(t,n);if(r)throw TypeError(r);Tu(t.searchParams).updateSearchParams(t.query)}),origin:xc(Dc),protocol:xc(Nc,function(e){var t=Au(this);Tc(t,String(e)+\":\",rc)}),username:xc(Lc,function(e){var t=Au(this),n=nt(String(e));if(!Zu(t)){t.username=\"\";for(var r=0;r<n.length;r++)t.username+=Wu(n[r],zu)}}),password:xc(Rc,function(e){var t=Au(this),n=nt(String(e));if(!Zu(t)){t.password=\"\";for(var r=0;r<n.length;r++)t.password+=Wu(n[r],zu)}}),host:xc(Pc,function(e){var t=Au(this);t.cannotBeABaseURL||Tc(t,String(e),hc)}),hostname:xc(Gc,function(e){var t=Au(this);t.cannotBeABaseURL||Tc(t,String(e),gc)}),port:xc(kc,function(e){var t=Au(this);Zu(t)||(\"\"==(e=String(e))?t.port=null:Tc(t,e,dc))}),pathname:xc(wc,function(e){var t=Au(this);t.cannotBeABaseURL||(t.path=[],Tc(t,e+\"\",yc))}),search:xc(bc,function(e){var t=Au(this);\"\"==(e=String(e))?t.query=null:(\"?\"==e.charAt(0)&&(e=e.slice(1)),t.query=\"\",Tc(t,e,Sc)),Tu(t.searchParams).updateSearchParams(t.query)}),searchParams:xc(Uc),hash:xc(Fc,function(e){var t=Au(this);\"\"!=(e=String(e))?(\"#\"==e.charAt(0)&&(e=e.slice(1)),t.fragment=\"\",Tc(t,e,Cc)):t.fragment=null})}),Z(Ac,\"toJSON\",function(){return Oc.call(this)},{enumerable:1}),Z(Ac,\"toString\",function(){return Oc.call(this)},{enumerable:1}),Su){var qc=Su.createObjectURL,Vc=Su.revokeObjectURL;qc&&Z(Mc,\"createObjectURL\",function(e){return qc.apply(Su,arguments)}),Vc&&Z(Mc,\"revokeObjectURL\",function(e){return Vc.apply(Su,arguments)})}Rt(Mc,\"URL\"),De({global:1,forced:!Bs,sham:!c},{URL:Mc});var Bc={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_SDK_INSTANCE:2004,REQ_GET_ACCESS_LAYER_FAILED:2020,REQ_LOGIN_FAILED:2021,NO_TINYID:2022,NO_A2KEY:2023,MESSAGE_SEND_FAIL:2100,MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD:2101,MESSAGE_ELEMENT_METHOD_UNDEFINED:2102,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_PARAMETER_MISSING_TO_ACCOUNT:2104,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_RESEND_FILE_UNSUPPORTED:2107,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_IMAGE_UPLOAD_FAIL:2250,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT:2404,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_PRIVATE:2601,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_PRIVATE:2622,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,DEL_FRIEND_INVALID_PARAM:2700,GET_PROFILE_INVALID_PARAM:2720,UPDATE_PROFILE_INVALID_PARAM:2721,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,SOCKET_NOT_SUPPORTED:2850,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,SDK_IS_NOT_READY:2999,SSO_LOG_MODEL_INIT_ERROR:3e3,LONG_POLL_KICK_OUT:91101},jc={NO_SDKAPPID:\"无 SDKAppID\",NO_ACCOUNT_TYPE:\"无 accountType\",NO_IDENTIFIER:\"无 userID\",NO_USERSIG:\"无 usersig\",NO_SDK_INSTANCE:\"无 SDK 实例\",REQ_GET_ACCESS_LAYER_FAILED:\"获取沙箱请求失败\",REQ_LOGIN_FAILED:\"登录请求失败\",NO_TINYID:\"无tinyid\",NO_A2KEY:\"无a2key\",MESSAGE_SEND_FAIL:\"消息发送失败\",MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD:\"未知的漫游消息结束字段\",MESSAGE_ELEMENT_METHOD_UNDEFINED:\"消息元素未创建，因为方法未定义\",MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:\"MessageController.constructor() 需要参数 options\",MESSAGE_PARAMETER_MISSING_TO_ACCOUNT:\"需要 toAccount 参数\",MESSAGE_SEND_NEED_MESSAGE_INSTANCE:\"需要 Message 的实例\",MESSAGE_SEND_INVALID_CONVERSATION_TYPE:'Message.conversationType 只能为 \"C2C\"或\"GROUP\" ',MESSAGE_RESEND_FILE_UNSUPPORTED:\"文件类消息不能使用 SDK.resendMessage() 函数重发\",MESSAGE_FILE_IS_EMPTY:\"无法发送空文件\",MESSAGE_ONPROGRESS_FUNCTION_ERROR:\"回调函数运行时遇到错误，请检查接入侧代码\",MESSAGE_IMAGE_UPLOAD_FAIL:\"图片上传失败\",MESSAGE_IMAGE_SELECT_FILE_FIRST:\"请先选择一个图片\",MESSAGE_IMAGE_TYPES_LIMIT:\"只允许上传 jpg png jpeg gif 格式的图片\",MESSAGE_IMAGE_SIZE_LIMIT:\"图片大于20M\",MESSAGE_AUDIO_UPLOAD_FAIL:\"语音上传失败\",MESSAGE_AUDIO_SIZE_LIMIT:\"语音大于20M\",MESSAGE_VIDEO_UPLOAD_FAIL:\"视频上传失败\",MESSAGE_VIDEO_SIZE_LIMIT:\"视频大于20M\",MESSAGE_VIDEO_TYPES_LIMIT:\"只允许上传 mp4 格式的视频\",MESSAGE_FILE_UPLOAD_FAIL:\"文件上传失败\",MESSAGE_FILE_SELECT_FILE_FIRST:\"请先选择一个文件\",MESSAGE_FILE_SIZE_LIMIT:\"文件大于20M\",MESSAGE_FILE_URL_IS_EMPTY:\"缺少必要的参数文件 URL\",MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT:\"微信小程序暂时不支持文件选择功能\",CONVERSATION_NOT_FOUND:\"没有找到相应的会话，请检查传入参数\",USER_OR_GROUP_NOT_FOUND:\"没有找到相应的用户或群组，请检查传入参数\",CONVERSATION_UN_RECORDED_TYPE:\"未记录的会话类型\",ILLEGAL_GROUP_TYPE:\"非法的群类型，请检查传入参数\",CANNOT_JOIN_PRIVATE:\"不能加入 Private 类型的群组\",CANNOT_CHANGE_OWNER_IN_AVCHATROOM:\"AVChatRoom 类型的群组不能转让群主\",CANNOT_CHANGE_OWNER_TO_SELF:\"不能把群主转让给自己\",CANNOT_DISMISS_PRIVATE:\"不能解散 Private 类型的群组\",JOIN_GROUP_FAIL:\"加群失败，请检查传入参数或重试\",CANNOT_ADD_MEMBER_IN_AVCHATROOM:\"AVChatRoom 类型的群不支持邀请群成员\",CANNOT_KICK_MEMBER_IN_AVCHATROOM:\"不能在 AVChatRoom 类型的群组踢人\",NOT_OWNER:\"你不是群主，只有群主才有权限操作\",CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM:\"不能在 Private / AVChatRoom 类型的群中设置群成员身份\",INVALID_MEMBER_ROLE:\"不合法的群成员身份，请检查传入参数\",CANNOT_SET_SELF_MEMBER_ROLE:\"不能设置自己的群成员身份，请检查传入参数\",DEL_FRIEND_INVALID_PARAM:\"传入 deleteFriend 接口的参数无效\",GET_PROFILE_INVALID_PARAM:\"传入 getUserProfile 接口的参数无效\",UPDATE_PROFILE_INVALID_PARAM:\"传入 updateMyProfile 接口的参数无效\",ADD_BLACKLIST_INVALID_PARAM:\"传入 addToBlacklist 接口的参数无效\",DEL_BLACKLIST_INVALID_PARAM:\"传入 removeFromBlacklist 接口的参数无效\",CANNOT_ADD_SELF_TO_BLACKLIST:\"不能拉黑自己\",NETWORK_ERROR:\"网络错误\",NETWORK_TIMEOUT:\"请求超时\",NETWORK_BASE_OPTIONS_NO_URL:\"网络层初始化错误，缺少 URL 参数\",NETWORK_UNDEFINED_SERVER_NAME:\"打包错误，未定义的 serverName\",NETWORK_PACKAGE_UNDEFINED:\"未定义的 packageConfig\",SOCKET_NOT_SUPPORTED:\"当前浏览器不支持 WebSocket\",CONVERTOR_IRREGULAR_PARAMS:\"不规范的参数名称\",NOTICE_RUNLOOP_UNEXPECTED_CONDITION:\"意料外的通知条件\",NOTICE_RUNLOOP_OFFSET_LOST:\"_syncOffset 丢失\",UNCAUGHT_ERROR:\"未经明确定义的错误\",SDK_IS_NOT_READY:\"接口调用时机不合理，等待 SDK 处于 ready 状态后再调用（监听 TIM.EVENT.SDK_READY 事件）\",LONG_POLL_KICK_OUT:\"检测到多个 web 实例登录，消息通道下线\",SSO_LOG_MODEL_INIT_ERROR:\"SSOLogData 数据模型初始化错误\"},Hc=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this))).code=e.code,n.message=e.message,n.data=e.data||{},n}return pn(t,dn(Error)),t}(),Kc=\"1.7.3\",Yc=\"537048168\",zc=\"10\",Wc=\"protobuf\",Xc=\"json\",Jc={HOST:{TYPE:3,ACCESS_LAYER_TYPES:{SANDBOX:1,TEST:2,PRODUCTION:3},CURRENT:{COMMON:\"https://webim.tim.qq.com\",PIC:\"https://pic.tim.qq.com\",COS:\"https://yun.tim.qq.com\"},PRODUCTION:{COMMON:\"https://webim.tim.qq.com\",PIC:\"https://pic.tim.qq.com\",COS:\"https://yun.tim.qq.com\"},SANDBOX:{COMMON:\"https://events.tim.qq.com\",PIC:\"https://pic.tim.qq.com\",COS:\"https://yun.tim.qq.com\"},TEST:{COMMON:\"https://test.tim.qq.com\",PIC:\"https://pic.tim.qq.com\",COS:\"https://yun.tim.qq.com\"},setCurrent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;switch(e){case this.ACCESS_LAYER_TYPES.SANDBOX:this.CURRENT=this.SANDBOX,this.TYPE=this.ACCESS_LAYER_TYPES.SANDBOX;break;case this.ACCESS_LAYER_TYPES.TEST:this.CURRENT=this.TEST,this.TYPE=this.ACCESS_LAYER_TYPES.TEST;break;default:this.CURRENT=this.PRODUCTION,this.TYPE=this.ACCESS_LAYER_TYPES.PRODUCTION}}},NAME:{OPEN_IM:\"openim\",GROUP:\"group_open_http_svc\",FRIEND:\"sns\",PROFILE:\"profile\",RECENT_CONTACT:\"recentcontact\",PIC:\"openpic\",BIG_GROUP_NO_AUTH:\"group_open_http_noauth_svc\",BIG_GROUP_LONG_POLLING_NO_AUTH:\"group_open_long_polling_http_noauth_svc\",IM_OPEN_STAT:\"imopenstat\",WEB_IM:\"webim\",IM_COS_SIGN:\"im_cos_sign_svr\"},CMD:{ACCESS_LAYER:\"accesslayer\",LOGIN:\"login\",LOGOUT_LONG_POLL:\"longpollinglogout\",LOGOUT_ALL:\"logout\",PORTRAIT_GET:\"portrait_get\",PORTRAIT_SET:\"portrait_set\",GET_LONG_POLL_ID:\"getlongpollingid\",LONG_POLL:\"longpolling\",AVCHATROOM_LONG_POLL:\"get_msg\",FRIEND_ADD:\"friend_add\",FRIEND_GET_ALL:\"friend_get_all\",FRIEND_DELETE:\"friend_delete\",RESPONSE_PENDENCY:\"friend_response\",GET_PENDENCY:\"pendency_get\",DELETE_PENDENCY:\"pendency_delete\",GET_GROUP_PENDENCY:\"get_pendency\",GET_BLACKLIST:\"black_list_get\",ADD_BLACKLIST:\"black_list_add\",DELETE_BLACKLIST:\"black_list_delete\",CREATE_GROUP:\"create_group\",GET_JOINED_GROUPS:\"get_joined_group_list\",SEND_MESSAGE:\"sendmsg\",SEND_GROUP_MESSAGE:\"send_group_msg\",GET_GROUP_INFO:\"get_group_info\",GET_GROUP_MEMBER_INFO:\"get_specified_group_member_info\",GET_GROUP_MEMBER_LIST:\"get_group_member_info\",QUIT_GROUP:\"quit_group\",CHANGE_GROUP_OWNER:\"change_group_owner\",DESTROY_GROUP:\"destroy_group\",ADD_GROUP_MEMBER:\"add_group_member\",DELETE_GROUP_MEMBER:\"delete_group_member\",SEARCH_GROUP_BY_ID:\"get_group_public_info\",APPLY_JOIN_GROUP:\"apply_join_group\",HANDLE_APPLY_JOIN_GROUP:\"handle_apply_join_group\",MODIFY_GROUP_INFO:\"modify_group_base_info\",MODIFY_GROUP_MEMBER_INFO:\"modify_group_member_info\",DELETE_GROUP_SYSTEM_MESSAGE:\"deletemsg\",GET_CONVERSATION_LIST:\"get\",DELETE_CONVERSATION:\"delete\",GET_MESSAGES:\"getmsg\",GET_C2C_ROAM_MESSAGES:\"getroammsg\",GET_GROUP_ROAM_MESSAGES:\"group_msg_get\",SET_C2C_MESSAGE_READ:\"msgreaded\",SET_GROUP_MESSAGE_READ:\"msg_read_report\",FILE_READ_AND_WRITE_AUTHKEY:\"authkey\",FILE_UPLOAD:\"pic_up\",COS_SIGN:\"cos\",TIM_WEB_REPORT:\"tim_web_report\",BIG_DATA_HALLWAY_AUTH_KEY:\"authkey\"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:\"v4\",group_open_http_svc:\"v4\",sns:\"v4\",profile:\"v4\",recentcontact:\"v4\",openpic:\"v4\",group_open_http_noauth_svc:\"v1\",group_open_long_polling_http_noauth_svc:\"v1\",imopenstat:\"v4\",im_cos_sign_svr:\"v4\",webim:\"v3\"}};Jc.HOST.setCurrent(Jc.HOST.ACCESS_LAYER_TYPES.PRODUCTION);var Qc={request:{toAccount:\"To_Account\",fromAccount:\"From_Account\",to:\"To_Account\",from:\"From_Account\",groupID:\"GroupId\",avatar:\"FaceUrl\"},response:{GroupId:\"groupID\",Member_Account:\"userID\",MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",MsgSeq:\"sequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",MsgBody:\"elements\",MsgType:\"type\",MsgShow:\"messageShow\",NextMsgSeq:\"nextMessageSeq\",FaceUrl:\"avatar\",ProfileDataMod:\"profileModify\",Profile_Account:\"userID\",ValueBytes:\"value\",ValueNum:\"value\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgFrom_AccountExtraInfo:\"messageFromAccountExtraInformation\",Operator_Account:\"operatorID\",OpType:\"operationType\",ReportType:\"operationType\",UserId:\"userID\",User_Account:\"userID\",List_Account:\"userIDList\",MsgOperatorMemberExtraInfo:\"operatorInfo\",MsgMemberExtraInfo:\"memberInfoList\",ImageUrl:\"avatar\",NickName:\"nick\",MsgGroupNewInfo:\"newGroupProfile\",Owner_Account:\"ownerID\",GroupName:\"name\",GroupFaceUrl:\"avatar\",GroupIntroduction:\"introduction\",GroupNotification:\"notification\",GroupApplyJoinOption:\"joinOption\",MsgKey:\"messageKey\",GroupInfo:\"groupProfile\",Desc:\"description\",Ext:\"extension\"},ignoreKeyWord:[\"C2C\",\"ID\",\"USP\"]},Zc={CONTEXT_UPDATED:\"_contextWasUpdated\",CONTEXT_RESET:\"_contextWasReset\",CONTEXT_A2KEY_AND_TINYID_UPDATED:\"_a2KeyAndTinyIDUpdated\",RUNNING_STATE_CHANGE:\"_runningStateChange\",SYNC_MESSAGE_C2C_START:\"_noticeSynchronizationStart\",SYNC_MESSAGE_C2C_PROCESSING:\"_noticeIsSynchronizing\",SYNC_MESSAGE_C2C_FINISHED:\"_noticeIsSynchronized\",SYNC_MESSAGE_GROUP_SYSTEM_NOTICE_FINISHED:\"_groupSystemNoticeSyncFinished\",MESSAGE_SENDING:\"_sendingMessage\",MESSAGE_C2C_SEND_SUCCESS:\"_sendC2CMessageSuccess\",MESSAGE_C2C_SEND_FAIL:\"_sendC2CMessageFail\",MESSAGE_SYNC_PROCESSING:\"_syncMessageProcessing\",MESSAGE_SYNC_FINISHED:\"_syncMessageFinished\",MESSAGE_C2C_INSTANT_RECEIVED:\"_receiveInstantMessage\",MESSAGE_C2C_RECEIVE_ROAMING_SUCCESS:\"_receiveC2CRoamingMessageSuccess\",MESSAGE_C2C_RECEIVE_ROAMING_FAIL:\"_receiveC2CRoamingMessageFail\",MESSAGE_GROUP_SEND_SUCCESS:\"_sendGroupMessageSuccess\",MESSAGE_GROUP_SEND_FAIL:\"_sendGroupMessageFail\",MESSAGE_GROUP_RECEIVE_ROAMING_SUCCESS:\"_receiveGroupRoamingMessageSuccess\",MESSAGE_GROUP_RECEIVE_ROAMING_FAIL:\"_receiveGroupRoamingMessageFail\",MESSAGE_GROUP_INSTANT_RECEIVED:\"_receiveGroupInstantMessage\",MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED:\"_receveGroupSystemNotice\",NOTICE_LONGPOLL_GETID_SUCCESS:\"_getLongPollIDSuccess\",NOTICE_LONGPOLL_GETID_FAIL:\"_getLongPollIDFail\",NOTICE_LONGPOLL_START:\"_longPollStart\",NOTICE_LONGPOLL_IN_POLLING:\"_longPollInPolling\",NOTICE_LONGPOLL_REQUEST_ARRIVED:\"_longPollInArrived\",NOTICE_LONGPOLL_REQUEST_NOT_ARRIVED:\"_longPollInNotArrived\",NOTICE_LONGPOLL_JITTER:\"_longPollJitter\",NOTICE_LONGPOLL_SOON_RECONNECT:\"_longPollSoonReconnect\",NOTICE_LONGPOLL_LONG_RECONNECT:\"_longPollLongReconnect\",NOTICE_LONGPOLL_DISCONNECT:\"_longpollChannelDisconnect\",NOTICE_LONGPOLL_STOPPED:\"_longPollStopped\",NOTICE_LONGPOLL_KICKED_OUT:\"_longPollKickedOut\",NOTICE_LONGPOLL_MUTIPLE_DEVICE_KICKED_OUT:\"_longPollMitipuleDeviceKickedOut\",NOTICE_LONGPOLL_NEW_C2C_NOTICE:\"_longPollGetNewC2CNotice\",NOTICE_LONGPOLL_NEW_C2C_MESSAGES:\"_longPollGetNewC2CMessages\",NOTICE_LONGPOLL_NEW_GROUP_MESSAGES:\"_longPollGetNewGroupMessages\",NOTICE_LONGPOLL_NEW_GROUP_TIPS:\"_longPollGetNewGroupTips\",NOTICE_LONGPOLL_NEW_GROUP_NOTICE:\"_longPollGetNewGroupNotice\",NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES:\"_longPollGetNewFriendMessages\",NOTICE_LONGPOLL_SEQUENCE_UPDATE:\"_longPollNoticeSequenceUpdate\",NOTICE_LONGPOLL_PROFILE_MODIFIED:\"_longPollProfileModified\",NOTICE_LONGPOLL_RECEIVE_SYSTEM_ORDERS:\"_longPollNoticeReceiveSystemOrders\",NOTICE_LONGPOLL_RESTART:\"_longpollRestart\",APPLY_ADD_FRIEND_SUCCESS:\"_addFriendApplySendSucess\",APPLY_ADD_FRIEND_FAIL:\"_addFriendApplySendFail\",APPLY_GET_PENDENCY_SUCCESS:\"_applyGetPendenciesSucess\",APPLY_GET_PENDENCY_FAIL:\"_applyGetPendenciesFail\",APPLY_DELETE_SUCCESS:\"_applyDeletedSucess\",APPLY_DELETE_FAIL:\"_applyDeletedFail\",GROUP_CREATE_SUCCESS:\"_createGroupSuccess\",GROUP_CREATE_FAIL:\"_createGroupFail\",GROUP_LIST_UPDATED:\"_onGroupListUpdated\",SIGN_LOGIN_CHANGE:\"_loginStatusChange\",SIGN_LOGIN:\"_login\",SIGN_LOGIN_SUCCESS:\"_loginSuccess\",SIGN_LOGIN_FAIL:\"_loginFail\",SIGN_LOGININFO_UPDATED:\"_signLoginInfoUpdated\",SIGN_LOGOUT_EXECUTING:\"_signLogoutExcuting\",SIGN_LOGOUT_SUCCESS:\"_logoutSuccess\",SIGN_GET_ACCESS_LAYER_CHANGE:\"_getAccessLayerStatusChange\",SIGN_GET_ACCESS_LAYER_SUCCESS:\"_getAccessLayerSuccess\",SIGN_GET_ACCESS_LAYER_FAIL:\"_getAccessLayerFail\",ERROR_DETECTED:\"_errorHasBeenDetected\",CONVERSATION_LIST_UPDATED:\"_onConversationListUpdated\",CONVERSATION_LIST_PROFILE_UPDATED:\"_onConversationListProfileUpdated\",CONVERSATION_DELETED:\"_conversationDeleted\",PROFILE_UPDATED:\"onProfileUpdated\",FRIEND_GET_SUCCESS:\"_getFriendsSuccess\",FRIEND_GET_FAIL:\"_getFriendsFail\",FRIEND_DELETE_SUCCESS:\"_deleteFriendSuccess\",FRIEND_DELETE_FAIL:\"_deleteFriendFail\",BLACKLIST_ADD_SUCCESS:\"_addBlacklistSuccess\",BLACKLIST_ADD_FAIL:\"_addBlacklistFail\",BLACKLIST_GET_SUCCESS:\"_getBlacklistSuccess\",BLACKLIST_GET_FAIL:\"_getBlacklistFail\",AVCHATROOM_OPTIONS_UPDATED:\"_AVChatRoomOptionsUpdated\",AVCHATROOM_JOIN_SUCCESS:\"joinAVChatRoomSuccess\",SDK_MEMORY_STATUS_UPDATE:\"_sdkMemoryStatusUpdate\",SDK_READY:\"_sdkStateReady\",SDK_SSO_LOGGER:\"_sdkSSOLogger\"},$c=Ve.filter;De({target:\"Array\",proto:1,forced:!Qt(\"filter\")},{filter:function(e){return $c(this,e,arguments.length>1?arguments[1]:void 0)}}),De({target:\"Object\",stat:1,forced:Object.assign!==Hs},{assign:Hs});var el=Yr.trim;function tl(e,t){if(\"string\"!=typeof e&&!Array.isArray(e))throw new TypeError(\"Expected the input to be `string | string[]`\");t=Object.assign({pascalCase:0},t);var n;return 0===(e=Array.isArray(e)?e.map(function(e){return e.trim()}).filter(function(e){return e.length}).join(\"-\"):e.trim()).length?\"\":1===e.length?t.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=nl(e)),e=e.replace(/^[_.\\- ]+/,\"\").toLowerCase().replace(/[_.\\- ]+(\\w|$)/g,function(e,t){return t.toUpperCase()}).replace(/\\d+(\\w|$)/g,function(e){return e.toUpperCase()}),n=e,t.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)}De({target:\"String\",proto:1,forced:function(e){return u(function(){return!!Vr[e]()||\"​᠎\"!=\"​᠎\"[e]()||Vr[e].name!==e})}(\"trim\")},{trim:function(){return el(this)}});var nl=function(e){for(var t=0,n=0,r=0,o=0;o<e.length;o++){var i=e[o];t&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.slice(0,o)+\"-\"+e.slice(o),t=0,r=n,n=1,o++):n&&r&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.slice(0,o-1)+\"-\"+e.slice(o-1),r=n,n=0,t=1):(t=i.toLowerCase()===i&&i.toUpperCase()!==i,r=n,n=i.toUpperCase()===i&&i.toLowerCase()!==i)}return e};function rl(e,t,n){var r=[],o=0,i=function e(t,n){if(++o>10)return o--,t;if(gs(t)){var i=t.map(function(t){return fs(t)?e(t,n):t});return o--,i}if(fs(t)){var a=(s=t,u=function(e,t){if(!Es(t))return 0;if((a=t)!==tl(a)){for(var o=1,i=0;i<Qc.ignoreKeyWord.length;i++)if(t.includes(Qc.ignoreKeyWord[i])){o=0;break}o&&r.push(t)}var a;return ds(n[t])?function(e){return e[0].toUpperCase()+tl(e).slice(1)}(t):n[t]},c=Object.create(null),Object.keys(s).forEach(function(e){var t=u(s[e],e);t&&(c[t]=s[e])}),c);return a=ks(a,function(t,r){return gs(t)||fs(t)?e(t,n):t}),o--,a}var s,u,c}(e,t=ln({},Qc.request,{},t));return r.length>0&&n.innerEmitter.emit(Zc.ERROR_DETECTED,{code:Bc.CONVERTOR_IRREGULAR_PARAMS,message:Bc.CONVERTOR_IRREGULAR_PARAMS}),i}function ol(e,t){if(t=ln({},Qc.response,{},t),gs(e))return e.map(function(e){return fs(e)?ol(e,t):e});if(fs(e)){var n=(r=e,o=function(e,n){return ds(t[n])?tl(n):t[n]},i={},Object.keys(r).forEach(function(e){i[o(r[e],e)]=r[e]}),i);return n=ks(n,function(e){return gs(e)||fs(e)?ol(e,t):e})}var r,o,i}var il=function(){function e(t,n){var r=this;if(on(this,e),void 0===n)throw new Hc({code:Bc.NO_SDK_INSTANCE,message:jc.NO_SDK_INSTANCE});this.tim=n,this.method=t.method||\"POST\",this._initializeServerMap(),this._initializeURL(t),this._initializeRequestData(t),this.callback=function(e){return ol(e=t.decode(e),r._getResponseMap(t))}}return sn(e,[{key:\"_initializeServerMap\",value:function(){this._serverMap=Object.create(null);var e=\"\";for(var t in Jc.NAME)if(Object.prototype.hasOwnProperty.call(Jc.NAME,t))switch(e=Jc.NAME[t]){case Jc.NAME.PIC:this._serverMap[e]=Jc.HOST.CURRENT.PIC;break;case Jc.NAME.IM_COS_SIGN:this._serverMap[e]=Jc.HOST.CURRENT.COS;break;default:this._serverMap[e]=Jc.HOST.CURRENT.COMMON}}},{key:\"_getHost\",value:function(e){if(void 0!==this._serverMap[e])return this._serverMap[e];throw new Hc({code:Bc.NETWORK_UNDEFINED_SERVER_NAME,message:jc.NETWORK_UNDEFINED_SERVER_NAME})}},{key:\"_initializeURL\",value:function(e){var t=e.serverName,n=e.cmd,r=this._getHost(t),o=\"\".concat(r,\"/\").concat(Jc.NAME_VERSION[t],\"/\").concat(t,\"/\").concat(n);o+=\"?\".concat(this._getQueryString(e.queryString)),this.url=o}},{key:\"getUrl\",value:function(){return this.url.replace(/&reqtime=(\\d+)/,\"&reqtime=\".concat(Math.ceil(+new Date/1e3)))}},{key:\"_initializeRequestData\",value:function(e){var t,n=e.requestData;t=this._requestDataCleaner(n),this.requestData=e.encode(t)}},{key:\"_requestDataCleaner\",value:function(e){var t=Array.isArray(e)?[]:Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Es(n)&&null!==e[n]&&(\"object\"!==rn(e[n])?t[n]=e[n]:t[n]=this._requestDataCleaner.bind(this)(e[n]));return t}},{key:\"_getQueryString\",value:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(\"function\"!=typeof e[n]?t.push(\"\".concat(n,\"=\").concat(e[n])):t.push(\"\".concat(n,\"=\").concat(e[n]())));return t.join(\"&\")}},{key:\"_getResponseMap\",value:function(e){if(e.keyMaps&&e.keyMaps.response&&Object.keys(e.keyMaps.response).length>0)return e.keyMaps.response}}]),e}(),al=[].slice,sl=/MSIE .\\./.test(Wo),ul=function(e){return function(t,n){var r=arguments.length>2,o=r?al.call(arguments,2):void 0;return e(r?function(){(\"function\"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};function cl(e){this.mixin(e)}De({global:1,bind:1,forced:sl},{setTimeout:ul(s.setTimeout),setInterval:ul(s.setInterval)}),cl.mixin=function(e){var t=e.prototype||e;t._isReady=0,t.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){var e=this;this._isReady=1,setTimeout(function(){var t=e._readyQueue;e._readyQueue=[],t&&t.length>0&&t.forEach(function(e){e.call(this)},e)},1)},t.resetReady=function(){this._isReady=0,this._readyQueue=[]},t.isReady=function(){return this._isReady}};var ll=function(){function e(t){if(on(this,e),0==!!t)throw new Hc({code:Bc.NO_SDK_INSTANCE,message:jc.NO_SDK_INSTANCE});cl.mixin(this),this.tim=t,this.innerEmitter=t.innerEmitter,this.connectionController=t.connectionController,this.packageConfig=t.packageConfig,this.packageConfig.update(t)}return sn(e,[{key:\"createPackage\",value:function(e){var t=this.packageConfig.get(e);return t?new il(t,this.tim):0}},{key:\"reset\",value:function(){as.warn([\"method: IMController.reset() method must be implemented\"].join())}},{key:\"destroy\",value:function(){as.warn(\"destory\")}}]),e}();De({target:\"Object\",stat:1,forced:!c,sham:!c},{defineProperty:P.f});var pl=function(){function e(t,n){on(this,e),this.data=t,this.tim=n,this.defaultData={},Object.assign(this.defaultData,t),this.initGetterAndSetter()}return sn(e,[{key:\"initGetterAndSetter\",value:function(){var e=this,t=this.tim,n=function(n,r){Object.defineProperty(e,n,{enumerable:1,configurable:1,get:function(){return e.data[n]},set:function(r){e.data[n]=r,e.onChange.bind(e)(t.context,n,r)}})};for(var r in e.data)Object.prototype.hasOwnProperty.call(e.data,r)&&n(r,e.data[r])}},{key:\"onChange\",value:function(e,t,n){this.tim.innerEmitter.emit(Zc.CONTEXT_UPDATED,{data:{context:e,key:t,value:n}})}},{key:\"reset\",value:function(){var e=this.tim;for(var t in this.data)Object.prototype.hasOwnProperty.call(this.data,t)&&(this.data[t]=this.defaultData.hasOwnProperty(t)?this.defaultData[t]:null);this.tim.innerEmitter.emit(Zc.CONTEXT_RESET,{data:e.context})}}]),e}(),fl={SUCCESS:\"JoinedSuccess\",WAIT_APPROVAL:\"WaitAdminApproval\"},hl={COMMON:{SUCCESS:\"OK\",FAIL:\"FAIL\"},REQUEST:{SUCCESS:0},ACCESS_LAYER:{PRODUCTION:0,TEST:1},LOGIN:{IS_LOGIN:1,IS_NOT_LOGIN:0},SYNC_MESSAGE:{SYNCHRONIZATION_START:0,SYNCHRONIZING:1,SYNCHRONIZED:2},MESSAGE_STATUS:{UNSEND:\"unSend\",SUCCESS:\"success\",FAIL:\"fail\"},GET_HISTORY_MESSAGE_STATUS:{C2C_IS_FINISHED:1,C2C_IS_NOT_FINISHED:0,GROUP_IS_FINISHED:1,GROUP_IS_NOT_FINISHED:0},ACCOUNT_STATUS:{SIGN_IN:1,SIGN_OUT:0},CHANNEL_STATUS:{ONLINE:1,OFFLINE:0},JOIN_GROUP_STATUS:fl,UPLOAD:{FINISHED:1,UPLOADING:0}},gl=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e)))._initContext(),n._initListener(),n}return pn(t,ll),sn(t,[{key:\"reset\",value:function(){this.tim.context.reset()}},{key:\"_IAmReady\",value:function(){this.triggerReady()}},{key:\"_initListener\",value:function(){this.tim.innerEmitter.on(Zc.SIGN_LOGIN_SUCCESS,this._updateA2KeyAndTinyID,this)}},{key:\"_updateA2KeyAndTinyID\",value:function(e){var t=e.data,n=t.a2Key,r=t.tinyID;this.set(\"a2Key\",n),this.set(\"tinyID\",r),this.tim.innerEmitter.emit(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,{data:{context:this.tim.context}}),this._IAmReady()}},{key:\"get\",value:function(e){return this.tim.context[e]}},{key:\"set\",value:function(e,t){this.tim.context[e]=t}},{key:\"_initContext\",value:function(){var e=this.tim.loginInfo;this.tim.context=new pl({login:hl.LOGIN.IS_NOT_LOGIN,SDKAppID:e.SDKAppID,appIDAt3rd:null,accountType:e.accountType,identifier:e.identifier,tinyID:null,identifierNick:e.identifierNick,userSig:e.userSig,a2Key:null,contentType:\"json\",apn:1},this.tim),this.tim.innerEmitter.on(Zc.CONTEXT_UPDATED,this._onContextMemberChange.bind(this))}},{key:\"_onContextMemberChange\",value:function(e){var t=e.data,n=t.key,r=t.value;switch(n){case\"tinyID\":r.length<=0?this.tim.context.login=hl.LOGIN.IS_NOT_LOGIN:this.tim.context.login=null!==this.tim.context.a2Key?hl.LOGIN.IS_LOGIN:hl.LOGIN.IS_NOT_LOGIN;break;case\"a2Key\":r.length<=0?this.tim.context.login=hl.LOGIN.IS_NOT_LOGIN:this.tim.context.login=null!==this.tim.context.tinyID?hl.LOGIN.IS_LOGIN:hl.LOGIN.IS_NOT_LOGIN}}}]),t}(),dl={JSON:{TYPE:{C2C:{NOTICE:1,COMMON:9,EVENT:10},GROUP:{COMMON:3,TIP:4,SYSTEM:5,TIP2:6},FRIEND:{NOTICE:7},PROFILE:{NOTICE:8}},SUBTYPE:{C2C:{COMMON:0,READED:92,KICKEDOUT:96},GROUP:{COMMON:0,LOVEMESSAGE:1,TIP:2,REDPACKET:3}},OPTIONS:{GROUP:{JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7}}},PROTOBUF:{},IMAGE_TYPES:{ORIGIN:1,LARGE:2,SMALL:3},IMAGE_FORMAT:{JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255}},ml=1,_l=2,vl=3,yl=4,El=5,Il=7,Sl=8,Cl=9,Tl=10,Ml=15,Al=255,Ol=2,Dl=0,Nl=1,Ll={NICK:\"Tag_Profile_IM_Nick\",GENDER:\"Tag_Profile_IM_Gender\",BIRTHDAY:\"Tag_Profile_IM_BirthDay\",LOCATION:\"Tag_Profile_IM_Location\",SELFSIGNATURE:\"Tag_Profile_IM_SelfSignature\",ALLOWTYPE:\"Tag_Profile_IM_AllowType\",LANGUAGE:\"Tag_Profile_IM_Language\",AVATAR:\"Tag_Profile_IM_Image\",MESSAGESETTINGS:\"Tag_Profile_IM_MsgSettings\",ADMINFORBIDTYPE:\"Tag_Profile_IM_AdminForbidType\",LEVEL:\"Tag_Profile_IM_Level\",ROLE:\"Tag_Profile_IM_Role\"},Rl={UNKNOWN:\"Gender_Type_Unknown\",FEMALE:\"Gender_Type_Female\",MALE:\"Gender_Type_Male\"},Pl={NONE:\"AdminForbid_Type_None\",SEND_OUT:\"AdminForbid_Type_SendOut\"},Gl={NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_ANY:\"AllowType_Type_AllowAny\",DENY_ANY:\"AllowType_Type_DenyAny\"},kl=function e(t){on(this,e),this.code=0,this.data=t||{}},wl=null,bl=function(e){wl=e},Ul=function(e){return e instanceof kl?(as.warn(\"IMPromise.resolve 此函数会自动用options创建IMResponse实例，调用侧不需创建，建议修改！\"),Promise.resolve(e)):Promise.resolve(new kl(e))},Fl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Hc)return t&&null!==wl&&wl.emit(Wt.ERROR,e),Promise.reject(e);if(e instanceof Error){as.warn(\"IMPromise.reject options not instanceof IMError! details:\",e);var n=new Hc({code:Bc.UNCAUGHT_ERROR,message:e.message});return t&&null!==wl&&wl.emit(Wt.ERROR,n),Promise.reject(n)}if(ds(e)||ds(e.code)||ds(e.message))as.error(\"IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!\");else{if(ls(e.code)&&ps(e.message)){var r=new Hc(e);return t&&null!==wl&&wl.emit(Wt.ERROR,r),Promise.reject(r)}as.error(\"IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!\")}},xl=\"sdkReady\",ql=\"login\",Vl=\"initConversationList\",Bl=\"initGroupList\",jl=\"upload\",Hl=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).devLoginTips='new TIM({\\n      SDKAppID: \"必填\",\\n      accountType: \"必填\",\\n      identifier: \"必填\",\\n      userSig: \"必填\",\\n      identifierNick: \"可选\"\\n    })\\n    ',n._initializeListener(),n}return pn(t,ll),sn(t,[{key:\"login\",value:function(e){if(1==this._isLogin()&&this._isLoginCurrentUser(e.identifier))return this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_RESTART),Ul(new kl(\"重启消息通道\"));if(this._isLogin()){var t=\"您已经登录账号\".concat(e.identifier,\"！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。\");return as.warn(t),Ul(new kl(t))}as.log(\"SignController.login userID=\",e.identifier),as.time(ql);var n=this._checkLoginInfo(e);return bs(n)?(this.tim.context.identifier=e.identifier,this.tim.context.userSig=e.userSig,this.tim.context.SDKAppID=e.SDKAppID,this.tim.context.accountType=e.accountType,this.tim.context.identifier&&this.tim.context.userSig?(this.tim.innerEmitter.emit(Zc.SIGN_LOGIN),this._accessLayer()):void 0):Fl(n)}},{key:\"_isLogin\",value:function(){return!!this.tim.context.a2Key}},{key:\"_isLoginCurrentUser\",value:function(e){return this.tim.context.identifier===e}},{key:\"_initializeListener\",value:function(){this.innerEmitter.on(Zc.NOTICE_LONGPOLL_KICKED_OUT,this._onKickedOut,this),this.innerEmitter.on(Zc.NOTICE_LONGPOLL_MUTIPLE_DEVICE_KICKED_OUT,this._onMultipleDeviceKickedOut,this)}},{key:\"_accessLayer\",value:function(){var e=this;as.log(\"SignController._accessLayer.\");var t=this.createPackage({name:\"accessLayer\",action:\"query\"});return this.tim.connectionController.request(t).then(function(t){return as.log(\"SignController._accessLayer ok. webImAccessLayer=\",t.data.webImAccessLayer),1===t.data.webImAccessLayer&&Jc.HOST.setCurrent(t.data.webImAccessLayer),e._login()}).catch(function(e){return as.error(\"SignController._accessLayer error:\",e),Fl(e)})}},{key:\"_login\",value:function(){var e=this,t=this.createPackage({name:\"login\",action:\"query\"});return this.connectionController.request(t).then(function(t){if(0==!!t.data.tinyID)throw new Hc({code:Bc.NO_TINYID,message:jc.NO_TINYID});if(0==!!t.data.a2Key)throw new Hc({code:Bc.NO_A2KEY,message:jc.NO_A2KEY});return as.log(\"SignController.login ok. userID=\".concat(e.tim.loginInfo.identifier,\" loginCost=\").concat(as.timeEnd(ql),\"ms\")),e.tim.innerEmitter.emit(Zc.SIGN_LOGIN_SUCCESS,{data:{a2Key:t.data.a2Key,tinyID:t.data.tinyID}}),e.tim.outerEmitter.emit(Wt.LOGIN_SUCCESS),Ul(t.data)}).catch(function(e){return as.error(\"SignController.login error:\",e),Fl(e)})}},{key:\"logout\",value:function(){return as.info(\"SignController.logout\"),this.tim.innerEmitter.emit(Zc.SIGN_LOGOUT_EXECUTING),Promise.all(this._logout(Nl),this._logout(Dl)).then(this._emitLogoutSuccess.bind(this)).catch(this._emitLogoutSuccess.bind(this))}},{key:\"_logout\",value:function(e){var t=this.tim.notificationController,n=e===Dl?\"logout\":\"longPollLogout\",r=e===Dl?{name:n,action:\"query\"}:{name:n,action:\"query\",param:{longPollID:t.getLongPollID()}},o=this.createPackage(r);return this.connectionController.request(o).catch(function(e){return as.error(\"SignController._logout error:\",e),Fl(e)})}},{key:\"_checkLoginInfo\",value:function(e){var t=0,n=\"\";return null===e.SDKAppID?(t=Bc.NO_SDKAPPID,n=jc.NO_SDKAPPID):null===e.accountType?(t=Bc.NO_ACCOUNT_TYPE,n=jc.NO_ACCOUNT_TYPE):null===e.identifier?(t=Bc.NO_IDENTIFIER,n=jc.NO_IDENTIFIER):null===e.userSig&&(t=Bc.NO_USERSIG,n=jc.NO_USERSIG),bs(t)||bs(n)?{}:{code:t,message:n}}},{key:\"_emitLogoutSuccess\",value:function(){return this.tim.innerEmitter.emit(Zc.SIGN_LOGOUT_SUCCESS),Ul({})}},{key:\"_onKickedOut\",value:function(){var e=this;this.tim.logout().then(function(){as.warn(\"SignController._onKickedOut kicked out.       userID=\".concat(e.tim.loginInfo.identifier)),e.tim.outerEmitter.emit(Wt.KICKED_OUT,{type:Xt.KICKED_OUT_MULT_ACCOUNT})})}},{key:\"_onMultipleDeviceKickedOut\",value:function(){var e=this;this.tim.logout().then(function(){as.warn(\"SignController._onKickedOut kicked out.       userID=\".concat(e.tim.loginInfo.identifier)),e.tim.outerEmitter.emit(Wt.KICKED_OUT,{type:Xt.KICKED_OUT_MULT_DEVICE})})}},{key:\"reset\",value:function(){}}]),t}(),Kl=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Yl=Object.prototype.toString;function zl(e){return\"[object Array]\"===Yl.call(e)}function Wl(e){return null!==e&&\"object\"==typeof e}function Xl(e){return\"[object Function]\"===Yl.call(e)}function Jl(e,t){if(null!=e)if(\"object\"!=typeof e&&(e=[e]),zl(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var Ql={isArray:zl,isArrayBuffer:function(e){return\"[object ArrayBuffer]\"===Yl.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&\"function\"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return\"undefined\"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return\"undefined\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return\"string\"==typeof e},isNumber:function(e){return\"number\"==typeof e},isObject:Wl,isUndefined:function(e){return void 0===e},isDate:function(e){return\"[object Date]\"===Yl.call(e)},isFile:function(e){return\"[object File]\"===Yl.call(e)},isBlob:function(e){return\"[object Blob]\"===Yl.call(e)},isFunction:Xl,isStream:function(e){return Wl(e)&&Xl(e.pipe)},isURLSearchParams:function(e){return\"undefined\"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return\"undefined\"==typeof navigator||\"ReactNative\"!==navigator.product&&\"NativeScript\"!==navigator.product&&\"NS\"!==navigator.product?\"undefined\"!=typeof window&&\"undefined\"!=typeof document:0},forEach:Jl,merge:function e(){var t={};function n(n,r){\"object\"==typeof t[r]&&\"object\"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)Jl(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){\"object\"==typeof t[r]&&\"object\"==typeof n?t[r]=e(t[r],n):t[r]=\"object\"==typeof n?e({},n):n}for(var r=0,o=arguments.length;r<o;r++)Jl(arguments[r],n);return t},extend:function(e,t,n){return Jl(t,function(t,r){e[r]=n&&\"function\"==typeof t?Kl(t,n):t}),e},trim:function(e){return e.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\")}};function Zl(e){return encodeURIComponent(e).replace(/%40/gi,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}var $l=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(Ql.isURLSearchParams(t))r=t.toString();else{var o=[];Ql.forEach(t,function(e,t){null!=e&&(Ql.isArray(e)?t+=\"[]\":e=[e],Ql.forEach(e,function(e){Ql.isDate(e)?e=e.toISOString():Ql.isObject(e)&&(e=JSON.stringify(e)),o.push(Zl(t)+\"=\"+Zl(e))}))}),r=o.join(\"&\")}if(r){var i=e.indexOf(\"#\");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+r}return e};function ep(){this.handlers=[]}ep.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},ep.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},ep.prototype.forEach=function(e){Ql.forEach(this.handlers,function(t){null!==t&&e(t)})};var tp=ep,np=function(e,t,n){return Ql.forEach(n,function(n){e=n(e,t)}),e},rp=function(e){return!(!e||!e.__CANCEL__)};function op(){throw new Error(\"setTimeout has not been defined\")}function ip(){throw new Error(\"clearTimeout has not been defined\")}var ap=op,sp=ip;function up(e){if(ap===setTimeout)return setTimeout(e,0);if((ap===op||!ap)&&setTimeout)return ap=setTimeout,setTimeout(e,0);try{return ap(e,0)}catch(t){try{return ap.call(null,e,0)}catch(t){return ap.call(this,e,0)}}}\"function\"==typeof Qa.setTimeout&&(ap=setTimeout),\"function\"==typeof Qa.clearTimeout&&(sp=clearTimeout);var cp,lp=[],pp=0,fp=-1;function hp(){pp&&cp&&(pp=0,cp.length?lp=cp.concat(lp):fp=-1,lp.length&&gp())}function gp(){if(!pp){var e=up(hp);pp=1;for(var t=lp.length;t;){for(cp=lp,lp=[];++fp<t;)cp&&cp[fp].run();fp=-1,t=lp.length}cp=null,pp=0,function(e){if(sp===clearTimeout)return clearTimeout(e);if((sp===ip||!sp)&&clearTimeout)return sp=clearTimeout,clearTimeout(e);try{sp(e)}catch(t){try{return sp.call(null,e)}catch(t){return sp.call(this,e)}}}(e)}}function dp(e,t){this.fun=e,this.array=t}dp.prototype.run=function(){this.fun.apply(null,this.array)};function mp(){}var _p=mp,vp=mp,yp=mp,Ep=mp,Ip=mp,Sp=mp,Cp=mp;var Tp=Qa.performance||{},Mp=Tp.now||Tp.mozNow||Tp.msNow||Tp.oNow||Tp.webkitNow||function(){return(new Date).getTime()};var Ap=new Date;var Op={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];lp.push(new dp(e,t)),1!==lp.length||pp||up(gp)},title:\"browser\",browser:1,env:{},argv:[],version:\"\",versions:{},on:_p,addListener:vp,once:yp,off:Ep,removeListener:Ip,removeAllListeners:Sp,emit:Cp,binding:function(e){throw new Error(\"process.binding is not supported\")},cwd:function(){return\"/\"},chdir:function(e){throw new Error(\"process.chdir is not supported\")},umask:function(){return 0},hrtime:function(e){var t=.001*Mp.call(Tp),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:\"browser\",release:{},config:{},uptime:function(){return(new Date-Ap)/1e3}},Dp=function(e,t){Ql.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})},Np=function(e,t,n,r,o){return function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=1,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,o)},Lp=[\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"],Rp=Ql.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement(\"a\");function r(e){var r=e;return t&&(n.setAttribute(\"href\",r),r=n.href),n.setAttribute(\"href\",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,\"\"):\"\",host:n.host,search:n.search?n.search.replace(/^\\?/,\"\"):\"\",hash:n.hash?n.hash.replace(/^#/,\"\"):\"\",hostname:n.hostname,port:n.port,pathname:\"/\"===n.pathname.charAt(0)?n.pathname:\"/\"+n.pathname}}return e=r(window.location.href),function(t){var n=Ql.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return 1},Pp=Ql.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var a=[];a.push(e+\"=\"+encodeURIComponent(t)),Ql.isNumber(n)&&a.push(\"expires=\"+new Date(n).toGMTString()),Ql.isString(r)&&a.push(\"path=\"+r),Ql.isString(o)&&a.push(\"domain=\"+o),1==i&&a.push(\"secure\"),document.cookie=a.join(\"; \")},read:function(e){var t=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+e+\")=([^;]*)\"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,\"\",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Gp=function(e){return new Promise(function(t,n){var r=e.data,o=e.headers;Ql.isFormData(r)&&delete o[\"Content-Type\"];var i=new XMLHttpRequest;if(e.auth){var a=e.auth.username||\"\",s=e.auth.password||\"\";o.Authorization=\"Basic \"+btoa(a+\":\"+s)}if(i.open(e.method.toUpperCase(),$l(e.url,e.params,e.paramsSerializer),1),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf(\"file:\"))){var r=\"getAllResponseHeaders\"in i?function(e){var t,n,r,o={};return e?(Ql.forEach(e.split(\"\\n\"),function(e){if(r=e.indexOf(\":\"),t=Ql.trim(e.substr(0,r)).toLowerCase(),n=Ql.trim(e.substr(r+1)),t){if(o[t]&&Lp.indexOf(t)>=0)return;o[t]=\"set-cookie\"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+\", \"+n:n}}),o):o}(i.getAllResponseHeaders()):null,o={data:e.responseType&&\"text\"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:r,config:e,request:i};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(Np(\"Request failed with status code \"+n.status,n.config,null,n.request,n))}(t,n,o),i=null}},i.onabort=function(){i&&(n(Np(\"Request aborted\",e,\"ECONNABORTED\",i)),i=null)},i.onerror=function(){n(Np(\"Network Error\",e,null,i)),i=null},i.ontimeout=function(){n(Np(\"timeout of \"+e.timeout+\"ms exceeded\",e,\"ECONNABORTED\",i)),i=null},Ql.isStandardBrowserEnv()){var u=Pp,c=(e.withCredentials||Rp(e.url))&&e.xsrfCookieName?u.read(e.xsrfCookieName):void 0;c&&(o[e.xsrfHeaderName]=c)}if(\"setRequestHeader\"in i&&Ql.forEach(o,function(e,t){void 0===r&&\"content-type\"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)}),e.withCredentials&&(i.withCredentials=1),e.responseType)try{i.responseType=e.responseType}catch(l){if(\"json\"!==e.responseType)throw l}\"function\"==typeof e.onDownloadProgress&&i.addEventListener(\"progress\",e.onDownloadProgress),\"function\"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener(\"progress\",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){i&&(i.abort(),n(e),i=null)}),void 0===r&&(r=null),i.send(r)})},kp={\"Content-Type\":\"application/x-www-form-urlencoded\"};function wp(e,t){!Ql.isUndefined(e)&&Ql.isUndefined(e[\"Content-Type\"])&&(e[\"Content-Type\"]=t)}var bp,Up={adapter:(void 0!==Op&&\"[object process]\"===Object.prototype.toString.call(Op)?bp=Gp:\"undefined\"!=typeof XMLHttpRequest&&(bp=Gp),bp),transformRequest:[function(e,t){return Dp(t,\"Accept\"),Dp(t,\"Content-Type\"),Ql.isFormData(e)||Ql.isArrayBuffer(e)||Ql.isBuffer(e)||Ql.isStream(e)||Ql.isFile(e)||Ql.isBlob(e)?e:Ql.isArrayBufferView(e)?e.buffer:Ql.isURLSearchParams(e)?(wp(t,\"application/x-www-form-urlencoded;charset=utf-8\"),e.toString()):Ql.isObject(e)?(wp(t,\"application/json;charset=utf-8\"),JSON.stringify(e)):e}],transformResponse:[function(e){if(\"string\"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};Up.headers={common:{Accept:\"application/json, text/plain, */*\"}},Ql.forEach([\"delete\",\"get\",\"head\"],function(e){Up.headers[e]={}}),Ql.forEach([\"post\",\"put\",\"patch\"],function(e){Up.headers[e]=Ql.merge(kp)});var Fp=Up;function xp(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var qp=function(e){var t,n,r;return xp(e),e.baseURL&&(r=e.url,!/^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(r))&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\\/+$/,\"\")+\"/\"+n.replace(/^\\/+/,\"\"):t)),e.headers=e.headers||{},e.data=np(e.data,e.headers,e.transformRequest),e.headers=Ql.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),Ql.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],function(t){delete e.headers[t]}),(e.adapter||Fp.adapter)(e).then(function(t){return xp(e),t.data=np(t.data,t.headers,e.transformResponse),t},function(t){return rp(t)||(xp(e),t&&t.response&&(t.response.data=np(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},Vp=function(e,t){t=t||{};var n={};return Ql.forEach([\"url\",\"method\",\"params\",\"data\"],function(e){void 0!==t[e]&&(n[e]=t[e])}),Ql.forEach([\"headers\",\"auth\",\"proxy\"],function(r){Ql.isObject(t[r])?n[r]=Ql.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:Ql.isObject(e[r])?n[r]=Ql.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])}),Ql.forEach([\"baseURL\",\"transformRequest\",\"transformResponse\",\"paramsSerializer\",\"timeout\",\"withCredentials\",\"adapter\",\"responseType\",\"xsrfCookieName\",\"xsrfHeaderName\",\"onUploadProgress\",\"onDownloadProgress\",\"maxContentLength\",\"validateStatus\",\"maxRedirects\",\"httpAgent\",\"httpsAgent\",\"cancelToken\",\"socketPath\"],function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}),n};function Bp(e){this.defaults=e,this.interceptors={request:new tp,response:new tp}}Bp.prototype.request=function(e){\"string\"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Vp(this.defaults,e)).method=e.method?e.method.toLowerCase():\"get\";var t=[qp,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},Bp.prototype.getUri=function(e){return e=Vp(this.defaults,e),$l(e.url,e.params,e.paramsSerializer).replace(/^\\?/,\"\")},Ql.forEach([\"delete\",\"get\",\"head\",\"options\"],function(e){Bp.prototype[e]=function(t,n){return this.request(Ql.merge(n||{},{method:e,url:t}))}}),Ql.forEach([\"post\",\"put\",\"patch\"],function(e){Bp.prototype[e]=function(t,n,r){return this.request(Ql.merge(r||{},{method:e,url:t,data:n}))}});var jp=Bp;function Hp(e){this.message=e}Hp.prototype.toString=function(){return\"Cancel\"+(this.message?\": \"+this.message:\"\")},Hp.prototype.__CANCEL__=1;var Kp=Hp;function Yp(e){if(\"function\"!=typeof e)throw new TypeError(\"executor must be a function.\");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new Kp(e),t(n.reason))})}Yp.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Yp.source=function(){var e;return{token:new Yp(function(t){e=t}),cancel:e}};var zp=Yp;function Wp(e){var t=new jp(e),n=Kl(jp.prototype.request,t);return Ql.extend(n,jp.prototype,t),Ql.extend(n,t),n}var Xp=Wp(Fp);Xp.Axios=jp,Xp.create=function(e){return Wp(Vp(Xp.defaults,e))},Xp.Cancel=Kp,Xp.CancelToken=zp,Xp.isCancel=rp,Xp.all=function(e){return Promise.all(e)},Xp.spread=function(e){return function(t){return e.apply(null,t)}};var Jp=Xp,Qp=Xp;Jp.default=Qp;var Zp=Jp,$p=Zp.create({timeout:6e3,headers:{\"Content-Type\":\"application/x-www-form-urlencoded;charset=UTF-8\"}});$p.interceptors.response.use(function(e){var t=e.data,n=t.error_code,r=t.ErrorCode;return ls(n)&&(r=n),r!==hl.REQUEST.SUCCESS&&(e.data.ErrorCode=Number(r)),e},function(e){return\"Network Error\"===e.message&&(1==$p.defaults.withCredentials&&as.warn(\"Network Error, try to close `IMAxios.defaults.withCredentials` to false. (IMAxios.js)\"),$p.defaults.withCredentials=0),Promise.reject(e)});var ef=function(){function e(){on(this,e)}return sn(e,[{key:\"request\",value:function(e){console.warn(\"请注意： ConnectionBase.request() 方法必须被派生类重写:\"),console.log(\"参数如下：\\n    * @param {String} options.url string 是 开发者服务器接口地址\\n    * @param {*} options.data - string/object/ArrayBuffer 否 请求的参数\\n    * @param {Object} options.header - Object 否 设置请求的 header，\\n    * @param {String} options.method - string GET 否 HTTP 请求方法\\n    * @param {String} options.dataType - string json 否 返回的数据格式\\n    * @param {String} options.responseType - string text 否 响应的数据类型\\n    * @param {Boolean} isRetry - string text false 是否为重试的请求\\n   \")}},{key:\"_checkOptions\",value:function(e){if(0==!!e.url)throw new Hc({code:Bc.NETWORK_BASE_OPTIONS_NO_URL,message:jc.NETWORK_BASE_OPTIONS_NO_URL})}},{key:\"_initOptions\",value:function(e){e.method=[\"POST\",\"GET\",\"PUT\",\"DELETE\",\"OPTION\"].indexOf(e.method)>=0?e.method:\"POST\",e.dataType=e.dataType||\"json\",e.responseType=e.responseType||\"json\"}}]),e}(),tf=function(e){function t(){var e;return on(this,t),(e=_n(this,fn(t).call(this))).retry=1,e}return pn(t,ef),sn(t,[{key:\"request\",value:function(e){return this._checkOptions(e),this._initOptions(e),this._requestWithRetry({url:e.url,data:e.data,method:e.method})}},{key:\"_requestWithRetry\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return $p(e).catch(function(r){return t.retry&&n<t.retry?t._requestWithRetry(e,++n):Fl(r)})}}]),t}(),nf=[],rf=[],of=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,af=0;function sf(){af=1;for(var e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",t=0,n=e.length;t<n;++t)nf[t]=e[t],rf[e.charCodeAt(t)]=t;rf[\"-\".charCodeAt(0)]=62,rf[\"_\".charCodeAt(0)]=63}function uf(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(nf[(o=r)>>18&63]+nf[o>>12&63]+nf[o>>6&63]+nf[63&o]);return i.join(\"\")}function cf(e){var t;af||sf();for(var n=e.length,r=n%3,o=\"\",i=[],a=0,s=n-r;a<s;a+=16383)i.push(uf(e,a,a+16383>s?s:a+16383));return 1===r?(t=e[n-1],o+=nf[t>>2],o+=nf[t<<4&63],o+=\"==\"):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=nf[t>>10],o+=nf[t>>4&63],o+=nf[t<<2&63],o+=\"=\"),i.push(o),i.join(\"\")}function lf(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,p=n?o-1:0,f=n?-1:1,h=e[t+p];for(p+=f,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+p],p+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+p],p+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:Infinity*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)}function pf(e,t,n,r,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,g=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||Infinity===t?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=l?(s=0,a=l):a+p>=1?(s=(t*u-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=g,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[n+h]=255&a,h+=g,a/=256,c-=8);e[n+h-g]|=128*d}var ff={}.toString,hf=Array.isArray||function(e){return\"[object Array]\"==ff.call(e)};function gf(){return mf.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function df(e,t){if(gf()<t)throw new RangeError(\"Invalid typed array length\");return mf.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=mf.prototype:(null===e&&(e=new mf(t)),e.length=t),e}function mf(e,t,n){if(!(mf.TYPED_ARRAY_SUPPORT||this instanceof mf))return new mf(e,t,n);if(\"number\"==typeof e){if(\"string\"==typeof t)throw new Error(\"If encoding is specified then the first argument must be a string\");return yf(this,e)}return _f(this,e,t,n)}function _f(e,t,n,r){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError(\"'offset' is out of bounds\");if(t.byteLength<n+(r||0))throw new RangeError(\"'length' is out of bounds\");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);mf.TYPED_ARRAY_SUPPORT?(e=t).__proto__=mf.prototype:e=Ef(e,t);return e}(e,t,n,r):\"string\"==typeof t?function(e,t,n){\"string\"==typeof n&&\"\"!==n||(n=\"utf8\");if(!mf.isEncoding(n))throw new TypeError('\"encoding\" must be a valid string encoding');var r=0|Cf(t,n),o=(e=df(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(Sf(t)){var n=0|If(t.length);return 0===(e=df(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if(\"undefined\"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||\"length\"in t)return\"number\"!=typeof t.length||(r=t.length)!=r?df(e,0):Ef(e,t);if(\"Buffer\"===t.type&&hf(t.data))return Ef(e,t.data)}var r;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(e,t)}function vf(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be a number');if(e<0)throw new RangeError('\"size\" argument must not be negative')}function yf(e,t){if(vf(t),e=df(e,t<0?0:0|If(t)),!mf.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ef(e,t){var n=t.length<0?0:0|If(t.length);e=df(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function If(e){if(e>=gf())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+gf().toString(16)+\" bytes\");return 0|e}function Sf(e){return!(null==e||!e._isBuffer)}function Cf(e,t){if(Sf(e))return e.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;\"string\"!=typeof e&&(e=\"\"+e);var n=e.length;if(0===n)return 0;for(var r=0;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return Jf(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return Qf(e).length;default:if(r)return Jf(e).length;t=(\"\"+t).toLowerCase(),r=1}}function Tf(e,t,n){var r=0;if((void 0===t||t<0)&&(t=0),t>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return\"\";if((n>>>=0)<=(t>>>=0))return\"\";for(e||(e=\"utf8\");;)switch(e){case\"hex\":return xf(this,t,n);case\"utf8\":case\"utf-8\":return wf(this,t,n);case\"ascii\":return Uf(this,t,n);case\"latin1\":case\"binary\":return Ff(this,t,n);case\"base64\":return kf(this,t,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return qf(this,t,n);default:if(r)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),r=1}}function Mf(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Af(e,t,n,r,o){if(0===e.length)return-1;if(\"string\"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if(\"string\"==typeof t&&(t=mf.from(t,r)),Sf(t))return 0===t.length?-1:Of(e,t,n,r,o);if(\"number\"==typeof t)return t&=255,mf.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Of(e,[t],n,r,o);throw new TypeError(\"val must be string, number or Buffer\")}function Of(e,t,n,r,o){var i,a=1,s=e.length,u=t.length;if(void 0!==r&&(\"ucs2\"===(r=String(r).toLowerCase())||\"ucs-2\"===r||\"utf16le\"===r||\"utf-16le\"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var p=1,f=0;f<u;f++)if(c(e,i+f)!==c(t,f)){p=0;break}if(p)return i}return-1}function Df(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError(\"Invalid hex string\");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function Nf(e,t,n,r){return Zf(Jf(t,e.length-n),e,n,r)}function Lf(e,t,n,r){return Zf(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Rf(e,t,n,r){return Lf(e,t,n,r)}function Pf(e,t,n,r){return Zf(Qf(t),e,n,r)}function Gf(e,t,n,r){return Zf(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function kf(e,t,n){return 0===t&&n===e.length?cf(e):cf(e.slice(t,n))}function wf(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=bf)return String.fromCharCode.apply(String,e);var n=\"\",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=bf));return n}(r)}mf.TYPED_ARRAY_SUPPORT=void 0!==Qa.TYPED_ARRAY_SUPPORT?Qa.TYPED_ARRAY_SUPPORT:1,mf.poolSize=8192,mf._augment=function(e){return e.__proto__=mf.prototype,e},mf.from=function(e,t,n){return _f(null,e,t,n)},mf.TYPED_ARRAY_SUPPORT&&(mf.prototype.__proto__=Uint8Array.prototype,mf.__proto__=Uint8Array),mf.alloc=function(e,t,n){return function(e,t,n,r){return vf(t),t<=0?df(e,t):void 0!==n?\"string\"==typeof r?df(e,t).fill(n,r):df(e,t).fill(n):df(e,t)}(null,e,t,n)},mf.allocUnsafe=function(e){return yf(null,e)},mf.allocUnsafeSlow=function(e){return yf(null,e)},mf.isBuffer=function(e){return null!=e&&(!!e._isBuffer||$f(e)||function(e){return\"function\"==typeof e.readFloatLE&&\"function\"==typeof e.slice&&$f(e.slice(0,0))}(e))},mf.compare=function(e,t){if(!Sf(e)||!Sf(t))throw new TypeError(\"Arguments must be Buffers\");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},mf.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 1;default:return 0}},mf.concat=function(e,t){if(!hf(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return mf.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=mf.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!Sf(i))throw new TypeError('\"list\" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},mf.byteLength=Cf,mf.prototype._isBuffer=1,mf.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)Mf(this,t,t+1);return this},mf.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)Mf(this,t,t+3),Mf(this,t+1,t+2);return this},mf.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)Mf(this,t,t+7),Mf(this,t+1,t+6),Mf(this,t+2,t+5),Mf(this,t+3,t+4);return this},mf.prototype.toString=function(){var e=0|this.length;return 0===e?\"\":0===arguments.length?wf(this,0,e):Tf.apply(this,arguments)},mf.prototype.equals=function(e){if(!Sf(e))throw new TypeError(\"Argument must be a Buffer\");return this===e?1:0===mf.compare(this,e)},mf.prototype.inspect=function(){var e=\"\";return this.length>0&&(e=this.toString(\"hex\",0,50).match(/.{2}/g).join(\" \"),this.length>50&&(e+=\" ... \")),\"<Buffer \"+e+\">\"},mf.prototype.compare=function(e,t,n,r,o){if(!Sf(e))throw new TypeError(\"Argument must be a Buffer\");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError(\"out of range index\");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(r,o),c=e.slice(t,n),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},mf.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},mf.prototype.indexOf=function(e,t,n){return Af(this,e,t,n,1)},mf.prototype.lastIndexOf=function(e,t,n){return Af(this,e,t,n,0)},mf.prototype.write=function(e,t,n,r){if(void 0===t)r=\"utf8\",n=this.length,t=0;else if(void 0===n&&\"string\"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");t|=0,isFinite(n)?(n|=0,void 0===r&&(r=\"utf8\")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");r||(r=\"utf8\");for(var i=0;;)switch(r){case\"hex\":return Df(this,e,t,n);case\"utf8\":case\"utf-8\":return Nf(this,e,t,n);case\"ascii\":return Lf(this,e,t,n);case\"latin1\":case\"binary\":return Rf(this,e,t,n);case\"base64\":return Pf(this,e,t,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return Gf(this,e,t,n);default:if(i)throw new TypeError(\"Unknown encoding: \"+r);r=(\"\"+r).toLowerCase(),i=1}},mf.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var bf=4096;function Uf(e,t,n){var r=\"\";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function Ff(e,t,n){var r=\"\";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function xf(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o=\"\",i=t;i<n;++i)o+=Xf(e[i]);return o}function qf(e,t,n){for(var r=e.slice(t,n),o=\"\",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function Vf(e,t,n){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(e+t>n)throw new RangeError(\"Trying to access beyond buffer length\")}function Bf(e,t,n,r,o,i){if(!Sf(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('\"value\" argument is out of bounds');if(n+r>e.length)throw new RangeError(\"Index out of range\")}function jf(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Hf(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function Kf(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function Yf(e,t,n,r,o){return o||Kf(e,0,n,4),pf(e,t,n,r,23,4),n+4}function zf(e,t,n,r,o){return o||Kf(e,0,n,8),pf(e,t,n,r,52,8),n+8}mf.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),mf.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=mf.prototype;else{var o=t-e;n=new mf(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},mf.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Vf(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},mf.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Vf(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},mf.prototype.readUInt8=function(e,t){return t||Vf(e,1,this.length),this[e]},mf.prototype.readUInt16LE=function(e,t){return t||Vf(e,2,this.length),this[e]|this[e+1]<<8},mf.prototype.readUInt16BE=function(e,t){return t||Vf(e,2,this.length),this[e]<<8|this[e+1]},mf.prototype.readUInt32LE=function(e,t){return t||Vf(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},mf.prototype.readUInt32BE=function(e,t){return t||Vf(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},mf.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Vf(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},mf.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Vf(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},mf.prototype.readInt8=function(e,t){return t||Vf(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},mf.prototype.readInt16LE=function(e,t){t||Vf(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},mf.prototype.readInt16BE=function(e,t){t||Vf(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},mf.prototype.readInt32LE=function(e,t){return t||Vf(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},mf.prototype.readInt32BE=function(e,t){return t||Vf(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},mf.prototype.readFloatLE=function(e,t){return t||Vf(e,4,this.length),lf(this,e,1,23,4)},mf.prototype.readFloatBE=function(e,t){return t||Vf(e,4,this.length),lf(this,e,0,23,4)},mf.prototype.readDoubleLE=function(e,t){return t||Vf(e,8,this.length),lf(this,e,1,52,8)},mf.prototype.readDoubleBE=function(e,t){return t||Vf(e,8,this.length),lf(this,e,0,52,8)},mf.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Bf(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},mf.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Bf(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},mf.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,1,255,0),mf.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},mf.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,2,65535,0),mf.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):jf(this,e,t,1),t+2},mf.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,2,65535,0),mf.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):jf(this,e,t,0),t+2},mf.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,4,4294967295,0),mf.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Hf(this,e,t,1),t+4},mf.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,4,4294967295,0),mf.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Hf(this,e,t,0),t+4},mf.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Bf(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},mf.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);Bf(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},mf.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,1,127,-128),mf.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},mf.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,2,32767,-32768),mf.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):jf(this,e,t,1),t+2},mf.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,2,32767,-32768),mf.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):jf(this,e,t,0),t+2},mf.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,4,2147483647,-2147483648),mf.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Hf(this,e,t,1),t+4},mf.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Bf(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),mf.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Hf(this,e,t,0),t+4},mf.prototype.writeFloatLE=function(e,t,n){return Yf(this,e,t,1,n)},mf.prototype.writeFloatBE=function(e,t,n){return Yf(this,e,t,0,n)},mf.prototype.writeDoubleLE=function(e,t,n){return zf(this,e,t,1,n)},mf.prototype.writeDoubleBE=function(e,t,n){return zf(this,e,t,0,n)},mf.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(r<0)throw new RangeError(\"sourceEnd out of bounds\");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!mf.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},mf.prototype.fill=function(e,t,n,r){if(\"string\"==typeof e){if(\"string\"==typeof t?(r=t,t=0,n=this.length):\"string\"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&\"string\"!=typeof r)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof r&&!mf.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r)}else\"number\"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError(\"Out of range index\");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),\"number\"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=Sf(e)?e:Jf(new mf(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var Wf=/[^+\\/0-9A-Za-z-_]/g;function Xf(e){return e<16?\"0\"+e.toString(16):e.toString(16)}function Jf(e,t){var n;t=t||Infinity;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Qf(e){return function(e){var t,n,r,o,i,a;af||sf();var s=e.length;if(s%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");i=\"=\"===e[s-2]?2:\"=\"===e[s-1]?1:0,a=new of(3*s/4-i),r=i>0?s-4:s;var u=0;for(t=0,n=0;t<r;t+=4,n+=3)o=rf[e.charCodeAt(t)]<<18|rf[e.charCodeAt(t+1)]<<12|rf[e.charCodeAt(t+2)]<<6|rf[e.charCodeAt(t+3)],a[u++]=o>>16&255,a[u++]=o>>8&255,a[u++]=255&o;return 2===i?(o=rf[e.charCodeAt(t)]<<2|rf[e.charCodeAt(t+1)]>>4,a[u++]=255&o):1===i&&(o=rf[e.charCodeAt(t)]<<10|rf[e.charCodeAt(t+1)]<<4|rf[e.charCodeAt(t+2)]>>2,a[u++]=o>>8&255,a[u++]=255&o),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,\"\")}(e).replace(Wf,\"\")).length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}(e))}function Zf(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function $f(e){return!!e.constructor&&\"function\"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var eh=function(e){function t(){var e;return on(this,t),(e=_n(this,fn(t).call(this)))._request=e.promisify(wx.request),e}return pn(t,ef),sn(t,[{key:\"request\",value:function(e){return this._checkOptions(e),this._initOptions(e),e=ln({},e,{responseType:\"text\"}),this._request(e).then(this._handleResolve).catch(this._handleReject)}},{key:\"_handleResolve\",value:function(e){var t=e.data,n=t.error_code,r=t.ErrorCode;return\"number\"==typeof n&&(r=n),r!==hl.REQUEST.SUCCESS&&(e.data.ErrorCode=Number(\"\".concat(r))),e}},{key:\"_handleReject\",value:function(e){if(ps(e.errMsg)){if(e.errMsg.includes(\"abort\"))return Ul({});if(e.errMsg.includes(\"timeout\"))return Fl(new Hc({code:Bc.NETWORK_TIMEOUT,message:e.errMsg}));if(e.errMsg.includes(\"fail\"))return Fl(new Hc({code:Bc.NETWORK_ERROR,message:e.errMsg}))}return Fl(new Hc(ln({code:Bc.UNCAUGHT_ERROR,message:e.message},e)))}},{key:\"promisify\",value:function(e){return function(t){return new Promise(function(n,r){var o=e(Object.assign({},t,{success:n,fail:r}));t.updateAbort&&t.updateAbort(function(){o&&_s(o.abort)&&o.abort()})})}}}]),t}(),th=function(){function e(){on(this,e),this.request=0,this.success=0,this.fail=0,this.reportRate=10,this.requestTimeCost=[]}return sn(e,[{key:\"report\",value:function(){if(1!==this.request){if(this.request%this.reportRate!=0)return null;var e=this.avgRequestTime(),t=\"runLoop reports: success=\".concat(this.success,\",fail=\").concat(this.fail,\",total=\").concat(this.request,\",avg=\").concat(e,\",cur=\").concat(this.requestTimeCost[this.requestTimeCost.length-1],\",max=\").concat(Math.max.apply(null,this.requestTimeCost),\",min=\").concat(Math.min.apply(null,this.requestTimeCost));as.log(t)}}},{key:\"setRequestTime\",value:function(e,t){var n=Math.abs(t-e);100===this.requestTimeCost.length&&this.requestTimeCost.shift(),this.requestTimeCost.push(n)}},{key:\"avgRequestTime\",value:function(){for(var e,t=this.requestTimeCost.length,n=0,r=0;r<t;r++)n+=this.requestTimeCost[r];return e=n/t,Math.round(100*e)/100}}]),e}(),nh=Zp.CancelToken,rh=function(){function e(t){on(this,e),this._initializeOptions(t),this._initializeMembers(),this.status=new th}return sn(e,[{key:\"destructor\",value:function(){clearTimeout(this._seedID);var e=this._index();for(var t in this)Object.prototype.hasOwnProperty.call(this,t)&&(this[t]=null);return e}},{key:\"setIndex\",value:function(e){this._index=e}},{key:\"getIndex\",value:function(){return this._index}},{key:\"isRunning\",value:function(){return!this._stoped}},{key:\"_initializeOptions\",value:function(e){this.options=e}},{key:\"_initializeMembers\",value:function(){this._index=-1,this._seedID=0,this._requestStatus=0,this._stoped=0,this._intervalTime=0,this._intervalIncreaseStep=1e3,this._intervalDecreaseStep=1e3,this._intervalTimeMax=5e3,this._protectTimeout=3e3,this._getNoticeSeq=this.options.getNoticeSeq,this._retryCount=0,this._responseTime=Date.now(),this._responseTimeThreshold=2e3,this.requestor=$p,this.abort=null}},{key:\"start\",value:function(){0===this._seedID?(this._stoped=0,this._send()):as.log('XHRRunLoop.start(), XHRRunLoop is running now, if you want to restart runLoop , please run \"stop()\" first.')}},{key:\"_reset\",value:function(){as.log(\"XHRRunLoop._reset(), reset long poll _intervalTime\",this._intervalTime),this.stop(),this.start()}},{key:\"_intervalTimeIncrease\",value:function(){this._intervalTime!==this._responseTimeThreshold&&(this._intervalTime<this._responseTimeThreshold&&(this._intervalTime+=this._intervalIncreaseStep),this._intervalTime>this._responseTimeThreshold&&(this._intervalTime=this._responseTimeThreshold))}},{key:\"_intervalTimeDecrease\",value:function(){0!==this._intervalTime&&(this._intervalTime>0&&(this._intervalTime-=this._intervalDecreaseStep),this._intervalTime<0&&(this._intervalTime=0))}},{key:\"_intervalTimeAdjustment\",value:function(){var e=Date.now();100*Math.floor((e-this._responseTime)/100)<=this._responseTimeThreshold?this._intervalTimeIncrease():this._intervalTimeDecrease(),this._responseTime=e}},{key:\"_intervalTimeAdjustmentBaseOnResponseData\",value:function(e){e.ErrorCode===hl.REQUEST.SUCCESS?this._intervalTimeDecrease():this._intervalTimeIncrease()}},{key:\"_send\",value:function(){var e=this;if(1!=this._requestStatus){this._requestStatus=1,this.status.request++,\"function\"==typeof this.options.before&&this.options.before(this.options.pack.requestData);var t=Date.now(),n=0;this.requestor.request({url:this.options.pack.getUrl(),data:this.options.pack.requestData,method:this.options.pack.method,cancelToken:new nh(function(t){e.abort=t})}).then(function(r){if(e._intervalTimeAdjustmentBaseOnResponseData.bind(e)(r.data),e._retryCount>0&&(e._retryCount=0),e.status.success++,\"function\"==typeof e.options.success)try{e.options.success({pack:e.options.pack,error:0,data:e.options.pack.callback(r.data)})}catch(o){as.warn(\"XHRRunLoop._send(), error:\",o)}e._requestStatus=0,0==e._stoped&&(e._seedID=setTimeout(e._send.bind(e),e._intervalTime)),n=Date.now(),e.status.setRequestTime(t,n),e.status.report()}).catch(function(r){if(e.status.fail++,e._retryCount++,e._intervalTimeAdjustment.bind(e)(),0==e._stoped&&(e._seedID=setTimeout(e._send.bind(e),e._intervalTime)),e._requestStatus=0,\"function\"==typeof e.options.fail&&void 0!==r.request)try{e.options.fail({pack:e.options.pack,error:r,data:0})}catch(o){as.warn(\"XHRRunLoop._send(), fail callback error:\"),as.error(o)}n=Date.now(),e.status.setRequestTime(t,n),e.status.report()})}}},{key:\"stop\",value:function(){this._clearAllTimeOut(),this._stoped=1}},{key:\"_clearAllTimeOut\",value:function(){clearTimeout(this._seedID),this._seedID=0}}]),e}(),oh=function(){function e(t){on(this,e),this._initializeOptions(t),this._initializeMembers(),this.status=new th}return sn(e,[{key:\"destructor\",value:function(){clearTimeout(this._seedID);var e=this._index();for(var t in this)Object.prototype.hasOwnProperty.call(this,t)&&(this[t]=null);return e}},{key:\"setIndex\",value:function(e){this._index=e}},{key:\"isRunning\",value:function(){return!this._stoped}},{key:\"getIndex\",value:function(){return this._index}},{key:\"_initializeOptions\",value:function(e){this.options=e}},{key:\"_initializeMembers\",value:function(){this._index=-1,this._seedID=0,this._requestStatus=0,this._stoped=0,this._intervalTime=0,this._intervalIncreaseStep=1e3,this._intervalDecreaseStep=1e3,this._intervalTimeMax=5e3,this._protectTimeout=3e3,this._getNoticeSeq=this.options.getNoticeSeq,this._retryCount=0,this._responseTime=Date.now(),this._responseTimeThreshold=2e3,this.requestor=new eh,this.abort=null}},{key:\"start\",value:function(){0===this._seedID?(this._stoped=0,this._send()):as.log('WXRunLoop.start(): WXRunLoop is running now, if you want to restart runLoop , please run \"stop()\" first.')}},{key:\"_reset\",value:function(){as.log(\"WXRunLoop.reset(), long poll _intervalMaxRate\",this._intervalMaxRate),this.stop(),this.start()}},{key:\"_intervalTimeIncrease\",value:function(){this._intervalTime!==this._responseTimeThreshold&&(this._intervalTime<this._responseTimeThreshold&&(this._intervalTime+=this._intervalIncreaseStep),this._intervalTime>this._responseTimeThreshold&&(this._intervalTime=this._responseTimeThreshold))}},{key:\"_intervalTimeDecrease\",value:function(){0!==this._intervalTime&&(this._intervalTime>0&&(this._intervalTime-=this._intervalDecreaseStep),this._intervalTime<0&&(this._intervalTime=0))}},{key:\"_intervalTimeAdjustment\",value:function(){var e=Date.now();100*Math.floor((e-this._responseTime)/100)<=this._responseTimeThreshold?this._intervalTimeIncrease():this._intervalTimeDecrease(),this._responseTime=e}},{key:\"_intervalTimeAdjustmentBaseOnResponseData\",value:function(e){e.ErrorCode===hl.REQUEST.SUCCESS?this._intervalTimeDecrease():this._intervalTimeIncrease()}},{key:\"_send\",value:function(){var e=this;if(1!=this._requestStatus){var t=this;this._requestStatus=1,this.status.request++,\"function\"==typeof this.options.before&&this.options.before(t.options.pack.requestData);var n=Date.now(),r=0;this.requestor.request({url:t.options.pack.getUrl(),data:t.options.pack.requestData,method:t.options.pack.method,updateAbort:function(t){e.abort=t}}).then(function(o){if(t._intervalTimeAdjustmentBaseOnResponseData.bind(e)(o.data),t._retryCount>0&&(t._retryCount=0),e.status.success++,\"function\"==typeof t.options.success)try{e.options.success({pack:e.options.pack,error:0,data:e.options.pack.callback(o.data)})}catch(i){as.warn(\"WXRunLoop._send(), error:\",i)}t._requestStatus=0,0==t._stoped&&(t._seedID=setTimeout(t._send.bind(t),t._intervalTime)),r=Date.now(),e.status.setRequestTime(n,r),e.status.report()}).catch(function(o){if(e.status.fail++,t._retryCount++,t._intervalTimeAdjustment.bind(e)(),0==t._stoped&&(t._seedID=setTimeout(t._send.bind(t),t._intervalTime)),t._requestStatus=0,\"function\"==typeof t.options.fail)try{e.options.fail({pack:e.options.pack,error:o,data:0})}catch(i){as.warn(\"WXRunLoop._send(), fail callback error:\"),as.error(i)}r=Date.now(),e.status.setRequestTime(n,r),e.status.report()})}}},{key:\"stop\",value:function(){this._clearAllTimeOut(),this._stoped=1}},{key:\"_clearAllTimeOut\",value:function(){clearTimeout(this._seedID),this._seedID=0}}]),e}(),ih=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).context=e.context,n.httpConnection=n._getHttpconnection(),n.keepAliveConnections=[],n}return pn(t,ll),sn(t,[{key:\"initializeListener\",value:function(){this.tim.innerEmitter.on(Zc.SIGN_LOGOUT_EXECUTING,this._stopAllRunLoop,this)}},{key:\"request\",value:function(e){var t={url:e.url,data:e.requestData,method:e.method,callback:e.callback};return this.httpConnection.request(t).then(function(t){return t.data=e.callback(t.data),t.data.errorCode!==hl.REQUEST.SUCCESS?Fl(new Hc({code:t.data.errorCode,message:t.data.errorInfo})):t})}},{key:\"createRunLoop\",value:function(e){var t=this.createKeepAliveConnection(e);return t.setIndex(this.keepAliveConnections.push(t)-1),t}},{key:\"stopRunLoop\",value:function(e){e.stop()}},{key:\"_stopAllRunLoop\",value:function(){for(var e=this.keepAliveConnections.length,t=0;t<e;t++)this.keepAliveConnections[t].stop()}},{key:\"destroyRunLoop\",value:function(e){e.stop();var t=e.destructor();this.keepAliveConnections.slice(t,1)}},{key:\"startRunLoopExclusive\",value:function(e){for(var t=e.getIndex(),n=0;n<this.keepAliveConnections.length;n++)n!==t&&this.keepAliveConnections[n].stop();e.start()}},{key:\"_getHttpconnection\",value:function(){return Oa?new eh:new tf}},{key:\"createKeepAliveConnection\",value:function(e){return Oa?new oh(e):this.tim.options.runLoopNetType===Ol?new rh(e):(this.tim.options.runLoopNetType,\"function\"==typeof window.WebSocket&&window.WebSocket.prototype.send,new rh(e))}},{key:\"clearAll\",value:function(){this.conn.cancelAll()}},{key:\"reset\",value:function(){this.keepAliveConnections=[]}}]),t}();void 0===console.table&&(console.table=console.log);var ah=function(e,t){e.code?as.warn(\"Oops! code: \".concat(e.code),\"message: \".concat(e.message),\"stack: \".concat(e.stack)):as.warn(\"Oops! message: \".concat(e.message),\"stack: \".concat(e.stack))},sh={f9999998:function(e){ah(e)},f9999999:function(e){ah(e)},f:function(e){ah(e),\"未定义的错误:\".concat(e.code,\" , \").concat(e.message)},f20000:function(e){ah(e)},f20001:function(e){ah(e)},f20002:function(e){ah(e)},f30000:function(e){ah(e)},f40004:function(e){ah(e)},f40005:function(e){ah(e)},f40006:function(e){ah(e)},f40007:function(e){ah(e)},f40008:function(e){ah(e)},f50070003:function(e){e.code.replace(\"500\",\"\");ah(e)},f50030001:function(e){ah(e)},f50070221:function(e){ah(e)}};sh.echo=ah;var uh=function(){function e(t){on(this,e),this.methods=sh,this.tim=t,this._initielizeListener()}return sn(e,[{key:\"_initielizeListener\",value:function(){this.tim.innerEmitter.on(Zc.ERROR_DETECTED,this._onErrorDetected,this)}},{key:\"ask\",value:function(e){var t=[\"f\",e.code].join(\"\"),n=sh.echo;this.methods.hasOwnProperty(t)?this.methods[t](e):n(e)}},{key:\"_onErrorDetected\",value:function(e){this.ask(e),this.tim.outerEmitter.emit(Wt.ERROR,e)}}]),e}(),ch=[\"jpg\",\"jpeg\",\"gif\",\"png\"],lh=[\"mp4\"],ph=function(){function e(t){on(this,e),bs(t)||(this.userID=t.userID||\"\",this.nick=t.nick||\"\",this.gender=t.gender||\"\",this.birthday=t.birthday||0,this.location=t.location||\"\",this.selfSignature=t.selfSignature||\"\",this.allowType=t.allowType||Xt.ALLOW_TYPE_ALLOW_ANY,this.language=t.language||0,this.avatar=t.avatar||\"\",this.messageSettings=t.messageSettings||0,this.adminForbidType=t.adminForbidType||Xt.FORBID_TYPE_NONE,this.level=t.level||0,this.role=t.role||0,this.lastUpdatedTime=0)}return sn(e,[{key:\"validate\",value:function(e){var t=1,n=\"\";for(var r in bs(e)&&(t=0,n=\"empty options\"),e)if(Object.prototype.hasOwnProperty.call(e,r)){if(bs(e[r])&&!ps(e[r])&&!ls(e[r])){n=\"key:\"+r+\", invalid value:\"+e[r],t=0;continue}switch(r){case\"nick\":ps(e[r])||(n=\"nick should be a string\",t=0),Ms(e[r])>500&&(n=\"nick name limited: must less than or equal to \".concat(500,\" bytes, current size: \").concat(Ms(e[r]),\" bytes\"),t=0);break;case\"gender\":Ns(Rl,e.gender)||(n=\"key:gender, invalid value:\"+e.gender,t=0);break;case\"birthday\":ls(e.birthday)||(n=\"birthday should be a number\",t=0);break;case\"location\":ps(e.location)||(n=\"location should be a string\",t=0);break;case\"selfSignature\":ps(e.selfSignature)||(n=\"selfSignature should be a string\",t=0);break;case\"allowType\":Ns(Gl,e.allowType)||(n=\"key:allowType, invalid value:\"+e.allowType,t=0);break;case\"language\":ls(e.language)||(n=\"language should be a number\",t=0);break;case\"avatar\":ps(e.avatar)||(n=\"avatar should be a string\",t=0);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(n=\"messageSettings should be 0 or 1\",t=0);break;case\"adminForbidType\":Ns(Pl,e.adminForbidType)||(n=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=0);break;case\"level\":ls(e.level)||(n=\"level should be a number\",t=0);break;case\"role\":ls(e.role)||(n=\"role should be a number\",t=0);break;default:n=\"unknown key:\"+r,t=0}}return{valid:t,tips:n}}}]),e}(),fh=function(){function e(t){on(this,e),this.uc=t,this.TAG=\"profile\",this.Actions={Q:\"query\",U:\"update\"},this.accountProfileMap=new Map,this.expirationTime=864e5}return sn(e,[{key:\"setExpirationTime\",value:function(e){this.expirationTime=e}},{key:\"getUserProfile\",value:function(e){var t=this,n=this.uc.tim,r=n.connectionController,o=n.outerEmitter,i=e.userIDList;if(!gs(i))return as.error(\"ProfileHandler.getUserProfile options.userIDList 必需是数组\"),Fl({code:Bc.GET_PROFILE_INVALID_PARAM,message:jc.GET_PROFILE_INVALID_PARAM});e.fromAccount=this.uc.getMyAccount(),i.length>100&&(as.warn(\"ProfileHandler.getUserProfile 获取用户资料人数不能超过100人\"),i.length=100);for(var a,s=[],u=[],c=0,l=i.length;c<l;c++)a=i[c],this.uc.isMyFriend(a)&&this._containsAccount(a)?u.push(this._getProfileFromMap(a)):s.push(a);if(0===s.length)return o.emit(Wt.PROFILE_GET_SUCCESS,u),Ul(u);e.toAccount=s;var p=e.bFromGetMyProfile||0,f=this.uc.makeCapsule(this.TAG,this.Actions.Q,e);return r.request(f).then(function(e){as.info(\"ProfileHandler.getUserProfile ok\");var n=t._handleResponse(e).concat(u);return o.emit(Wt.PROFILE_GET_SUCCESS,n),p?(t.uc.onGotMyProfile(),new kl(n[0])):new kl(n)}).catch(function(e){return as.error(\"ProfileHandler.getUserProfile error:\",e),Fl(e)})}},{key:\"getMyProfile\",value:function(){var e=this.uc.getMyAccount();if(as.log(\"ProfileHandler.getMyProfile myAccount=\"+e),this._fillMap(),this._containsAccount(e)){var t=this._getProfileFromMap(e);return as.debug(\"ProfileHandler.getMyProfile from cache, myProfile:\"+JSON.stringify(t)),this.uc.tim.outerEmitter.emit(Wt.PROFILE_GET_SUCCESS,[t]),this.uc.onGotMyProfile(),Ul(t)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:1})}},{key:\"_handleResponse\",value:function(e){for(var t,n,r=Ss.now(),o=e.data.userProfileItem,i=[],a=0,s=o.length;a<s;a++)\"@TLS#NOT_FOUND\"!==o[a].to&&\"\"!==o[a].to&&(t=o[a].to,n=this._updateMap(t,this._getLatestProfileFromResponse(t,o[a].profileItem)),i.push(n));return as.log(\"ProfileHandler._handleResponse cost \"+(Ss.now()-r)+\" ms\"),i}},{key:\"_getLatestProfileFromResponse\",value:function(e,t){var n={};if(n.userID=e,!bs(t))for(var r=0,o=t.length;r<o;r++)switch(t[r].tag){case Ll.NICK:n.nick=t[r].value;break;case Ll.GENDER:n.gender=t[r].value;break;case Ll.BIRTHDAY:n.birthday=t[r].value;break;case Ll.LOCATION:n.location=t[r].value;break;case Ll.SELFSIGNATURE:n.selfSignature=t[r].value;break;case Ll.ALLOWTYPE:n.allowType=t[r].value;break;case Ll.LANGUAGE:n.language=t[r].value;break;case Ll.AVATAR:n.avatar=t[r].value;break;case Ll.MESSAGESETTINGS:n.messageSettings=t[r].value;break;case Ll.ADMINFORBIDTYPE:n.adminForbidType=t[r].value;break;case Ll.LEVEL:n.level=t[r].value;break;case Ll.ROLE:n.role=t[r].value;break;default:as.warn(\"ProfileHandler._handleResponse unkown tag->\",t[r].tag)}return n}},{key:\"updateMyProfile\",value:function(e){var t=this,n=this.uc.tim,r=n.connectionController,o=n.outerEmitter,i=(new ph).validate(e);if(!i.valid)return as.error(\"ProfileHandler.updateMyProfile info:\"+i.tips),Fl({code:Bc.UPDATE_PROFILE_INVALID_PARAM,message:jc.UPDATE_PROFILE_INVALID_PARAM});var a=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&a.push({tag:Ll[s.toUpperCase()],value:e[s]});var u=this.uc.makeCapsule(this.TAG,this.Actions.U,{fromAccount:this.uc.getMyAccount(),profileItem:a});return r.request(u).then(function(n){as.info(\"ProfileHandler.updateMyProfile ok\");var r=t._updateMap(t.uc.getMyAccount(),e);return o.emit(Wt.PROFILE_UPDATED,[r]),Ul(r)}).catch(function(e){return as.error(\"ProfileHandler.updateMyProfile error:\",e),Fl(e)})}},{key:\"onProfileModified\",value:function(e){var t=e.data;if(!bs(t)){var n,r,o=t.length;as.info(\"ProfileHandler.onProfileModified length=\"+o);for(var i=[],a=0;a<o;a++)n=t[a].userID,r=this._updateMap(n,this._getLatestProfileFromResponse(n,t[a].profileList)),i.push(r);var s=this.uc.tim,u=s.innerEmitter,c=s.outerEmitter;u.emit(Zc.PROFILE_UPDATED,{data:i}),c.emit(Wt.PROFILE_UPDATED,i)}}},{key:\"_fillMap\",value:function(){if(0===this.accountProfileMap.size){for(var e=this._getCachedProfiles(),t=Date.now(),n=0,r=e.length;n<r;n++)t-e[n].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[n].userID,e[n]);as.log(\"ProfileHandler._fillMap from chache, map.size=\"+this.accountProfileMap.size)}}},{key:\"_updateMap\",value:function(e,t){var n,r=Date.now();return this._containsAccount(e)?(n=this._getProfileFromMap(e),Cs(n,t),n.lastUpdatedTime=r):(n=new ph(t),(this.uc.isMyFriend(e)||e===this.uc.getMyAccount())&&(n.lastUpdatedTime=r,this.accountProfileMap.set(e,n))),this._flushMap(e===this.uc.getMyAccount()),n}},{key:\"_flushMap\",value:function(e){var t=yn(this.accountProfileMap.values()),n=this.uc.tim.storage;as.debug(\"ProfileHandler._flushMap length=\".concat(t.length,\" flushAtOnce=\").concat(e)),n.setItem(this.TAG,t,e)}},{key:\"_containsAccount\",value:function(e){return this.accountProfileMap.has(e)}},{key:\"_getProfileFromMap\",value:function(e){return this.accountProfileMap.get(e)}},{key:\"_getCachedProfiles\",value:function(){var e=this.uc.tim.storage.getItem(this.TAG);return bs(e)?[]:e}},{key:\"onConversationsProfileUpdated\",value:function(e){for(var t,n,r,o=[],i=0,a=e.length;i<a;i++)n=(t=e[i]).userID,this._containsAccount(n)?(r=this._getProfileFromMap(n),Cs(r,t)>0&&o.push(n)):o.push(t.userID);0!==o.length&&(as.info(\"ProfileHandler.onConversationsProfileUpdated toAccount:\",o),this.getUserProfile({userIDList:o}))}},{key:\"reset\",value:function(){this._flushMap(1),this.accountProfileMap.clear()}}]),e}(),hh=\"\".repeat||function(e){var t=String(v(this)),n=\"\",r=oe(e);if(r<0||Infinity==r)throw RangeError(\"Wrong number of repetitions\");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n};De({target:\"String\",proto:1},{repeat:hh});var gh=function(){function e(t){on(this,e),this.options=t?t.options:{enablePointer:1},this.pointsList={},this.reportText={},this.maxNameLen=0,this.gapChar=\"-\",this.log=console.log,this.currentTask=\"\"}return sn(e,[{key:\"newTask\",value:function(e){0!=this.options.enablePointer&&(e||(e=[\"task\",this._timeFormat()].join(\"-\")),this.pointsList[e]=[],this.currentTask=e,console.log(\"Pointer new Task : \".concat(this.currentTask)))}},{key:\"deleteTask\",value:function(e){0!=this.options.enablePointer&&(e||(e=this.currentTask),this.pointsList[e].length=0,delete this.pointsList[e])}},{key:\"dot\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1?arguments[1]:void 0;if(0!=this.options.enablePointer){t=t||this.currentTask;var n=+new Date;this.maxNameLen=this.maxNameLen<e.length?e.length:this.maxNameLen,this.flen=this.maxNameLen+10,this.pointsList[t].push({pointerName:e,time:n})}}},{key:\"_analisys\",value:function(e){if(0!=this.options.enablePointer){e=e||this.currentTask;for(var t=this.pointsList[e],n=t.length,r=[],o=[],i=0;i<n;i++)0!==i&&(o=this._analisysTowPoints(t[i-1],t[i]),r.push(o.join(\"\")));return o=this._analisysTowPoints(t[0],t[n-1],1),r.push(o.join(\"\")),r.join(\"\")}}},{key:\"_analisysTowPoints\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0!=this.options.enablePointer){var r=this.flen,o=t.time-e.time,i=o.toString(),a=e.pointerName+this.gapChar.repeat(r-e.pointerName.length),s=t.pointerName+this.gapChar.repeat(r-t.pointerName.length),u=this.gapChar.repeat(4-i.length)+i,c=n?[\"%c\",a,s,u,\"ms\\n%c\"]:[a,s,u,\"ms\\n\"];return c}}},{key:\"report\",value:function(e){if(0!=this.options.enablePointer){e=e||this.currentTask;var t=this._analisys(e);this.pointsList=[];var n=this._timeFormat(),r=\"Pointer[\".concat(e,\"(\").concat(n,\")]\"),o=4*this.maxNameLen,i=(o-r.length)/2;console.log([\"-\".repeat(i),r,\"-\".repeat(i)].join(\"\")),console.log(\"%c\"+t,\"color:#66a\",\"color:red\",\"color:#66a\"),console.log(\"-\".repeat(o))}}},{key:\"_timeFormat\",value:function(){var e=new Date,t=this.zeroFix(e.getMonth()+1,2),n=this.zeroFix(e.getDate(),2);return\"\".concat(t,\"-\").concat(n,\" \").concat(e.getHours(),\":\").concat(e.getSeconds(),\":\").concat(e.getMinutes(),\"~\").concat(e.getMilliseconds())}},{key:\"zeroFix\",value:function(e,t){return(\"000000000\"+e).slice(-t)}},{key:\"reportAll\",value:function(){if(0!=this.options.enablePointer)for(var e in this.pointsList)Object.prototype.hasOwnProperty.call(this.pointsList,e)&&this.eport(e)}}]),e}(),dh=function e(t,n){on(this,e),this.userID=t;var r={};if(r.userID=t,!bs(n))for(var o=0,i=n.length;o<i;o++)switch(n[o].tag){case Ll.NICK:r.nick=n[o].value;break;case Ll.GENDER:r.gender=n[o].value;break;case Ll.BIRTHDAY:r.birthday=n[o].value;break;case Ll.LOCATION:r.location=n[o].value;break;case Ll.SELFSIGNATURE:r.selfSignature=n[o].value;break;case Ll.ALLOWTYPE:r.allowType=n[o].value;break;case Ll.LANGUAGE:r.language=n[o].value;break;case Ll.AVATAR:r.avatar=n[o].value;break;case Ll.MESSAGESETTINGS:r.messageSettings=n[o].value;break;case Ll.ADMINFORBIDTYPE:r.adminForbidType=n[o].value;break;case Ll.LEVEL:r.level=n[o].value;break;case Ll.ROLE:r.role=n[o].value;break;default:as.warn(\"snsProfileItem unkown tag->\",n[o].tag)}this.profile=new ph(r)},mh=function(){function e(t){on(this,e),this.uc=t,this.TAG=\"friend\",this.Actions={G:\"get\",D:\"delete\"},this.friends=new Map,this.pointer=new gh}return sn(e,[{key:\"isMyFriend\",value:function(e){var t=this.friends.has(e);return t||as.debug(\"FriendHandler.isMyFriend \"+e+\" is not my friend\"),t}},{key:\"_transformFriendList\",value:function(e){if(!bs(e)&&!bs(e.infoItem)){as.info(\"FriendHandler._transformFriendList friendNum=\"+e.friendNum);for(var t,n,r=e.infoItem,o=0,i=r.length;o<i;o++)n=r[o].infoAccount,t=new dh(n,r[o].snsProfileItem),this.friends.set(n,t)}}},{key:\"_friends2map\",value:function(e){var t=new Map;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.set(n,e[n]);return t}},{key:\"getFriendList\",value:function(){var e=this,t=this.uc.tim,n=t.connectionController,r=t.outerEmitter,o={};o.fromAccount=this.uc.getMyAccount(),as.info(\"FriendHandler.getFriendList myAccount=\"+o.fromAccount);var i=this.uc.makeCapsule(this.TAG,this.Actions.G,o);return n.request(i).then(function(t){as.info(\"FriendHandler.getFriendList ok\"),e._transformFriendList(t.data);var n=yn(e.friends.values());return r.emit(Wt.FRIENDLIST_GET_SUCCESS,n),Ul(n)}).catch(function(e){return as.error(\"FriendHandler.getFriendList error:\",JSON.stringify(e)),Fl(e)})}},{key:\"deleteFriend\",value:function(e){if(!Array.isArray(e.toAccount))return as.error(\"FriendHandler.deleteFriend options.toAccount 必需是数组\"),Fl({code:Bc.DEL_FRIEND_INVALID_PARAM,message:jc.DEL_FRIEND_INVALID_PARAM});e.toAccount.length>1e3&&(as.warn(\"FriendHandler.deleteFriend 删除好友人数不能超过1000人\"),e.toAccount.length=1e3);var t=this.uc.tim,n=t.connectionController,r=t.outerEmitter,o=this.uc.makeCapsule(this.TAG,this.Actions.D,e);return n.request(o).then(function(e){return as.info(\"FriendHandler.deleteFriend ok\"),r.emit(Wt.FRIEND_DELETE_SUCCESS),Ul()}).catch(function(e){return as.error(\"FriendHandler.deleteFriend error:\",e),Fl(e)})}}]),e}(),_h=function e(t){on(this,e),bs||(this.userID=t.userID||\"\",this.timeStamp=t.timeStamp||0)},vh=function(){function e(t){on(this,e),this.uc=t,this.TAG=\"blacklist\",this.Actions={G:\"get\",C:\"create\",D:\"delete\"},this.blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.curruentSequence=0}return sn(e,[{key:\"getBlacklist\",value:function(){var e=this,t=this.uc.tim.connectionController,n={};n.fromAccount=this.uc.getMyAccount(),n.maxLimited=this.maxLimited,n.startIndex=0,n.lastSequence=this.curruentSequence;var r=this.uc.makeCapsule(this.TAG,this.Actions.G,n);return t.request(r).then(function(t){return as.info(\"BlacklistHandler.getBlacklist ok\"),e.curruentSequence=t.data.curruentSequence,e._handleResponse(t.data.blackListItem,1),e._onBlacklistUpdated()}).catch(function(e){return as.error(\"BlacklistHandler.getBlacklist error:\",e),Fl(e)})}},{key:\"addBlacklist\",value:function(e){var t=this;if(!gs(e.userIDList))return as.error(\"BlacklistHandler.addBlacklist options.userIDList 必需是数组\"),Fl({code:Bc.ADD_BLACKLIST_INVALID_PARAM,message:jc.ADD_BLACKLIST_INVALID_PARAM});var n=this.uc.tim.loginInfo.identifier;if(1===e.userIDList.length&&e.userIDList[0]===n)return as.error(\"BlacklistHandler.addBlacklist 不能把自己拉黑\"),Fl({code:Bc.CANNOT_ADD_SELF_TO_BLACKLIST,message:jc.CANNOT_ADD_SELF_TO_BLACKLIST});e.userIDList.includes(n)&&(e.userIDList=e.userIDList.filter(function(e){return e!==n}),as.warn(\"BlacklistHandler.addBlacklist 不能把自己拉黑，已过滤\"));var r=this.uc.tim.connectionController;e.fromAccount=this.uc.getMyAccount(),e.toAccount=e.userIDList;var o=this.uc.makeCapsule(this.TAG,this.Actions.C,e);return r.request(o).then(function(e){return as.info(\"BlacklistHandler.addBlacklist ok\"),t._handleResponse(e.data.resultItem,1),t._onBlacklistUpdated()}).catch(function(e){return as.error(\"BlacklistHandler.addBlacklist error:\",e),Fl(e)})}},{key:\"_handleResponse\",value:function(e,t){if(!bs(e))for(var n,r,o,i=0,a=e.length;i<a;i++)r=e[i].to,o=e[i].resultCode,(ds(o)||0===o)&&(t?((n=this.blacklistMap.has(r)?this.blacklistMap.get(r):new _h).userID=r,!bs(e[i].addBlackTimeStamp)&&(n.timeStamp=e[i].addBlackTimeStamp),this.blacklistMap.set(r,n)):this.blacklistMap.has(r)&&(n=this.blacklistMap.get(r),this.blacklistMap.delete(r)));as.log(\"BlacklistHandler._handleResponse total=\"+this.blacklistMap.size+\" bAdd=\"+t)}},{key:\"deleteBlacklist\",value:function(e){var t=this;if(!gs(e.userIDList))return as.error(\"BlacklistHandler.deleteBlacklist options.userIDList 必需是数组\"),Fl({code:Bc.DEL_BLACKLIST_INVALID_PARAM,message:jc.DEL_BLACKLIST_INVALID_PARAM});var n=this.uc.tim.connectionController;e.fromAccount=this.uc.getMyAccount(),e.toAccount=e.userIDList;var r=this.uc.makeCapsule(this.TAG,this.Actions.D,e);return n.request(r).then(function(e){return as.info(\"BlacklistHandler.deleteBlacklist ok\"),t._handleResponse(e.data.resultItem,0),t._onBlacklistUpdated()}).catch(function(e){return as.error(\"BlacklistHandler.deleteBlacklist error:\",e),Fl(e)})}},{key:\"_onBlacklistUpdated\",value:function(){var e=this.uc.tim.outerEmitter,t=yn(this.blacklistMap.keys());return e.emit(Wt.BLACKLIST_UPDATED,t),Ul(t)}},{key:\"handleBlackListDelAccount\",value:function(e){for(var t,n=[],r=0,o=e.length;r<o;r++)t=e[r],this.blacklistMap.has(t)&&(this.blacklistMap.delete(t),n.push(t));n.length>0&&(as.log(\"BlacklistHandler.handleBlackListDelAccount delCount=\"+n.length+\" : \"+n.join(\",\")),this.tim.outerEmitter.emit(Wt.BLACKLIST_UPDATED,yn(this.blacklistMap.keys())))}},{key:\"handleBlackListAddAccount\",value:function(e){for(var t,n=[],r=0,o=e.length;r<o;r++)t=e[r],this.blacklistMap.has(t)||(this.blacklistMap.set(t,new _h({userID:t})),n.push(t));n.length>0&&(as.log(\"BlacklistHandler.handleBlackListAddAccount addCount=\"+n.length+\" : \"+n.join(\",\")),this.tim.outerEmitter.emit(Wt.BLACKLIST_UPDATED,yn(this.blacklistMap.keys())))}},{key:\"reset\",value:function(){this.blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.curruentSequence=0}}]),e}(),yh=function(){function e(t){on(this,e),this.uc=t,this.TAG=\"applyC2C\",this.Actions={C:\"create\",G:\"get\",D:\"delete\",U:\"update\"}}return sn(e,[{key:\"applyAddFriend\",value:function(e){var t=this,n=this.uc.tim,r=n.outerEmitter,o=n.connectionController,i=this.uc.makeCapsule(this.TAG,this.Actions.C,e),a=o.request(i);return a.then(function(e){t.uc.isActionSuccessful(\"applyAddFriend\",t.Actions.C,e)?r.emit(Wt.APPLY_ADD_FRIEND_SUCCESS,{data:e.data}):r.emit(Wt.APPLY_ADD_FRIEND_FAIL,{data:e.data})}).catch(function(e){r.emit(Wt.APPLY_ADD_FRIEND_FAIL,{data:e})}),a}},{key:\"getPendency\",value:function(e){var t=this,n=this.tim,r=n.connectionController,o=n.outerEmitter,i=this.uc.makeCapsule(this.TAG,this.Actions.G,e),a=r.request(i);return a.then(function(e){t.uc.isActionSuccessful(\"getPendency\",t.Actions.G,e)?o.emit(Wt.GET_PENDENCY_SUCCESS,{data:e.data}):o.emit(Wt.GET_PENDENCY_FAIL,{data:e.data})}).catch(function(e){o.emit(Wt.GET_PENDENCY_FAIL,{data:e})}),a}},{key:\"deletePendency\",value:function(e){var t=this,n=this.tim,r=n.connectionController,o=n.outerEmitter,i=this.uc.makeCapsule(this.TAG,this.Actions.D,e),a=r.request(i);return a.then(function(e){t.uc.isActionSuccessful(\"deletePendency\",t.Actions.D,e)?o.emit(Wt.DELETE_PENDENCY_SUCCESS,{data:e.data}):o.emit(Wt.DELETE_PENDENCY_FAIL,{data:e.data})}).catch(function(e){o.emit(Wt.DELETE_PENDENCY_FAIL,{data:e})}),a}},{key:\"replyPendency\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.tim,r=n.connectionController,o=n.outerEmitter,i=this.uc.makeCapsule(this.TAG,this.Actions.U,t),a=r.request(i);return a.then(function(t){e.uc.isActionSuccessful(\"replyPendency\",e.Actions.U,t)?o.emit(Wt.REPLY_PENDENCY_SUCCESS,{data:t.data}):o.emit(Wt.REPLY_PENDENCY_FAIL,{data:t.data})}).catch(function(e){o.emit(Wt.REPLY_PENDENCY_FAIL,{data:e})}),a}}]),e}(),Eh=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).profileHandler=new fh(mn(n)),n.friendHandler=new mh(mn(n)),n.blacklistHandler=new vh(mn(n)),n.applyC2CHandler=new yh(mn(n)),n._initializeListener(),n}return pn(t,ll),sn(t,[{key:\"_initializeListener\",value:function(e){var t=this.tim.innerEmitter;t.on(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this.onContextUpdated,this),t.on(Zc.NOTICE_LONGPOLL_PROFILE_MODIFIED,this.onProfileModified,this),t.on(Zc.NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES,this.onNewFriendMessages,this),t.on(Zc.CONVERSATION_LIST_PROFILE_UPDATED,this.onConversationsProfileUpdated,this)}},{key:\"onContextUpdated\",value:function(e){var t=e.data.context;0!=!!t.a2Key&&0!=!!t.tinyID&&(this.profileHandler.getMyProfile(),this.friendHandler.getFriendList(),this.blacklistHandler.getBlacklist())}},{key:\"onGotMyProfile\",value:function(){this.triggerReady()}},{key:\"onProfileModified\",value:function(e){this.profileHandler.onProfileModified(e)}},{key:\"onNewFriendMessages\",value:function(e){as.debug(\"onNewFriendMessages\",JSON.stringify(e.data)),bs(e.data.blackListDelAccount)||this.blacklistHandler.handleBlackListDelAccount(e.data.blackListDelAccount),bs(e.data.blackListAddAccount)||this.blacklistHandler.handleBlackListAddAccount(e.data.blackListAddAccount)}},{key:\"onConversationsProfileUpdated\",value:function(e){this.profileHandler.onConversationsProfileUpdated(e.data)}},{key:\"getMyAccount\",value:function(){return this.tim.context.identifier}},{key:\"isMyFriend\",value:function(e){return this.friendHandler.isMyFriend(e)}},{key:\"makeCapsule\",value:function(e,t,n){return this.createPackage({name:e,action:t,param:n})}},{key:\"getMyProfile\",value:function(){return this.profileHandler.getMyProfile()}},{key:\"getUserProfile\",value:function(e){return this.profileHandler.getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this.profileHandler.updateMyProfile(e)}},{key:\"getFriendList\",value:function(){return this.friendHandler.getFriendList()}},{key:\"deleteFriend\",value:function(e){return this.friendHandler.deleteFriend(e)}},{key:\"getBlacklist\",value:function(){return this.blacklistHandler.getBlacklist()}},{key:\"addBlacklist\",value:function(e){return this.blacklistHandler.addBlacklist(e)}},{key:\"deleteBlacklist\",value:function(e){return this.blacklistHandler.deleteBlacklist(e)}},{key:\"applyAddFriend\",value:function(e){return this.applyC2CHandler.applyAddFriend(e)}},{key:\"getPendency\",value:function(e){return this.applyC2CHandler.getPendency(e)}},{key:\"deletePendency\",value:function(e){return this.applyC2CHandler.deletePendency(e)}},{key:\"replyPendency\",value:function(e){return this.applyC2CHandler.replyPendency(e)}},{key:\"reset\",value:function(){as.warn(\"UserController.reset\"),this.resetReady(),this.profileHandler.reset(),this.blacklistHandler.reset(),this.checkTimes=0}}]),t}(),Ih=[].sort,Sh=[1,2,3],Ch=u(function(){Sh.sort(void 0)}),Th=u(function(){Sh.sort(null)}),Mh=Be(\"sort\");De({target:\"Array\",proto:1,forced:Ch||!Th||Mh},{sort:function(e){return void 0===e?Ih.call(Re(this)):Ih.call(Re(this),Ne(e))}});var Ah=function(){function e(t){on(this,e),this.type=Xt.MSG_TEXT,this.content={text:t.text||\"\"}}return sn(e,[{key:\"setText\",value:function(e){this.content.text=e}},{key:\"sendable\",value:function(){return 0===this.content.text.length?0:1}}]),e}(),Oh=function(){function e(t){on(this,e),this._imageMemoryURL=\"\",this._file=t.file,Oa?this.createImageDataASURLInWXMiniApp(t.file):this.createImageDataASURLInWeb(t.file),this._initImageInfoModel(),this.type=Xt.MSG_IMAGE,this._percent=0,this.content={imageFormat:dl.IMAGE_FORMAT[t.imageFormat]||dl.IMAGE_FORMAT.UNKNOWN,uuid:t.uuid,imageInfoArray:[]},this.initImageInfoArray(t.imageInfoArray),this._defaultImage=\"http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg\",this._autoFixUrl()}return sn(e,[{key:\"_initImageInfoModel\",value:function(){var e=this;this._ImageInfoModel=function(t){this.instanceID=As(9999999),this.sizeType=t.type||0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||\"\",this.url=t.url||e._imageMemoryURL||e._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(e){this.sizeType=e},setImageUrl:function(e){e&&(this.imageUrl=e)},getImageUrl:function(){return this.imageUrl}}}},{key:\"initImageInfoArray\",value:function(e){for(var t=2,n=null,r=null;t>=0;)r=void 0===e||void 0===e[t]?{type:0,size:0,width:0,height:0,url:\"\"}:e[t],(n=new this._ImageInfoModel(r)).setSizeType(t+1),this.addImageInfo(n),t--}},{key:\"updateImageInfoArray\",value:function(e){for(var t,n=this.content.imageInfoArray.length,r=0;r<n;r++)t=this.content.imageInfoArray[r],e.size&&(t.size=e.size),e.url&&t.setImageUrl(e.url),e.width&&(t.width=e.width),e.height&&(t.height=e.height)}},{key:\"_autoFixUrl\",value:function(){for(var e=this.content.imageInfoArray.length,t=\"\",n=\"\",r=[\"http\",\"https\"],o=null,i=0;i<e;i++)this.content.imageInfoArray[i].url&&\"\"!==(o=this.content.imageInfoArray[i]).imageUrl&&(n=o.imageUrl.slice(0,o.imageUrl.indexOf(\"://\")+1),t=o.imageUrl.slice(o.imageUrl.indexOf(\"://\")+1),r.indexOf(n)<0&&(n=\"https:\"),this.content.imageInfoArray[i].setImageUrl([n,t].join(\"\")))}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateImageFormat\",value:function(e){this.content.imageFormat=e}},{key:\"createImageDataASURLInWeb\",value:function(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}},{key:\"createImageDataASURLInWXMiniApp\",value:function(e){e&&e.url&&(this._imageMemoryURL=e.url)}},{key:\"replaceImageInfo\",value:function(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}},{key:\"addImageInfo\",value:function(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}},{key:\"sendable\",value:function(){return 0===this.content.imageInfoArray.length?0:\"\"===this.content.imageInfoArray[0].imageUrl?0:0===this.content.imageInfoArray[0].size?0:1}}]),e}(),Dh=function(){function e(t){on(this,e),this.type=Xt.MSG_FACE,this.content=t||null}return sn(e,[{key:\"sendable\",value:function(){return null===this.content?0:1}}]),e}(),Nh=function(){function e(t){on(this,e),this.type=Xt.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:t.second,size:t.size,url:t.url,remoteAudioUrl:\"\",uuid:t.uuid}}return sn(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateAudioUrl\",value:function(e){this.content.remoteAudioUrl=e}},{key:\"sendable\",value:function(){return\"\"===this.content.remoteAudioUrl?0:1}}]),e}(),Lh={from:1,groupID:1,groupName:1,to:1},Rh=function(){function e(t){on(this,e),this.type=Xt.MSG_GRP_TIP,this.content={},this._initContent(t)}return sn(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case\"remarkInfo\":break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;case\"operatorInfo\":case\"memberInfoList\":break;default:t.content[n]=e[n]}}),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];Lh[r]&&(this.content.groupProfile[r]=e[r])}}}]),e}(),Ph={from:1,groupID:1,name:1,to:1},Gh=function(){function e(t){on(this,e),this.type=Xt.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(t)}return sn(e,[{key:\"_initContent\",value:function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case\"memberInfoList\":break;case\"remarkInfo\":t.content.handleMessage=e[n];break;case\"groupProfile\":t.content.groupProfile={},t._initGroupProfile(e[n]);break;default:t.content[n]=e[n]}})}},{key:\"_initGroupProfile\",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];Ph[r]&&(this.content.groupProfile[r]=e[r])}}}]),e}(),kh=Math.min,wh=[].lastIndexOf,bh=!!wh&&1/[1].lastIndexOf(1,-0)<0,Uh=Be(\"lastIndexOf\"),Fh=bh||Uh?function(e){if(bh)return wh.apply(this,arguments)||0;var t=y(this),n=ae(t.length),r=n-1;for(arguments.length>1&&(r=kh(r,oe(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:wh;De({target:\"Array\",proto:1,forced:Fh!==[].lastIndexOf},{lastIndexOf:Fh});var xh=function(){function e(t){on(this,e);var n=this._check(t);if(n instanceof Hc)throw n;this.type=Xt.MSG_FILE,this._percent=0;var r=this._getFileInfo(t);this.content={downloadFlag:2,fileUrl:t.url||\"\",uuid:t.uuid,fileName:r.name||\"\",fileSize:r.size||0}}return sn(e,[{key:\"_getFileInfo\",value:function(e){if(e.fileName&&e.fileSize)return{size:e.fileSize,name:e.fileName};if(Oa)return{};var t=e.file.files[0];return{size:t.size,name:t.name,type:t.type.slice(t.type.lastIndexOf(\"/\")+1).toLowerCase()}}},{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateFileUrl\",value:function(e){this.content.fileUrl=e}},{key:\"_check\",value:function(e){if(e.size>20971520)return new Hc({code:Bc.MESSAGE_FILE_SIZE_LIMIT,message:\"\".concat(jc.MESSAGE_FILE_SIZE_LIMIT,\": \").concat(20971520,\" bytes\")})}},{key:\"sendable\",value:function(){return\"\"===this.content.fileUrl?0:\"\"===this.content.fileName?0:0===this.content.fileSize?0:1}}]),e}(),qh=function(){function e(t){on(this,e),this.type=Xt.MSG_CUSTOM,this.content={data:t.data||\"\",description:t.description||\"\",extension:t.extension||\"\"}}return sn(e,[{key:\"setData\",value:function(e){return this.content.data=e,this}},{key:\"setDescription\",value:function(e){return this.content.description=e,this}},{key:\"setExtension\",value:function(e){return this.content.extension=e,this}},{key:\"sendable\",value:function(){return 0===this.content.data.length&&0===this.content.description.length&&0===this.content.extension.length?0:1}}]),e}(),Vh=function(){function e(t){on(this,e),this.type=Xt.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:t.remoteVideoUrl,videoFormat:t.videoFormat,videoSecond:parseInt(t.videoSecond,10),videoSize:t.videoSize,videoUrl:t.videoUrl,videoDownloadFlag:2,videoUUID:t.videoUUID,thumbUUID:t.thumbUUID,thumbFormat:t.thumbFormat,thumbWidth:t.thumbWidth,thumbHeight:t.thumbHeight,thumbSize:t.thumbSize,thumbDownloadFlag:2,thumbUrl:t.thumbUrl}}return sn(e,[{key:\"updatePercent\",value:function(e){this._percent=e,this._percent>1&&(this._percent=1)}},{key:\"updateVideoUrl\",value:function(e){e&&(this.content.remoteVideoUrl=e)}},{key:\"sendable\",value:function(){return\"\"===this.content.remoteVideoUrl?0:1}}]),e}(),Bh=function e(t){on(this,e),this.type=Xt.MSG_GEO,this.content=t},jh=function(){function e(t){on(this,e),this.ID=\"\",this.conversationID=t.conversationID||null,this.conversationType=t.conversationType||Xt.CONV_C2C,this.conversationSubType=t.conversationSubType,this.time=t.time||Math.ceil(Date.now()/1e3),this.sequence=t.sequence||0,this.clientSequence=t.clientSequence||t.sequence||0,this.random=t.random||As(),this.messagePriority=t.messagePriority||0,this._elements=[],this.isPlaceMessage=0,this.geo={},this.from=t.from||null,this.to=t.to||null,this.flow=\"\",this.isSystemMessage=t.isSystemMessage||0,this.protocol=t.protocol||\"JSON\",this.isResend=0,this.isRead=0,this.status=t.status||hl.MESSAGE_STATUS.SUCCESS,this._error=0,this._errorInfo=\"\",this.reInitialize(t.currentUser),this.extractGroupInfo(t.groupProfile||null)}return sn(e,[{key:\"getElements\",value:function(){return this._elements}},{key:\"setError\",value:function(e,t){\"number\"==typeof e&&(this._error=e),this._errorInfo=t||\"message elements error!\"}},{key:\"extractGroupInfo\",value:function(e){if(null!==e){var t=e.messageFromAccountExtraInformation;this.nick=\"\",\"string\"==typeof e.fromAccountNick&&(this.nick=e.fromAccountNick),this.avatar=\"\",\"string\"==typeof e.fromAccountHeadurl&&(this.avatar=e.fromAccountHeadurl),this.nameCard=\"\",\"object\"===rn(t)&&t.hasOwnProperty(\"nameCard\")&&(this.nameCard=t.nameCard)}}},{key:\"isError\",value:function(){return 0===this._error?0:1}},{key:\"getIMError\",value:function(){return new Hc({code:this._error,message:this._errorInfo})}},{key:\"_initProxy\",value:function(){this.payload=this._elements[0].content,this.type=this._elements[0].type}},{key:\"reInitialize\",value:function(e){e&&(this.status=this.from?hl.MESSAGE_STATUS.SUCCESS:hl.MESSAGE_STATUS.UNSEND,!this.from&&(this.from=e),this.isRead=1),this._initFlow(e),this._initielizeSequence(e),this._concactConversationID(e),this.generateMessageID(e)}},{key:\"isSendable\",value:function(){return 0===this._elements.length?0:\"function\"!=typeof this._elements[0].sendable?(as.warn(\"\".concat(this._elements[0].type,' need \"boolean : sendable()\" method')),0):this._elements[0].sendable()}},{key:\"_initTo\",value:function(e){this.conversationType===Xt.CONV_GROUP&&(this.to=e.groupID)}},{key:\"_initielizeSequence\",value:function(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return as.error(\"autoincrementIndex(string: key) need key parameter\"),0;if(void 0===Ls[e]){var t=new Date,n=\"3\".concat(t.getHours()).slice(-2),r=\"0\".concat(t.getMinutes()).slice(-2),o=\"0\".concat(t.getSeconds()).slice(-2);Ls[e]=parseInt([n,r,o,\"0001\"].join(\"\")),n=null,r=null,o=null,as.warn(\"utils.autoincrementIndex() create new sequence : \".concat(e,\" = \").concat(Ls[e]))}return Ls[e]++}(e)),0===this.sequence&&this.conversationType===Xt.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:\"generateMessageID\",value:function(e){var t=e===this.from?1:0,n=this.sequence>0?this.sequence:this.clientSequence;this.ID=\"\".concat(this.conversationID,\"-\").concat(n,\"-\").concat(this.random,\"-\").concat(t)}},{key:\"_initFlow\",value:function(e){\"\"!==e&&(this.flow=e===this.from?\"out\":\"in\")}},{key:\"_concactConversationID\",value:function(e){var t=this.to,n=\"\",r=this.conversationType;r!==Xt.CONV_SYSTEM?(n=r===Xt.CONV_C2C?e===this.from?t:this.from:this.to,this.conversationID=\"\".concat(r).concat(n)):this.conversationID=Xt.CONV_SYSTEM}},{key:\"isElement\",value:function(e){return e instanceof Ah||e instanceof Oh||e instanceof Dh||e instanceof Nh||e instanceof xh||e instanceof Vh||e instanceof Rh||e instanceof Gh||e instanceof qh||e instanceof Bh}},{key:\"setElement\",value:function(e){var t=this;if(this.isElement(e))return this._elements=[e],void this._initProxy();var n=function(e){switch(e.type){case Xt.MSG_TEXT:t.setTextElement(e.content);break;case Xt.MSG_IMAGE:t.setImageElement(e.content);break;case Xt.MSG_AUDIO:t.setAudioElement(e.content);break;case Xt.MSG_FILE:t.setFileElement(e.content);break;case Xt.MSG_VIDEO:t.setVideoElement(e.content);break;case Xt.MSG_CUSTOM:t.setCustomElement(e.content);break;case Xt.MSG_GEO:t.setGEOElement(e.content);break;case Xt.MSG_GRP_TIP:t.setGroupTipElement(e.content);break;case Xt.MSG_GRP_SYS_NOTICE:t.setGroupSystemNoticeElement(e.content);break;case Xt.MSG_FACE:t.setFaceElement(e.content);break;default:as.warn(e.type,e.content,\"no operation......\")}};if(Array.isArray(e))for(var r=0;r<e.length;r++)n(e[r]);else n(e);this._initProxy()}},{key:\"setTextElement\",value:function(e){var t=\"string\"==typeof e?e:e.text,n=new Ah({text:t});this._elements.push(n)}},{key:\"setImageElement\",value:function(e){var t=new Oh(e);this._elements.push(t)}},{key:\"setAudioElement\",value:function(e){var t=new Nh(e);this._elements.push(t)}},{key:\"setFileElement\",value:function(e){var t=new xh(e);this._elements.push(t)}},{key:\"setVideoElement\",value:function(e){var t=new Vh(e);this._elements.push(t)}},{key:\"setGEOElement\",value:function(e){var t=new Bh(e);this._elements.push(t)}},{key:\"setCustomElement\",value:function(e){var t=new qh(e);this._elements.push(t)}},{key:\"setGroupTipElement\",value:function(e){var t=new Rh(e);this._elements.push(t)}},{key:\"setGroupSystemNoticeElement\",value:function(e){var t=new Gh(e);this._elements.push(t)}},{key:\"setFaceElement\",value:function(e){var t=new Dh(e);this._elements.push(t)}},{key:\"elements\",get:function(){return as.warn(\"！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！\"),this._elements}}]),e}(),Hh=[\"groupID\",\"name\",\"avatar\",\"type\",\"introduction\",\"notification\",\"ownerID\",\"selfInfo\",\"createTime\",\"infoSequence\",\"lastInfoTime\",\"lastMessage\",\"nextMessageSeq\",\"memberNum\",\"maxMemberNum\",\"memberList\",\"joinOption\",\"groupCustomField\"],Kh=function(){function e(t){on(this,e),this.groupID=\"\",this.name=\"\",this.avatar=\"\",this.type=\"\",this.introduction=\"\",this.notification=\"\",this.ownerID=\"\",this.createTime=\"\",this.infoSequence=\"\",this.lastInfoTime=\"\",this.selfInfo={messageRemindType:\"\",joinTime:\"\",nameCard:\"\",role:\"\"},this.lastMessage={lastTime:\"\",lastSequence:\"\",fromAccount:\"\",messageForShow:\"\"},this.nextMessageSeq=\"\",this.memberNum=\"\",this.maxMemberNum=\"\",this.joinOption=\"\",this.groupCustomField=[],this._initGroup(t)}return sn(e,[{key:\"_initGroup\",value:function(e){for(var t in e)Hh.indexOf(t)<0||(\"selfInfo\"!==t?this[t]=e[t]:this.updateSelfInfo(e[t]))}},{key:\"updateGroup\",value:function(e){e.lastMsgTime&&(this.lastMessage.lastTime=e.lastMsgTime),Cs(this,e,[\"members\",\"errorCode\",\"lastMsgTime\"])}},{key:\"updateSelfInfo\",value:function(e){var t=e.nameCard,n=e.joinTime,r=e.role,o=e.messageRemindType;Cs(this.selfInfo,{nameCard:t,joinTime:n,role:r,messageRemindType:o},[],[\"\",null,void 0,0,NaN])}}]),e}(),Yh=function(e,t){if(ds(t))return\"\";switch(e){case Xt.MSG_TEXT:return t.text;case Xt.MSG_IMAGE:return\"[图片]\";case Xt.MSG_GEO:return\"[位置]\";case Xt.MSG_AUDIO:return\"[语音]\";case Xt.MSG_VIDEO:return\"[视频]\";case Xt.MSG_FILE:return\"[文件]\";case Xt.MSG_CUSTOM:return\"[自定义消息]\";case Xt.MSG_GRP_TIP:return\"[群提示消息]\";case Xt.MSG_GRP_SYS_NOTICE:return\"[群系统通知]\";case Xt.MSG_FACE:return\"[自定义表情]\";default:return\"\"}},zh=function(e){return ds(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:\"\",payload:null,type:\"\"}:e instanceof jh?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",messageForShow:Yh(e.type,e.payload),payload:e.payload||null,type:e.type||null}:ln({},e,{messageForShow:Yh(e.type,e.payload)})},Wh=function(){function e(t){on(this,e),this.conversationID=t.conversationID||\"\",this.unreadCount=t.unreadCount||0,this.type=t.type||\"\",this.lastMessage=zh(t.lastMessage),this._isInfoCompleted=0,this._initProfile(t)}return sn(e,[{key:\"_initProfile\",value:function(e){var t=this;Object.keys(e).forEach(function(n){switch(n){case\"userProfile\":t.userProfile=e.userProfile;break;case\"groupProfile\":t.groupProfile=e.groupProfile}}),ds(this.userProfile)&&this.type===Xt.CONV_C2C?this.userProfile=new ph({userID:e.conversationID.replace(\"C2C\",\"\")}):ds(this.groupProfile)&&this.type===Xt.CONV_GROUP&&(this.groupProfile=new Kh({groupID:e.conversationID.replace(\"GROUP\",\"\")}))}},{key:\"updateUnreadCount\",value:function(e,t){ds(e)||(this.subType===Xt.GRP_CHATROOM||Gs(this.subType)?this.unreadCount=0:t&&this.type===Xt.CONV_GROUP?this.unreadCount=e:this.unreadCount=this.unreadCount+e)}},{key:\"toAccount\",get:function(){return this.conversationID.replace(\"C2C\",\"\").replace(\"GROUP\",\"\")}},{key:\"subType\",get:function(){return this.groupProfile?this.groupProfile.type:\"\"}}]),e}(),Xh=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).conversationMap=new Map,n.hasLocalConversationList=0,n.tempGroupList=[],n._initListeners(),n}return pn(t,ll),sn(t,[{key:\"createLocalConversation\",value:function(e){return this.conversationMap.has(e)?this.conversationMap.get(e):new Wh({conversationID:e,type:e.slice(0,3)===Xt.CONV_C2C?Xt.CONV_C2C:Xt.CONV_GROUP})}},{key:\"hasLocalConversation\",value:function(e){return this.conversationMap.has(e)}},{key:\"getConversationList\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=!t,r=this.createPackage({name:\"conversation\",action:\"query\"});return as.log(\"ConversationController.getConversationList.\"),this.tim.connectionController.request(r).then(function(r){var o=r.data.conversations,i=void 0===o?[]:o,a=e._getConversationOptions(i);return t&&e._conversationMapTreeShaking(a),e._updateLocalConversationList(a,1),e._setStorageConversationList(),e.tempGroupList.length>0&&(e._onUpdateConversationGroupProfile(e.tempGroupList),e.tempGroupList=[]),e._isReady&&e._emitConversationUpdate(n),e.triggerReady(),as.log(\"ConversationController.getConversationList ok.\"),Ul({conversationList:e.getLocalConversationList()})}).catch(function(e){return as.error(\"ConversationController.getConversationList error:\",e),Fl(e)})}},{key:\"getConversationProfile\",value:function(e){var t=this.conversationMap.has(e)?this.conversationMap.get(e):this.createLocalConversation(e);return t._isInfoCompleted||t.type===Xt.CONV_SYSTEM?Ul({conversation:t}):(as.log(\"ConversationController.getConversationProfile. conversationID:\",e),this._updateUserOrGroupProfileCompletely(t).then(function(t){return as.log(\"ConversationController.getConversationProfile ok. conversationID:\",e),t}).catch(function(e){return as.error(\"ConversationController.getConversationProfile error:\",e),Fl(e)}))}},{key:\"deleteConversation\",value:function(e){var t=this,n={};if(!this.conversationMap.has(e)){var r=new Hc({code:Bc.CONVERSATION_NOT_FOUND,message:jc.CONVERSATION_NOT_FOUND});return Fl(r)}switch(this.conversationMap.get(e).type){case Xt.CONV_C2C:n.type=1,n.toAccount=e.slice(3);break;case Xt.CONV_GROUP:n.type=2,n.toGroupID=e.slice(5);break;case Xt.CONV_SYSTEM:return this.tim.groupController.deleteGroupSystemNotice({messageList:this.tim.messageController.getLocalMessageList(e)}),this.deleteLocalConversation(e),Ul({conversationID:e});default:var o=new Hc({code:Bc.CONVERSATION_UN_RECORDED_TYPE,message:jc.CONVERSATION_UN_RECORDED_TYPE});return Fl(o)}as.log(\"ConversationController.deleteConversation. conversationID:\",e);var i=this.createPackage({name:\"conversation\",action:\"delete\",param:n});return this.tim.setMessageRead({conversationID:e}).then(function(){return t.connectionController.request(i)}).then(function(){return as.log(\"ConversationController.deleteConversation ok. conversationID:\",e),t.deleteLocalConversation(e),Ul({conversationID:e})}).catch(function(e){return as.error(\"ConversationController.deleteConversation error:\",e),Fl(e)})}},{key:\"getLocalConversationList\",value:function(){return yn(this.conversationMap.values())}},{key:\"getLocalConversation\",value:function(e){return this.conversationMap.get(e)}},{key:\"_initLocalConversationList\",value:function(){as.time(Vl),as.log(\"ConversationController._initLocalConversationList init\");var e=this._getStorageConversationList();if(this.hasLocalConversationList=null!==e&&0!==e.length,this.hasLocalConversationList){for(var t=0,n=e.length;t<n;t++)this.conversationMap.set(e[t].conversationID,new Wh(e[t]));this._emitConversationUpdate(1,0)}this.getConversationList(1).then(function(){as.log(\"ConversationController._initLocalConversationList init ok. initCost=\".concat(as.timeEnd(Vl),\"ms\"))})}},{key:\"_getStorageConversationList\",value:function(){return this.tim.storage.getItem(\"conversationMap\")}},{key:\"_setStorageConversationList\",value:function(){var e=[];this.conversationMap.forEach(function(t){var n=t.conversationID,r=t.type,o=t.subType,i=t.lastMessage,a=t.groupProfile,s=t.userProfile;e.push({conversationID:n,type:r,subType:o,lastMessage:i,groupProfile:a,userProfile:s})}),this.tim.storage.setItem(\"conversationMap\",e)}},{key:\"_initListeners\",value:function(){this.tim.innerEmitter.once(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initLocalConversationList,this),this.tim.innerEmitter.on(Zc.MESSAGE_SENDING,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Zc.MESSAGE_SENDINGSEND_SUCCESS,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Zc.MESSAGE_GROUP_SEND_SUCCESS,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Zc.MESSAGE_SYNC_PROCESSING,this._handleSyncMessages,this),this.tim.innerEmitter.on(Zc.MESSAGE_SYNC_FINISHED,this._handleSyncMessages,this),this.tim.innerEmitter.on(Zc.MESSAGE_C2C_INSTANT_RECEIVED,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Zc.MESSAGE_GROUP_INSTANT_RECEIVED,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Zc.MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Zc.GROUP_LIST_UPDATED,this._onUpdateConversationGroupProfile,this),this.tim.innerEmitter.on(Zc.PROFILE_UPDATED,this._onUpdateConversationUserProfile,this)}},{key:\"_onUpdateConversationGroupProfile\",value:function(e){var t=this;this.hasLocalConversationList||(this.tempGroupList=e),e.forEach(function(e){var n=\"GROUP\".concat(e.groupID);if(t.conversationMap.has(n)){var r=t.conversationMap.get(n);r.groupProfile=e,r.lastMessage.lastSequence=e.nextMessageSeq-1,r.subType||(r.subType=e.type)}}),this._emitConversationUpdate(1,0)}},{key:\"_onUpdateConversationUserProfile\",value:function(e){var t=this;e.data.forEach(function(e){var n=\"C2C\".concat(e.userID);t.conversationMap.has(n)&&(t.conversationMap.get(n).userProfile=e)}),this._emitConversationUpdate(1,0)}},{key:\"_handleSyncMessages\",value:function(e){this._onSendOrReceiveMessage(e,1)}},{key:\"_onSendOrReceiveMessage\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.data.eventDataList;this._isReady?0!==r.length&&(this._updateLocalConversationList(r,0,n),this._setStorageConversationList(),this._emitConversationUpdate()):this.ready(function(){t._onSendOrReceiveMessage(e,n)})}},{key:\"_updateLocalConversationList\",value:function(e,t,n){var r;r=this._updateTempConversations(e,t,n),this.conversationMap=new Map(this._sortConversations([].concat(yn(r.conversations),yn(this.conversationMap)))),t||this._updateUserOrGroupProfile(r.newerConversations)}},{key:\"_updateTempConversations\",value:function(e,t,n){for(var r=[],o=[],i=0,a=e.length;i<a;i++){var s=new Wh(e[i]),u=this.conversationMap.get(s.conversationID);if(this.conversationMap.has(s.conversationID)){var c=[\"unreadCount\",\"allowType\",\"adminForbidType\",\"payload\"];n&&c.push(\"lastMessage\"),Cs(u,s,c,[null,void 0,\"\",0,NaN]),u.updateUnreadCount(s.unreadCount,t),n||(u.lastMessage.payload=e[i].lastMessage.payload),this.conversationMap.delete(u.conversationID),r.push([u.conversationID,u])}else{if(s.type===Xt.CONV_GROUP){var l=s.groupProfile.groupID,p=this.tim.groupController.getLocalGroupProfile(l);p&&(s.groupProfile=p,s.updateUnreadCount(0))}o.push(s),r.push([s.conversationID,s])}}return{conversations:r,newerConversations:o}}},{key:\"_sortConversations\",value:function(e){return e.sort(function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime})}},{key:\"_updateUserOrGroupProfile\",value:function(e){var t=this;if(0!==e.length){var n=[],r=[];e.forEach(function(e){if(e.type===Xt.CONV_C2C)n.push(e.toAccount);else if(e.type===Xt.CONV_GROUP){var o=e.toAccount;t.tim.groupController.hasLocalGroup(o)?e.groupProfile=t.tim.groupController.getLocalGroupProfile(o):r.push(o)}}),n.length>0&&this.tim.getUserProfile({userIDList:n}).then(function(e){var n=e.data;gs(n)?n.forEach(function(e){t.conversationMap.get(\"C2C\".concat(e.userID)).userProfile=e}):t.conversationMap.get(\"C2C\".concat(n.userID)).userProfile=n}),r.length>0&&this.tim.groupController.getGroupProfileAdvance({groupIDList:r,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"FaceUrl\"]}}).then(function(e){e.data.successGroupList.forEach(function(e){var n=\"GROUP\".concat(e.groupID);if(t.conversationMap.has(n)){var r=t.conversationMap.get(n);Cs(r.groupProfile,e,[],[null,void 0,\"\",0,NaN]),!r.subType&&e.type&&(r.subType=e.type)}})})}}},{key:\"_updateUserOrGroupProfileCompletely\",value:function(e){var t=this;return e.type===Xt.CONV_C2C?this.tim.getUserProfile({userIDList:[e.toAccount]}).then(function(n){var r=n.data;return 0===r.length?Fl(new Hc({code:Bc.USER_OR_GROUP_NOT_FOUND,message:jc.USER_OR_GROUP_NOT_FOUND})):(e.userProfile=r[0],e._isInfoCompleted=1,t._unshiftConversation(e),Ul({conversation:e}))}):this.tim.getGroupProfile({groupID:e.toAccount}).then(function(n){return e.groupProfile=n.data.group,e._isInfoCompleted=1,t._unshiftConversation(e),Ul({conversation:e})})}},{key:\"_unshiftConversation\",value:function(e){e instanceof Wh&&!this.conversationMap.has(e.conversationID)&&(this.conversationMap=new Map([[e.conversationID,e]].concat(yn(this.conversationMap))),this._setStorageConversationList(),this._emitConversationUpdate(1,0))}},{key:\"deleteLocalConversation\",value:function(e){return this.conversationMap.delete(e),this._setStorageConversationList(),this.tim.innerEmitter.emit(Zc.CONVERSATION_DELETED,e),this._emitConversationUpdate(1,0),this.conversationMap.has(e)}},{key:\"_getConversationOptions\",value:function(e){var t=[],n=e.map(function(e){if(1===e.type){var n={userID:e.userID,nick:e.c2CNick,avatar:e.c2CImage};return t.push(n),{conversationID:\"C2C\".concat(e.userID),type:\"C2C\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null},userProfile:new ph(n)}}return{conversationID:\"GROUP\".concat(e.groupID),type:\"GROUP\",lastMessage:{lastTime:e.time,lastSequence:e.messageReadSeq+e.unreadCount,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null},groupProfile:new Kh({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount}});return t.length>0&&this.tim.innerEmitter.emit(Zc.CONVERSATION_LIST_PROFILE_UPDATED,{data:t}),n}},{key:\"_emitConversationUpdate\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=yn(this.conversationMap.values());t&&this.tim.innerEmitter.emit(Zc.CONVERSATION_LIST_UPDATED,n),e&&this.tim.outerEmitter.emit(Wt.CONVERSATION_LIST_UPDATED,n)}},{key:\"_conversationMapTreeShaking\",value:function(e){var t=this,n=new Map(yn(this.conversationMap));e.forEach(function(e){return n.delete(e.conversationID)}),n.has(Xt.CONV_SYSTEM)&&n.delete(Xt.CONV_SYSTEM);var r=this.tim.groupController.getJoinedAVChatRoom();r&&n.delete(\"\".concat(Xt.CONV_GROUP).concat(r.groupID)),yn(n.keys()).forEach(function(e){return t.conversationMap.delete(e)})}},{key:\"reset\",value:function(){this.conversationMap.clear(),this.hasLocalConversationList=0,this.resetReady(),this.tim.innerEmitter.once(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initLocalConversationList,this)}}]),t}(),Jh=Ve.find,Qh=1;\"find\"in[]&&Array(1).find(function(){Qh=0}),De({target:\"Array\",proto:1,forced:Qh},{find:function(e){return Jh(this,e,arguments.length>1?arguments[1]:void 0)}}),Sr(\"find\");var Zh=1..toFixed,$h=Math.floor,eg=function(e,t,n){return 0===t?n:t%2==1?eg(e,t-1,n*e):eg(e*e,t/2,n)},tg=Zh&&(\"0.000\"!==8e-5.toFixed(3)||\"1\"!==.9.toFixed(0)||\"1.25\"!==1.255.toFixed(2)||\"1000000000000000128\"!==(0xde0b6b3a7640080).toFixed(0))||!u(function(){Zh.call({})});De({target:\"Number\",proto:1,forced:tg},{toFixed:function(e){var t,n,r,o,i=function(e){if(\"number\"!=typeof e&&\"Number\"!=d(e))throw TypeError(\"Incorrect invocation\");return+e}(this),a=oe(e),s=[0,0,0,0,0,0],u=\"\",c=\"0\",l=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=$h(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=$h(n/e),n=n%e*1e7},f=function(){for(var e=6,t=\"\";--e>=0;)if(\"\"!==t||0===e||0!==s[e]){var n=String(s[e]);t=\"\"===t?n:t+hh.call(\"0\",7-n.length)+n}return t};if(a<0||a>20)throw RangeError(\"Incorrect fraction digits\");if(i!=i)return\"NaN\";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(u=\"-\",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*eg(2,69,1))-69)<0?i*eg(2,-t,1):i/eg(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),r=a;r>=7;)l(1e7,0),r-=7;for(l(eg(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),l(1,1),p(2),c=f()}else l(0,n),l(1<<-t,0),c=f()+hh.call(\"0\",a);return c=a>0?u+((o=c.length)<=a?\"0.\"+hh.call(\"0\",a-o)+c:c.slice(0,o-a)+\".\"+c.slice(o-a)):u+c}});var ng=function(){function e(t){if(on(this,e),void 0===t)throw new Hc({code:Bc.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,message:jc.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS});if(void 0===t.tim)throw new Hc({code:Bc.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,message:\"\".concat(jc.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,\".tim\")});this.list=new Map,this.tim=t.tim,this._initializeOptions(t)}return sn(e,[{key:\"getLocalOldestMessageByConversationID\",value:function(e){if(!e)return null;if(!this.list.has(e))return null;var t=this.list.get(e).values();return t?t.next().value:null}},{key:\"_initializeOptions\",value:function(e){this.options={};var t={memory:{maxDatasPerKey:100,maxBytesPerData:256,maxKeys:0},cache:{maxDatasPerKey:10,maxBytesPerData:256,maxKeys:0}};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(void 0===e[n]){this.options[n]=t[n];continue}var r=t[n];for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){if(void 0===e[n][o]){this.options[n][o]=r[o];continue}this.options[n][o]=e[n][o]}}}},{key:\"_parseMessageFormLikeKeyValue\",value:function(e){return[e.conversationID,e]}},{key:\"pushIn\",value:function(e){var t=this._parseMessageFormLikeKeyValue(e),n=0;return void 0===this.list.get(t[0])&&this.list.set(t[0],new Map),this.list.has(e.conversationID)&&this.list.get(e.conversationID).has(t[1].ID)&&(n=1),this.list.get(t[0]).set(t[1].ID,t[1]),n?null:e}},{key:\"shiftIn\",value:function(e){Array.isArray(e)?0!==e.length&&this._shiftInMultipleMessages(e):this._shiftSingleMessage(e)}},{key:\"_shiftSingleMessage\",value:function(e){var t=this._parseMessageFormLikeKeyValue(e);if(void 0===this.list.get(t[0]))return this.list.set(t[0],new Map),void this.list.get(t[0]).set(t[1].ID,t[1]);var n=Array.from(this.list.get(t[0]));n.unshift([t[1].ID,t[1]]),this.list.set(t[0],new Map(n))}},{key:\"_shiftInMultipleMessages\",value:function(e){for(var t=e.length,n=[],r=e[0].conversationID,o=this.list.has(r)?Array.from(this.list.get(r)):[],i=0;i<t;i++)n.push([e[i].ID,e[i]]);this.list.set(r,new Map(n.concat(o)))}},{key:\"remove\",value:function(e){var t=e.conversationID,n=e.ID;this.list.has(t)&&this.list.get(t).delete(n)}},{key:\"removeByConversationID\",value:function(e){this.list.has(e)&&this.list.delete(e)}},{key:\"hasLocalMessageList\",value:function(e){return this.list.has(e)}},{key:\"getLocalMessageList\",value:function(e){return this.hasLocalMessageList(e)?yn(this.list.get(e).values()):[]}},{key:\"hasLocalMessage\",value:function(e,t){return this.hasLocalMessageList(e)?this.list.get(e).has(t):0}},{key:\"getLocalMessage\",value:function(e,t){return this.hasLocalMessage(e,t)?this.list.get(e).get(t):null}},{key:\"reset\",value:function(){this.list.clear()}}]),e}(),rg=function(){function e(t){on(this,e),this.tim=t}return sn(e,[{key:\"setMessageRead\",value:function(e){var t=e.conversationID,n=e.messageID,r=this.tim.conversationController.getLocalConversation(t);if(!r||0===r.unreadCount)return Ul();var o=n?this.tim.messageController.getLocalMessage(t,n):null;switch(r.type){case Xt.CONV_C2C:return this._setC2CMessageRead({conversationID:t,lastMessageTime:o?o.time:r.lastMessage.lastTime});case Xt.CONV_GROUP:return this._setGroupMessageRead({conversationID:t,lastMessageSeq:o?o.sequence:r.lastMessage.lastSequence});case Xt.CONV_SYSTEM:return r.unreadCount=0,Ul();default:return Ul()}}},{key:\"_setC2CMessageRead\",value:function(e){var t=this,n=e.conversationID,r=e.lastMessageTime,o=this.tim.messageController.createPackage({name:\"conversation\",action:\"setC2CMessageRead\",param:{C2CMsgReaded:{cookie:\"\",C2CMsgReadedItem:[{toAccount:n.replace(\"C2C\",\"\"),lastMessageTime:r}]}}});return this._updateIsReadAfterReadReport({conversationID:n,lastMessageTime:r}),this._updateUnreadCount(n),this.tim.connectionController.request(o).then(function(){return new kl}).catch(function(e){return t.tim.innerEmitter.emit(Zc.ERROR_DETECTED,e),Promise.reject(new kl(e))})}},{key:\"_setGroupMessageRead\",value:function(e){var t=this,n=e.conversationID,r=e.lastMessageSeq,o=this.tim.messageController.createPackage({name:\"conversation\",action:\"setGroupMessageRead\",param:{groupID:n.replace(\"GROUP\",\"\"),messageReadSeq:r}});return this._updateIsReadAfterReadReport({conversationID:n,lastMessageSeq:r}),this._updateUnreadCount(n),this.tim.connectionController.request(o).then(function(){return new kl}).catch(function(e){return t.tim.innerEmitter.emit(Zc.ERROR_DETECTED,e),Promise.reject(new kl(e))})}},{key:\"_updateUnreadCount\",value:function(e){var t=this.tim,n=t.conversationController,r=t.messageController,o=n.getLocalConversation(e),i=r.getLocalMessageList(e);o&&(o.unreadCount=i.filter(function(e){return!e.isRead}).length)}},{key:\"_updateIsReadAfterReadReport\",value:function(e){var t=e.conversationID,n=e.lastMessageSeq,r=e.lastMessageTime,o=this.tim.messageController.getLocalMessageList(t);if(0!==o.length)for(var i=o.length-1;i>=0;i--){var a=o[i];if(!(r&&a.time>r||n&&a.sequence>n)){if(\"in\"===a.flow&&a.isRead)break;a.isRead=1}}}},{key:\"updateIsRead\",value:function(e){var t=this.tim,n=t.conversationController,r=t.messageController,o=n.getLocalConversation(e),i=r.getLocalMessageList(e);if(o&&0!==i.length&&[Xt.CONV_C2C,Xt.CONV_GROUP].includes(o.type))for(var a=0;a<i.length-o.unreadCount&&!i[a].isRead;a++)i[a].isRead=1}}]),e}(),og=Ve.findIndex,ig=1;\"findIndex\"in[]&&Array(1).findIndex(function(){ig=0}),De({target:\"Array\",proto:1,forced:ig},{findIndex:function(e){return og(this,e,arguments.length>1?arguments[1]:void 0)}}),Sr(\"findIndex\");var ag=function(){function e(t){var n=t.tim,r=t.messageController;on(this,e),this.tim=n,this.messageController=r,this.completedMap=new Map,this._initListener()}return sn(e,[{key:\"getMessageList\",value:function(e){var t=this,n=e.conversationID,r=e.nextReqMessageID,o=e.count;(ds(o)||o>15)&&(o=15);var i=this._computeLeftCount({conversationID:n,nextReqMessageID:r});return this._needGetHistory({conversationID:n,leftCount:i,count:o})?this.messageController.getHistoryMessages({conversationID:n,count:20}).then(function(){return i=t._computeLeftCount({conversationID:n,nextReqMessageID:r}),new kl(t._computeResult({conversationID:n,nextReqMessageID:r,count:o,leftCount:i}))}):Ul(this._computeResult({conversationID:n,nextReqMessageID:r,count:o,leftCount:i}))}},{key:\"setCompleted\",value:function(e){this.completedMap.set(e,1)}},{key:\"deleteCompletedItem\",value:function(e){this.completedMap.delete(e)}},{key:\"_initListener\",value:function(){var e=this;this.tim.innerEmitter.on(Zc.SDK_READY,function(){e.completedMap.set(Xt.CONV_SYSTEM,1)}),this.tim.innerEmitter.on(Zc.AVCHATROOM_JOIN_SUCCESS,function(t){var n=t.data;e.completedMap.set(\"\".concat(Xt.CONV_GROUP).concat(n),1)})}},{key:\"_getMessageListSize\",value:function(e){return this.messageController.getLocalMessageList(e).length}},{key:\"_needGetHistory\",value:function(e){var t=e.conversationID,n=e.leftCount,r=e.count,o=this.tim.conversationController.getLocalConversation(t),i=o?o.type===Xt.CONV_SYSTEM:0,a=o?o.subType===Xt.GRP_AVCHATROOM:0;return i||a?0:n<r&&!this.completedMap.has(t)}},{key:\"_computeResult\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,r=e.count,o=e.leftCount,i=this._computeMessageList({conversationID:t,nextReqMessageID:n,count:r}),a=this._computeIsCompleted({conversationID:t,leftCount:o,count:r});return{messageList:i,nextReqMessageID:this._computeNextReqMessageID({messageList:i,isCompleted:a,conversationID:t}),isCompleted:a}}},{key:\"_computeNextReqMessageID\",value:function(e){var t=e.messageList,n=e.isCompleted,r=e.conversationID;if(!n)return 0===t.length?\"\":t[0].ID;var o=this.messageController.getLocalMessageList(r);return 0===o.length?\"\":o[0].ID}},{key:\"_computeMessageList\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID,r=e.count,o=this.messageController.getLocalMessageList(t),i=this._computeIndexEnd({nextReqMessageID:n,messageList:o}),a=this._computeIndexStart({indexEnd:i,count:r});return o.slice(a,i)}},{key:\"_computeIndexEnd\",value:function(e){var t=e.messageList,n=void 0===t?[]:t,r=e.nextReqMessageID;return r?n.findIndex(function(e){return e.ID===r}):n.length}},{key:\"_computeIndexStart\",value:function(e){var t=e.indexEnd,n=e.count;return t>n?t-n:0}},{key:\"_computeLeftCount\",value:function(e){var t=e.conversationID,n=e.nextReqMessageID;return n?this.messageController.getLocalMessageList(t).findIndex(function(e){return e.ID===n}):this._getMessageListSize(t)}},{key:\"_computeIsCompleted\",value:function(e){var t=e.conversationID;return e.leftCount<=e.count&&this.completedMap.has(t)?1:0}},{key:\"reset\",value:function(){this.completedMap.clear()}}]),e}(),sg=Math.floor;De({target:\"Number\",stat:1},{isInteger:function(e){return!E(e)&&isFinite(e)&&sg(e)===e}});var ug=function(){function e(t,n){on(this,e),this.options=n||{enablePointer:1},this.taskName=t||[\"task\",this._timeFormat()].join(\"-\"),this.pointsList=[],this.reportText=\"\",this.gapChar=\"…\",this.currentTask=\"\"}return sn(e,[{key:\"dot\",value:function(e){if(\"string\"==typeof e)if(0!==e.length){var t=Date.now();this.pointsList.push({pointerName:e,time:t})}else as.error(\"PointerTask.dot(pointerName), need param: pointerName\");else as.error(\"PointerTask.dot(pointerName), pointerName must be string\")}},{key:\"_analisys\",value:function(){for(var e=this.pointsList,t=e.length,n=[],r=[],o=0;o<t;o++)0!==o&&(r=this._analisysTowPoints(e[o-1],e[o]),n.push(r.join(\"\")));return r=this._analisysTowPoints(e[0],e[t-1],1),n.push(r.join(\"\")),n.join(\"\")}},{key:\"_analisysTowPoints\",value:function(e,t){var n=(t.time-e.time).toString();return[\"(\",e.pointerName,\")->(\",t.pointerName,\")=\",n,\"ms;\"]}},{key:\"report\",value:function(){0!=this.options.enablePointer&&as.log(this.reportString())}},{key:\"reportString\",value:function(){return 1==!!this.reportText?this.reportText:0===this.pointsList.length?\"\":(this.reportText=\"\".concat(this.taskName,\" report：\").concat(this._analisys()),this.reportText)}},{key:\"_timeFormat\",value:function(){var e=new Date,t=this.zeroFix(e.getMonth()+1,2),n=this.zeroFix(e.getDate(),2);return\"\".concat(t,\"-\").concat(n,\" \").concat(e.getHours(),\":\").concat(e.getSeconds(),\":\").concat(e.getMinutes(),\".\").concat(e.getMilliseconds())}},{key:\"zeroFix\",value:function(e,t){return Number.isInteger(t)?t<0?(as.error('PointerTask.zeroFix(num, length); param \"length\" must greater then zero'),\"\"):(\"000000000\"+e).slice(t=1+~t):(as.error('PointerTask.zeroFix(num, length); param \"length\" should be an integer'),\"\")}}]),e}(),cg=function e(t){on(this,e),this.value=t,this.next=null},lg=function(){function e(t){on(this,e),this.MAX_LENGTH=t,this.pTail=null,this.pNodeToDel=null,this.map=new Map,as.log(\"SinglyLinkedList init MAX_LENGTH=\".concat(this.MAX_LENGTH))}return sn(e,[{key:\"pushIn\",value:function(e){var t=new cg(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{var n=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(n.value),n.next=null,n=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}},{key:\"has\",value:function(e){return this.map.has(e)}},{key:\"reset\",value:function(){for(var e;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}]),e}(),pg=function(){function e(t){on(this,e),this.tim=t}return sn(e,[{key:\"upload\",value:function(e){switch(e.type){case Xt.MSG_IMAGE:return this._uploadImage(e);case Xt.MSG_FILE:return this._uploadFile(e);case Xt.MSG_AUDIO:return this._uploadAudio(e);case Xt.MSG_VIDEO:return this._uploadVideo(e);default:return Promise.resolve()}}},{key:\"_uploadImage\",value:function(e){var t=this.tim,n=t.uploadController,r=t.messageController,o=e.getElements()[0],i=r.getMessageOptionByID(e.messageID);return n.uploadImage({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),_s(i.onProgress))try{i.onProgress(e)}catch(t){return Fl(new Hc({code:Bc.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:\"\".concat(jc.MESSAGE_ONPROGRESS_FUNCTION_ERROR)}))}}}).then(function(e){var t,n=e.location,r=e.fileType,i=e.fileSize,a=Rs(n);return o.updateImageFormat(r),o.updateImageInfoArray({size:i,url:a}),t=o._imageMemoryURL,Oa?new Promise(function(e,n){wx.getImageInfo({src:t,success:function(t){e({width:t.width,height:t.height})},fail:function(){e({width:0,height:0})}})}):wa&&9===ba?Promise.resolve({width:0,height:0}):new Promise(function(e,n){var r=new Image;r.onload=function(){e({width:this.width,height:this.height}),r=null},r.onerror=function(){e({width:0,height:0}),r=null},r.src=t})}).then(function(t){var n=t.width,r=t.height;return o.updateImageInfoArray({width:n,height:r}),e})}},{key:\"_uploadFile\",value:function(e){var t=this.tim,n=t.uploadController,r=t.messageController,o=e.getElements()[0],i=r.getMessageOptionByID(e.messageID);return n.uploadFile({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),_s(i.onProgress))try{i.onProgress(e)}catch(t){return Fl(new Hc({code:Bc.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:\"\".concat(jc.MESSAGE_ONPROGRESS_FUNCTION_ERROR)}))}}}).then(function(t){var n=t.location,r=Rs(n);return o.updateFileUrl(r),e})}},{key:\"_uploadAudio\",value:function(e){var t=this.tim,n=t.uploadController,r=t.messageController,o=e.getElements()[0],i=r.getMessageOptionByID(e.messageID);return n.uploadAudio({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),_s(i.onProgress))try{i.onProgress(e)}catch(t){return Fl(new Hc({code:Bc.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:\"\".concat(jc.MESSAGE_ONPROGRESS_FUNCTION_ERROR)}))}}}).then(function(t){var n=t.location,r=Rs(n);return o.updateAudioUrl(r),e})}},{key:\"_uploadVideo\",value:function(e){var t=this.tim,n=t.uploadController,r=t.messageController,o=e.getElements()[0],i=r.getMessageOptionByID(e.messageID);return n.uploadVideo({file:i.payload.file,to:i.to,onProgress:function(e){if(o.updatePercent(e),_s(i.onProgress))try{i.onProgress(e)}catch(t){return Fl(new Hc({code:Bc.MESSAGE_ONPROGRESS_FUNCTION_ERROR,message:\"\".concat(jc.MESSAGE_ONPROGRESS_FUNCTION_ERROR)}))}}}).then(function(e){if(Oa){var t=Rs(e.location);o.updateVideoUrl(t)}}).catch(function(){return Fl(new Hc({code:Bc.MESSAGE_VIDEO_UPLOAD_FAIL,message:\"\".concat(jc.MESSAGE_VIDEO_UPLOAD_FAIL)}))})}}]),e}(),fg=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e)))._initializeMembers(),n._initializeListener(),n._initialzeHandlers(),n.messageOptionMap=new Map,n}return pn(t,ll),sn(t,[{key:\"_initializeMembers\",value:function(){this.messagesList=new ng({tim:this.tim}),this.currentMessageKey={},this.singlyLinkedList=new lg(100)}},{key:\"_initialzeHandlers\",value:function(){this.readReportHandler=new rg(this.tim),this.getMessageHandler=new ag({messageController:this,tim:this.tim}),this.uploadFileHandler=new pg(this.tim)}},{key:\"reset\",value:function(){this.messagesList.reset(),this.currentMessageKey={},this.getMessageHandler.reset(),this.singlyLinkedList.reset(),this.messageOptionMap.clear()}},{key:\"_initializeListener\",value:function(){var e=this.tim.innerEmitter;e.on(Zc.NOTICE_LONGPOLL_NEW_C2C_NOTICE,this._onReceiveC2CMessage,this),e.on(Zc.SYNC_MESSAGE_C2C_PROCESSING,this._onSyncMessagesProcessing,this),e.on(Zc.SYNC_MESSAGE_C2C_FINISHED,this._onSyncMessagesFinished,this),e.on(Zc.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES,this._onReceiveGroupMessage,this),e.on(Zc.NOTICE_LONGPOLL_NEW_GROUP_TIPS,this._onReceiveGroupTips,this),e.on(Zc.NOTICE_LONGPOLL_NEW_GROUP_NOTICE,this._onReceiveSystemNotice,this),e.on(Zc.CONVERSATION_DELETED,this._clearConversationMessages,this)}},{key:\"sendMessageInstance\",value:function(e){var t,n,r=this,o=(t=\"MessageController.sendMessageInstance(), \".concat(e.ID),n=this.tim.options,new ug(t,n)),i=this.tim.innerEmitter,a=null;switch(o.dot(\"innerEmitter \".concat(Zc.MESSAGE_SENDING)),i.emit(Zc.MESSAGE_SENDING,{data:{eventDataList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:e}]}}),o.dot(\"init handles \".concat(e.conversationType)),e.conversationType){case Xt.CONV_C2C:a=this._handleOnSendC2CMessageSuccess.bind(this);break;case Xt.CONV_GROUP:a=this._handleOnSendGroupMessageSuccess.bind(this);break;default:return o.dot(\"error \".concat(e.conversationType)),o.report(),Fl(new Hc({code:Bc.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:jc.MESSAGE_SEND_INVALID_CONVERSATION_TYPE}))}return this.singlyLinkedList.pushIn(e.random),this.uploadFileHandler.upload(e).then(function(){var t=null;return e.isSendable()?(e.conversationType===Xt.CONV_C2C?t=r._createC2CMessagePack(e):e.conversationType===Xt.CONV_GROUP&&(t=r._createGroupMessagePack(e)),r.tim.connectionController.request(t)):(o.dot(\"message unsendable\"),o.report(),Fl({code:Bc.MESSAGE_FILE_URL_IS_EMPTY,message:jc.MESSAGE_FILE_URL_IS_EMPTY}))}).then(function(t){return o.dot(\"send success\"),e.conversationType===Xt.CONV_GROUP&&(o.dot(\"updateID\"),e.sequence=t.data.sequence,e.time=t.data.time,e.generateMessageID(r.tim.context.identifier)),o.dot(\"pushIn\"),r.messagesList.pushIn(e),a(e,t.data),o.report(),r.messageOptionMap.delete(e.messageID),new kl({message:e})}).catch(function(t){return r._onSendMessageFailed(e,t),o.dot(\"send fail\"),as.error(\"MessageController.sendMessageInstance() error:\",t),o.report(),Fl(new Hc({code:Bc.MESSAGE_SEND_FAIL,message:jc.MESSAGE_SEND_FAIL,data:{message:e}}))})}},{key:\"resendMessage\",value:function(e){return e.isResend=1,e.status=hl.MESSAGE_STATUS.UNSEND,this.sendMessageInstance(e)}},{key:\"_isFileLikeMessage\",value:function(e){return[Xt.MSG_IMAGE,Xt.MSG_FILE,Xt.MSG_AUDIO,Xt.MSG_VIDEO].indexOf(e.type)>=0?1:0}},{key:\"_resendBinaryTypeMessage\",value:function(){}},{key:\"_createC2CMessagePack\",value:function(e){return this.createPackage({name:\"c2cMessage\",action:\"create\",param:{toAccount:e.to,msgBody:e.getElements(),msgSeq:e.sequence,msgRandom:e.random}})}},{key:\"_handleOnSendC2CMessageSuccess\",value:function(e,t){var n=this.tim,r=n.innerEmitter,o=n.outerEmitter;e.status=hl.MESSAGE_STATUS.SUCCESS,e.time=t.time,r.emit(Zc.MESSAGE_C2C_SEND_SUCCESS,{data:{eventDataList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:e}]}}),o.emit(Wt.MESSAGE_SEND_SUCCESS,e)}},{key:\"_createGroupMessagePack\",value:function(e){return this.createPackage({name:\"groupMessage\",action:\"create\",param:{groupID:e.to,msgBody:e.getElements(),random:e.random,clientSequence:e.clientSequence}})}},{key:\"_handleOnSendGroupMessageSuccess\",value:function(e,t){var n=this.tim,r=n.innerEmitter,o=n.outerEmitter;e.sequence=t.sequence,e.time=t.time,e.status=hl.MESSAGE_STATUS.SUCCESS,r.emit(Zc.MESSAGE_GROUP_SEND_SUCCESS,{data:{eventDataList:[{conversationID:e.conversationID,unreadCount:0,type:e.conversationType,subType:e.conversationSubType,lastMessage:e}]}}),o.emit(Wt.MESSAGE_SEND_SUCCESS,e)}},{key:\"_onSendMessageFailed\",value:function(e,t){var n=this.tim,r=n.innerEmitter,o=n.outerEmitter;e.status=hl.MESSAGE_STATUS.FAIL,r.emit(Zc.ERROR_DETECTED,t),o.emit(Wt.MESSAGE_SEND_FAIL,e)}},{key:\"_onReceiveC2CMessage\",value:function(e){var t=this.tim,n=t.innerEmitter,r=t.outerEmitter;as.log(\"MessageController._onReceiveC2CMessage(), get new messages\");var o=this._newC2CMessageStoredAndSummary({notifiesList:e.data,type:Xt.CONV_C2C,C2CRemainingUnreadList:e.C2CRemainingUnreadList}),i=o.eventDataList,a=o.result;n.emit(Zc.MESSAGE_C2C_INSTANT_RECEIVED,{data:{eventDataList:i,result:a},resource:this}),a.length>0&&r.emit(Wt.MESSAGE_RECEIVED,a)}},{key:\"_onReceiveGroupMessage\",value:function(e){var t=this.tim,n=t.outerEmitter,r=t.innerEmitter,o=this._newGroupMessageStoredAndSummary(e.data),i=o.eventDataList,a=o.result;i.length>0&&(as.log(\"MessageController._onReceiveGroupMessage()\"),r.emit(Zc.MESSAGE_GROUP_INSTANT_RECEIVED,{data:{eventDataList:i,result:a,isGroupTip:0}})),a.length>0&&n.emit(Wt.MESSAGE_RECEIVED,a)}},{key:\"_onReceiveGroupTips\",value:function(e){var t=this.tim,n=t.outerEmitter,r=t.innerEmitter,o=e.data,i=this._newGroupTipsStoredAndSummary(o,Xt.CONV_GROUP),a=i.eventDataList,s=i.result;as.log(\"MessageController._onReceiveGroupTips()\"),r.emit(Zc.MESSAGE_GROUP_INSTANT_RECEIVED,{data:{eventDataList:a,result:s,isGroupTip:1}}),s.length>0&&n.emit(Wt.MESSAGE_RECEIVED,s)}},{key:\"_onReceiveSystemNotice\",value:function(e){var t=this.tim,n=t.outerEmitter,r=t.innerEmitter,o=e.data,i=o.groupSystemNotices,a=o.type,s=this._newSystemNoticeStoredAndSummary({notifiesList:i,type:a}),u=s.eventDataList,c=s.result;r.emit(Zc.MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED,{data:{eventDataList:u,result:c,type:a}}),c.length>0&&\"poll\"===a&&n.emit(Wt.MESSAGE_RECEIVED,c)}},{key:\"_clearConversationMessages\",value:function(e){this.messagesList.removeByConversationID(e),this.getMessageHandler.deleteCompletedItem(e)}},{key:\"_pushIntoNoticeResult\",value:function(e,t){var n=this.messagesList.pushIn(t),r=this.singlyLinkedList.has(t.random);null!==n&&0==r&&e.push(t)}},{key:\"_newC2CMessageStoredAndSummary\",value:function(e){for(var t=e.notifiesList,n=e.type,r=e.C2CRemainingUnreadList,o=e.isFromSync,i=null,a=[],s=[],u={},c=this.tim.bigDataHallwayController,l=0,p=t.length;l<p;l++){var f=t[l];f.currentUser=this.tim.context.identifier,f.conversationType=n,f.isSystemMessage=!!f.isSystemMessage,i=new jh(f),f.elements=c.parseElements(f.elements,f.from),i.setElement(f.elements),o||this._pushIntoNoticeResult(s,i),void 0===u[i.conversationID]?u[i.conversationID]=a.push({conversationID:i.conversationID,unreadCount:\"out\"===i.flow?0:1,type:i.conversationType,subType:i.conversationSubType,lastMessage:i})-1:(a[u[i.conversationID]].type=i.conversationType,a[u[i.conversationID]].subType=i.conversationSubType,a[u[i.conversationID]].lastMessage=i,\"in\"===i.flow&&a[u[i.conversationID]].unreadCount++)}if(gs(r))for(var h=function(e,t){var n=a.find(function(t){return t.conversationID===\"C2C\".concat(r[e].from)});n&&(n.unreadCount+=r[e].count)},g=0,d=r.length;g<d;g++)h(g);return{eventDataList:a,result:s}}},{key:\"_newGroupMessageStoredAndSummary\",value:function(e){for(var t=null,n=[],r={},o=[],i=Xt.CONV_GROUP,a=this.tim.bigDataHallwayController,s=0,u=e.length;s<u;s++){var c=e[s];c.currentUser=this.tim.context.identifier,c.conversationType=i,c.isSystemMessage=!!c.isSystemMessage,t=new jh(c),c.elements=a.parseElements(c.elements,c.from),t.setElement(c.elements),this._pushIntoNoticeResult(o,t),void 0===r[t.conversationID]?r[t.conversationID]=n.push({conversationID:t.conversationID,unreadCount:\"out\"===t.flow?0:1,type:t.conversationType,subType:t.conversationSubType,lastMessage:t})-1:(n[r[t.conversationID]].type=t.conversationType,n[r[t.conversationID]].subType=t.conversationSubType,n[r[t.conversationID]].lastMessage=t,\"in\"===t.flow&&n[r[t.conversationID]].unreadCount++)}return{eventDataList:n,result:o}}},{key:\"_newGroupTipsStoredAndSummary\",value:function(e,t){for(var n=null,r=[],o=[],i={},a=0,s=e.length;a<s;a++){var u=e[a];u.currentUser=this.tim.context.identifier,u.conversationType=t,(n=new jh(u)).setElement({type:Xt.MSG_GRP_TIP,content:ln({},u.elements,{groupProfile:u.groupProfile})}),n.isSystemMessage=0;var c=this.messagesList.pushIn(n);c&&o.push(c),void 0===i[n.conversationID]?i[n.conversationID]=r.push({conversationID:n.conversationID,unreadCount:\"out\"===n.flow?0:1,type:n.conversationType,subType:n.conversationSubType,lastMessage:n})-1:(r[i[n.conversationID]].type=n.conversationType,r[i[n.conversationID]].subType=n.conversationSubType,r[i[n.conversationID]].lastMessage=n,\"in\"===n.flow&&r[i[n.conversationID]].unreadCount++)}return{eventDataList:r,result:o}}},{key:\"_newSystemNoticeStoredAndSummary\",value:function(e){var t=e.notifiesList,n=e.type,r=null,o=t.length,i=0,a=[],s={conversationID:Xt.CONV_SYSTEM,unreadCount:0,type:Xt.CONV_SYSTEM,subType:null,lastMessage:null};for(i=0;i<o;i++){var u=t[i];if(u.elements.operationType!==Ml){u.currentUser=this.tim.context.identifier,u.conversationType=Xt.CONV_SYSTEM,u.conversationID=Xt.CONV_SYSTEM,(r=new jh(u)).setElement({type:Xt.MSG_GRP_SYS_NOTICE,content:ln({},u.elements,{groupProfile:u.groupProfile})}),r.isRead=1,r.isSystemMessage=1;var c=this.messagesList.pushIn(r);c&&(a.push(c),\"poll\"===n&&s.unreadCount++),s.subType=r.conversationSubType}}return s.lastMessage=a[a.length-1],{eventDataList:a.length>0?[s]:[],result:a}}},{key:\"_onSyncMessagesProcessing\",value:function(e){var t=this._newC2CMessageStoredAndSummary({notifiesList:e.data,type:Xt.CONV_C2C,isFromSync:1,C2CRemainingUnreadList:e.C2CRemainingUnreadList}),n=t.eventDataList,r=t.result;this.tim.innerEmitter.emit(Zc.MESSAGE_SYNC_PROCESSING,{data:{eventDataList:n,result:r},resource:this})}},{key:\"_onSyncMessagesFinished\",value:function(e){this.triggerReady();var t=this._newC2CMessageStoredAndSummary({notifiesList:e.data,type:Xt.CONV_C2C,isFromSync:1,C2CRemainingUnreadList:e.C2CRemainingUnreadList}),n=t.eventDataList,r=t.result;this.tim.innerEmitter.emit(Zc.MESSAGE_SYNC_FINISHED,{data:{eventDataList:n,result:r},resource:this})}},{key:\"getHistoryMessages\",value:function(e){if(e.conversationID===Xt.CONV_SYSTEM)return Ul();!e.count&&(e.count=15),e.count>20&&(e.count=20);var t=this.messagesList.getLocalOldestMessageByConversationID(e.conversationID);t||((t={}).time=0,t.sequence=0,0===e.conversationID.indexOf(Xt.CONV_C2C)?(t.to=e.conversationID.replace(Xt.CONV_C2C,\"\"),t.conversationType=Xt.CONV_C2C):0===e.conversationID.indexOf(Xt.CONV_GROUP)&&(t.to=e.conversationID.replace(Xt.CONV_GROUP,\"\"),t.conversationType=Xt.CONV_GROUP));var n=\"\";switch(t.conversationType){case Xt.CONV_C2C:return n=e.conversationID.replace(Xt.CONV_C2C,\"\"),this.getC2CRoamMessages({conversationID:e.conversationID,peerAccount:n,count:e.count,lastMessageTime:void 0===this.currentMessageKey[e.conversationID]?0:t.time});case Xt.CONV_GROUP:return this.getGroupRoamMessages({conversationID:e.conversationID,groupID:t.to,count:e.count,sequence:t.sequence-1});default:return Ul()}}},{key:\"getC2CRoamMessages\",value:function(e){var t=this,n=this.tim,r=n.connectionController,o=n.innerEmitter,i=void 0!==this.currentMessageKey[e.conversationID]?this.currentMessageKey[e.conversationID]:\"\",a=this.createPackage({name:\"c2cMessage\",action:\"query\",param:{peerAccount:e.peerAccount,count:e.count||15,lastMessageTime:e.lastMessageTime||0,messageKey:i}});return r.request(a).then(function(n){var r=n.data,o=r.complete,i=r.messageList;1===o&&t.getMessageHandler.setCompleted(e.conversationID);var a=t._roamMessageStore(i,Xt.CONV_C2C,e.conversationID);return t.readReportHandler.updateIsRead(e.conversationID),t.currentMessageKey[e.conversationID]=n.data.messageKey,a}).catch(function(e){return o.emit(Zc.ERROR_DETECTED,e),Promise.reject(e)})}},{key:\"getC2CRoamMessagesSliced\",value:function(e){var t=this.tim.connectionController,n=this;return function(e){return new Promise(function(r,o){!function e(r,o,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=n.createPackage({name:\"c2cMessage\",action:\"query\",param:{peerAccount:r.peerAccount,count:r.count||15,lastMessageTime:r.lastMessageTime||0,messageKey:r.messageKey||\"\"}}),u=t.request(s).then(function(t){var s=t.data.messageList,u=n._roamMessageStore(s,Xt.CONV_C2C);a.push.apply(a,yn(u)),t.data.complete===hl.GET_HISTORY_MESSAGE_STATUS.C2C_IS_NOT_FINISHED?(r.messageKey=t.data.messageKey,e(r,o,a)):t.data.complete===hl.GET_HISTORY_MESSAGE_STATUS.C2C_IS_FINISHED?(as.log(\"getC2CRoamMessages finised...\"),o(new kl(a))):i(new Hc({code:Bc.MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD,message:jc.MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD}))}).reject(function(e){as.log(\"getC2CRoamMessages fail...\"),i(e)});return u}(e,r,o,[])})}(e)}},{key:\"getGroupRoamMessages\",value:function(e){var t=this,n=this.tim,r=n.connectionController,o=n.groupController,i=e.sequence>=0?e.sequence:o.getLocalGroupLastSequence(e.groupID);if(i<0)return Ul([]);var a=this.createPackage({name:\"groupMessage\",action:\"query\",param:{groupID:e.groupID,count:21,sequence:i}});return r.request(a).then(function(n){var r=n.data,o=r.messageList,i=r.complete,a=\"GROUP\".concat(e.groupID);if(2===i||bs(o))return t.getMessageHandler.setCompleted(a),[];var s=t._roamMessageStore(o,Xt.CONV_GROUP,a);return t.readReportHandler.updateIsRead(a),as.log(\"getGroupRoamMessages finished...\"),s}).catch(function(e){return t.tim.exceptionController.ask(e),as.log(\"getGroupRoamMessages error...\"),Promise.reject(e)})}},{key:\"_roamMessageStore\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=null,o=[],i=0,a=e.length,s=null,u=t===Xt.CONV_GROUP,c=this.tim.bigDataHallwayController,l=function(){i=u?e.length-1:0,a=u?0:e.length},p=function(){u?--i:++i},f=function(){return u?i>=a:i<a};for(l();f();p())e[i].isPlaceMessage||(u&&1===e[i].sequence&&this.getMessageHandler.setCompleted(n),(r=new jh(e[i])).to=e[i].to,r.isSystemMessage=!!e[i].isSystemMessage,r.conversationType=t,e[i].event===dl.JSON.TYPE.GROUP.TIP?s={type:Xt.MSG_GRP_TIP,content:ln({},e[i].elements,{groupProfile:e[i].groupProfile})}:(e[i].elements=c.parseElements(e[i].elements,e[i].from),s=e[i].elements[0]),r.setElement(s),r.reInitialize(this.tim.context.identifier),o.push(r));return this.messagesList.shiftIn(o),l=p=f=null,o}},{key:\"getLocalMessageList\",value:function(e){return this.messagesList.getLocalMessageList(e)}},{key:\"getLocalMessage\",value:function(e,t){return this.messagesList.getLocalMessage(e,t)}},{key:\"deleteLocalMessage\",value:function(e){e instanceof jh&&this.messagesList.remove(e)}},{key:\"setMessageRead\",value:function(e){var t=this;return new Promise(function(n,r){t.ready(function(){t.readReportHandler.setMessageRead(e).then(n).catch(r)})})}},{key:\"getMessageList\",value:function(e){return this.getMessageHandler.getMessageList(e)}},{key:\"createTextMessage\",value:function(e){e.currentUser=this.tim.context.identifier;var t=new jh(e),n=\"string\"==typeof e.payload?e.payload:e.payload.text,r=new Ah({text:n});return t.setElement(r),t}},{key:\"createCustomMessage\",value:function(e){e.currentUser=this.tim.context.identifier;var t=new jh(e),n=new qh({data:e.payload.data,description:e.payload.description,extension:e.payload.extension});return t.setElement(n),t}},{key:\"createImageMessage\",value:function(e){e.currentUser=this.tim.context.identifier;var t=new jh(e);if(Oa){var n=e.payload.file,r=n.tempFilePaths[0],o={url:r,name:r.slice(r.lastIndexOf(\"/\")+1),size:n.tempFiles[0].size,type:r.slice(r.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=o}var i=new Oh({imageFormat:\"UNKNOWN\",uuid:this._generateUUID(),file:e.payload.file});return t.setElement(i),this.messageOptionMap.set(t.messageID,e),t}},{key:\"createFileMessage\",value:function(e){if(Oa)return Fl({code:Bc.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT,message:jc.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT});e.currentUser=this.tim.context.identifier;var t=new jh(e),n=new xh({uuid:this._generateUUID(),file:e.payload.file});return t.setElement(n),this.messageOptionMap.set(t.messageID,e),t}},{key:\"createAudioMessage\",value:function(e){if(Oa){var t=e.payload.file;if(Oa){var n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=n}e.currentUser=this.tim.context.identifier;var r=new jh(e),o=new Nh({second:Math.floor(t.duration/1e3),size:t.fileSize,url:t.tempFilePath,uuid:this._generateUUID()});return r.setElement(o),this.messageOptionMap.set(r.messageID,e),r}as.warn(\"createAudioMessage 目前只支持微信小程序发语音消息\")}},{key:\"createVideoMessage\",value:function(e){if(Oa){if(e.currentUser=this.tim.context.identifier,Oa){e.payload.file.thumbUrl=\"https://webim-1252463788.cos.ap-shanghai.myqcloud.com/assets/images/transparent.png\",e.payload.file.thumbSize=1668;var t=e.payload.file,n={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.size,second:t.duration,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file.videoFile=n;var r=new jh(e),o=new Vh({videoFormat:n.type,videoSecond:Number(n.second.toFixed(0)),videoSize:n.size,remoteVideoUrl:\"\",videoUrl:n.url,videoUUID:this._generateUUID(),thumbUUID:this._generateUUID(),thumbWidth:t.width,thumbHeight:t.height,thumbUrl:t.thumbUrl,thumbSize:t.thumbSize,thumbFormat:t.thumbUrl.slice(t.thumbUrl.lastIndexOf(\".\")+1).toLowerCase()});return r.setElement(o),this.messageOptionMap.set(r.messageID,e),r}}else{as.warn(\"createVideoMessage 目前只支持微信小程序发视频消息\")}}},{key:\"createFaceMessage\",value:function(e){e.currentUser=this.tim.context.identifier;var t=new jh(e),n=\"string\"==typeof e.payload?e.payload:e.payload.text,r=new Ah({text:n});return t.setElement(r),t}},{key:\"_generateUUID\",value:function(){var e=this.tim.context;return\"\".concat(e.SDKAppID,\"-\").concat(e.identifier,\"-\").concat(function(){for(var e=\"\",t=32;t>0;--t)e+=Os[Math.floor(Math.random()*Ds)];return e}())}},{key:\"getMessageOptionByID\",value:function(e){return this.messageOptionMap.get(e)}}]),t}(),hg=function(){function e(t){on(this,e),this.userID=\"\",this.avatar=\"\",this.nick=\"\",this.role=\"\",this.joinTime=\"\",this.lastSendMsgTime=\"\",this.nameCard=\"\",this.muteUntil=0,this.memberCustomField=[],this._initMember(t)}return sn(e,[{key:\"_initMember\",value:function(e){this.updateMember(e)}},{key:\"updateMember\",value:function(e){Cs(this,e,[],[null,void 0,\"\",0,NaN])}},{key:\"updateRole\",value:function(e){[\"Owner\",\"Admin\",\"Member\"].indexOf(e)<0||(this.role=e)}},{key:\"updateMemberCustomField\",value:function(e){Cs(this.memberCustomField,e)}}]),e}(),gg=function(){function e(t){on(this,e),this.tim=t.tim,this.groupController=t.groupController,this._initListeners()}return sn(e,[{key:\"_initListeners\",value:function(){this.tim.innerEmitter.on(Zc.MESSAGE_GROUP_INSTANT_RECEIVED,this._onReceivedGroupTips,this)}},{key:\"_onReceivedGroupTips\",value:function(e){var t=this,n=e.data,r=n.result;n.isGroupTip&&r.forEach(function(e){switch(e.payload.operationType){case 1:t._onNewMemberComeIn(e);break;case 2:t._onMemberQuit(e);break;case 3:t._onMemberKickedOut(e);break;case 4:t._onMemberSetAdmin(e);break;case 5:t._onMemberCancelledAdmin(e);break;case 6:t._onGroupProfileModified(e);break;case 7:t._onMemberInfoModified(e);break;default:as.warn(\"GroupTipsHandler._onReceivedGroupTips Unhandled groupTips. operationType=\",e.payload.operationType)}})}},{key:\"_onNewMemberComeIn\",value:function(e){}},{key:\"_onMemberQuit\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.deleteLocalGroupMembers(t,e.payload.userIDList)}},{key:\"_onMemberKickedOut\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.deleteLocalGroupMembers(t,e.payload.userIDList)}},{key:\"_onMemberSetAdmin\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e.payload.userIDList.forEach(function(e){var r=t.groupController.getLocalGroupMemberInfo(n,e);r&&r.updateRole(Xt.GRP_MBR_ROLE_ADMIN)})}},{key:\"_onMemberCancelledAdmin\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e.payload.userIDList.forEach(function(e){var r=t.groupController.getLocalGroupMemberInfo(n,e);r&&r.updateRole(Xt.GRP_MBR_ROLE_MEMBER)})}},{key:\"_onGroupProfileModified\",value:function(e){var t=this,n=e.payload.newGroupProfile,r=e.payload.groupProfile.groupID,o=this.groupController.getLocalGroupProfile(r);Object.keys(n).forEach(function(e){switch(e){case\"ownerID\":t._ownerChaged(o,n);break;default:o[e]=n[e]}}),this.groupController.emitGroupListUpdate(1,1)}},{key:\"_ownerChaged\",value:function(e,t){var n=e.groupID,r=this.groupController.getLocalGroupProfile(n),o=this.tim.context.identifier;if(o===t.ownerID){r.updateGroup({selfInfo:{role:Xt.GRP_MBR_ROLE_OWNER}});var i=this.groupController.getLocalGroupMemberInfo(n,o),a=this.groupController.getLocalGroupProfile(n).ownerID,s=this.groupController.getLocalGroupMemberInfo(n,a);i&&i.updateRole(Xt.GRP_MBR_ROLE_OWNER),s&&s.updateRole(Xt.GRP_MBR_ROLE_MEMBER)}}},{key:\"_onMemberInfoModified\",value:function(e){var t=this,n=e.payload.groupProfile.groupID;e.payload.msgMemberInfo.forEach(function(e){var r=t.groupController.getLocalGroupMemberInfo(n,e.userAccount);r&&e.shutupTime&&(r.shutUpUntil=(Date.now()+1e3*e.shutupTime)/1e3)})}}]),e}(),dg=function(){function e(t){on(this,e),this.groupController=t.groupController,this.tim=t.tim,this.pendencyMap=new Map,this._initLiceners()}return sn(e,[{key:\"_initLiceners\",value:function(){this.tim.innerEmitter.on(Zc.MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED,this._onReceivedGroupSystemNotice,this),this.tim.innerEmitter.on(Zc.SYNC_MESSAGE_C2C_FINISHED,this._clearGroupSystemNotice,this)}},{key:\"_clearGroupSystemNotice\",value:function(){var e=this;this.getPendencyList().then(function(t){t.forEach(function(t){e.pendencyMap.set(\"\".concat(t.from,\"_\").concat(t.groupID,\"_\").concat(t.to),t)});var n=e.tim.messageController.getLocalMessageList(Xt.CONV_SYSTEM),r=[];n.forEach(function(t){var n=t.payload,o=n.operatorID,i=n.operationType,a=n.groupProfile;if(i===ml){var s=\"\".concat(o,\"_\").concat(a.groupID,\"_\").concat(a.to),u=e.pendencyMap.get(s);u&&ls(u.handled)&&0!==u.handled&&r.push(t)}}),e.groupController.deleteGroupSystemNotice({messageList:r})})}},{key:\"getPendencyList\",value:function(e){var t=this,n=this.groupController.createPackage({name:\"group\",action:\"getGroupPendency\",param:{startTime:e&&e.startTime?e.startTime:0,limit:e&&e.limit?e.limit:10,handleAccount:this.tim.context.identifier}});return this.groupController.connectionController.request(n).then(function(e){var n=e.data,r=n.pendencyList;return 0!==n.nextStartTime?t.getPendencyList({startTime:n.nextStartTime}).then(function(e){return[].concat(yn(r),yn(e))}):r})}},{key:\"_onReceivedGroupSystemNotice\",value:function(e){var t=this,n=e.data,r=n.result;\"sync\"!==n.type&&r.forEach(function(e){switch(e.payload.operationType){case 1:t._onApplyGroupRequest(e);break;case 2:t._onApplyGroupRequestAgreed(e);break;case 3:t._onApplyGroupRequestRefused(e);break;case 4:t._onMemberKicked(e);break;case 5:t._onGroupDismissed(e);break;case 6:break;case 7:t._onInviteGroup(e);break;case 8:t._onQuitGroup(e);break;case 9:t._onSetManager(e);break;case 10:t._onDeleteManager(e);break;case 11:case 12:case 15:break;case 255:t.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:Al})}})}},{key:\"_onApplyGroupRequest\",value:function(e){this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:ml})}},{key:\"_onApplyGroupRequestAgreed\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)||this.groupController.getGroupList(),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:_l})}},{key:\"_onApplyGroupRequestRefused\",value:function(e){this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:vl})}},{key:\"_onMemberKicked\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)&&this.groupController.deleteLocalGroupAndConversation(t),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:yl})}},{key:\"_onGroupDismissed\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)&&this.groupController.deleteLocalGroupAndConversation(t),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:El})}},{key:\"_onInviteGroup\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)||this.groupController.getGroupList(),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:Il})}},{key:\"_onQuitGroup\",value:function(e){var t=e.payload.groupProfile.groupID;this.groupController.hasLocalGroup(t)&&this.groupController.deleteLocalGroupAndConversation(t),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:Sl})}},{key:\"_onSetManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,r=t.groupID,o=this.groupController.getLocalGroupMemberInfo(r,n);o&&o.updateRole(Xt.GRP_MBR_ROLE_ADMIN),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:Cl})}},{key:\"_onDeleteManager\",value:function(e){var t=e.payload.groupProfile,n=t.to,r=t.groupID,o=this.groupController.getLocalGroupMemberInfo(r,n);o&&o.updateRole(Xt.GRP_MBR_ROLE_MEMBER),this.tim.outerEmitter.emit(Wt.GROUP_SYSTEM_NOTICE_RECEIVED,{message:e,type:Tl})}},{key:\"reset\",value:function(){this.pendencyMap.clear()}}]),e}(),mg=function(){function e(t){var n=t.tim,r=t.groupController;on(this,e),this.tim=n,this.groupController=r,this.AVChatRoomLoop=null,this.key=\"\",this.startSeq=1,this.group={}}return sn(e,[{key:\"hasJoinedAVChatRoom\",value:function(){return this.group&&!ds(this.group.groupID)?1:0}},{key:\"checkJoinedAVChatRoomByID\",value:function(e){return this.group||!ds(this.group.groupID)?e===this.group.groupID:0}},{key:\"getJoinedAVChatRoom\",value:function(){return this.hasJoinedAVChatRoom()?this.group:null}},{key:\"_updateProperties\",value:function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})}},{key:\"start\",value:function(){var e={key:this.key,startSeq:this.startSeq};if(null===this.AVChatRoomLoop){var t=this.tim.notificationController.createPackage({name:\"AVChatRoom\",action:\"startLongPoll\",param:e});this.AVChatRoomLoop=this.tim.connectionController.createRunLoop({pack:t,before:this._updateRequestData.bind(this),success:this._handleSuccess.bind(this),fail:this._handleFailure.bind(this)}),this.AVChatRoomLoop.start(),as.log(\"AVChatRoomHandler.start message channel started\")}else this.AVChatRoomLoop.isRunning()||this.AVChatRoomLoop.start()}},{key:\"stop\",value:function(){null!==this.AVChatRoomLoop&&this.AVChatRoomLoop.isRunning()&&(this.AVChatRoomLoop.abort(),this.AVChatRoomLoop.stop(),as.log(\"AVChatRoomHandler.stop message channel stopped\"))}},{key:\"applyJoinAVChatRoom\",value:function(e){return this._precheck(),this.tim.context.a2Key&&this.tim.context.tinyID?this._joinWithAuth(e):this._joinWithoutAuth(e)}},{key:\"_joinWithAuth\",value:function(e){var t=this;return this.groupController.applyJoinGroup(e).then(function(n){var r=n.data,o=r.status,i=r.longPollingKey,a=r.group;return o===Xt.JOIN_STATUS_SUCCESS&&(as.log(\"AVChatRoomHandler._joinWithAuth ok. groupID:\",e.groupID),t.tim.innerEmitter.emit(Zc.AVCHATROOM_JOIN_SUCCESS,{data:e.groupID}),t._updateProperties({key:i,startSeq:1,group:a||{}}),t.groupController.updateGroupMap([a]),t.groupController.emitGroupListUpdate(1,0),t.start()),new kl({status:o,group:a})}).catch(function(e){return Promise.reject(e)})}},{key:\"_joinWithoutAuth\",value:function(e){var t=this,n=this.groupController.createPackage({name:\"group\",action:\"applyJoinAVChatRoom\",param:e});return this.tim.connectionController.request(n).then(function(n){var r=n.data.longPollingKey;as.log(\"AVChatRoomHandler._joinWithoutAuth ok. groupID:\",e.groupID),t.tim.innerEmitter.emit(Zc.AVCHATROOM_JOIN_SUCCESS,{data:e.groupID});var o=new Kh({groupID:e.groupID});return t._updateProperties({key:r,startSeq:1,group:o}),t.groupController.updateGroupMap([o]),t.start(),new kl({status:fl.SUCCESS})}).catch(function(t){return as.error(\"AVChatRoomHandler.applyJoinAVChatRoom error:\".concat(t.message,\". groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"_precheck\",value:function(){if(this.hasJoinedAVChatRoom()){if(this.tim.context.login===hl.LOGIN.IS_LOGIN)this.group.selfInfo.role===Xt.GRP_MBR_ROLE_OWNER||this.group.ownerID===this.tim.loginInfo.identifier?this.groupController.deleteLocalGroupAndConversation(this.group.groupID):this.groupController.quitGroup(this.group.groupID);else this.groupController.deleteLocalGroupAndConversation(this.group.groupID);this.reset()}}},{key:\"_updateRequestData\",value:function(e){e.StartSeq=this.startSeq,e.Key=this.key}},{key:\"_handleSuccess\",value:function(e){this.startSeq=e.data.nextSeq,this.key=e.data.key,Array.isArray(e.data.rspMsgList)&&e.data.rspMsgList.forEach(function(e){e.to=e.groupID}),e.data.rspMsgList&&e.data.rspMsgList.length>0&&this._dispatchNotice(e.data.rspMsgList)}},{key:\"_handleFailure\",value:function(e){e.error&&this.tim.innerEmitter.emit(Zc.ERROR_DETECTED,e.error)}},{key:\"_dispatchNotice\",value:function(e){if(gs(e)){var t=this.tim.innerEmitter;e.forEach(function(e){switch(e.event){case 3:t.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES,{data:[e]});break;case 4:t.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_TIPS,{data:[e]});break;case 5:t.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_NOTICE,{data:{groupSystemNotices:[e],type:\"poll\"}});break;case 6:t.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_TIPS,{data:[e]});break;default:as.warn(\"AVChatRoomHandler._dispatchMessage 未处理的 event 类型：\",e.event)}})}}},{key:\"reset\",value:function(){null!==this.AVChatRoomLoop&&(as.log(\"AVChatRoomHandler.reset\"),this.stop(),this.AVChatRoomLoop=null,this.key=\"\",this.startSeq=1,this.group={})}}]),e}(),_g=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).groupMap=new Map,n.groupMemberListMap=new Map,n.hasLocalGroupList=0,n.groupNoticeHandler=new dg({tim:e,groupController:mn(n)}),n.groupTipsHandler=new gg({tim:e,groupController:mn(n)}),n.AVChatRoomHandler=new mg({tim:e,groupController:mn(n)}),n._initListeners(),n}return pn(t,ll),sn(t,[{key:\"createGroup\",value:function(e){var t=this;if(![\"Public\",\"Private\",\"ChatRoom\",\"AVChatRoom\"].includes(e.type)){var n=new Hc({code:Bc.ILLEGAL_GROUP_TYPE,message:jc.ILLEGAL_GROUP_TYPE});return Fl(n)}Gs(e.type)&&!ds(e.memberList)&&e.memberList.length>0&&(as.warn(\"GroupController.createGroup 创建AVChatRoom时不能添加群成员，自动忽略该字段\"),e.memberList=void 0),Ps(e.type)||ds(e.joinOption)||(as.warn(\"GroupController.createGroup 创建Private/ChatRoom/AVChatRoom群时不能设置字段：joinOption，自动忽略该字段\"),e.joinOption=void 0);var r=this.createPackage({name:\"group\",action:\"create\",param:e});return as.log(\"GroupController.createGroup.\"),this.tim.connectionController.request(r).then(function(n){if(as.log(\"GroupController.createGroup ok. groupID:\",n.data.groupID),e.type===Xt.GRP_AVCHATROOM)return t.getGroupProfile({groupID:n.data.groupID});t.updateGroupMap([ln({},e,{groupID:n.data.groupID})]);var r=t.tim.createCustomMessage({to:n.data.groupID,conversationType:Xt.CONV_GROUP,payload:{data:\"group_create\",extension:\"\".concat(t.tim.context.identifier,\"创建群组\")}});return t.tim.sendMessage(r),t.emitGroupListUpdate(),t.getGroupProfile({groupID:n.data.groupID})}).then(function(e){var t=e.data.group;return t.selfInfo.messageRemindType=Xt.MSG_REMIND_ACPT_AND_NOTE,t.selfInfo.role=Xt.GRP_MBR_ROLE_OWNER,e}).catch(function(e){return as.error(\"GroupController.createGroup error:\",e),Fl(e)})}},{key:\"joinGroup\",value:function(e){if(this.hasLocalGroup(e.groupID)){var t={status:Xt.JOIN_STATUS_ALREADY_IN_GROUP};return Ul(t)}if(e.type===Xt.GRP_PRIVATE){var n=new Hc({code:Bc.CANNOT_JOIN_PRIVATE,message:jc.CANNOT_JOIN_PRIVATE});return this.tim.innerEmitter.emit(Zc.ERROR_DETECTED,n),Fl(n)}return as.log(\"GroupController.joinGroup. groupID:\",e.groupID),e.type===Xt.GRP_AVCHATROOM?this.applyJoinAVChatRoom(e):this.applyJoinGroup(e)}},{key:\"quitGroup\",value:function(e){var t=this;as.log(\"GroupController.quitGroup. groupID:\",e);var n=this.AVChatRoomHandler.checkJoinedAVChatRoomByID(e),r=this.tim.context.login===hl.LOGIN.IS_LOGIN;if(n&&!r)return as.log(\"GroupController.quitGroup anonymously ok. groupID:\",e),this.deleteLocalGroupAndConversation(e),this.AVChatRoomHandler.reset(),Ul({groupID:e});var o=this.createPackage({name:\"group\",action:\"quitGroup\",param:{groupID:e}});return this.tim.connectionController.request(o).then(function(){return as.log(\"GroupController.quitGroup ok. groupID:\",e),n&&t.AVChatRoomHandler.reset(),t.deleteLocalGroupAndConversation(e),new kl({groupID:e})}).catch(function(t){return as.error(\"GroupController.quitGroup error.  error:\".concat(t,\". groupID:\").concat(e)),Fl(t)})}},{key:\"changeGroupOwner\",value:function(e){var t=this;if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===Xt.GRP_AVCHATROOM)return Fl(new Hc({code:Bc.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:jc.CANNOT_CHANGE_OWNER_IN_AVCHATROOM}));if(e.newOwnerID===this.tim.loginInfo.identifier)return Fl(new Hc({code:Bc.CANNOT_CHANGE_OWNER_TO_SELF,message:jc.CANNOT_CHANGE_OWNER_TO_SELF}));var n=this.createPackage({name:\"group\",action:\"changeGroupOwner\",param:e});return as.log(\"GroupController.changeGroupOwner. groupID:\",e.groupID),this.tim.connectionController.request(n).then(function(){as.log(\"GroupController.changeGroupOwner ok. groupID:\",e.groupID);var n=e.groupID,r=e.newOwnerID;t.groupMap.get(n).ownerID=r;var o=t.groupMemberListMap.get(n);if(o instanceof Map){var i=o.get(t.tim.loginInfo.identifier);ds(i)||(i.updateRole(\"Member\"),t.groupMap.get(n).selfInfo.role=\"Member\");var a=o.get(r);ds(a)||a.updateRole(\"Owner\")}return t.emitGroupListUpdate(1,0),new kl({group:t.groupMap.get(n)})}).catch(function(t){return as.error(\"GroupController.changeGroupOwner error:\".concat(t,\". groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"dismissGroup\",value:function(e){var t=this;if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===Xt.GRP_PRIVATE)return Fl(new Hc({code:Bc.CANNOT_DISMISS_PRIVATE,message:jc.CANNOT_DISMISS_PRIVATE}));var n=this.createPackage({name:\"group\",action:\"destroyGroup\",param:{groupID:e}});return as.log(\"GroupController.dismissGroup. groupID:\".concat(e)),this.tim.connectionController.request(n).then(function(){return as.log(\"GroupController.dismissGroup ok. groupID:\".concat(e)),t.deleteLocalGroupAndConversation(e),new kl({groupID:e})}).catch(function(t){return as.error(\"GroupController.dismissGroup error:\".concat(t,\". groupID:\").concat(e)),Fl(t)})}},{key:\"updateGroupProfile\",value:function(e){var t=this;!this.hasLocalGroup(e.groupID)||Ps(this.getLocalGroupProfile(e.groupID).type)||ds(e.joinOption)||(as.warn(\"GroupController.modifyGroup: Private/ChatRoom/AVChatRoom群不能设置字段：joinOption，自动忽略该字段\"),e.joinOption=void 0);var n=this.createPackage({name:\"group\",action:\"updateGroupProfile\",param:e});return as.log(\"GroupController.modifyGroup. groupID:\",e.groupID),this.tim.connectionController.request(n).then(function(){(as.log(\"GroupController.modifyGroup ok. groupID:\",e.groupID),t.hasLocalGroup(e.groupID))&&(t.groupMap.get(e.groupID).updateGroup(e),t._setLocalGroupList(t.groupMap));return new kl({group:t.groupMap.get(e.groupID)})}).catch(function(t){return as.log(\"GroupController.modifyGroup error. error:\".concat(t,\" groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"setGroupMemberRole\",value:function(e){var t=this,n=this.groupMap.get(e.groupID);if(n.selfInfo.role!==Xt.GRP_MBR_ROLE_OWNER)return Fl(new Hc({code:Bc.NOT_OWNER,message:jc.NOT_OWNER}));if([Xt.GRP_PRIVATE,Xt.GRP_AVCHATROOM].includes(n.type))return Fl(new Hc({code:Bc.CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM,message:jc.CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM}));if([Xt.GRP_MBR_ROLE_ADMIN,Xt.GRP_MBR_ROLE_MEMBER].indexOf(e.role)<0)return Fl(new Hc({code:Bc.INVALID_MEMBER_ROLE,message:jc.INVALID_MEMBER_ROLE}));if(e.userID===this.tim.loginInfo.identifier)return Fl(new Hc({code:Bc.CANNOT_SET_SELF_MEMBER_ROLE,message:jc.CANNOT_SET_SELF_MEMBER_ROLE}));as.log(\"GroupController.setGroupMemberRole. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID));var r=e.groupID,o=e.userID,i=e.role;return this._modifyGroupMemberInfo({groupID:r,userID:o,role:i}).then(function(){as.log(\"GroupController.setGroupMemberRole ok. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID));var n=t.groupMemberListMap.get(e.groupID);return void 0!==n&&void 0!==n.get(e.userID)&&n.get(e.userID).updateRole(e.role),new kl({group:t.groupMap.get(e.groupID)})}).catch(function(t){return as.error(\"GroupController.setGroupMemberRole error:\".concat(t,\". groupID:\").concat(e.groupID,\". userID:\").concat(e.userID)),Fl(t)})}},{key:\"setGroupMemberMuteTime\",value:function(e){var t=this;as.log(\"GroupController.setGroupMemberMuteTime. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID));var n=e.groupID,r=e.userID,o=e.muteTime;return this._modifyGroupMemberInfo({groupID:n,userID:r,muteTime:o}).then(function(){return as.log(\"GroupController.setGroupMemberMuteTime ok. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID)),new kl({group:t.getLocalGroupProfile(n)})}).catch(function(t){return as.error(\"GroupController.setGroupMemberMuteTime error:\".concat(t,\". groupID:\").concat(e.groupID,\". userID:\").concat(e.userID)),Fl(t)})}},{key:\"setMessageRemindType\",value:function(e){var t=this;as.log(\"GroupController.setMessageRemindType. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID||this.tim.loginInfo.identifier));var n=e.groupID,r=e.messageRemindType;return this._modifyGroupMemberInfo({groupID:n,messageRemindType:r,userID:this.tim.loginInfo.identifier}).then(function(){as.log(\"GroupController.setMessageRemindType ok. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID||t.tim.loginInfo.identifier));var n=t.getLocalGroupProfile(e.groupID);return n&&(n.selfInfo.messageRemindType=r),new kl({group:n})}).catch(function(n){return as.error(\"GroupController.setMessageRemindType error:\".concat(n,\". groupID:\").concat(e.groupID,\". userID:\").concat(e.userID||t.tim.loginInfo.identifier)),Fl(n)})}},{key:\"setGroupMemberNameCard\",value:function(e){var t=this;as.log(\"GroupController.setGroupMemberNameCard. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID||this.tim.loginInfo.identifier));var n=e.groupID,r=e.userID,o=void 0===r?this.tim.loginInfo.identifier:r,i=e.nameCard;return this._modifyGroupMemberInfo({groupID:n,userID:o,nameCard:i}).then(function(){as.log(\"GroupController.setGroupMemberNameCard ok. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID||t.tim.loginInfo.identifier));var r=t.groupMemberListMap.get(n);return void 0!==r&&void 0!==r.get(o)&&r.get(o).updateMember({nameCard:i}),o===t.tim.loginInfo.identifier&&t.hasLocalGroup(n)&&(t.getLocalGroupProfile(n).selfInfo.nameCard=i),new kl({group:t.groupMap.get(n)})}).catch(function(n){return as.error(\"GroupController.setGroupMemberNameCard error:\".concat(n,\". groupID:\").concat(e.groupID,\". userID:\").concat(e.userID||t.tim.loginInfo.identifier)),Fl(n)})}},{key:\"setGroupMemberCustomField\",value:function(e){var t=this;as.log(\"GroupController.setGroupMemberCustomField. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID||this.tim.loginInfo.identifier));var n=e.groupID,r=e.userID,o=e.memberCustomField;return this._modifyGroupMemberInfo({groupID:n,userID:r||this.tim.loginInfo.identifier,memberCustomField:o}).then(function(){return as.log(\"GroupController.setGroupMemberCustomField ok. groupID:\".concat(e.groupID,\". userID: \").concat(e.userID||t.tim.loginInfo.identifier)),t.groupMemberListMap.has(n)&&t.groupMemberListMap.get(n).has(r)&&t.groupMemberListMap.get(n).get(r).updateMemberCustomField(o),new kl({group:t.groupMap.get(n)})}).catch(function(n){return as.error(\"GroupController.setGroupMemberCustomField error:\".concat(n,\". groupID:\").concat(e.groupID,\". userID:\").concat(e.userID||t.tim.loginInfo.identifier)),Fl(n)})}},{key:\"getGroupList\",value:function(e){var t=this;as.log(\"GroupController.getGroupList\");var n={introduction:\"Introduction\",notification:\"Notification\",createTime:\"CreateTime\",ownerID:\"Owner_Account\",lastInfoTime:\"LastInfoTime\",memberNum:\"MemberNum\",maxMemberNum:\"MaxMemberNum\",joinOption:\"ApplyJoinOption\"},r=[\"Type\",\"Name\",\"FaceUrl\",\"NextMsgSeq\",\"LastMsgTime\"];e&&e.groupProfileFilter&&e.groupProfileFilter.forEach(function(e){n[e]&&r.push(n[e])});var o=this.createPackage({name:\"group\",action:\"list\",param:{responseFilter:{groupBaseInfoFilter:r,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\"]}}});return this.tim.connectionController.request(o).then(function(e){var n=e.data.groups;return as.log(\"GroupController.getGroupList ok\"),t._groupListTreeShaking(n),t.updateGroupMap(n),t.hasLocalGroupList=1,t.tempConversationList&&(t._handleUpdateGroupLastMessage(t.tempConversationList),t.tempConversationList=null),t.emitGroupListUpdate(),new kl({groupList:t.getLocalGroups()})}).catch(function(e){return as.error(\"GroupController.getGroupList error: \",e),Fl(e)})}},{key:\"getGroupMemberList\",value:function(e){var t=this,n=e.groupID,r=e.offset,o=void 0===r?0:r,i=e.count,a=void 0===i?15:i;as.log(\"GroupController.getGroupMemberList groupID: \".concat(n,\" offset: \").concat(o,\" count: \").concat(a));var s=this.createPackage({name:\"group\",action:\"getGroupMemberList\",param:{groupID:n,offset:o,limit:a>100?100:a,memberInfoFilter:[\"Role\",\"NameCard\"]}}),u=[];return this.connectionController.request(s).then(function(e){var r=e.data,o=r.members,i=r.memberNum;return gs(o)&&0!==o.length?(t.hasLocalGroup(n)&&(t.getLocalGroupProfile(n).memberNum=i),u=t._updateLocalGroupMemberMap(n,o),t.tim.getUserProfile({userIDList:o.map(function(e){return e.userID}),tagList:[Ll.NICK,Ll.AVATAR]})):Promise.resolve([])}).then(function(e){var r=e.data;if(!gs(r)||0===r.length)return Ul({memberList:[]});var o=r.map(function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}});return t._updateLocalGroupMemberMap(n,o),as.log(\"GroupController.getGroupMemberList ok.\"),new kl({memberList:u})}).catch(function(e){return as.error(\"GroupController.getGroupMemberList error: \",e),Fl(e)})}},{key:\"getLocalGroups\",value:function(){return yn(this.groupMap.values())}},{key:\"getLocalGroupProfile\",value:function(e){return this.groupMap.get(e)}},{key:\"hasLocalGroup\",value:function(e){return this.groupMap.has(e)}},{key:\"getLocalGroupMemberInfo\",value:function(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}},{key:\"setLocalGroupMember\",value:function(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{var n=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,n)}}},{key:\"hasLocalGroupMember\",value:function(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}},{key:\"hasLocalGroupMemberMap\",value:function(e){return this.groupMemberListMap.has(e)}},{key:\"getGroupProfile\",value:function(e){var t=this;as.log(\"GroupController.getGroupProfile. groupID:\",e.groupID);var n=e.groupID,r=e.groupCustomFieldFilter,o=e.memberCustomFieldFilter,i={groupIDList:[n],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\"],groupCustomFieldFilter:r,memberCustomFieldFilter:o}};return this.getGroupProfileAdvance(i).then(function(r){var o,i=r.data,a=i.successGroupList,s=i.failureGroupList;return as.log(\"GroupController.getGroupProfile ok. groupID:\",e.groupID),s.length>0?Fl(s[0]):(Gs(a[0].type)&&!t.hasLocalGroup(n)?o=new Kh(a[0]):(t.updateGroupMap(a),o=t.getLocalGroupProfile(n)),o&&o.selfInfo&&!o.selfInfo.nameCard?t.updateSelfInfo(o).then(function(e){return new kl({group:e})}):new kl({group:o}))}).catch(function(t){return as.error(\"GroupController.getGroupProfile error:\".concat(t,\". groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"getGroupMemberProfile\",value:function(e){var t=this;as.log(\"GroupController.getGroupMemberProfile groupID:\".concat(e.groupID,\"\\n     userIDList:\").concat(e.userIDList.join(\",\"))),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));var n=e.groupID,r=e.userIDList;return this._getGroupMemberProfileAdvance(ln({},e,{userIDList:r})).then(function(e){var r=e.data.members;return gs(r)&&0!==r.length?(t._updateLocalGroupMemberMap(n,r),t.tim.getUserProfile({userIDList:r.map(function(e){return e.userID}),tagList:[Ll.NICK,Ll.AVATAR]})):Ul([])}).then(function(e){var o=e.data.map(function(e){return{userID:e.userID,nick:e.nick,avatar:e.avatar}});t._updateLocalGroupMemberMap(n,o);var i=r.filter(function(e){return t.hasLocalGroupMember(n,e)}).map(function(e){return t.getLocalGroupMemberInfo(n,e)});return new kl({memberList:i})})}},{key:\"_getGroupMemberProfileAdvance\",value:function(e){var t=this.createPackage({name:\"group\",action:\"getGroupMemberProfile\",param:ln({},e,{memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:[\"Role\",\"JoinTime\",\"NameCard\",\"ShutUpUntil\"]})});return this.connectionController.request(t)}},{key:\"updateSelfInfo\",value:function(e){var t=e.groupID;as.log(\"GroupController.updateSelfInfo groupID:\",t);var n={groupID:t,userIDList:[this.tim.loginInfo.identifier]};return this.getGroupMemberProfile(n).then(function(n){var r=n.data.memberList;return as.log(\"GroupController.updateSelfInfo ok. groupID:\",t),e&&0!==r.length&&e.updateSelfInfo(r[0]),e})}},{key:\"addGroupMember\",value:function(e){var t=this.getLocalGroupProfile(e.groupID);if(Gs(t.type)){var n=new Hc({code:Bc.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:jc.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return Fl(n)}e.userIDList=e.userIDList.map(function(e){return{userID:e}});var r=this.createPackage({name:\"group\",action:\"addGroupMember\",param:e});return as.log(\"GroupController.addGroupMember. groupID:\",e.groupID),this.connectionController.request(r).then(function(n){var r=n.data.members;as.log(\"GroupController.addGroupMember ok. groupID:\",e.groupID);var o=r.filter(function(e){return 1===e.result}).map(function(e){return e.userID}),i=r.filter(function(e){return 0===e.result}).map(function(e){return e.userID}),a=r.filter(function(e){return 2===e.result}).map(function(e){return e.userID});return 0===o.length?new kl({successUserIDList:o,failureUserIDList:i,existedUserIDList:a}):new kl({successUserIDList:o,failureUserIDList:i,existedUserIDList:a,group:t})}).catch(function(t){return as.error(\"GroupController.addGroupMember error:\".concat(t,\", groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"deleteGroupMember\",value:function(e){var t=this;as.log(\"GroupController.deleteGroupMember groupID:\".concat(e.groupID,\" userIDList:\").concat(e.userIDList));var n=this.groupMap.get(e.groupID);if(n.type===Xt.GRP_AVCHATROOM)return Fl(new Hc({code:Bc.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:jc.CANNOT_KICK_MEMBER_IN_AVCHATROOM}));var r=this.createPackage({name:\"group\",action:\"deleteGroupMember\",param:e});return this.connectionController.request(r).then(function(){return as.log(\"GroupController.deleteGroupMember ok\"),t.deleteLocalGroupMembers(e.groupID,e.userIDList),t.emitGroupListUpdate(),new kl({group:n,userIDList:e.userIDList})}).catch(function(t){return as.error(\"GroupController.deleteGroupMember error:\".concat(t.code,\", groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"searchGroupByID\",value:function(e){var t={groupIDList:[e]},n=this.createPackage({name:\"group\",action:\"searchGroupByID\",param:t});return as.log(\"GroupController.searchGroupByID. groupID:\".concat(e)),this.connectionController.request(n).then(function(t){var n=t.data.groupProfile;if(as.log(\"GroupController.searchGroupByID ok. groupID:\".concat(e)),n[0].errorCode!==hl.REQUEST.SUCCESS)throw new Hc({code:n[0].errorCode,message:n[0].errorInfo});return new kl({group:new Kh(n[0])})}).catch(function(t){return as.error(\"GroupController.searchGroupByID error:\".concat(t,\", groupID:\").concat(e)),Fl(t)})}},{key:\"applyJoinGroup\",value:function(e){var t=this,n=this.createPackage({name:\"group\",action:\"applyJoinGroup\",param:e});return this.connectionController.request(n).then(function(n){var r=n.data,o=r.joinedStatus,i=r.longPollingKey;switch(as.log(\"GroupController.joinGroup ok. groupID:\",e.groupID),o){case fl.WAIT_APPROVAL:return new kl({status:fl.WAIT_APPROVAL});case fl.SUCCESS:return t.getGroupProfile({groupID:e.groupID}).then(function(e){var t=e.data.group,n={status:fl.SUCCESS,group:t};return ds(i)||(n.longPollingKey=i),new kl(n)});default:var a=new Hc({code:Bc.JOIN_GROUP_FAIL,message:jc.JOIN_GROUP_FAIL});return as.error(\"GroupController.joinGroup error:\".concat(a,\". groupID:\").concat(e.groupID)),Fl(a)}}).catch(function(t){return as.error(\"GroupController.joinGroup error:\".concat(t,\". groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"applyJoinAVChatRoom\",value:function(e){return this.AVChatRoomHandler.applyJoinAVChatRoom(e)}},{key:\"handleGroupApplication\",value:function(e){var t=this,n=e.message.payload,r=n.groupProfile.groupID,o=n.authentication,i=n.messageKey,a=n.operatorID,s=this.createPackage({name:\"group\",action:\"handleApplyJoinGroup\",param:ln({},e,{applicant:a,groupID:r,authentication:o,messageKey:i})});return as.log(\"GroupController.handleApplication. groupID:\",r),this.connectionController.request(s).then(function(){return as.log(\"GroupController.handleApplication ok. groupID:\",r),t.deleteGroupSystemNotice({messageList:[e.message]}),new kl({group:t.getLocalGroupProfile(r)})}).catch(function(e){return as.error(\"GroupController.handleApplication error.  error:\".concat(e,\". groupID:\").concat(r)),Fl(e)})}},{key:\"deleteGroupSystemNotice\",value:function(e){var t=this;if(!gs(e.messageList)||0===e.messageList.length)return Ul();as.log(\"GroupController.deleteGroupSystemNotice \"+e.messageList.map(function(e){return e.ID}));var n=this.createPackage({name:\"group\",action:\"deleteGroupSystemNotice\",param:{messageListToDelete:e.messageList.map(function(e){return{from:Xt.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}})}});return this.connectionController.request(n).then(function(){return as.log(\"GroupController.deleteGroupSystemNotice ok\"),e.messageList.forEach(function(e){t.tim.messageController.deleteLocalMessage(e)}),new kl}).catch(function(e){return as.error(\"GroupController.deleteGroupSystemNotice error:\",e),Fl(e)})}},{key:\"getLocalGroupLastSequence\",value:function(e){if(!this.groupMap.has(e))return 0;var t=this.groupMap.get(e);return t.lastMessage.lastSequence?t.lastMessage.lastSequence:t.nextMessageSeq-1}},{key:\"getGroupProfileAdvance\",value:function(e){gs(e.groupIDList)&&e.groupIDList.length>50&&(as.warn(\"GroupController.getGroupProfileAdvance 获取群资料的数量不能超过50个\"),e.groupIDList.length=50),as.log(\"GroupController.getGroupProfileAdvance. groupIDList:\",e.groupIDList);var t=this.createPackage({name:\"group\",action:\"query\",param:e});return this.tim.connectionController.request(t).then(function(e){as.log(\"GroupController.getGroupProfileAdvance ok.\");var t=e.data.groups,n=t.filter(function(e){return ds(e.errorCode)||e.errorCode===hl.REQUEST.SUCCESS}),r=t.filter(function(e){return e.errorCode&&e.errorCode!==hl.REQUEST.SUCCESS}).map(function(e){return new Hc({code:Number(\"500\".concat(e.errorCode)),message:e.errorInfo,data:{groupID:e.groupID}})});return new kl({successGroupList:n,failureGroupList:r})}).catch(function(t){return as.error(\"GroupController.getGroupProfile error:\".concat(t,\". groupID:\").concat(e.groupID)),Fl(t)})}},{key:\"_deleteLocalGroup\",value:function(e){return this.groupMap.delete(e),this.groupMemberListMap.delete(e),this._setLocalGroupList(this.groupMap),this.groupMap.has(e)&&this.groupMemberListMap.has(e)}},{key:\"_initGroupList\",value:function(){var e=this;as.time(Bl),as.log(\"GroupController._initGroupList\");var t=this._getLocalGroups();this.hasLocalGroupList=gs(t)&&0!==t.length,this.hasLocalGroupList&&(t.forEach(function(t){e.groupMap.set(t[0],new Kh(t[1]))}),this.emitGroupListUpdate(1,0)),this.triggerReady(),as.log(\"GroupController._initGroupList ok. initCost=\".concat(as.timeEnd(Bl),\"ms\")),this.getGroupList()}},{key:\"_initListeners\",value:function(){var e=this.tim.innerEmitter;e.once(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this),e.on(Zc.CONVERSATION_LIST_UPDATED,this._handleUpdateGroupLastMessage,this),e.on(Zc.MESSAGE_GROUP_INSTANT_RECEIVED,this._handleReceivedGroupMessage,this),e.on(Zc.PROFILE_UPDATED,this._handleProfileUpdated,this)}},{key:\"emitGroupListUpdate\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalGroups();t&&this.tim.innerEmitter.emit(Zc.GROUP_LIST_UPDATED,n),e&&this.tim.outerEmitter.emit(Wt.GROUP_LIST_UPDATED,n)}},{key:\"_handleReceivedGroupMessage\",value:function(e){var t=this,n=e.data.eventDataList;Array.isArray(n)&&n.forEach(function(e){var n=e.conversationID.replace(Xt.CONV_GROUP,\"\");t.groupMap.has(n)&&(t.groupMap.get(n).nextMessageSeq=e.lastMessage.sequence+1)})}},{key:\"_onReceivedGroupSystemNotice\",value:function(e){var t=e.data;this.groupNoticeHandler._onReceivedGroupNotice(t)}},{key:\"_handleUpdateGroupLastMessage\",value:function(e){if(this.hasLocalGroupList){for(var t=0,n=0;n<e.length;n++){var r=e[n],o=r.type===Xt.CONV_GROUP;if(r.conversationID&&o){var i=r.conversationID.split(/^GROUP/)[1],a=this.getLocalGroupProfile(i);a&&(a.lastMessage=r.lastMessage,t=1)}}t&&(this.groupMap=this._sortLocalGroupList(this.groupMap),this.emitGroupListUpdate(1,0))}else this.tempConversationList=e}},{key:\"_sortLocalGroupList\",value:function(e){var t=yn(e).filter(function(e){var t=vn(e,2);t[0];return!bs(t[1].lastMessage)});return t.sort(function(e,t){return t[1].lastMessage.lastTime-e[1].lastMessage.lastTime}),new Map([].concat(yn(t),yn(e)))}},{key:\"_getLocalGroups\",value:function(){return this.tim.storage.getItem(\"groupMap\")}},{key:\"_hasLocalGroupList\",value:function(){var e=this.tim.storage.getItem(\"groupMap\");return null!==e&&0!==e.length}},{key:\"_setLocalGroupList\",value:function(e){var t=yn(e).slice(0,100).map(function(e){var t=vn(e,2),n=t[0],r=t[1];return[n,{groupID:n,name:r.name,avatar:r.avatar,type:r.type}]});this.tim.storage.setItem(\"groupMap\",t)}},{key:\"updateGroupMap\",value:function(e){var t=this;e.forEach(function(e){t.groupMap.has(e.groupID)?t.groupMap.get(e.groupID).updateGroup(e):t.groupMap.set(e.groupID,new Kh(e))}),this._setLocalGroupList(this.groupMap)}},{key:\"_updateLocalGroupMemberMap\",value:function(e,t){var n=this;return gs(t)&&0!==t.length?t.map(function(t){return n.hasLocalGroupMember(e,t.userID)?n.getLocalGroupMemberInfo(e,t.userID).updateMember(t):n.setLocalGroupMember(e,new hg(t)),n.getLocalGroupMemberInfo(e,t.userID)}):[]}},{key:\"deleteLocalGroupMembers\",value:function(e,t){var n=this.groupMemberListMap.get(e);n&&t.forEach(function(e){n.delete(e)})}},{key:\"_modifyGroupMemberInfo\",value:function(e){var t=this.createPackage({name:\"group\",action:\"modifyGroupMemberInfo\",param:e});return this.tim.connectionController.request(t)}},{key:\"_groupListTreeShaking\",value:function(e){for(var t=new Map(yn(this.groupMap)),n=0,r=e.length;n<r;n++)t.delete(e[n].groupID);this.AVChatRoomHandler.hasJoinedAVChatRoom()&&t.delete(this.AVChatRoomHandler.group.groupID);for(var o=yn(t.keys()),i=0,a=o.length;i<a;i++)this.groupMap.delete(o[i])}},{key:\"_handleProfileUpdated\",value:function(e){for(var t=this,n=e.data,r=function(e){var r=n[e];t.groupMemberListMap.forEach(function(e){e.has(r.userID)&&e.get(r.userID).updateMember({nick:r.nick,avatar:r.avatar})})},o=0;o<n.length;o++)r(o)}},{key:\"getJoinedAVChatRoom\",value:function(){return this.AVChatRoomHandler.getJoinedAVChatRoom()}},{key:\"deleteLocalGroupAndConversation\",value:function(e){this._deleteLocalGroup(e),this.tim.conversationController.deleteLocalConversation(\"GROUP\".concat(e)),this.emitGroupListUpdate(1,0)}},{key:\"reset\",value:function(){this.groupMap.clear(),this.groupMemberListMap.clear(),this.hasLocalGroupList=0,this.resetReady(),this.groupNoticeHandler.reset(),this.AVChatRoomHandler.reset(),this.tim.innerEmitter.once(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this)}}]),t}(),vg=function(){for(var e=[],t=yg(arguments),n=0;n<arguments.length;n++)Number.isInteger(arguments[n])?e.push(arguments[n]):e.push(1==!!arguments[n]?\"1\":\"0\");return e.join(t)},yg=function(e){var t=e.length,n=e[t-1];if(\"string\"!=typeof n)return\"\";if(n.length>1)return\"\";var r=e[t-1];return delete e[t-1],e.length-=t===e.length?1:0,r},Eg=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e)))._initializeMembers(),n._initializeStatus(),n._initializeListener(),n}return pn(t,ll),sn(t,[{key:\"_initializeMembers\",value:function(){this.normalTimeout=300,this.realtimeNoticeTimeout=11e4,this.channelMaxTimeout=3e5,this._memoryUsed=0,this._memoryUsedThreshold=.9,this._onMemoryWarning=null}},{key:\"_initializeStatus\",value:function(){this._initializeAccountStatus(),this._initializeChannelStatus()}},{key:\"_initializeAccountStatus\",value:function(){this.accountStatus={lastSignInTime:0,status:hl.ACCOUNT_STATUS.SIGN_OUT}}},{key:\"_initializeChannelStatus\",value:function(){this.channelStatus={startTime:0,offlineTime:0,failCount:0,lastRequestTime:0,lastJitterTime:0,jitterCount:0,jitters:[],status:hl.CHANNEL_STATUS.OFFLINE}}},{key:\"_onMemoryRunningLow\",value:function(e){as.warn(\"memory running low : \",e)}},{key:\"getChannelStatus\",value:function(){return this.channelStatus.status}},{key:\"_channelStatusJittersUpdate\",value:function(e){this.channelStatus.jitterCount++,this.channelStatus.lastJitterTime=e,this.channelStatus.jitters.push(e),this.channelStatus.jitters.length>5&&this.channelStatus.jitters.pop()}},{key:\"_initializeListener\",value:function(){var e=this.tim.innerEmitter;e.on(Zc.NOTICE_LONGPOLL_START,this._onChannelStart,this),e.on(Zc.NOTICE_LONGPOLL_REQUEST_ARRIVED,this._onChannelRequestSuccess,this),e.on(Zc.NOTICE_LONGPOLL_REQUEST_NOT_ARRIVED,this._onChannelFail,this)}},{key:\"_onChannelStart\",value:function(){this.channelStatus.startTime=+new Date,this.channelStatus.status=hl.CHANNEL_STATUS.ONLINE}},{key:\"_getMemoryUsed\",value:function(){var e=\"disabled\",t=0;return\"undefined\"!=typeof window&&void 0!==window.performance&&(t=window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,this._memoryUsed=t,e=[Math.round(1e5*this._memoryUsed)/1e3,\"%\"].join(\"\")),e}},{key:\"_onChannelRequestSuccess\",value:function(){var e=this.tim,t=e.innerEmitter,n=e.outerEmitter,r=Date.now(),o=r-(this.channelStatus.lastRequestTime>0?this.channelStatus.lastRequestTime:Date.now()+100),i=vg(o<this.realtimeNoticeTimeout,o<this.channelMaxTimeout);switch(this.channelStatus.status=hl.CHANNEL_STATUS.ONLINE,this.channelStatus.failCount=0,i){case\"11\":break;case\"01\":t.emit(Zc.NOTICE_LONGPOLL_SOON_RECONNECT),n.emit(Wt.NOTICE_LONGPOLL_RECONNECT);break;case\"00\":t.emit(Zc.NOTICE_LONGPOLL_LONG_RECONNECT)}this.channelStatus.lastRequestTime=r}},{key:\"_onChannelFail\",value:function(e){var t=this.tim.innerEmitter,n=Date.now();this.channelStatus.status=hl.CHANNEL_STATUS.OFFLINE;var r=n-(0===this.channelStatus.offlineTime?this.channelStatus.lastRequestTime:this.channelStatus.offlineTime);this.channelStatus.offlineTime=n,this.channelStatus.failCount++,as.log(\"_onChannelFail count : \".concat(this.channelStatus.failCount,\"  time diff: \").concat(r,\";\")),this.channelStatus.failCount>5&&r<5e3&&(t.emit(Zc.NOTICE_LONGPOLL_DISCONNECT),as.error(\"Detected notice channel offline, please check your network!\"))}}]),t}();function Ig(){return null}var Sg=function(){function e(t){on(this,e),this.tim=t,this.isWX=Oa,this.storageQueue=new Map,this.checkTimes=0,this.checkTimer=setInterval(this._onCheckTimer.bind(this),1e3),this._prefix=\"\",this._initListeners(),this._errorTolerantHandle()}return sn(e,[{key:\"_errorTolerantHandle\",value:function(){!this.isWX&&ds(window.localStorage)&&(this.getItem=Ig,this.setItem=Ig,this.removeItem=Ig,this.clear=Ig)}},{key:\"_onCheckTimer\",value:function(){if(this.checkTimes++,this.checkTimes%20==0){if(0===this.storageQueue.size)return;this._doFlush()}}},{key:\"_doFlush\",value:function(){try{var e=1,t=0,n=void 0;try{for(var r,o=this.storageQueue[Symbol.iterator]();!(e=(r=o.next()).done);e=1){var i=vn(r.value,2),a=i[0],s=i[1];this.isWX?wx.setStorageSync(this._getKey(a),s):localStorage.setItem(this._getKey(a),JSON.stringify(s))}}catch(u){t=1,n=u}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.storageQueue.clear()}catch(Jg){as.error(\"Storage._doFlush error\",Jg)}}},{key:\"_initListeners\",value:function(){this.tim.innerEmitter.once(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._updatePrefix,this)}},{key:\"_updatePrefix\",value:function(){var e=this.tim.loginInfo,t=e.SDKAppID,n=e.identifier;this._prefix=\"TIM_\".concat(t,\"_\").concat(n,\"_\")}},{key:\"getItem\",value:function(e){try{return this.isWX?wx.getStorageSync(this._getKey(e)):JSON.parse(localStorage.getItem(this._getKey(e)))}catch(Jg){as.error(\"Storage.getItem error:\",Jg)}}},{key:\"setItem\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n?this.isWX?wx.setStorageSync(this._getKey(e),t):localStorage.setItem(this._getKey(e),JSON.stringify(t)):this.storageQueue.set(e,t)}},{key:\"clear\",value:function(){try{this.isWX?wx.clearStorageSync():localStorage.clear()}catch(Jg){as.error(\"Storage.clear error:\",Jg)}}},{key:\"removeItem\",value:function(e){try{this.isWX?wx.removeStorageSync(this._getKey(e)):localStorage.removeItem(this._getKey(e))}catch(Jg){as.error(\"Storage.removeItem error:\",Jg)}}},{key:\"getSize\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"b\";try{var r={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(r,\"leftSize\",{enumerable:1,get:function(){return r.limitSize-r.size}}),this.isWX&&(r.limitSize=1024*wx.getStorageInfoSync().limitSize),e)r.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(this.isWX){var o=wx.getStorageInfoSync(),i=o.keys;i.forEach(function(e){r.size+=JSON.stringify(wx.getStorageSync(e)).length+t._getKey(e).length})}else for(var a in localStorage)localStorage.hasOwnProperty(a)&&(r.size+=localStorage.getItem(a).length+a.length);return this._convertUnit(r)}catch(Jg){as.error(\"Storage.getSize error:\",Jg)}}},{key:\"_convertUnit\",value:function(e){var t={},n=e.unit;for(var r in t.unit=n,e)\"number\"==typeof e[r]&&(\"kb\"===n.toLowerCase()?t[r]=Math.round(e[r]/1024):\"mb\"===n.toLowerCase()?t[r]=Math.round(e[r]/1024/1024):t[r]=e[r]);return t}},{key:\"_getKey\",value:function(e){return\"\".concat(this._prefix).concat(e)}},{key:\"reset\",value:function(){this._doFlush(),this.checkTimes=0,this._prefix=\"\",this.tim.innerEmitter.once(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._updatePrefix,this)}}]),e}(),Cg=t(function(e){var t=Object.prototype.hasOwnProperty,n=\"~\";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||0}function i(e,t,r,i,a){if(\"function\"!=typeof r)throw new TypeError(\"The listener must be a function\");var s=new o(r,i||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=0)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return 0;var u,c,l=this._events[s],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,1),p){case 1:return l.fn.call(l.context),1;case 2:return l.fn.call(l.context,t),1;case 3:return l.fn.call(l.context,t,r),1;case 4:return l.fn.call(l.context,t,r,o),1;case 5:return l.fn.call(l.context,t,r,o,i),1;case 6:return l.fn.call(l.context,t,r,o,i,a),1}for(c=1,u=new Array(p-1);c<p;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,1),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,o);break;default:if(!u)for(f=1,u=new Array(p-1);f<p;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return 1},s.prototype.on=function(e,t,n){return i(this,e,t,n,0)},s.prototype.once=function(e,t,n){return i(this,e,t,n,1)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||o&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}),Tg=function(e){var t,n,r,o,i;return bs(e.context)?(t=\"\",n=0,r=0,o=0,i=1):(t=e.context.a2Key,n=e.context.tinyID,r=e.context.SDKAppID,o=e.context.contentType,i=e.context.apn),{platform:zc,websdkappid:Yc,v:Kc,a2:t,tinyid:n,sdkappid:r,contentType:o,apn:i,reqtime:function(){return+new Date}}},Mg=function(){function e(t){on(this,e),this.isReady=0,this.tim=t,this.context=t.context,this._initList(),this._updateWhenCTXIsReady()}return sn(e,[{key:\"_updateWhenCTXIsReady\",value:function(){this.tim.innerEmitter.on(Zc.CONTEXT_UPDATED,this.update,this),this.tim.innerEmitter.on(Zc.CONTEXT_RESET,this.reset,this)}},{key:\"update\",value:function(e){var t=e.context;this.context=t,this._initList()}},{key:\"reset\",value:function(e){this.context=e.data,this._initList()}},{key:\"get\",value:function(e){var t=e.name,n=e.action,r=e.param;if(void 0===this.config[t])throw new Hc({code:Bc.NETWORK_PACKAGE_UNDEFINED,message:\"\".concat(jc.NETWORK_PACKAGE_UNDEFINED,\": PackageConfig.\").concat(t)});if(void 0===this.config[t][n])throw new Hc({code:Bc.NETWORK_PACKAGE_UNDEFINED,message:\"\".concat(jc.NETWORK_PACKAGE_UNDEFINED,\": PackageConfig.\").concat(t,\".\").concat(n)});var o=function e(t){if(0===Object.getOwnPropertyNames(t).length)return Object.create(null);var n=Array.isArray(t)?[]:Object.create(null),r=\"\";for(var o in t)null!==t[o]?void 0!==t[o]?(r=rn(t[o]),[\"string\",\"number\",\"function\",\"boolean\"].indexOf(r)>=0?n[o]=t[o]:n[o]=e(t[o])):n[o]=void 0:n[o]=null;return n}(this.config[t][n]);return o.requestData=this._initRequestData(r,o),o.encode=this._initEncoder(o),o.decode=this._initDecoder(o),o}},{key:\"set\",value:function(e){var t=e.key,n=e.value;if(0!=!!t){var r=t.split(\".\");if(!(r.length<=0)){!function e(t,n,r,o){var i=n[r];\"object\"===rn(t[i])?e(t[i],n,r+1,o):t[i]=o}(this.config,r,0,n)}}}},{key:\"_initList\",value:function(){var e;this.config={},this.config.accessLayer=(e=this.tim,{create:null,query:{serverName:Jc.NAME.WEB_IM,cmd:Jc.CMD.ACCESS_LAYER,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:{platform:zc,identifier:e.loginInfo.identifier,usersig:e.loginInfo.userSig,contentType:e.loginInfo.contentType,apn:null!==e.context?e.context.apn:1,websdkappid:Yc,v:Kc},requestData:{}},update:null,delete:null}),this.config.login=function(e){return{create:null,query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.LOGIN,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:{websdkappid:Yc,v:Kc,platform:zc,identifier:e.loginInfo.identifier,usersig:e.loginInfo.userSig,sdkappid:e.loginInfo.SDKAppID,accounttype:e.loginInfo.accountType,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:+new Date/1e3},requestData:{state:\"Online\"},keyMaps:{request:{tinyID:\"tinyId\"},response:{TinyId:\"tinyID\"}}},update:null,delete:null}}(this.tim),this.config.logout=function(e){return{create:null,query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.LOGOUT_ALL,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:{websdkappid:Yc,v:Kc,platform:zc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:\"\",sdkappid:null!==e.loginInfo?e.loginInfo.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:\"\",reqtime:+new Date/1e3},requestData:{}},update:null,delete:null}}(this.tim),this.config.longPollLogout=function(e){return{create:null,query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.LOGOUT_LONG_POLL,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:{websdkappid:Yc,v:Kc,platform:zc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:function(){return Date.now()}},requestData:{longPollID:\"\"},keyMaps:{request:{longPollID:\"LongPollingId\"}}},update:null,delete:null}}(this.tim),this.config.profile=function(e){var t=Tg(e),n=Jc.NAME.PROFILE,r=Jc.CHANNEL.XHR,o=Xc,i=[];for(var a in Ll)Object.prototype.hasOwnProperty.call(Ll,a)&&i.push(Ll[a]);return{query:{serverName:n,cmd:Jc.CMD.PORTRAIT_GET,channel:r,protocol:o,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",toAccount:[],tagList:i}},update:{serverName:n,cmd:Jc.CMD.PORTRAIT_SET,channel:r,protocol:o,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",profileItem:[{tag:Ll.NICK,value:\"\"},{tag:Ll.GENDER,value:\"\"},{tag:Ll.ALLOWTYPE,value:\"\"},{tag:Ll.AVATAR,value:\"\"}]}}}}(this.tim),this.config.group=function(e){var t={websdkappid:Yc,v:Kc,platform:zc,a2:null!==e.context&&e.context.a2Key?e.context.a2Key:void 0,tinyid:null!==e.context&&e.context.tinyID?e.context.tinyID:void 0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,accounttype:null!==e.context?e.context.accountType:0},n={request:{ownerID:\"Owner_Account\",userID:\"Member_Account\",newOwnerID:\"NewOwner_Account\",maxMemberNum:\"MaxMemberCount\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",groupCustomFieldFilter:\"AppDefinedDataFilter_Group\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\",messageRemindType:\"MsgFlag\",userIDList:\"MemberList\",groupIDList:\"GroupIdList\",applyMessage:\"ApplyMsg\",muteTime:\"ShutUpTime\",joinOption:\"ApplyJoinOption\"},response:{GroupIdList:\"groups\",MsgFlag:\"messageRemindType\",AppDefinedData:\"groupCustomField\",AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_Group:\"groupCustomFieldFilter\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",InfoSeq:\"infoSequence\",MemberList:\"members\",GroupInfo:\"groups\",ShutUpUntil:\"muteUntil\",ApplyJoinOption:\"joinOption\"}};return{create:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.CREATE_GROUP,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{type:Xt.GRP_PRIVATE,name:void 0,groupID:void 0,ownerID:e.loginInfo.identifier,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0},keyMaps:n},list:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.GET_JOINED_GROUPS,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{userID:e.loginInfo.identifier,limit:void 0,offset:void 0,groupType:void 0,responseFilter:void 0},keyMaps:n},query:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.GET_GROUP_INFO,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupIDList:void 0,responseFilter:void 0},keyMaps:n},getGroupMemberProfile:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.GET_GROUP_MEMBER_INFO,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMaps:{request:ln({},n.request,{userIDList:\"Member_List_Account\"}),response:n.response}},getGroupMemberList:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.GET_GROUP_MEMBER_LIST,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,limit:0,offset:0,memberRoleFilter:void 0,memberInfoFilter:void 0},keyMaps:n},quitGroup:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.QUIT_GROUP,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0}},changeGroupOwner:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.CHANGE_GROUP_OWNER,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,newOwnerID:void 0},keyMaps:n},destroyGroup:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.DESTROY_GROUP,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0}},updateGroupProfile:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.MODIFY_GROUP_INFO,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0},keyMaps:{request:ln({},n.request,{groupCustomField:\"AppDefinedData\"}),response:n.response}},modifyGroupMemberInfo:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.MODIFY_GROUP_MEMBER_INFO,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMaps:n},addGroupMember:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.ADD_GROUP_MEMBER,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,silence:void 0,userIDList:void 0},keyMaps:n},deleteGroupMember:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.DELETE_GROUP_MEMBER,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,userIDList:void 0,reason:void 0},keyMaps:{request:{userIDList:\"MemberToDel_Account\"}}},searchGroupByID:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.SEARCH_GROUP_BY_ID,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"CreateTime\",\"Owner_Account\",\"LastInfoTime\",\"LastMsgTime\",\"NextMsgSeq\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\"]}},keyMaps:{request:{groupIDList:\"GroupIdList\"}}},applyJoinGroup:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.APPLY_JOIN_GROUP,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0},keyMaps:n},applyJoinAVChatRoom:{serverName:Jc.NAME.BIG_GROUP_NO_AUTH,cmd:Jc.CMD.APPLY_JOIN_GROUP,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:{websdkappid:Yc,v:Kc,platform:zc,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,accounttype:null!==e.context?e.context.accountType:0},requestData:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0},keyMaps:n},handleApplyJoinGroup:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.HANDLE_APPLY_JOIN_GROUP,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMaps:{request:{applicant:\"Applicant_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"},response:{MsgKey:\"messageKey\"}}},deleteGroupSystemNotice:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.DELETE_GROUP_SYSTEM_MESSAGE,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{messageListToDelete:void 0},keyMaps:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}},getGroupPendency:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.GET_GROUP_PENDENCY,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:t,requestData:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMaps:{request:{handleAccount:\"Handle_Account\"}}}}}(this.tim),this.config.longPollID=function(e){return{create:{},query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.GET_LONG_POLL_ID,channel:Jc.CHANNEL.XHR,protocol:Xc,queryString:{websdkappid:Yc,v:Kc,platform:zc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:+new Date/1e3},requestData:{},keyMaps:{response:{LongPollingId:\"longPollingID\"}}},update:{},delete:{}}}(this.tim),this.config.longPoll=function(e){var t={websdkappid:Yc,v:Kc,platform:zc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,accounttype:null!==e.context?e.loginInfo.accountType:0,apn:null!==e.context?e.context.apn:1,reqtime:Math.ceil(+new Date/1e3)};return{create:{},query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.LONG_POLL,channel:Jc.CHANNEL.AUTO,protocol:Xc,queryString:t,requestData:{timeout:null,cookie:{notifySeq:0,noticeSeq:0,longPollingID:0}},keyMaps:{response:{C2cMsgArray:\"C2CMessageArray\",GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",C2cNotifyMsgArray:\"C2CNotifyMessageArray\",ClientSeq:\"clientSequence\",MsgPriority:\"messagePriority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\"}}},update:{},delete:{}}}(this.tim),this.config.applyC2C=function(e){var t=Tg(e),n=Jc.NAME.FRIEND,r=Jc.CHANNEL.XHR,o=Xc;return{create:{serverName:n,cmd:Jc.CMD.FRIEND_ADD,channel:r,protocol:o,queryString:t,requestData:{fromAccount:\"\",addFriendItem:[]}},get:{serverName:n,cmd:Jc.CMD.GET_PENDENCY,channel:r,protocol:o,queryString:t,requestData:{fromAccount:\"\",pendencyType:\"Pendency_Type_ComeIn\"}},update:{serverName:n,cmd:Jc.CMD.RESPONSE_PENDENCY,channel:r,protocol:o,queryString:t,requestData:{fromAccount:\"\",responseFriendItem:[]}},delete:{serverName:n,cmd:Jc.CMD.DELETE_PENDENCY,channel:r,protocol:o,queryString:t,requestData:{fromAccount:\"\",toAccount:[],pendencyType:\"Pendency_Type_ComeIn\"}}}}(this.tim),this.config.friend=function(e){var t=Tg(e),n=Jc.NAME.FRIEND,r=Jc.CHANNEL.XHR,o=Xc;return{get:{serverName:n,cmd:Jc.CMD.FRIEND_GET_ALL,channel:r,protocol:o,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",timeStamp:0,startIndex:0,getCount:100,lastStandardSequence:0,tagList:[\"Tag_Profile_IM_Nick\",\"Tag_SNS_IM_Remark\"]},keyMaps:{request:{},response:{}}},delete:{serverName:n,cmd:Jc.CMD.FRIEND_DELETE,channel:r,protocol:o,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",toAccount:[],deleteType:\"Delete_Type_Single\"}}}}(this.tim),this.config.blacklist=function(e){var t=Tg(e);return{create:{serverName:Jc.NAME.FRIEND,cmd:Jc.CMD.ADD_BLACKLIST,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",toAccount:[]}},get:{serverName:Jc.NAME.FRIEND,cmd:Jc.CMD.GET_BLACKLIST,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",startIndex:0,maxLimited:30,lastSequence:0}},delete:{serverName:Jc.NAME.FRIEND,cmd:Jc.CMD.DELETE_BLACKLIST,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{fromAccount:\"\",toAccount:[]}},update:{}}}(this.tim),this.config.c2cMessage=function(e){var t={platform:zc,websdkappid:Yc,v:Kc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:function(){return+new Date}},n={request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",data:\"Data\",description:\"Desc\",extension:\"Ext\",type:\"MsgType\",content:\"MsgContent\",sizeType:\"Type\",uuid:\"UUID\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\"},response:{MsgContent:\"content\",MsgTime:\"time\",Data:\"data\",Desc:\"description\",Ext:\"extension\",MsgKey:\"messageKey\",MsgType:\"type\",MsgBody:\"elements\",Download_Flag:\"downloadFlag\"}};return{create:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.SEND_MESSAGE,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{fromAccount:e.loginInfo.identifier,toAccount:\"\",msgTimeStamp:Math.ceil(+new Date/1e3),msgSeq:0,msgRandom:0,msgBody:[]},keyMaps:n},query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.GET_C2C_ROAM_MESSAGES,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{peerAccount:\"\",count:15,lastMessageTime:0,messageKey:\"\"},keyMaps:n},update:null,delete:null}}(this.tim),this.config.groupMessage=function(e){var t={platform:zc,websdkappid:Yc,v:Kc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:function(){return+new Date}},n={request:{to:\"GroupId\",extension:\"Ext\",data:\"Data\",description:\"Desc\",random:\"Random\",sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",type:\"MsgType\",content:\"MsgContent\",elements:\"MsgBody\",sizeType:\"Type\",uuid:\"UUID\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",clientSequence:\"ClientSeq\"},response:{Random:\"random\",MsgTime:\"time\",MsgSeq:\"sequence\",ReqMsgSeq:\"sequence\",RspMsgList:\"messageList\",IsPlaceMsg:\"isPlaceMessage\",IsSystemMsg:\"isSystemMessage\",ToGroupId:\"to\",EnumFrom_AccountType:\"fromAccountType\",EnumTo_AccountType:\"toAccountType\",GroupCode:\"groupCode\",MsgFlag:\"messageRemindType\",MsgPriority:\"messagePriority\",MsgBody:\"elements\",MsgType:\"type\",MsgContent:\"content\",IsFinished:\"complete\",Download_Flag:\"downloadFlag\",ClientSeq:\"clientSequence\"}};return{create:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.SEND_GROUP_MESSAGE,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{groupID:\"\",fromAccount:e.loginInfo.identifier,random:0,clientSequence:0,msgBody:[]},keyMaps:n},query:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.GET_GROUP_ROAM_MESSAGES,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{groupID:\"\",count:15,sequence:\"\"},keyMaps:n},update:null,delete:null}}(this.tim),this.config.conversation=function(e){var t={platform:zc,websdkappid:Yc,v:Kc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1};return{query:{serverName:Jc.NAME.RECENT_CONTACT,cmd:Jc.CMD.GET_CONVERSATION_LIST,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{fromAccount:e.loginInfo.identifier,count:0},keyMaps:{request:{},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\"}}},delete:{serverName:Jc.NAME.RECENT_CONTACT,cmd:Jc.CMD.DELETE_CONVERSATION,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{fromAccount:e.loginInfo.identifier,toAccount:void 0,type:1,toGroupID:void 0},keyMaps:{request:{toGroupID:\"ToGroupid\"}}},setC2CMessageRead:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.SET_C2C_MESSAGE_READ,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{C2CMsgReaded:void 0},keyMaps:{request:{lastMessageTime:\"LastedMsgTime\"}}},setGroupMessageRead:{serverName:Jc.NAME.GROUP,cmd:Jc.CMD.SET_GROUP_MESSAGE_READ,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{groupID:void 0,messageReadSeq:void 0},keyMaps:{request:{messageReadSeq:\"MsgReadedSeq\"}}}}}(this.tim),this.config.syncMessage=function(e){var t={platform:zc,websdkappid:Yc,v:Kc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:function(){return[Math.ceil(+new Date),Math.random()].join(\"\")}};return{create:null,query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.GET_MESSAGES,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{cookie:\"\",syncFlag:0,needAbstract:1},keyMaps:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",from:\"From_Account\",to:\"To_Account\",time:\"MsgTimeStamp\",sequence:\"MsgSeq\",random:\"MsgRandom\",elements:\"MsgBody\"},response:{MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",ClientSeq:\"clientSequence\",MsgSeq:\"sequence\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",ToGroupId:\"groupID\",MsgKey:\"messageKey\",GroupTips:\"groupTips\",MsgBody:\"elements\",MsgType:\"type\",C2CRemainingUnreadCount:\"C2CRemainingUnreadList\"}}},update:null,delete:null}}(this.tim),this.config.AVChatRoom=function(e){return{startLongPoll:{serverName:Jc.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,cmd:Jc.CMD.AVCHATROOM_LONG_POLL,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:{websdkappid:Yc,v:Kc,platform:zc,sdkappid:e.loginInfo.SDKAppID,accounttype:\"792\",apn:null!==e.context?e.context.apn:1,reqtime:function(){return+new Date}},requestData:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMaps:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\"}}}}}(this.tim),this.config.cosUpload=function(e){var t={platform:zc,websdkappid:Yc,v:Kc,a2:null!==e.context?e.context.a2Key:\"\",tinyid:null!==e.context?e.context.tinyID:0,sdkappid:null!==e.context?e.context.SDKAppID:0,contentType:null!==e.context?e.context.contentType:0,apn:null!==e.context?e.context.apn:1,reqtime:function(){return Date.now()}};return{create:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.FILE_UPLOAD,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{appVersion:\"2.1\",fromAccount:\"\",toAccount:\"\",sequence:0,time:function(){return Math.ceil(Date.now()/1e3)},random:function(){return As()},fileStrMd5:\"\",fileSize:\"\",serverVer:1,authKey:\"\",busiId:1,pkgFlag:1,sliceOffset:0,sliceSize:0,sliceData:\"\",contentType:\"application/x-www-form-urlencoded\"},keyMaps:{request:{},response:{}}},update:null,delete:null}}(this.tim),this.config.cosSig=function(e){var t={sdkappid:function(){return e.loginInfo.SDKAppID},identifier:function(){return e.loginInfo.identifier},userSig:function(){return e.context.userSig}};return{create:null,query:{serverName:Jc.NAME.IM_COS_SIGN,cmd:Jc.CMD.COS_SIGN,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:t,requestData:{cmd:\"open_im_cos_svc\",subCmd:\"get_cos_token\",duration:300,version:1},keyMaps:{request:{userSig:\"usersig\",subCmd:\"sub_cmd\",cmd:\"cmd\",duration:\"duration\",version:\"version\"},response:{expired_time:\"expiredTime\",bucket_name:\"bucketName\",session_token:\"sessionToken\",tmp_secret_id:\"secretId\",tmp_secret_key:\"secretKey\"}}},update:null,delete:null}}(this.tim),this.config.bigDataHallwayAuthKey=function(e){return{create:null,query:{serverName:Jc.NAME.OPEN_IM,cmd:Jc.CMD.BIG_DATA_HALLWAY_AUTH_KEY,channel:Jc.CHANNEL.XHR,protocol:Xc,method:\"POST\",queryString:{websdkappid:Yc,v:Kc,platform:zc,sdkappid:e.loginInfo.SDKAppID,accounttype:\"792\",apn:null!==e.context?e.context.apn:1,reqtime:function(){return+new Date}},requestData:{}}}}(this.tim)}},{key:\"_initRequestData\",value:function(e,t){if(void 0===e)return rl(t.requestData,this._getRequestMap(t),this.tim);var n=t.requestData,r=Object.create(null);for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){if(r[o]=\"function\"==typeof n[o]?n[o]():n[o],void 0===e[o])continue;r[o]=e[o]}return r=rl(r,this._getRequestMap(t),this.tim)}},{key:\"_getRequestMap\",value:function(e){if(e.keyMaps&&e.keyMaps.request&&Object.keys(e.keyMaps.request).length>0)return e.keyMaps.request}},{key:\"_initEncoder\",value:function(e){switch(e.protocol){case Xc:return function(e){if(\"string\"===rn(e))try{return JSON.parse(e)}catch(Jg){return e}return e};case Wc:return function(e){return e};default:return function(e){return as.warn(\"PackageConfig._initEncoder(), unknow response type, data: \",JSON.stringify(e)),e}}}},{key:\"_initDecoder\",value:function(e){switch(e.protocol){case Xc:return function(e){if(\"string\"===rn(e))try{return JSON.parse(e)}catch(Jg){return e}return e};case Wc:return function(e){return e};default:return function(e){return as.warn(\"PackageConfig._initDecoder(), unknow response type, data: \",e),e}}}}]),e}(),Ag={C2CMessageArray:1,groupMessageArray:1,groupTips:1,C2CNotifyMessageArray:1,profileModify:1,friendListMod:1},Og=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e)))._initialization(),n}return pn(t,ll),sn(t,[{key:\"_initialization\",value:function(){this._syncOffset=\"\",this._syncNoticeList=[],this._syncEventArray=[],this._syncMessagesIsRunning=0,this._syncMessagesFinished=0,this._isLongPoll=0,this._longPollID=0,this._noticeSequence=0,this._initializeListener(),this._runLoop=null,this._initShuntChannels()}},{key:\"_initShuntChannels\",value:function(){this._shuntChannels=Object.create(null),this._shuntChannels.C2CMessageArray=this._C2CMessageArrayChannel.bind(this),this._shuntChannels.groupMessageArray=this._groupMessageArrayChannel.bind(this),this._shuntChannels.groupTips=this._groupTipsChannel.bind(this),this._shuntChannels.C2CNotifyMessageArray=this._C2CNotifyMessageArrayChannel.bind(this),this._shuntChannels.profileModify=this._profileModifyChannel.bind(this),this._shuntChannels.friendListMod=this._friendListModChannel.bind(this)}},{key:\"_C2CMessageArrayChannel\",value:function(e,t,n){this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_NEW_C2C_NOTICE,{data:t,type:n})}},{key:\"_groupMessageArrayChannel\",value:function(e,t,n){this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES,{data:t})}},{key:\"_groupTipsChannel\",value:function(e,t,n){switch(e){case 4:this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_TIPS,{data:t});break;case 5:this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_NEW_GROUP_NOTICE,{data:{groupSystemNotices:t,type:n}});break;default:as.warn(\"未知的群事件类型 Event:\".concat(e))}}},{key:\"_C2CNotifyMessageArrayChannel\",value:function(e,t,n){this._isKickedoutNotice(t)?this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_MUTIPLE_DEVICE_KICKED_OUT):this._isSysCmdMsgNotify(t)&&this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_RECEIVE_SYSTEM_ORDERS)}},{key:\"_profileModifyChannel\",value:function(e,t,n){this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_PROFILE_MODIFIED,{data:t})}},{key:\"_friendListModChannel\",value:function(e,t,n){this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES,{data:t})}},{key:\"_dispatchNotice\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"poll\";if(gs(e))for(var n=this.tim.innerEmitter,r=null,o=null,i=\"\",a=\"\",s=\"\",u=0,c=0,l=e.length;c<l;c++)u=(r=e[c]).event,i=Object.keys(r).find(function(e){return void 0!==Ag[e]}),_s(this._shuntChannels[i])?(o=r[i],this._updatenoticeSequence(o),this._shuntChannels[i](u,o,t)):(this._updatenoticeSequence(),a=\"\".concat(Bc.NOTICE_RUNLOOP_UNEXPECTED_CONDITION),s=\"\".concat(jc.NOTICE_RUNLOOP_UNEXPECTED_CONDITION,\": \").concat(u,\", \").concat(i),n.emit(Zc.ERROR_DETECTED,new Hc({code:a,message:s,data:{payloadName:i,event:u}})),a=\"\",s=\"\")}},{key:\"getLongPollID\",value:function(){return this._longPollID}},{key:\"_IAmReady\",value:function(){this.triggerReady()}},{key:\"reset\",value:function(){this._noticeSequence=0,this._resetSync(),this.closeNoticeChannel()}},{key:\"_resetSync\",value:function(){this._syncOffset=\"\",this._syncNoticeList=[],this._syncEventArray=[],this._syncMessagesIsRunning=0,this._syncMessagesFinished=0}},{key:\"_setNoticeSeqInRequestData\",value:function(e){e.Cookie.NoticeSeq=this._noticeSequence}},{key:\"_updatenoticeSequence\",value:function(e){if(e){var t=e[e.length-1].noticeSequence;!t||\"number\"!=typeof t||t<this._noticeSequence?this._noticeSequence++:this._noticeSequence=t}else this._noticeSequence++}},{key:\"_initializeListener\",value:function(){var e=this.tim.innerEmitter;e.on(Zc.NOTICE_LONGPOLL_RESTART,this.restartNoticeChannel,this),e.on(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._startSyncMessages,this),e.on(Zc.SYNC_MESSAGE_C2C_FINISHED,this.openNoticeChannel,this),e.on(Zc.SIGN_LOGOUT_SUCCESS,this.closeNoticeChannel,this),e.on(Zc.NOTICE_LONGPOLL_SOON_RECONNECT,this._onChannelReconnect,this),e.on(Zc.NOTICE_LONGPOLL_DISCONNECT,this._onChannelDisconnected,this)}},{key:\"openNoticeChannel\",value:function(){as.log(\"NotificationController.openNoticeChannel\"),this._getLongPollID()}},{key:\"closeNoticeChannel\",value:function(){as.log(\"NotificationController.closeNoticeChannel()\"),(this._runLoop instanceof rh||this._runLoop instanceof oh)&&(this._runLoop.abort(),this._runLoop.stop()),this._longPollID=0,this._isLongPoll=0,this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_STOPPED),this.tim.outerEmitter.emit(Wt.NOTICE_LONGPOLL_STOPPED)}},{key:\"restartNoticeChannel\",value:function(){this.closeNoticeChannel(),this.openNoticeChannel()}},{key:\"_getLongPollID\",value:function(){var e=this,t=this.tim,n=t.innerEmitter,r=t.connectionController;if(0===this._longPollID){var o=this.createPackage({name:\"longPollID\",action:\"query\"});r.request(o).then(function(t){t.data.errorCode===hl.REQUEST.SUCCESS?e._onGetLongPollIDSuccess({data:t.data.longPollingID}):e._onGetLongPollIDFail({data:t.data})}).catch(function(e){n.emit(Zc.NOTICE_LONGPOLL_GETID_FAIL,e)})}else this._onGetLongPollIDSuccess({data:this._longPollID})}},{key:\"_onGetLongPollIDSuccess\",value:function(e){this.tim.packageConfig.set({key:\"long_poll_logout.query.requestData.longPollingID\",value:e.data}),this.tim.packageConfig.set({key:\"longPoll.query.requestData.cookie.longPollingID\",value:e.data}),this._longPollID=e.data,this._startLongPoll(),this._IAmReady()}},{key:\"_onGetLongPollIDFail\",value:function(e){as.warn(\"Notification._onGetLongPollIDFail\",e)}},{key:\"_startLongPoll\",value:function(){if(1!=this._isLongPoll){as.log(\"NotificationController._startLongPoll...\");var e=this.tim,t=e.connectionController,n=e.innerEmitter,r=this.createPackage({name:\"longPoll\",action:\"query\"});this._isLongPoll=1,n.emit(Zc.NOTICE_LONGPOLL_START,{data:Date.now()}),this._runLoop=t.createRunLoop({pack:r,before:this._setNoticeSeqInRequestData.bind(this),success:this._onNoticeReceived.bind(this),fail:this._onNoticeFail.bind(this)}),this._runLoop.start()}else as.log(\"NotificationController._startLongPoll is running...\")}},{key:\"_onChannelReconnect\",value:function(e){this.closeNoticeChannel(),this.syncMessage()}},{key:\"_onChannelDisconnected\",value:function(){}},{key:\"_onNoticeReceived\",value:function(e){var t=this.tim,n=t.innerEmitter,r=t.statusController,o=e.data,i=!r.getChannelStatus();if(n.emit(Zc.NOTICE_LONGPOLL_REQUEST_ARRIVED,{data:Date.now()}),o.errorCode!==hl.REQUEST.SUCCESS){if(o.errorCode===Bc.LONG_POLL_KICK_OUT)return n.emit(Zc.NOTICE_LONGPOLL_KICKED_OUT),as.log(\"NotificationController._onNoticeReceived(), longPollingID was kicked\"),void this.closeNoticeChannel();as.log(\"NotificationController._onNoticeReceived(), error: \".concat(o.errorCode,\", errorInfo: \").concat(o.errorInfo)),n.emit(Zc.ERROR_DETECTED,{code:o.errorCode,message:o.errorInfo})}e.data.eventArray&&1!=i&&this._dispatchNotice(e.data.eventArray)}},{key:\"_onNoticeFail\",value:function(e){this.tim.innerEmitter.emit(Zc.ERROR_DETECTED,e.error),this.tim.innerEmitter.emit(Zc.NOTICE_LONGPOLL_REQUEST_NOT_ARRIVED,{data:Date.now()})}},{key:\"_isKickedoutNotice\",value:function(e){return e[0].hasOwnProperty(\"kickoutMsgNotify\")?1:0}},{key:\"_isSysCmdMsgNotify\",value:function(e){if(!e[0])return 0;var t=e[0];return Object.prototype.hasOwnProperty.call(t,\"sysCmdMsgNotify\")?1:0}},{key:\"_startSyncMessages\",value:function(e){1!=this._syncMessagesFinished&&this.syncMessage()}},{key:\"syncMessage\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.tim,o=r.connectionController,i=r.innerEmitter;this._syncMessagesIsRunning=1;var a=this.createPackage({name:\"syncMessage\",action:\"query\",param:{cookie:t,syncFlag:n}});o.request(a).then(function(t){var n=t.data;switch(vg(n.cookie,n.syncFlag)){case\"00\":case\"01\":i.emit(Zc.ERROR_DETECTED,{code:Bc.NOTICE_RUNLOOP_OFFSET_LOST,message:jc.NOTICE_RUNLOOP_OFFSET_LOST});break;case\"10\":case\"11\":n.eventArray&&e._dispatchNotice(n.eventArray,\"sync\"),e._syncNoticeList=e._syncNoticeList.concat(n.messageList),i.emit(Zc.SYNC_MESSAGE_C2C_PROCESSING,{data:n.messageList,C2CRemainingUnreadList:n.C2CRemainingUnreadList}),e._syncOffset=n.cookie,e.syncMessage(n.cookie,n.syncFlag);break;case\"12\":n.eventArray&&e._dispatchNotice(n.eventArray,\"sync\"),e._syncNoticeList=e._syncNoticeList.concat(n.messageList),i.emit(Zc.SYNC_MESSAGE_C2C_FINISHED,{data:n.messageList,C2CRemainingUnreadList:n.C2CRemainingUnreadList}),e._syncOffset=n.cookie,e._syncNoticeList=[],e._syncMessagesIsRunning=0,e._syncMessagesFinished=1}}).catch(function(t){e._syncMessagesIsRunning=0,as.error(\"NotificationController.syncMessage() failed, error:\",JSON.stringify(t))})}}]),t}(),Dg=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e)))._initializeListener(),n}return pn(t,ll),sn(t,[{key:\"_initializeMembers\",value:function(e){this.expiredTimeLimit=300,this.appid=e.appid||\"\",this.bucketName=e.bucketName||\"\",this.expiredTimeOut=e.expiredTimeOut||this.expiredTimeLimit,this.region=\"ap-shanghai\",this.cos=null,this.cosOptions={secretId:e.secretId,secretKey:e.secretKey,sessionToken:e.sessionToken,expiredTime:e.expiredTime},this._initUploaderMethod()}},{key:\"_expiredTimer\",value:function(){var e=this,t=setInterval(function(){Math.ceil(Date.now()/1e3)>=e.cosOptions.expiredTime-20&&(e._isReady=0,e._getAuthorizationKey(),clearInterval(t))},1e4)}},{key:\"_initializeListener\",value:function(){this.tim.innerEmitter.on(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initialization,this)}},{key:\"_initialization\",value:function(){this._initCOSSDKPlugin(),this.COSSDK?(this._initializeMembers({}),this._getAuthorizationKey()):as.warn(\"UploadController 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。\")}},{key:\"_getAuthorizationKey\",value:function(){var e=this,t=Math.ceil(Date.now()/1e3),n=this.createPackage({name:\"cosSig\",action:\"query\",param:{duration:this.expiredTimeLimit}});this.tim.connectionController.request(n).then(function(n){n.data.expiredTimeOut=n.data.expiredTime-t,as.log(\"UploadController._getAuthorizationKey timeout=\".concat(n.data.expiredTimeOut,\"s\")),e._initializeMembers(n.data),e._expiredTimer(),e._initUploaderMethod()}).catch(function(e){as.warn(e)})}},{key:\"_initCOSSDKPlugin\",value:function(){var e=Oa?\"cos-wx-sdk\":\"cos-js-sdk\";this.COSSDK=this.tim.getPlugin(e)}},{key:\"_initUploaderMethod\",value:function(){var e=this;this.appid&&(this.cos=Oa?new this.COSSDK({ForcePathStyle:1,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=Oa?function(t,n){e.cos.postObject(t,n)}:function(t,n){e.cos.uploadFiles(t,n)},this._IAmReady())}},{key:\"_getAuthorization\",value:function(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:\"_IAmReady\",value:function(){this.triggerReady()}},{key:\"uploadImage\",value:function(e){if(!e.file)return Fl(new Hc({code:Bc.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:jc.MESSAGE_IMAGE_SELECT_FILE_FIRST}));var t=this._checkImageType(e.file);if(1!=t)return t;var n=this._checkImageMime(e.file);if(1!=n)return n;var r=this._checkImageSize(e.file);return 1!=r?r:this.upload(e)}},{key:\"_checkImageType\",value:function(e){var t=\"\";return t=Oa?e.url.slice(e.url.lastIndexOf(\".\")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(\".\")+1),ch.indexOf(t.toLowerCase())>=0?1:Fl(new Hc({coe:Bc.MESSAGE_IMAGE_TYPES_LIMIT,message:jc.MESSAGE_IMAGE_TYPES_LIMIT}))}},{key:\"_checkImageMime\",value:function(e){return 1}},{key:\"_checkImageSize\",value:function(e){var t=0;return 0===(t=Oa?e.size:e.files[0].size)?Fl(new Hc({code:Bc.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(jc.MESSAGE_FILE_IS_EMPTY)})):t<20971520?1:Fl(new Hc({coe:Bc.MESSAGE_IMAGE_SIZE_LIMIT,message:\"\".concat(jc.MESSAGE_IMAGE_SIZE_LIMIT)}))}},{key:\"uploadFile\",value:function(e){var t=null;return e.file?e.file.files[0].size>20971520?(t=new Hc({code:Bc.MESSAGE_FILE_SIZE_LIMIT,message:\"\".concat(jc.MESSAGE_FILE_SIZE_LIMIT)}),Fl(t)):0===e.file.files[0].size?(t=new Hc({code:Bc.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(jc.MESSAGE_FILE_IS_EMPTY)}),Fl(t)):this.upload(e):(t=new Hc({code:Bc.MESSAGE_FILE_SELECT_FILE_FIRST,message:jc.MESSAGE_FILE_SELECT_FILE_FIRST}),Fl(t))}},{key:\"uploadVideo\",value:function(e){if(Oa)return e.file.videoFile.size>20971520?Fl(new Hc({code:Bc.MESSAGE_VIDEO_SIZE_LIMIT,message:\"\".concat(jc.MESSAGE_VIDEO_SIZE_LIMIT)})):0===e.file.videoFile.size?Fl(new Hc({code:Bc.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(jc.MESSAGE_FILE_IS_EMPTY)})):-1===lh.indexOf(e.file.videoFile.type)?Fl(new Hc({code:Bc.MESSAGE_VIDEO_TYPES_LIMIT,message:\"\".concat(jc.MESSAGE_VIDEO_TYPES_LIMIT)})):this.handleVideoUpload({file:e.file.videoFile})}},{key:\"handleVideoUpload\",value:function(e){var t=this;return new Promise(function(n,r){t.upload(e).then(function(e){n(e)}).catch(function(){t.upload(e).then(function(e){n(e)}).catch(function(){r(new Hc({code:Bc.MESSAGE_VIDEO_UPLOAD_FAIL,message:jc.MESSAGE_VIDEO_UPLOAD_FAIL}))})})})}},{key:\"uploadAudio\",value:function(e){return e.file?e.file.size>20971520?Fl(new Hc({code:Bc.MESSAGE_AUDIO_SIZE_LIMIT,message:\"\".concat(jc.MESSAGE_AUDIO_SIZE_LIMIT)})):0===e.file.size?Fl(new Hc({code:Bc.MESSAGE_FILE_IS_EMPTY,message:\"\".concat(jc.MESSAGE_FILE_IS_EMPTY)})):this.upload(e):Fl(new Hc({code:Bc.MESSAGE_AUDIO_UPLOAD_FAIL,message:jc.MESSAGE_AUDIO_UPLOAD_FAIL}))}},{key:\"upload\",value:function(e){var t=this;as.time(jl);var n=Oa?e.file:e.file.files[0];return new Promise(function(r,o){var i=Oa?t._createCosOptionsWXMiniApp(e):t._createCosOptionsWeb(e),a=t;t._cosUploadMethod(i,function(e,i){var s=Object.create(null);if(i){if(t._isUploadError(i,e))return o(i.files[0].error),void as.warn(\"UploadController.upload failed, network error:\".concat(i.files[0].error.error));s.fileName=n.name,s.fileSize=n.size,s.fileType=n.type.slice(n.type.indexOf(\"/\")+1).toLowerCase(),s.location=Oa?i.Location:i.files[0].data.Location;var u=as.timeEnd(jl),c=a._formatFileSize(n.size),l=a._formatSpeed(1e3*n.size/u),p=\"UploadController.upload success name=\".concat(n.name,\",size=\").concat(c,\",time=\").concat(u,\"ms,speed=\").concat(l);return as.log(p),void r(s)}as.warn(\"UploadController.upload failed, error:\".concat(e)),o(e)})})}},{key:\"_isUploadError\",value:function(e,t){return Oa?t?1:0:null!==e.files[0].error?1:0}},{key:\"_formatFileSize\",value:function(e){return e<1024?e+\"B\":e<1048576?Math.floor(e/1024)+\"KB\":Math.floor(e/1048576)+\"MB\"}},{key:\"_formatSpeed\",value:function(e){return e<=1048576?(e/1024).toFixed(1)+\"KB/s\":(e/1048576).toFixed(1)+\"MB/s\"}},{key:\"_createCosOptionsWeb\",value:function(e){var t=this.tim.context.identifier;return{files:[{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"imfiles/\".concat(t,\"/\").concat(e.to,\"-\").concat(As(9999999),\"-\").concat(e.file.files[0].name),Body:e.file.files[0]}],SliceSize:1048576,onProgress:function(t){if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){as.warn(\"onProgress callback error:\"),as.error(n)}},onFileFinish:function(e,t,n){}}}},{key:\"_createCosOptionsWXMiniApp\",value:function(e){var t=this.tim.context.identifier,n=e.file.url;return{Bucket:\"\".concat(this.bucketName,\"-\").concat(this.appid),Region:this.region,Key:\"imfiles/\".concat(t,\"/\").concat(e.to,\"-\").concat(e.file.name),FilePath:n,onProgress:function(t){if(as.log(JSON.stringify(t)),\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(n){as.warn(\"onProgress callback error:\"),as.error(n)}}}}}]),t}(),Ng=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},n._bdh_download_server=\"grouptalk.c2c.qq.com\",n._BDHBizID=10001,n._authKey=\"\",n._expireTime=0,n.tim.innerEmitter.on(Zc.CONTEXT_A2KEY_AND_TINYID_UPDATED,n._getAuthKey,mn(n)),n}return pn(t,ll),sn(t,[{key:\"_getAuthKey\",value:function(){var e=this,t=this.createPackage({name:\"bigDataHallwayAuthKey\",action:\"query\"});this.tim.connectionController.request(t).then(function(t){t.data.authKey&&(e._authKey=t.data.authKey,e._expireTime=parseInt(t.data.expireTime))})}},{key:\"_isFromOlderVersion\",value:function(e){return 2!==e.content.downloadFlag?1:0}},{key:\"parseElements\",value:function(e,t){if(!gs(e)||!t)return[];for(var n=[],r=null,o=0;o<e.length;o++)r=e[o],this._needParse(r)?n.push(this._parseElement(r,t)):n.push(e[o]);return n}},{key:\"_needParse\",value:function(e){return!this._isFromOlderVersion(e)||e.type!==Xt.MSG_AUDIO&&e.type!==Xt.MSG_FILE&&e.type!==Xt.MSG_VIDEO?0:1}},{key:\"_parseElement\",value:function(e,t){switch(e.type){case Xt.MSG_AUDIO:return this._parseAudioElement(e,t);case Xt.MSG_FILE:return this._parseFileElement(e,t);case Xt.MSG_VIDEO:return this._parseVideoElement(e,t)}}},{key:\"_parseAudioElement\",value:function(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}},{key:\"_parseFileElement\",value:function(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}},{key:\"_parseVideoElement\",value:function(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}},{key:\"_genAudioUrl\",value:function(e,t){return\"\"===this._authKey?(as.warn(\"BigDataHallwayController._genAudioUrl no authKey!\"),\"\"):\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(this.tim.context.SDKAppID,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.SOUND,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"_genFileUrl\",value:function(e,t,n){return\"\"===this._authKey?(as.warn(\"BigDataHallwayController._genFileUrl no authKey!\"),\"\"):(n||(n=\"\".concat(Math.floor(1e5*Math.random()),\"-\").concat(Date.now())),\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(this.tim.context.SDKAppID,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.FILE,\"&openid=\").concat(t,\"&ver=0&filename=\").concat(encodeURIComponent(n)))}},{key:\"_genVideoUrl\",value:function(e,t){return\"\"===this._authKey?(as.warn(\"BigDataHallwayController._genVideoUrl no authKey!\"),\"\"):\"https://\".concat(this._bdh_download_server,\"/asn.com/stddownload_common_file?authkey=\").concat(this._authKey,\"&bid=\").concat(this._BDHBizID,\"&subbid=\").concat(this.tim.context.SDKAppID,\"&fileid=\").concat(e,\"&filetype=\").concat(this.FILETYPE.VIDEO,\"&openid=\").concat(t,\"&ver=0\")}},{key:\"reset\",value:function(){this._authKey=\"\",this.expireTime=0}}]),t}(),Lg={app_id:\"\",event_id:\"\",api_base:\"https://pingtas.qq.com/pingd\",prefix:\"_mta_\",version:\"1.3.9\",stat_share_app:0,stat_pull_down_fresh:0,stat_reach_bottom:0,stat_param:1};function Rg(){try{var e=\"s\"+Pg();return wx.setStorageSync(Lg.prefix+\"ssid\",e),e}catch(t){}}function Pg(e){for(var t=[0,1,2,3,4,5,6,7,8,9],n=10;1<n;n--){var r=Math.floor(10*Math.random()),o=t[r];t[r]=t[n-1],t[n-1]=o}for(n=r=0;5>n;n++)r=10*r+t[n];return(e||\"\")+(r+\"\")+ +new Date}function Gg(){try{var e=getCurrentPages(),t=\"/\";return 0<e.length&&(t=e.pop().__route__),t}catch(n){console.log(\"get current page path error:\"+n)}}function kg(){var e,t={dm:\"wechat.apps.xx\",url:encodeURIComponent(Gg()+Ug(Fg.Data.pageQuery)),pvi:\"\",si:\"\",ty:0};return t.pvi=((e=function(){try{return wx.getStorageSync(Lg.prefix+\"auid\")}catch(t){}}())||(e=function(){try{var t=Pg();return wx.setStorageSync(Lg.prefix+\"auid\",t),t}catch(e){}}(),t.ty=1),e),t.si=function(){var e=function(){try{return wx.getStorageSync(Lg.prefix+\"ssid\")}catch(e){}}();return e||(e=Rg()),e}(),t}function wg(){var e=function(){var e=wx.getSystemInfoSync();return{adt:encodeURIComponent(e.model),scl:e.pixelRatio,scr:e.windowWidth+\"x\"+e.windowHeight,lg:e.language,fl:e.version,jv:encodeURIComponent(e.system),tz:encodeURIComponent(e.platform)}}();return function(e){wx.getNetworkType({success:function(t){e(t.networkType)}})}(function(e){try{wx.setStorageSync(Lg.prefix+\"ntdata\",e)}catch(t){}}),e.ct=wx.getStorageSync(Lg.prefix+\"ntdata\")||\"4g\",e}function bg(){var e,t=Fg.Data.userInfo,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e+\"=\"+t[e]);return t=n.join(\";\"),{r2:Lg.app_id,r4:\"wx\",ext:\"v=\"+Lg.version+(null!==t&&\"\"!==t?\";ui=\"+encodeURIComponent(t):\"\")}}function Ug(e){if(!Lg.stat_param||!e)return\"\";e=function(e){if(1>Lg.ignore_params.length)return e;var t,n={};for(t in e)0<=Lg.ignore_params.indexOf(t)||(n[t]=e[t]);return n}(e);var t,n=[];for(t in e)n.push(t+\"=\"+e[t]);return 0<n.length?\"?\"+n.join(\"&\"):\"\"}var Fg={App:{init:function(e){\"appID\"in e&&(Lg.app_id=e.appID),\"eventID\"in e&&(Lg.event_id=e.eventID),\"statShareApp\"in e&&(Lg.stat_share_app=e.statShareApp),\"statPullDownFresh\"in e&&(Lg.stat_pull_down_fresh=e.statPullDownFresh),\"statReachBottom\"in e&&(Lg.stat_reach_bottom=e.statReachBottom),\"ignoreParams\"in e&&(Lg.ignore_params=e.ignoreParams),\"statParam\"in e&&(Lg.stat_param=e.statParam),Rg();try{\"lauchOpts\"in e&&(Fg.Data.lanchInfo=e.lauchOpts,Fg.Data.lanchInfo.landing=1)}catch(t){}\"autoReport\"in e&&e.autoReport&&function(){var e=Page;Page=function(t){var n=t.onLoad;t.onLoad=function(e){n&&n.call(this,e),Fg.Data.lastPageQuery=Fg.Data.pageQuery,Fg.Data.pageQuery=e,Fg.Data.lastPageUrl=Fg.Data.pageUrl,Fg.Data.pageUrl=Gg(),Fg.Data.show=0,Fg.Page.init()},e(t)}}()}},Page:{init:function(){var e,t=getCurrentPages()[getCurrentPages().length-1];t.onShow&&(e=t.onShow,t.onShow=function(){if(1==Fg.Data.show){var t=Fg.Data.lastPageQuery;Fg.Data.lastPageQuery=Fg.Data.pageQuery,Fg.Data.pageQuery=t,Fg.Data.lastPageUrl=Fg.Data.pageUrl,Fg.Data.pageUrl=Gg()}Fg.Data.show=1,Fg.Page.stat(),e.apply(this,arguments)}),Lg.stat_pull_down_fresh&&t.onPullDownRefresh&&function(){var e=t.onPullDownRefresh;t.onPullDownRefresh=function(){Fg.Event.stat(Lg.prefix+\"pulldownfresh\",{url:t.__route__}),e.apply(this,arguments)}}(),Lg.stat_reach_bottom&&t.onReachBottom&&function(){var e=t.onReachBottom;t.onReachBottom=function(){Fg.Event.stat(Lg.prefix+\"reachbottom\",{url:t.__route__}),e.apply(this,arguments)}}(),Lg.stat_share_app&&t.onShareAppMessage&&function(){var e=t.onShareAppMessage;t.onShareAppMessage=function(){return Fg.Event.stat(Lg.prefix+\"shareapp\",{url:t.__route__}),e.apply(this,arguments)}}()},multiStat:function(e,t){if(1==t)Fg.Page.stat(e);else{var n=getCurrentPages()[getCurrentPages().length-1];n.onShow&&function(){var t=n.onShow;n.onShow=function(){Fg.Page.stat(e),t.call(this,arguments)}}()}},stat:function(e){if(\"\"!=Lg.app_id){var t=[],n=bg();if(e&&(n.r2=e),e=[kg(),n,wg()],Fg.Data.lanchInfo){e.push({ht:Fg.Data.lanchInfo.scene}),Fg.Data.pageQuery&&Fg.Data.pageQuery._mta_ref_id&&e.push({rarg:Fg.Data.pageQuery._mta_ref_id});try{1==Fg.Data.lanchInfo.landing&&(n.ext+=\";lp=1\",Fg.Data.lanchInfo.landing=0)}catch(i){}}e.push({rdm:\"/\",rurl:0>=Fg.Data.lastPageUrl.length?Fg.Data.pageUrl+Ug(Fg.Data.lastPageQuery):encodeURIComponent(Fg.Data.lastPageUrl+Ug(Fg.Data.lastPageQuery))}),e.push({rand:+new Date}),n=0;for(var r=e.length;n<r;n++)for(var o in e[n])e[n].hasOwnProperty(o)&&t.push(o+\"=\"+(void 0===e[n][o]?\"\":e[n][o]));wx.request({url:Lg.api_base+\"?\"+t.join(\"&\").toLowerCase()})}}},Event:{stat:function(e,t){if(\"\"!=Lg.event_id){var n=[],r=kg(),o=bg();r.dm=\"wxapps.click\",r.url=e,o.r2=Lg.event_id;var i,a=void 0===t?{}:t,s=[];for(i in a)a.hasOwnProperty(i)&&s.push(encodeURIComponent(i)+\"=\"+encodeURIComponent(a[i]));for(a=s.join(\";\"),o.r5=a,a=0,o=(r=[r,o,wg(),{rand:+new Date}]).length;a<o;a++)for(var u in r[a])r[a].hasOwnProperty(u)&&n.push(u+\"=\"+(void 0===r[a][u]?\"\":r[a][u]));wx.request({url:Lg.api_base+\"?\"+n.join(\"&\").toLowerCase()})}}},Data:{userInfo:null,lanchInfo:null,pageQuery:null,lastPageQuery:null,pageUrl:\"\",lastPageUrl:\"\",show:0}},xg=Fg,qg=function(){function e(){on(this,e),this.cache=[],this.MtaWX=null,this._init()}return sn(e,[{key:\"report\",value:function(e,t){var n=this;try{Aa?window.MtaH5?(window.MtaH5.clickStat(e,t),this.cache.forEach(function(e){var t=e.name,r=e.param;window.MtaH5.clickStat(t,r),n.cache.shift()})):this.cache.push({name:e,param:t}):Oa&&(this.MtaWX?(this.MtaWX.Event.stat(e,t),this.cache.forEach(function(e){var t=e.name,r=e.param;n.MtaWX.stat(t,r),n.cache.shift()})):this.cache.push({name:e,param:t}))}catch(Jg){}}},{key:\"stat\",value:function(){try{Aa&&window.MtaH5?window.MtaH5.pgv():Oa&&this.MtaWX&&this.MtaWX.Page.stat()}catch(Jg){}}},{key:\"_init\",value:function(){try{if(Aa){window._mtac={autoReport:0};var e=document.createElement(\"script\"),t=function(){if(Oa)return\"https:\";var e=window.location.protocol;return[\"http:\",\"https:\"].indexOf(e)<0&&(e=\"http:\"),e}();e.src=\"\".concat(t,\"//pingjs.qq.com/h5/stats.js?v2.0.4\"),e.setAttribute(\"name\",\"MTAH5\"),e.setAttribute(\"sid\",\"500690998\"),e.setAttribute(\"cid\",\"500691017\");var n=document.getElementsByTagName(\"script\")[0];n.parentNode.insertBefore(e,n)}else Oa&&(this.MtaWX=xg,this.MtaWX.App.init({appID:\"500690995\",eventID:\"500691014\",autoReport:0,statParam:1}))}catch(Jg){}}}]),e}(),Vg=function(e){function t(e){var n;return on(this,t),(n=_n(this,fn(t).call(this,e))).tim=e,n.MTA=new qg,n._initListener(),n}return pn(t,ll),sn(t,[{key:\"_initListener\",value:function(){var e=this,t=this.tim.innerEmitter;this._sendMessageSuccessRateReport(),this._loginSuccessRateReport(),t.on(Zc.SDK_READY,function(){e.MTA.report(\"sdkappid\",{value:e.tim.context.SDKAppID}),e.MTA.report(\"version\",{value:Xg.VERSION}),e.MTA.stat()})}},{key:\"_sendMessageSuccessRateReport\",value:function(){var e=this,t=this.tim.innerEmitter;t.on(Zc.MESSAGE_SENDING,function(){e.MTA.report(\"sendmessage\",{send:1})}),t.on(Zc.MESSAGE_C2C_SEND_SUCCESS,function(){e.MTA.report(\"sendmessage\",{success:1})}),t.on(Zc.MESSAGE_C2C_SEND_FAIL,function(){e.MTA.report(\"sendmessage\",{fail:1})}),t.on(Zc.MESSAGE_GROUP_SEND_SUCCESS,function(){e.MTA.report(\"sendmessage\",{success:1})}),t.on(Zc.MESSAGE_GROUP_SEND_FAIL,function(){e.MTA.report(\"sendmessage\",{fail:1})})}},{key:\"_loginSuccessRateReport\",value:function(){var e=this,t=this.tim.innerEmitter;t.on(Zc.SIGN_LOGIN,function(){e.MTA.report(\"login\",{login:1})}),t.on(Zc.SIGN_LOGIN_SUCCESS,function(){e.MTA.report(\"login\",{success:1})}),t.on(Zc.SIGN_LOGIN_FAIL,function(){e.MTA.report(\"login\",{fail:1})})}}]),t}(),Bg=function(e){return function(t,n,r,o){Ne(n);var i=Re(t),a=_(i),s=ae(i.length),u=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(u in a){o=a[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw TypeError(\"Reduce of empty array with no initial value\")}for(;e?u>=0:s>u;u+=c)u in a&&(o=n(o,a[u],u,i));return o}},jg={left:Bg(0),right:Bg(1)}.left;De({target:\"Array\",proto:1,forced:Be(\"reduce\")},{reduce:function(e){return jg(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Hg=new(function(){function e(){on(this,e),this.map=new Map,this.thresholdValue=10}return sn(e,[{key:\"push\",value:function(e,t){if(this.map.has(e)){var n=this.map.get(e);n.push(t),this.needReport(n)&&(this.report(n,e),this.map.delete(e))}else this.map.set(e,[t])}},{key:\"needReport\",value:function(e){return e.length===this.thresholdValue}},{key:\"report\",value:function(e,t){var n=e.reduce(function(e,t){return e+t})/e.length,r=Math.min.apply(null,e),o=Math.max.apply(null,e);as.log(\"AverageCalculator.report \".concat(t,\" count=\").concat(e.length,\" average=\").concat(n,\"ms max=\").concat(o,\"ms min=\").concat(r,\"ms\"))}},{key:\"reset\",value:function(){this.map.clear()}}]),e}()),Kg=function(){function e(t){on(this,e),cl.mixin(this),this.setLogLevel(0),this._initOptions(t),this._initMemberVariables(),this._initControllers(),this._initListener(),as.info(\"SDK inWxMiniApp:\".concat(Oa,\", SDKAppID:\").concat(t.SDKAppID)),as.info(\"UserAgent:\".concat(Da))}return sn(e,[{key:\"login\",value:function(e){return as.time(xl),this.loginInfo.identifier=e.identifier||e.userID,this.loginInfo.userSig=e.userSig,this.signController.login(this.loginInfo)}},{key:\"logout\",value:function(){var e=this.signController.logout();return this.resetSDK(),e}},{key:\"on\",value:function(e,t,n){as.debug(\"on\",\"eventName:\".concat(e)),this.outerEmitter.on(e,t,n||this)}},{key:\"once\",value:function(e,t,n){as.debug(\"once\",\"eventName:\".concat(e)),this.outerEmitter.once(e,t,n||this)}},{key:\"off\",value:function(e,t,n,r){as.debug(\"off\",\"eventName:\".concat(e)),this.outerEmitter.off(e,t,n,r)}},{key:\"registerPlugin\",value:function(e){var t=this;this.plugins||(this.plugins={}),Object.keys(e).forEach(function(n){t.plugins[n]=e[n]})}},{key:\"getPlugin\",value:function(e){return this.plugins[e]||void 0}},{key:\"setLogLevel\",value:function(e){as.setLevel(e)}},{key:\"downloadLog\",value:function(){var e=document.createElement(\"a\"),t=new Date,n=new Blob(this.getLog());e.download=\"TIM-\"+t.getFullYear()+\"-\"+(t.getMonth()+1)+\"-\"+t.getDate()+\"-\"+this.loginInfo.SDKAppID+\"-\"+this.context.identifier+\".txt\",e.href=URL.createObjectURL(n),e.click(),URL.revokeObjectURL(n)}},{key:\"destroy\",value:function(){this.logout(),this.outerEmitter.emit(Wt.SDK_DESTROY,{SDKAppID:this.loginInfo.SDKAppID})}},{key:\"createTextMessage\",value:function(e){return this.messageController.createTextMessage(e)}},{key:\"createImageMessage\",value:function(e){return this.messageController.createImageMessage(e)}},{key:\"createAudioMessage\",value:function(e){return this.messageController.createAudioMessage(e)}},{key:\"createFileMessage\",value:function(e){return Oa?Fl({code:Bc.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT,message:jc.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT}):this.messageController.createFileMessage(e)}},{key:\"createFaceMessage\",value:function(e){return this.messageController.createFaceMessage(e)}},{key:\"createCustomMessage\",value:function(e){return this.messageController.createCustomMessage(e)}},{key:\"createVideoMessage\",value:function(e){return this.messageController.createVideoMessage(e)}},{key:\"sendMessage\",value:function(e){return e instanceof jh?this.messageController.sendMessageInstance(e):Fl(new Hc({code:Bc.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:jc.MESSAGE_SEND_NEED_MESSAGE_INSTANCE}))}},{key:\"resendMessage\",value:function(e){return this.messageController.resendMessage(e)}},{key:\"getMessageList\",value:function(e){return this.messageController.getMessageList(e)}},{key:\"setMessageRead\",value:function(e){return this.messageController.setMessageRead(e)}},{key:\"getConversationList\",value:function(){return this.conversationController.getConversationList()}},{key:\"getConversationProfile\",value:function(e){return this.conversationController.getConversationProfile(e)}},{key:\"deleteConversation\",value:function(e){return this.conversationController.deleteConversation(e)}},{key:\"getMyProfile\",value:function(){return this.userController.getMyProfile()}},{key:\"getUserProfile\",value:function(e){return this.userController.getUserProfile(e)}},{key:\"updateMyProfile\",value:function(e){return this.userController.updateMyProfile(e)}},{key:\"getFriendList\",value:function(){return this.userController.getFriendList()}},{key:\"deleteFriend\",value:function(e){return this.userController.deleteFriend(e)}},{key:\"getBlacklist\",value:function(){return this.userController.getBlacklist()}},{key:\"addToBlacklist\",value:function(e){return this.userController.addBlacklist(e)}},{key:\"removeFromBlacklist\",value:function(e){return this.userController.deleteBlacklist(e)}},{key:\"getGroupList\",value:function(e){return this.groupController.getGroupList(e)}},{key:\"getGroupProfile\",value:function(e){return this.groupController.getGroupProfile(e)}},{key:\"createGroup\",value:function(e){return this.groupController.createGroup(e)}},{key:\"dismissGroup\",value:function(e){return this.groupController.dismissGroup(e)}},{key:\"updateGroupProfile\",value:function(e){return this.groupController.updateGroupProfile(e)}},{key:\"joinGroup\",value:function(e){return as.warn(\"如果要加入音视频聊天室，接入侧请务必传入群组类型 TIM.TYPES.GRP_AVCHATROOM。如果已传入或加入其它类型的群组，接入侧可忽略此警告信息。详见 https://imsdk-1252463788.file.myqcloud.com/IM_DOC/Web/SDK.html#joinGroup\"),this.groupController.joinGroup(e)}},{key:\"quitGroup\",value:function(e){return this.groupController.quitGroup(e)}},{key:\"searchGroupByID\",value:function(e){return this.groupController.searchGroupByID(e)}},{key:\"changeGroupOwner\",value:function(e){return this.groupController.changeGroupOwner(e)}},{key:\"handleGroupApplication\",value:function(e){return this.groupController.handleGroupApplication(e)}},{key:\"setMessageRemindType\",value:function(e){return this.groupController.setMessageRemindType(e)}},{key:\"getGroupMemberList\",value:function(e){return this.groupController.getGroupMemberList(e)}},{key:\"getGroupMemberProfile\",value:function(e){return this.groupController.getGroupMemberProfile(e)}},{key:\"addGroupMember\",value:function(e){return this.groupController.addGroupMember(e)}},{key:\"deleteGroupMember\",value:function(e){return this.groupController.deleteGroupMember(e)}},{key:\"setGroupMemberMuteTime\",value:function(e){return this.groupController.setGroupMemberMuteTime(e)}},{key:\"setGroupMemberRole\",value:function(e){return this.groupController.setGroupMemberRole(e)}},{key:\"setGroupMemberNameCard\",value:function(e){return this.groupController.setGroupMemberNameCard(e)}},{key:\"setGroupMemberCustomField\",value:function(e){return this.groupController.setGroupMemberCustomField(e)}},{key:\"_initOptions\",value:function(e){this.plugins={},this.loginInfo={SDKAppID:e.SDKAppID||null,accountType:As(),identifier:null,userSig:null},this.options={runLoopNetType:e.runLoopNetType||Ol,enablePointer:e.enablePointer||0}}},{key:\"_initMemberVariables\",value:function(){this.context=null,this.innerEmitter=new Cg,this.outerEmitter=new Cg,bl(this.outerEmitter),this.packageConfig=new Mg(this),this.storage=new Sg(this),this.outerEmitter._emit=this.outerEmitter.emit,this.outerEmitter.emit=function(e,t){var n=arguments[0],r=[n,{name:arguments[0],data:arguments[1]}];as.debug(\"emit \".concat(n),r[1]),this.outerEmitter._emit.apply(this.outerEmitter,r)}.bind(this)}},{key:\"_initControllers\",value:function(){this.exceptionController=new uh(this),this.connectionController=new ih(this),this.contextController=new gl(this),this.signController=new Hl(this),this.messageController=new fg(this),this.conversationController=new Xh(this),this.userController=new Eh(this),this.groupController=new _g(this),this.notificationController=new Og(this),this.bigDataHallwayController=new Ng(this),this.statusController=new Eg(this),this.uploadController=new Dg(this),this.reporterController=new Vg(this),this._initReadyListener()}},{key:\"_initListener\",value:function(){this.innerEmitter.on(Zc.NOTICE_LONGPOLL_LONG_RECONNECT,this._onNoticeChannelReconnectedAfterLongTime,this)}},{key:\"_initReadyListener\",value:function(){for(var e=this,t=this.readyList,n=0,r=t.length;n<r;n++)this[t[n]].ready(function(){return e._readyHandle()})}},{key:\"_onNoticeChannelReconnectedAfterLongTime\",value:function(e){as.log(\"reconnect after long time...\",e),this.notificationController.closeNoticeChannel(),this.resetSDK(),this.login(this.loginInfo)}},{key:\"resetSDK\",value:function(){var e=this;this.initList.forEach(function(t){e[t].reset&&e[t].reset()}),this.storage.reset(),Hg.reset(),this.resetReady(),this._initReadyListener(),this.outerEmitter.emit(Wt.SDK_NOT_READY)}},{key:\"_readyHandle\",value:function(){for(var e=this.readyList,t=1,n=0,r=e.length;n<r;n++)if(!this[e[n]].isReady()){t=0;break}t&&(as.warn(\"SDK is ready. cost=\".concat(as.timeEnd(xl),\"ms\")),this.triggerReady(),this.innerEmitter.emit(Zc.SDK_READY),this.outerEmitter.emit(Wt.SDK_READY))}}]),e}();Kg.prototype.readyList=[\"conversationController\"],Kg.prototype.initList=[\"exceptionController\",\"connectionController\",\"signController\",\"contextController\",\"messageController\",\"conversationController\",\"userController\",\"groupController\",\"notificationController\"];var Yg={login:\"login\",on:\"on\",off:\"off\",ready:\"ready\",setLogLevel:\"setLogLevel\",joinGroup:\"joinGroup\",quitGroup:\"quitGroup\",registerPlugin:\"registerPlugin\"};function zg(e,t,n){if(e||void 0!==Yg[t])return 1;n.innerEmitter.emit(Zc.ERROR_DETECTED,new Hc({code:Bc.SDK_IS_NOT_READY,message:\"\".concat(jc.SDK_IS_NOT_READY,\" \").concat(t)}))}var Wg={},Xg={};return Xg.create=function(e){if(e.SDKAppID&&Wg[e.SDKAppID])return Wg[e.SDKAppID];as.log(\"TIM.create\");var t=new Kg(e);t.on(Wt.SDK_DESTROY,function(e){Wg[e.data.SDKAppID]=null,delete Wg[e.data.SDKAppID]});var n=function(e){var t=Object.create(null);return Object.keys(qs).forEach(function(n){if(e[n]){var r=qs[n],o=new En;t[r]=function(){var t=Array.from(arguments);return o.use(function(t,r){if(zg(e.isReady(),n,e))return r()}).use(function(e,t){if(1==Us(e,xs[n],r))return t()}).use(function(t,r){return e[n].apply(e,t)}),o.run(t)}}}),t}(t);return Wg[e.SDKAppID]=n,as.log(\"TIM.create ok\"),n},Xg.TYPES=Xt,Xg.EVENT=Wt,Xg.VERSION=\"2.2.1\",as.log(\"TIM.VERSION: \".concat(Xg.VERSION)),Xg});\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://TIC/./node_modules/tim-js-sdk/tim-js.js?");

/***/ }),

/***/ "./node_modules/trtc-js-sdk/trtc.js":
/*!******************************************!*\
  !*** ./node_modules/trtc-js-sdk/trtc.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {!function(e,t){ true?module.exports=t():undefined}(this,function(){var e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n,r,i,o=\"object\",a=function(e){return e&&e.Math==Math&&e},s=a(typeof globalThis==o&&globalThis)||a(typeof window==o&&window)||a(typeof self==o&&self)||a(typeof e==o&&e)||Function(\"return this\")(),c=function(e){try{return!!e()}catch(t){return 1}},u=!c(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a}),d={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p={f:l&&!d.call({1:2},1)?function(e){var t=l(this,e);return!!t&&t.enumerable}:d},f=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,m=function(e){return h.call(e).slice(8,-1)},v=\"\".split,g=c(function(){return!Object(\"z\").propertyIsEnumerable(0)})?function(e){return\"String\"==m(e)?v.call(e,\"\"):Object(e)}:Object,_=function(e){if(null==e)throw TypeError(\"Can't call method on \"+e);return e},y=function(e){return g(_(e))},S=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e},b=function(e,t){if(!S(e))return e;var n,r;if(t&&\"function\"==typeof(n=e.toString)&&!S(r=n.call(e)))return r;if(\"function\"==typeof(n=e.valueOf)&&!S(r=n.call(e)))return r;if(!t&&\"function\"==typeof(n=e.toString)&&!S(r=n.call(e)))return r;throw TypeError(\"Can't convert object to primitive value\")},k={}.hasOwnProperty,C=function(e,t){return k.call(e,t)},T=s.document,w=S(T)&&S(T.createElement),R=function(e){return w?T.createElement(e):{}},E=!u&&!c(function(){return 7!=Object.defineProperty(R(\"div\"),\"a\",{get:function(){return 7}}).a}),I=Object.getOwnPropertyDescriptor,P={f:u?I:function(e,t){if(e=y(e),t=b(t,1),E)try{return I(e,t)}catch(n){}if(C(e,t))return f(!p.f.call(e,t),e[t])}},x=function(e){if(!S(e))throw TypeError(String(e)+\" is not an object\");return e},A=Object.defineProperty,O={f:u?A:function(e,t,n){if(x(e),t=b(t,1),x(n),E)try{return A(e,t,n)}catch(r){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported\");return\"value\"in n&&(e[t]=n.value),e}},D=u?function(e,t,n){return O.f(e,t,f(1,n))}:function(e,t,n){return e[t]=n,e},L=function(e,t){try{D(s,e,t)}catch(n){s[e]=t}return t},N=t(function(e){var t=s[\"__core-js_shared__\"]||L(\"__core-js_shared__\",{});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})(\"versions\",[]).push({version:\"3.1.3\",mode:\"global\",copyright:\"© 2019 Denis Pushkarev (zloirock.ru)\"})}),M=N(\"native-function-to-string\",Function.toString),j=s.WeakMap,U=\"function\"==typeof j&&/native code/.test(M.call(j)),V=0,F=Math.random(),G=function(e){return\"Symbol(\"+String(void 0===e?\"\":e)+\")_\"+(++V+F).toString(36)},B=N(\"keys\"),H=function(e){return B[e]||(B[e]=G(e))},z={},W=s.WeakMap;if(U){var J=new W,q=J.get,K=J.has,$=J.set;n=function(e,t){return $.call(J,e,t),t},r=function(e){return q.call(J,e)||{}},i=function(e){return K.call(J,e)}}else{var Y=H(\"state\");z[Y]=1,n=function(e,t){return D(e,Y,t),t},r=function(e){return C(e,Y)?e[Y]:{}},i=function(e){return C(e,Y)}}var Q={set:n,get:r,has:i,enforce:function(e){return i(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var n;if(!S(t)||(n=r(t)).type!==e)throw TypeError(\"Incompatible receiver, \"+e+\" required\");return n}}},X=t(function(e){var t=Q.get,n=Q.enforce,r=String(M).split(\"toString\");N(\"inspectSource\",function(e){return M.call(e)}),(e.exports=function(e,t,i,o){var a=o?!!o.unsafe:0,c=o?!!o.enumerable:0,u=o?!!o.noTargetGet:0;\"function\"==typeof i&&(\"string\"!=typeof t||C(i,\"name\")||D(i,\"name\",t),n(i).source=r.join(\"string\"==typeof t?t:\"\")),e!==s?(a?!u&&e[t]&&(c=1):delete e[t],c?e[t]=i:D(e,t,i)):c?e[t]=i:L(t,i)})(Function.prototype,\"toString\",function(){return\"function\"==typeof this&&t(this).source||M.call(this)})}),Z=s,ee=function(e){return\"function\"==typeof e?e:void 0},te=function(e,t){return arguments.length<2?ee(Z[e])||ee(s[e]):Z[e]&&Z[e][t]||s[e]&&s[e][t]},ne=Math.ceil,re=Math.floor,ie=function(e){return isNaN(e=+e)?0:(e>0?re:ne)(e)},oe=Math.min,ae=function(e){return e>0?oe(ie(e),9007199254740991):0},se=Math.max,ce=Math.min,ue=function(e,t){var n=ie(e);return n<0?se(n+t,0):ce(n,t)},de=function(e){return function(t,n,r){var i,o=y(t),a=ae(o.length),s=ue(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return 1}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},le={includes:de(1),indexOf:de(0)},pe=le.indexOf,fe=function(e,t){var n,r=y(e),i=0,o=[];for(n in r)!C(z,n)&&C(r,n)&&o.push(n);for(;t.length>i;)C(r,n=t[i++])&&(~pe(o,n)||o.push(n));return o},he=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],me=he.concat(\"length\",\"prototype\"),ve={f:Object.getOwnPropertyNames||function(e){return fe(e,me)}},ge={f:Object.getOwnPropertySymbols},_e=te(\"Reflect\",\"ownKeys\")||function(e){var t=ve.f(x(e)),n=ge.f;return n?t.concat(n(e)):t},ye=function(e,t){for(var n=_e(t),r=O.f,i=P.f,o=0;o<n.length;o++){var a=n[o];C(e,a)||r(e,a,i(t,a))}},Se=/#|\\.prototype\\./,be=function(e,t){var n=Ce[ke(e)];return n==we?1:n==Te?0:\"function\"==typeof t?c(t):!!t},ke=be.normalize=function(e){return String(e).replace(Se,\".\").toLowerCase()},Ce=be.data={},Te=be.NATIVE=\"N\",we=be.POLYFILL=\"P\",Re=be,Ee=P.f,Ie=function(e,t){var n,r,i,o,a,c=e.target,u=e.global,d=e.stat;if(n=u?s:d?s[c]||L(c,{}):(s[c]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=Ee(n,r))&&a.value:n[r],!Re(u?r:c+(d?\".\":\"#\")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;ye(o,i)}(e.sham||i&&i.sham)&&D(o,\"sham\",1),X(n,r,o,e)}},Pe=Array.isArray||function(e){return\"Array\"==m(e)},xe=function(e){return Object(_(e))},Ae=function(e,t,n){var r=b(t);r in e?O.f(e,r,f(0,n)):e[r]=n},Oe=!!Object.getOwnPropertySymbols&&!c(function(){return!String(Symbol())}),De=s.Symbol,Le=N(\"wks\"),Ne=function(e){return Le[e]||(Le[e]=Oe&&De[e]||(Oe?De:G)(\"Symbol.\"+e))},Me=Ne(\"species\"),je=function(e,t){var n;return Pe(e)&&(\"function\"!=typeof(n=e.constructor)||n!==Array&&!Pe(n.prototype)?S(n)&&null===(n=n[Me])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Ue=Ne(\"species\"),Ve=function(e){return!c(function(){var t=[];return(t.constructor={})[Ue]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Fe=Ne(\"isConcatSpreadable\"),Ge=!c(function(){var e=[];return e[Fe]=0,e.concat()[0]!==e}),Be=Ve(\"concat\"),He=function(e){if(!S(e))return 0;var t=e[Fe];return void 0!==t?!!t:Pe(e)};Ie({target:\"Array\",proto:1,forced:!Ge||!Be},{concat:function(e){var t,n,r,i,o,a=xe(this),s=je(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],He(o)){if(c+(i=ae(o.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(n=0;n<i;n++,c++)n in o&&Ae(s,c,o[n])}else{if(c>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");Ae(s,c++,o)}return s.length=c,s}});var ze=function(e){if(\"function\"!=typeof e)throw TypeError(String(e)+\" is not a function\");return e},We=function(e,t,n){if(ze(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},Je=[].push,qe=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=5==e||o;return function(s,c,u,d){for(var l,p,f=xe(s),h=g(f),m=We(c,u,3),v=ae(h.length),_=0,y=d||je,S=t?y(s,v):n?y(s,0):void 0;v>_;_++)if((a||_ in h)&&(p=m(l=h[_],_,f),e))if(t)S[_]=p;else if(p)switch(e){case 3:return 1;case 5:return l;case 6:return _;case 2:Je.call(S,l)}else if(i)return 0;return o?-1:r||i?i:S}},Ke={forEach:qe(0),map:qe(1),filter:qe(2),some:qe(3),every:qe(4),find:qe(5),findIndex:qe(6)},$e=Ke.filter;Ie({target:\"Array\",proto:1,forced:!Ve(\"filter\")},{filter:function(e){return $e(this,e,arguments.length>1?arguments[1]:void 0)}});var Ye=Ke.map;function Qe(e){return(Qe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function Xe(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ze(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Xe(o,r,i,a,s,\"next\",e)}function s(e){Xe(o,r,i,a,s,\"throw\",e)}a(void 0)})}}function et(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||0,r.configurable=1,\"value\"in r&&(r.writable=1),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){rt(e,t,n[t])})}return e}function ot(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:1,configurable:1}}),t&&st(e,t)}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e,t,n){return(ct=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return 0;if(Reflect.construct.sham)return 0;if(\"function\"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return 0}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&st(i,n.prototype),i}).apply(null,arguments)}function ut(e){var t=\"function\"==typeof Map?new Map:void 0;return(ut=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ct(e,arguments,at(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:0,writable:1,configurable:1}}),st(r,e)})(e)}function dt(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function lt(e,t,n){return(lt=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=at(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=1,i=0,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=1);}catch(c){i=1,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}Ie({target:\"Array\",proto:1,forced:!Ve(\"map\")},{map:function(e){return Ye(this,e,arguments.length>1?arguments[1]:void 0)}});t(function(e){!function(t){var n,r=Object.prototype,i=r.hasOwnProperty,o=\"function\"==typeof Symbol?Symbol:{},a=o.iterator||\"@@iterator\",s=o.asyncIterator||\"@@asyncIterator\",c=o.toStringTag||\"@@toStringTag\",u=t.regeneratorRuntime;if(u)e.exports=u;else{(u=t.regeneratorRuntime=e.exports).wrap=y;var d=\"suspendedStart\",l=\"suspendedYield\",p=\"executing\",f=\"completed\",h={},m={};m[a]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(x([])));g&&g!==r&&i.call(g,a)&&(m=g);var _=C.prototype=b.prototype=Object.create(m);k.prototype=_.constructor=C,C.constructor=k,C[c]=k.displayName=\"GeneratorFunction\",u.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return t?t===k||\"GeneratorFunction\"===(t.displayName||t.name):0},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c in e||(e[c]=\"GeneratorFunction\")),e.prototype=Object.create(_),e},u.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[s]=function(){return this},u.AsyncIterator=w,u.async=function(e,t,n,r){var i=new w(y(e,t,n,r));return u.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},T(_),_[c]=\"Generator\",_[a]=function(){return this},_.toString=function(){return\"[object Generator]\"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=0,n}return n.done=1,n}},u.values=x,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=0,this.delegate=null,this.method=\"next\",this.arg=n,this.tryEntries.forEach(I),!e)for(var t in this)\"t\"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=1;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type=\"throw\",s.arg=e,t.next=r,i&&(t.method=\"next\",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if(\"root\"===a.tryLoc)return r(\"end\");if(a.tryLoc<=this.prev){var c=i.call(a,\"catchLoc\"),u=i.call(a,\"finallyLoc\");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,1);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,1)}else{if(!u)throw new Error(\"try statement without catch or finally\");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,\"finallyLoc\")&&this.prev<r.finallyLoc){var o=r;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\"throw\"===r.type){var i=r.arg;I(n)}return i}}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},\"next\"===this.method&&(this.arg=n),h}}}function y(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error(\"Generator is already running\");if(r===f){if(\"throw\"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=R(a,n);if(s){if(s===h)continue;return s}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);r=p;var c=S(e,t,n);if(\"normal\"===c.type){if(r=n.done?f:l,c.arg===h)continue;return{value:c.arg,done:n.done}}\"throw\"===c.type&&(r=f,n.method=\"throw\",n.arg=c.arg)}}}(e,n,a),o}function S(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(r){return{type:\"throw\",arg:r}}}function b(){}function k(){}function C(){}function T(e){[\"next\",\"throw\",\"return\"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function w(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=S(e[n],e,r);if(\"throw\"!==s.type){var c=s.arg,u=c.value;return u&&\"object\"==typeof u&&i.call(u,\"__await\")?Promise.resolve(u.__await).then(function(e){t(\"next\",e,o,a)},function(e){t(\"throw\",e,o,a)}):Promise.resolve(u).then(function(e){c.value=e,o(c)},a)}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function R(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,\"throw\"===t.method){if(e.iterator.return&&(t.method=\"return\",t.arg=n,R(e,t),\"throw\"===t.method))return h;t.method=\"throw\",t.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return h}var i=S(r,e.iterator,t.arg);if(\"throw\"===i.type)return t.method=\"throw\",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,\"return\"!==t.method&&(t.method=\"next\",t.arg=n),t.delegate=null,h):o:(t.method=\"throw\",t.arg=new TypeError(\"iterator result is not an object\"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(E,this),this.reset(1)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=0,t;return t.value=n,t.done=1,t};return o.next=o}}return{next:A}}function A(){return{value:n,done:1}}}(function(){return this}()||Function(\"return this\")())});let ft=1,ht=1;function mt(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function vt(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);const r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,\"on\"+t,{get(){return this[\"_on\"+t]},set(e){this[\"_on\"+t]&&(this.removeEventListener(t,this[\"_on\"+t]),delete this[\"_on\"+t]),e&&this.addEventListener(t,this[\"_on\"+t]=e)},enumerable:1,configurable:1})}function gt(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+typeof e+\". Please use a boolean.\"):(ft=e,e?\"adapter.js logging disabled\":\"adapter.js logging enabled\")}function _t(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+typeof e+\". Please use a boolean.\"):(ht=!e,\"adapter.js deprecation warnings \"+(e?\"disabled\":\"enabled\"))}function yt(){if(\"object\"==typeof window){if(ft)return;\"undefined\"!=typeof console&&\"function\"==typeof console.log&&console.log.apply(console,arguments)}}function St(e,t){ht&&console.warn(e+\" is deprecated, please use \"+t+\" instead.\")}function bt(e){const{navigator:t}=e,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser=\"Not a browser.\",n;if(t.mozGetUserMedia)n.browser=\"firefox\",n.version=mt(t.userAgent,/Firefox\\/(\\d+)\\./,1);else if(t.webkitGetUserMedia||0==e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser=\"chrome\",n.version=mt(t.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))n.browser=\"edge\",n.version=mt(t.userAgent,/Edge\\/(\\d+).(\\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return n.browser=\"Not a supported browser.\",n;n.browser=\"safari\",n.version=mt(t.userAgent,/AppleWebKit\\/(\\d+)\\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&\"currentDirection\"in e.RTCRtpTransceiver.prototype}return n}function kt(e){return\"[object Object]\"===Object.prototype.toString.call(e)}function Ct(e){return kt(e)?Object.keys(e).reduce(function(t,n){const r=kt(e[n]),i=r?Ct(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})},{}):e}function Tt(e,t,n){const r=n?\"outbound-rtp\":\"inbound-rtp\",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{\"track\"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(i=>{i.endsWith(\"Id\")?e(t,t.get(n[i]),r):i.endsWith(\"Ids\")&&n[i].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,i)})}),i}const wt=yt;function Rt(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=bt(e),r=function(e){if(\"object\"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if(\"require\"===n||\"advanced\"===n||\"mediaSource\"===n)return;const r=\"object\"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&\"number\"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):\"deviceId\"===t?\"sourceId\":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};\"number\"==typeof r.ideal?(e[i(\"min\",n)]=r.ideal,t.optional.push(e),(e={})[i(\"max\",n)]=r.ideal,t.optional.push(e)):(e[i(\"\",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&\"number\"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i(\"\",n)]=r.exact):[\"min\",\"max\"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&\"object\"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,\"autoGainControl\",\"googAutoGainControl\"),t(e.audio,\"noiseSuppression\",\"googNoiseSuppression\"),e.audio=r(e.audio)}if(e&&\"object\"==typeof e.video){let o=e.video.facingMode;o=o&&(\"object\"==typeof o?o:{ideal:o});const a=n.version<66;if(o&&(\"user\"===o.exact||\"environment\"===o.exact||\"user\"===o.ideal||\"environment\"===o.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||a)){let n;if(delete e.video.facingMode,\"environment\"===o.exact||\"environment\"===o.ideal?n=[\"back\",\"rear\"]:\"user\"!==o.exact&&\"user\"!==o.ideal||(n=[\"front\"]),n)return t.mediaDevices.enumerateDevices().then(t=>{let a=(t=t.filter(e=>\"videoinput\"===e.kind)).find(e=>n.some(t=>e.label.toLowerCase().includes(t)));return!a&&t.length&&n.includes(\"back\")&&(a=t[t.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),wt(\"chrome: \"+JSON.stringify(e)),i(e)})}e.video=r(e.video)}return wt(\"chrome: \"+JSON.stringify(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:\"NotAllowedError\",PermissionDismissedError:\"NotAllowedError\",InvalidStateError:\"NotAllowedError\",DevicesNotFoundError:\"NotFoundError\",ConstraintNotSatisfiedError:\"OverconstrainedError\",TrackStartError:\"NotReadableError\",MediaDeviceFailedDueToShutdown:\"NotAllowedError\",MediaDeviceKillSwitchOn:\"NotAllowedError\",TabCaptureError:\"AbortError\",ScreenCaptureError:\"AbortError\",DeviceCaptureError:\"AbortError\"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&\": \")+this.message}}};if(t.getUserMedia=function(e,n,r){i(e,e=>{t.webkitGetUserMedia(e,n,e=>{r&&r(o(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException(\"\",\"NotFoundError\");return e},e=>Promise.reject(o(e))))}}}function Et(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function It(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||\"ontrack\"in e.RTCPeerConnection.prototype)vt(e,\"track\",e=>(e.transceiver||Object.defineProperty(e,\"transceiver\",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(e.RTCPeerConnection.prototype,\"ontrack\",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener(\"track\",this._ontrack),this.addEventListener(\"track\",this._ontrack=e)},enumerable:1,configurable:1});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener(\"addtrack\",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event(\"track\");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event(\"track\");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener(\"addstream\",this._ontrackpoly)),t.apply(this,arguments)}}}function Pt(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&!(\"getSenders\"in e.RTCPeerConnection.prototype)&&\"createDTMFSender\"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(\"audio\"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if(\"object\"==typeof e&&e.RTCPeerConnection&&\"getSenders\"in e.RTCPeerConnection.prototype&&\"createDTMFSender\"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!(\"dtmf\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,\"dtmf\",{get(){return void 0===this._dtmf&&(\"audio\"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function xt(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&\"function\"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||\"function\"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])}).then(n,r)}}function At(e){if(!(\"object\"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!(\"getStats\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Tt(t,e.track,1))}}if(!(\"getStats\"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),vt(e,\"track\",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>Tt(t,e.track,0))}}if(!(\"getStats\"in e.RTCRtpSender.prototype&&\"getStats\"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=1:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=1:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException(\"There are more than one sender or receiver for the track.\",\"InvalidAccessError\")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException(\"There is no sender or receiver for the track.\",\"InvalidAccessError\"))}return t.apply(this,arguments)}}function Ot(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function Dt(e){if(!e.RTCPeerConnection)return;const t=bt(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ot(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,\"g\"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,\"g\"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException(\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\",\"NotSupportedError\");const i=this.getSenders().find(e=>e.track===t);if(i)throw new DOMException(\"Track already exists.\",\"InvalidAccessError\");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event(\"negotiationneeded\"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},[\"createOffer\",\"createAnswer\"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&\"function\"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]});const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,\"localDescription\");Object.defineProperty(e.RTCPeerConnection.prototype,\"localDescription\",{get(){const e=c.get.apply(this);return\"\"===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");if(!e._pc)throw new DOMException(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\",\"TypeError\");if(!(e._pc===this))throw new DOMException(\"Sender was not created by this connection.\",\"InvalidAccessError\");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event(\"negotiationneeded\")))}}function Lt(e){const t=bt(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;t.version<53&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]});const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&\"\"===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function Nt(e){vt(e,\"negotiationneeded\",e=>{if(\"stable\"===e.target.signalingState)return e})}var Mt=Object.freeze({shimMediaStream:Et,shimOnTrack:It,shimGetSendersWithDtmf:Pt,shimGetStats:xt,shimSenderReceiverGetStats:At,shimAddTrackRemoveTrackWithNative:Ot,shimAddTrackRemoveTrack:Dt,shimPeerConnection:Lt,fixNegotiationNeeded:Nt,shimGetUserMedia:Rt,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(\"function\"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error(\"shimGetDisplayMedia: getSourceId argument is not a function\"))}});var jt=t(function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split(\"\\n\").map(function(e){return e.trim()})},t.splitSections=function(e){return e.split(\"\\nm=\").map(function(e,t){return(t>0?\"m=\"+e:e).trim()+\"\\r\\n\"})},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter(function(e){return 0===e.indexOf(n)})},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf(\"a=candidate:\")?e.substring(12).split(\" \"):e.substring(10).split(\" \"))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case\"raddr\":n.relatedAddress=t[r+1];break;case\"rport\":n.relatedPort=parseInt(t[r+1],10);break;case\"tcptype\":n.tcpType=t[r+1];break;case\"ufrag\":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push(\"typ\"),t.push(n),\"host\"!==n&&e.relatedAddress&&e.relatedPort&&(t.push(\"raddr\"),t.push(e.relatedAddress),t.push(\"rport\"),t.push(e.relatedPort)),e.tcpType&&\"tcp\"===e.protocol.toLowerCase()&&(t.push(\"tcptype\"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push(\"ufrag\"),t.push(e.usernameFragment||e.ufrag)),\"candidate:\"+t.join(\" \")},t.parseIceOptions=function(e){return e.substr(14).split(\" \")},t.parseRtpMap=function(e){var t=e.substr(9).split(\" \"),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split(\"/\"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return\"a=rtpmap:\"+t+\" \"+e.name+\"/\"+e.clockRate+(1!==n?\"/\"+n:\"\")+\"\\r\\n\"},t.parseExtmap=function(e){var t=e.substr(9).split(\" \");return{id:parseInt(t[0],10),direction:t[0].indexOf(\"/\")>0?t[0].split(\"/\")[1]:\"sendrecv\",uri:t[1]}},t.writeExtmap=function(e){return\"a=extmap:\"+(e.id||e.preferredId)+(e.direction&&\"sendrecv\"!==e.direction?\"/\"+e.direction:\"\")+\" \"+e.uri+\"\\r\\n\"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(\" \")+1).split(\";\"),i=0;i<r.length;i++)n[(t=r[i].trim().split(\"=\"))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t=\"\",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+\"=\"+e.parameters[t]):r.push(t)}),t+=\"a=fmtp:\"+n+\" \"+r.join(\";\")+\"\\r\\n\"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(\" \")+1).split(\" \");return{type:t.shift(),parameter:t.join(\" \")}},t.writeRtcpFb=function(e){var t=\"\",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+=\"a=rtcp-fb:\"+n+\" \"+e.type+(e.parameter&&e.parameter.length?\" \"+e.parameter:\"\")+\"\\r\\n\"}),t},t.parseSsrcMedia=function(e){var t=e.indexOf(\" \"),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(\":\",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(\" \");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},t.getMid=function(e){var n=t.matchPrefix(e,\"a=mid:\")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(\" \");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:\"auto\",fingerprints:t.matchPrefix(e+n,\"a=fingerprint:\").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n=\"a=setup:\"+t+\"\\r\\n\";return e.fingerprints.forEach(function(e){n+=\"a=fingerprint:\"+e.algorithm+\" \"+e.value+\"\\r\\n\"}),n},t.getIceParameters=function(e,n){var r=t.splitLines(e);return{usernameFragment:(r=r.concat(t.splitLines(n))).filter(function(e){return 0===e.indexOf(\"a=ice-ufrag:\")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf(\"a=ice-pwd:\")})[0].substr(10)}},t.writeIceParameters=function(e){return\"a=ice-ufrag:\"+e.usernameFragment+\"\\r\\na=ice-pwd:\"+e.password+\"\\r\\n\"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(\" \"),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,\"a=rtpmap:\"+o+\" \")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,\"a=fmtp:\"+o+\" \");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,\"a=rtcp-fb:\"+o+\" \").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case\"RED\":case\"ULPFEC\":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,\"a=extmap:\").forEach(function(e){n.headerExtensions.push(t.parseExtmap(e))}),n},t.writeRtpDescription=function(e,n){var r=\"\";r+=\"m=\"+e+\" \",r+=n.codecs.length>0?\"9\":\"0\",r+=\" UDP/TLS/RTP/SAVPF \",r+=n.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(\" \")+\"\\r\\n\",r+=\"c=IN IP4 0.0.0.0\\r\\n\",r+=\"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\",n.codecs.forEach(function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)});var i=0;return n.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+=\"a=maxptime:\"+i+\"\\r\\n\"),r+=\"a=rtcp-mux\\r\\n\",n.headerExtensions&&n.headerExtensions.forEach(function(e){r+=t.writeExtmap(e)}),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf(\"RED\"),a=-1!==i.fecMechanisms.indexOf(\"ULPFEC\"),s=t.matchPrefix(e,\"a=ssrc:\").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return\"cname\"===e.attribute}),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,\"a=ssrc-group:FID\").map(function(e){return e.substr(17).split(\" \").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach(function(e){if(\"RTX\"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?\"red+ulpfec\":\"red\"},r.push(t))}}),0===r.length&&c&&r.push({ssrc:c});var d=t.matchPrefix(e,\"b=\");return d.length&&(d=0===d[0].indexOf(\"b=TIAS:\")?parseInt(d[0].substr(7),10):0===d[0].indexOf(\"b=AS:\")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=d})),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,\"a=ssrc:\").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return\"cname\"===e.attribute})[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,\"a=rtcp-rsize\");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,\"a=rtcp-mux\");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,\"a=msid:\");if(1===r.length)return{stream:(n=r[0].substr(7).split(\" \"))[0],track:n[1]};var i=t.matchPrefix(e,\"a=ssrc:\").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return\"msid\"===e.attribute});return i.length>0?{stream:(n=i[0].value.split(\" \"))[0],track:n[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return\"v=0\\r\\no=\"+(r||\"thisisadapterortc\")+\" \"+(e||t.generateSessionId())+\" \"+i+\" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\"},t.writeMediaSection=function(e,n,r,i){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\"offer\"===r?\"actpass\":\"active\"),o+=\"a=mid:\"+e.mid+\"\\r\\n\",e.direction?o+=\"a=\"+e.direction+\"\\r\\n\":e.rtpSender&&e.rtpReceiver?o+=\"a=sendrecv\\r\\n\":e.rtpSender?o+=\"a=sendonly\\r\\n\":e.rtpReceiver?o+=\"a=recvonly\\r\\n\":o+=\"a=inactive\\r\\n\",e.rtpSender){var a=\"msid:\"+i.id+\" \"+e.rtpSender.track.id+\"\\r\\n\";o+=\"a=\"+a,o+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" \"+a,e.sendEncodingParameters[0].rtx&&(o+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" \"+a,o+=\"a=ssrc-group:FID \"+e.sendEncodingParameters[0].ssrc+\" \"+e.sendEncodingParameters[0].rtx.ssrc+\"\\r\\n\")}return o+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" cname:\"+t.localCName+\"\\r\\n\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" cname:\"+t.localCName+\"\\r\\n\"),o},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case\"a=sendrecv\":case\"a=sendonly\":case\"a=recvonly\":case\"a=inactive\":return r[i].substr(2)}return n?t.getDirection(n):\"sendrecv\"},t.getKind=function(e){return t.splitLines(e)[0].split(\" \")[0].substr(2)},t.isRejected=function(e){return\"0\"===e.split(\" \",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(\" \");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(\" \")}},t.parseOLine=function(e){var n=t.matchPrefix(e,\"o=\")[0].substr(2).split(\" \");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if(\"string\"!=typeof e||0===e.length)return 0;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||\"=\"!==n[r].charAt(1))return 0;return 1},e.exports=t});function Ut(e,t,n,r,i){var o=jt.writeRtpDescription(e.kind,t);if(o+=jt.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=jt.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\"offer\"===n?\"actpass\":i||\"active\"),o+=\"a=mid:\"+e.mid+\"\\r\\n\",e.rtpSender&&e.rtpReceiver?o+=\"a=sendrecv\\r\\n\":e.rtpSender?o+=\"a=sendonly\\r\\n\":e.rtpReceiver?o+=\"a=recvonly\\r\\n\":o+=\"a=inactive\\r\\n\",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s=\"msid:\"+(r?r.id:\"-\")+\" \"+a+\"\\r\\n\";o+=\"a=\"+s,o+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" \"+s,e.sendEncodingParameters[0].rtx&&(o+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" \"+s,o+=\"a=ssrc-group:FID \"+e.sendEncodingParameters[0].ssrc+\" \"+e.sendEncodingParameters[0].rtx.ssrc+\"\\r\\n\")}return o+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" cname:\"+jt.localCName+\"\\r\\n\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" cname:\"+jt.localCName+\"\\r\\n\"),o}function Vt(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),a=r(t.parameters.apt,i);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if(\"rtx\"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!i(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return 1;return 0});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function Ft(e,t,n){return-1!=={offer:{setLocalDescription:[\"stable\",\"have-local-offer\"],setRemoteDescription:[\"stable\",\"have-remote-offer\"]},answer:{setLocalDescription:[\"have-remote-offer\",\"have-local-pranswer\"],setRemoteDescription:[\"have-local-offer\",\"have-remote-pranswer\"]}}[t][e].indexOf(n)}function Gt(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function Bt(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var Ht=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent(\"addtrack\",{track:t}))}function r(t,n,r,i){var o=new Event(\"track\");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout(function(){t._dispatchEvent(\"track\",o)})}var i=function(n){var r=this,i=document.createDocumentFragment();if([\"addEventListener\",\"removeEventListener\",\"dispatchEvent\"].forEach(function(e){r[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=0,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState=\"stable\",this.iceConnectionState=\"new\",this.connectionState=\"new\",this.iceGatheringState=\"new\",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle=\"max-bundle\"===n.bundlePolicy,\"negotiate\"===n.rtcpMuxPolicy)throw Bt(\"NotSupportedError\",\"rtcpMuxPolicy 'negotiate' is not supported\");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy=\"require\"),n.iceTransportPolicy){case\"all\":case\"relay\":break;default:n.iceTransportPolicy=\"all\"}switch(n.bundlePolicy){case\"balanced\":case\"max-compat\":case\"max-bundle\":break;default:n.bundlePolicy=\"balanced\"}if(n.iceServers=function(e,t){var n=0;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn(\"RTCIceServer.url is deprecated! Use urls instead.\");var i=\"string\"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0===e.indexOf(\"turn:\")&&-1!==e.indexOf(\"transport=udp\")&&-1===e.indexOf(\"turn:[\")&&!n?(n=1,1):0===e.indexOf(\"stun:\")&&t>=14393&&-1===e.indexOf(\"?transport=udp\")}),delete e.url,e.urls=i?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=jt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=0};Object.defineProperty(i.prototype,\"localDescription\",{configurable:1,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,\"remoteDescription\",{configurable:1,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),\"function\"==typeof this[\"on\"+e]&&this[\"on\"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event(\"icegatheringstatechange\");this._dispatchEvent(\"icegatheringstatechange\",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:1};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},i.prototype.addTrack=function(t,n){if(this._isClosed)throw Bt(\"InvalidStateError\",\"Attempted to call addTrack on a closed peerconnection.\");var r;if(this.transceivers.find(function(e){return e.track===t}))throw Bt(\"InvalidAccessError\",\"Track already exists.\");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},i.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener(\"enabled\",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},i.prototype.removeTrack=function(t){if(this._isClosed)throw Bt(\"InvalidStateError\",\"Attempted to call removeTrack on a closed peerconnection.\");if(!(t instanceof e.RTCRtpSender))throw new TypeError(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw Bt(\"InvalidAccessError\",\"Sender was not created by this connection.\");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,\"state\",{value:\"new\",writable:1}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?\"completed\":\"gathering\",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener(\"localcandidate\",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,n){var r=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener(\"localcandidate\",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var o=new Event(\"icecandidate\");o.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===Object.keys(a).length;if(s)\"new\"!==i.state&&\"gathering\"!==i.state||(i.state=\"completed\");else{\"new\"===i.state&&(i.state=\"gathering\"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var c=jt.writeCandidate(a);o.candidate=Object.assign(o.candidate,jt.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var u=jt.getMediaSections(r._localDescription.sdp);u[o.candidate.sdpMLineIndex]+=s?\"a=end-of-candidates\\r\\n\":\"a=\"+o.candidate.candidate+\"\\r\\n\",r._localDescription.sdp=jt.getDescription(r._localDescription.sdp)+u.join(\"\");var d=r.transceivers.every(function(e){return e.iceGatherer&&\"completed\"===e.iceGatherer.state});\"gathering\"!==r.iceGatheringState&&(r.iceGatheringState=\"gathering\",r._emitGatheringStateChange()),s||r._dispatchEvent(\"icecandidate\",o),d&&(r._dispatchEvent(\"icecandidate\",new Event(\"icecandidate\")),r.iceGatheringState=\"complete\",r._emitGatheringStateChange())}},e.setTimeout(function(){o.forEach(function(e){i.onlocalcandidate(e)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,\"state\",{value:\"failed\",writable:1}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,n,r){var i=Vt(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:jt.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),r&&e.rtpReceiver&&i.codecs.length>0&&(\"video\"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===[\"offer\",\"answer\"].indexOf(e.type))return Promise.reject(Bt(\"TypeError\",'Unsupported type \"'+e.type+'\"'));if(!Ft(\"setLocalDescription\",e.type,r.signalingState)||r._isClosed)return Promise.reject(Bt(\"InvalidStateError\",\"Can not set local \"+e.type+\" in state \"+r.signalingState));if(\"offer\"===e.type)t=jt.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=jt.parseRtpParameters(e);r.transceivers[t].localCapabilities=n}),r.transceivers.forEach(function(e,t){r._gather(e.mid,t)});else if(\"answer\"===e.type){t=jt.splitSections(r._remoteDescription.sdp),n=t.shift();var i=jt.matchPrefix(n,\"a=ice-lite\").length>0;t.forEach(function(e,t){var o=r.transceivers[t],a=o.iceGatherer,s=o.iceTransport,c=o.dtlsTransport,u=o.localCapabilities,d=o.remoteCapabilities;if(!(jt.isRejected(e)&&0===jt.matchPrefix(e,\"a=bundle-only\").length)&&!o.rejected){var l=jt.getIceParameters(e,n),p=jt.getDtlsParameters(e,n);i&&(p.role=\"server\"),r.usingBundle&&0!==t||(r._gather(o.mid,t),\"new\"===s.state&&s.start(a,l,i?\"controlling\":\"controlled\"),\"new\"===c.state&&c.start(p));var f=Vt(u,d);r._transceive(o,f.codecs.length>0,0)}})}return r._localDescription={type:e.type,sdp:e.sdp},\"offer\"===e.type?r._updateSignalingState(\"have-local-offer\"):r._updateSignalingState(\"stable\"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var o=this;if(-1===[\"offer\",\"answer\"].indexOf(i.type))return Promise.reject(Bt(\"TypeError\",'Unsupported type \"'+i.type+'\"'));if(!Ft(\"setRemoteDescription\",i.type,o.signalingState)||o._isClosed)return Promise.reject(Bt(\"InvalidStateError\",\"Can not set remote \"+i.type+\" in state \"+o.signalingState));var a={};o.remoteStreams.forEach(function(e){a[e.id]=e});var s=[],c=jt.splitSections(i.sdp),u=c.shift(),d=jt.matchPrefix(u,\"a=ice-lite\").length>0,l=jt.matchPrefix(u,\"a=group:BUNDLE \").length>0;o.usingBundle=l;var p=jt.matchPrefix(u,\"a=ice-options:\")[0];return o.canTrickleIceCandidates=p?p.substr(14).split(\" \").indexOf(\"trickle\")>=0:0,c.forEach(function(r,c){var p=jt.splitLines(r),f=jt.getKind(r),h=jt.isRejected(r)&&0===jt.matchPrefix(r,\"a=bundle-only\").length,m=p[0].substr(2).split(\" \")[2],v=jt.getDirection(r,u),g=jt.parseMsid(r),_=jt.getMid(r)||jt.generateIdentifier();if(h||\"application\"===f&&(\"DTLS/SCTP\"===m||\"UDP/DTLS/SCTP\"===m))o.transceivers[c]={mid:_,kind:f,protocol:m,rejected:1};else{var y,S,b,k,C,T,w,R,E;!h&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(f,1));var I,P,x=jt.parseRtpParameters(r);h||(I=jt.getIceParameters(r,u),(P=jt.getDtlsParameters(r,u)).role=\"client\"),w=jt.parseRtpEncodingParameters(r);var A=jt.parseRtcpParameters(r),O=jt.matchPrefix(r,\"a=end-of-candidates\",u).length>0,D=jt.matchPrefix(r,\"a=candidate:\").map(function(e){return jt.parseCandidate(e)}).filter(function(e){return 1===e.component});if((\"offer\"===i.type||\"answer\"===i.type)&&!h&&l&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),\"offer\"!==i.type||h){if(\"answer\"===i.type&&!h){S=(y=o.transceivers[c]).iceGatherer,b=y.iceTransport,k=y.dtlsTransport,C=y.rtpReceiver,T=y.sendEncodingParameters,R=y.localCapabilities,o.transceivers[c].recvEncodingParameters=w,o.transceivers[c].remoteCapabilities=x,o.transceivers[c].rtcpParameters=A,D.length&&\"new\"===b.state&&(!d&&!O||l&&0!==c?D.forEach(function(e){Gt(y.iceTransport,e)}):b.setRemoteCandidates(D)),l&&0!==c||(\"new\"===b.state&&b.start(S,I,\"controlling\"),\"new\"===k.state&&k.start(P)),!Vt(y.localCapabilities,y.remoteCapabilities).codecs.filter(function(e){return\"rtx\"===e.name.toLowerCase()}).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,o._transceive(y,\"sendrecv\"===v||\"recvonly\"===v,\"sendrecv\"===v||\"sendonly\"===v),!C||\"sendrecv\"!==v&&\"sendonly\"!==v?delete y.rtpReceiver:(E=C.track,g?(a[g.stream]||(a[g.stream]=new e.MediaStream),n(E,a[g.stream]),s.push([E,C,a[g.stream]])):(a.default||(a.default=new e.MediaStream),n(E,a.default),s.push([E,C,a.default])))}}else{(y=o.transceivers[c]||o._createTransceiver(f)).mid=_,y.iceGatherer||(y.iceGatherer=o._createIceGatherer(c,l)),D.length&&\"new\"===y.iceTransport.state&&(!O||l&&0!==c?D.forEach(function(e){Gt(y.iceTransport,e)}):y.iceTransport.setRemoteCandidates(D)),R=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(R.codecs=R.codecs.filter(function(e){return\"rtx\"!==e.name})),T=y.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,N=0;if(\"sendrecv\"===v||\"sendonly\"===v){if(N=!y.rtpReceiver,C=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,f),N)E=C.track,g&&\"-\"===g.stream||(g?(a[g.stream]||(a[g.stream]=new e.MediaStream,Object.defineProperty(a[g.stream],\"id\",{get:function(){return g.stream}})),Object.defineProperty(E,\"id\",{get:function(){return g.track}}),L=a[g.stream]):(a.default||(a.default=new e.MediaStream),L=a.default)),L&&(n(E,L),y.associatedRemoteMediaStreams.push(L)),s.push([E,C,L])}else y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach(function(t){var n=t.getTracks().find(function(e){return e.id===y.rtpReceiver.track.id});n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent(\"removetrack\",{track:t}))}(n,t)}),y.associatedRemoteMediaStreams=[]);y.localCapabilities=R,y.remoteCapabilities=x,y.rtpReceiver=C,y.rtcpParameters=A,y.sendEncodingParameters=T,y.recvEncodingParameters=w,o._transceive(o.transceivers[c],0,N)}}}),void 0===o._dtlsRole&&(o._dtlsRole=\"offer\"===i.type?\"active\":\"passive\"),o._remoteDescription={type:i.type,sdp:i.sdp},\"offer\"===i.type?o._updateSignalingState(\"have-remote-offer\"):o._updateSignalingState(\"stable\"),Object.keys(a).forEach(function(t){var n=a[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event(\"addstream\");i.stream=n,e.setTimeout(function(){o._dispatchEvent(\"addstream\",i)})}s.forEach(function(e){var t=e[0],i=e[1];n.id===e[2].id&&r(o,t,i,[n])})}}),s.forEach(function(e){e[2]||r(o,e[0],e[1],[])}),e.setTimeout(function(){o&&o.transceivers&&o.transceivers.forEach(function(e){e.iceTransport&&\"new\"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn(\"Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification\"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=1,this._updateSignalingState(\"closed\")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event(\"signalingstatechange\");this._dispatchEvent(\"signalingstatechange\",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;\"stable\"===this.signalingState&&1!=this.needNegotiation&&(this.needNegotiation=1,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=0;var e=new Event(\"negotiationneeded\");t._dispatchEvent(\"negotiationneeded\",e)}},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e=\"new\",t.failed>0?e=\"failed\":t.checking>0?e=\"checking\":t.disconnected>0?e=\"disconnected\":t.new>0?e=\"new\":t.connected>0?e=\"connected\":t.completed>0&&(e=\"completed\"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event(\"iceconnectionstatechange\");this._dispatchEvent(\"iceconnectionstatechange\",n)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e=\"new\",t.failed>0?e=\"failed\":t.connecting>0?e=\"connecting\":t.disconnected>0?e=\"disconnected\":t.new>0?e=\"new\":t.connected>0&&(e=\"connected\"),e!==this.connectionState){this.connectionState=e;var n=new Event(\"connectionstatechange\");this._dispatchEvent(\"connectionstatechange\",n)}},i.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(Bt(\"InvalidStateError\",\"Can not call createOffer after close\"));var r=n.transceivers.filter(function(e){return\"audio\"===e.kind}).length,i=n.transceivers.filter(function(e){return\"video\"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError(\"Legacy mandatory/optional constraints not supported.\");void 0!==o.offerToReceiveAudio&&(r=1==o.offerToReceiveAudio?1:0==o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(i=1==o.offerToReceiveVideo?1:0==o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){\"audio\"===e.kind?--r<0&&(e.wantReceive=0):\"video\"===e.kind&&--i<0&&(e.wantReceive=0)});r>0||i>0;)r>0&&(n._createTransceiver(\"audio\"),r--),i>0&&(n._createTransceiver(\"video\"),i--);var a=jt.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(r,i){var o=r.track,a=r.kind,s=r.mid||jt.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(i,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(a);t<15019&&(c.codecs=c.codecs.filter(function(e){return\"rtx\"!==e.name})),c.codecs.forEach(function(e){\"H264\"===e.name&&void 0===e.parameters[\"level-asymmetry-allowed\"]&&(e.parameters[\"level-asymmetry-allowed\"]=\"1\"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),c.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var u=r.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&\"video\"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,a)),r.localCapabilities=c,r.sendEncodingParameters=u}),\"max-compat\"!==n._config.bundlePolicy&&(a+=\"a=group:BUNDLE \"+n.transceivers.map(function(e){return e.mid}).join(\" \")+\"\\r\\n\"),a+=\"a=ice-options:trickle\\r\\n\",n.transceivers.forEach(function(e,t){a+=Ut(e,e.localCapabilities,\"offer\",e.stream,n._dtlsRole),a+=\"a=rtcp-rsize\\r\\n\",!e.iceGatherer||\"new\"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,a+=\"a=\"+jt.writeCandidate(e)+\"\\r\\n\"}),\"completed\"===e.iceGatherer.state&&(a+=\"a=end-of-candidates\\r\\n\"))});var s=new e.RTCSessionDescription({type:\"offer\",sdp:a});return Promise.resolve(s)},i.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(Bt(\"InvalidStateError\",\"Can not call createAnswer after close\"));if(\"have-remote-offer\"!==n.signalingState&&\"have-local-pranswer\"!==n.signalingState)return Promise.reject(Bt(\"InvalidStateError\",\"Can not call createAnswer in signalingState \"+n.signalingState));var r=jt.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+=\"a=group:BUNDLE \"+n.transceivers.map(function(e){return e.mid}).join(\" \")+\"\\r\\n\"),r+=\"a=ice-options:trickle\\r\\n\";var i=jt.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,o){if(!(o+1>i)){if(e.rejected)return\"application\"===e.kind?\"DTLS/SCTP\"===e.protocol?r+=\"m=application 0 DTLS/SCTP 5000\\r\\n\":r+=\"m=application 0 \"+e.protocol+\" webrtc-datachannel\\r\\n\":\"audio\"===e.kind?r+=\"m=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\na=rtpmap:0 PCMU/8000\\r\\n\":\"video\"===e.kind&&(r+=\"m=video 0 UDP/TLS/RTP/SAVPF 120\\r\\na=rtpmap:120 VP8/90000\\r\\n\"),void(r+=\"c=IN IP4 0.0.0.0\\r\\na=inactive\\r\\na=mid:\"+e.mid+\"\\r\\n\");var a;if(e.stream)\"audio\"===e.kind?a=e.stream.getAudioTracks()[0]:\"video\"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&\"video\"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var s=Vt(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter(function(e){return\"rtx\"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=Ut(e,s,\"answer\",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+=\"a=rtcp-rsize\\r\\n\")}});var o=new e.RTCSessionDescription({type:\"answer\",sdp:r});return Promise.resolve(o)},i.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError(\"sdpMLineIndex or sdpMid required\")):new Promise(function(r,i){if(!n._remoteDescription)return i(Bt(\"InvalidStateError\",\"Can not add ICE candidate without a remote description\"));if(e&&\"\"!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var a=0;a<n.transceivers.length;a++)if(n.transceivers[a].mid===e.sdpMid){o=a;break}var s=n.transceivers[o];if(!s)return i(Bt(\"OperationError\",\"Can not add ICE candidate\"));if(s.rejected)return r();var c=Object.keys(e.candidate).length>0?jt.parseCandidate(e.candidate):{};if(\"tcp\"===c.protocol&&(0===c.port||9===c.port))return r();if(c.component&&1!==c.component)return r();if((0===o||o>0&&s.iceTransport!==n.transceivers[0].iceTransport)&&!Gt(s.iceTransport,c))return i(Bt(\"OperationError\",\"Can not add ICE candidate\"));var u=e.candidate.trim();0===u.indexOf(\"a=\")&&(u=u.substr(2)),(t=jt.getMediaSections(n._remoteDescription.sdp))[o]+=\"a=\"+(c.type?u:\"end-of-candidates\")+\"\\r\\n\",n._remoteDescription.sdp=jt.getDescription(n._remoteDescription.sdp)+t.join(\"\")}else for(var d=0;d<n.transceivers.length&&(n.transceivers[d].rejected||(n.transceivers[d].iceTransport.addRemoteCandidate({}),(t=jt.getMediaSections(n._remoteDescription.sdp))[d]+=\"a=end-of-candidates\\r\\n\",n._remoteDescription.sdp=jt.getDescription(n._remoteDescription.sdp)+t.join(\"\"),!n.usingBundle));d++);r()})},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw Bt(\"InvalidAccessError\",\"Invalid selector.\");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){[\"rtpSender\",\"rtpReceiver\",\"iceGatherer\",\"iceTransport\",\"dtlsTransport\"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};[\"RTCRtpSender\",\"RTCRtpReceiver\",\"RTCIceGatherer\",\"RTCIceTransport\",\"RTCDtlsTransport\"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:\"inbound-rtp\",outboundrtp:\"outbound-rtp\",candidatepair:\"candidate-pair\",localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var o=[\"createOffer\",\"createAnswer\"];return o.forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return\"function\"==typeof e[0]||\"function\"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){\"function\"==typeof e[0]&&e[0].apply(null,[t])},function(t){\"function\"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(o=[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"]).forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return\"function\"==typeof e[1]||\"function\"==typeof e[2]?t.apply(this,arguments).then(function(){\"function\"==typeof e[1]&&e[1].apply(null)},function(t){\"function\"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),[\"getStats\"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return\"function\"==typeof e[1]?t.apply(this,arguments).then(function(){\"function\"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i};function zt(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:\"NotAllowedError\"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function Wt(e){\"getDisplayMedia\"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Jt(e){const t=bt(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,\"enabled\");Object.defineProperty(e.MediaStreamTrack.prototype,\"enabled\",{set(e){t.set.call(this,e);const n=new Event(\"enabled\");n.enabled=e,this.dispatchEvent(n)}})}!e.RTCRtpSender||\"dtmf\"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,\"dtmf\",{get(){return void 0===this._dtmf&&(\"audio\"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):\"video\"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=Ht(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=0;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&St(\"RTCIceServer.url\",\"RTCIceServer.urls\");const r=\"string\"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf(\"stun:\"))return 0;const t=e.startsWith(\"turn\")&&!e.startsWith(\"turn:[\")&&e.includes(\"transport=udp\");return t&&!n?(n=1,1):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),yt(\"ICE servers after filtering:\",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function qt(e){!e.RTCRtpSender||\"replaceTrack\"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var Kt=Object.freeze({shimPeerConnection:Jt,shimReplaceTrack:qt,shimGetUserMedia:zt,shimGetDisplayMedia:Wt});function $t(e){const t=bt(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){St(\"navigator.getUserMedia\",\"navigator.mediaDevices.getUserMedia\"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&\"autoGainControl\"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return\"object\"==typeof n&&\"object\"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,\"autoGainControl\",\"mozAutoGainControl\"),e(n.audio,\"noiseSuppression\",\"mozNoiseSuppression\")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,\"mozAutoGainControl\",\"autoGainControl\"),e(n,\"mozNoiseSuppression\",\"noiseSuppression\"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return\"audio\"===this.kind&&\"object\"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,\"autoGainControl\",\"mozAutoGainControl\"),e(n,\"noiseSuppression\",\"mozNoiseSuppression\")),t.apply(this,[n])}}}}function Yt(e){\"object\"==typeof e&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get(){return{receiver:this.receiver}}})}function Qt(e){const t=bt(e);if(\"object\"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]});const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<68&&arguments[0]&&\"\"===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};const r={inboundrtp:\"inbound-rtp\",outboundrtp:\"outbound-rtp\",candidatepair:\"candidate-pair\",localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,o]=arguments;return i.apply(this,[e||null]).then(e=>{if(t.version<53&&!n)try{e.forEach(e=>{e.type=r[e.type]||e.type})}catch(i){if(\"TypeError\"!==i.name)throw i;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(n,o)}}function Xt(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\"getStats\"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Zt(e){if(\"object\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\"getStats\"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),vt(e,\"track\",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function en(e){!e.RTCPeerConnection||\"removeStream\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){St(\"removeStream\",\"removeTrack\"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function tn(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}var nn=Object.freeze({shimOnTrack:Yt,shimPeerConnection:Qt,shimSenderGetStats:Xt,shimReceiverGetStats:Zt,shimRemoveStream:en,shimRTCDataChannel:tn,shimGetUserMedia:$t,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException(\"getDisplayMedia without video constraints is undefined\");return e.name=\"NotFoundError\",e.code=8,Promise.reject(e)}return 1==n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function rn(e){if(\"object\"==typeof e&&e.RTCPeerConnection){if(\"getLocalStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!(\"addStream\"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e){const n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.apply(this,arguments)}}\"removeStream\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function on(e){if(\"object\"==typeof e&&e.RTCPeerConnection&&(\"getRemoteStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!(\"onaddstream\"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,\"onaddstream\",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener(\"addstream\",this._onaddstream),this.removeEventListener(\"track\",this._onaddstreampoly)),this.addEventListener(\"addstream\",this._onaddstream=e),this.addEventListener(\"track\",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event(\"addstream\");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener(\"track\",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event(\"addstream\");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function an(e){if(\"object\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function sn(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(cn(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function cn(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ct(e.video)}):e}function un(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty(\"urls\")&&r.hasOwnProperty(\"url\")?(St(\"RTCIceServer.url\",\"RTCIceServer.urls\"),(r=JSON.parse(JSON.stringify(r))).urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,\"generateCertificate\"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,\"generateCertificate\",{get:()=>t.generateCertificate})}function dn(e){\"object\"==typeof e&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get(){return{receiver:this.receiver}}})}function ln(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>\"audio\"===e.receiver.track.kind);0==e.offerToReceiveAudio&&t?\"sendrecv\"===t.direction?t.setDirection?t.setDirection(\"sendonly\"):t.direction=\"sendonly\":\"recvonly\"===t.direction&&(t.setDirection?t.setDirection(\"inactive\"):t.direction=\"inactive\"):1!=e.offerToReceiveAudio||t||this.addTransceiver(\"audio\"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>\"video\"===e.receiver.track.kind);0==e.offerToReceiveVideo&&n?\"sendrecv\"===n.direction?n.setDirection?n.setDirection(\"sendonly\"):n.direction=\"sendonly\":\"recvonly\"===n.direction&&(n.setDirection?n.setDirection(\"inactive\"):n.direction=\"inactive\"):1!=e.offerToReceiveVideo||n||this.addTransceiver(\"video\")}return t.apply(this,arguments)}}var pn=Object.freeze({shimLocalStreamsAPI:rn,shimRemoteStreamsAPI:on,shimCallbacksAPI:an,shimGetUserMedia:sn,shimConstraints:cn,shimRTCIceServerUrls:un,shimTrackEventTransceiver:dn,shimCreateOfferLegacy:ln});function fn(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&\"foundation\"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if(\"object\"==typeof e&&e.candidate&&0===e.candidate.indexOf(\"a=\")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=jt.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,vt(e,\"icecandidate\",t=>(t.candidate&&Object.defineProperty(t,\"candidate\",{value:new e.RTCIceCandidate(t.candidate),writable:\"false\"}),t))}function hn(e){if(!e.RTCPeerConnection)return;const t=bt(e);\"sctp\"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,\"sctp\",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return 0;const t=jt.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=jt.parseMLine(e);return t&&\"application\"===t.kind&&-1!==t.protocol.indexOf(\"SCTP\")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return\"firefox\"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;\"firefox\"===t.browser&&57===t.version&&(r=65535);const i=jt.matchPrefix(e.sdp,\"a=max-message-size:\");return i.length>0?r=parseInt(i[0].substr(19),10):\"firefox\"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,\"chrome\"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();\"plan-b\"===e&&Object.defineProperty(this,\"sctp\",{get(){return void 0===this._sctp?null:this._sctp},enumerable:1,configurable:1})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,\"maxMessageSize\",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function mn(e){if(!(e.RTCPeerConnection&&\"createDataChannel\"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if(\"open\"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError(\"Message too large (can send a maximum of \"+t.sctp.maxMessageSize+\" bytes)\");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},vt(e,\"datachannel\",e=>(t(e.channel,e.target),e))}function vn(e){if(!e.RTCPeerConnection||\"connectionState\"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,\"connectionState\",{get(){return{completed:\"connected\",checking:\"connecting\"}[this.iceConnectionState]||this.iceConnectionState},enumerable:1,configurable:1}),Object.defineProperty(t,\"onconnectionstatechange\",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener(\"connectionstatechange\",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener(\"connectionstatechange\",this._onconnectionstatechange=e)},enumerable:1,configurable:1}),[\"setLocalDescription\",\"setRemoteDescription\"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event(\"connectionstatechange\",e);t.dispatchEvent(n)}return e},this.addEventListener(\"iceconnectionstatechange\",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function gn(e){if(!e.RTCPeerConnection)return;const t=bt(e);if(\"chrome\"===t.browser&&t.version>=71)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf(\"\\na=extmap-allow-mixed\")&&(e.sdp=e.sdp.split(\"\\n\").filter(e=>\"a=extmap-allow-mixed\"!==e.trim()).join(\"\\n\")),n.apply(this,arguments)}}var _n=Object.freeze({shimRTCIceCandidate:fn,shimMaxMessageSize:hn,shimSendThrowTypeError:mn,shimConnectionState:vn,removeAllowExtmapMixed:gn});const yn=function({window:e}={},t={shimChrome:1,shimFirefox:1,shimEdge:1,shimSafari:1}){const n=yt,r=bt(e),i={browserDetails:r,commonShim:_n,extractVersion:mt,disableLog:gt,disableWarnings:_t};switch(r.browser){case\"chrome\":if(!Mt||!Lt||!t.shimChrome)return n(\"Chrome shim is not included in this adapter release.\"),i;n(\"adapter.js shimming chrome.\"),i.browserShim=Mt,Rt(e),Et(e),Lt(e),It(e),Dt(e),Pt(e),xt(e),At(e),Nt(e),fn(e),vn(e),hn(e),mn(e),gn(e);break;case\"firefox\":if(!nn||!Qt||!t.shimFirefox)return n(\"Firefox shim is not included in this adapter release.\"),i;n(\"adapter.js shimming firefox.\"),i.browserShim=nn,$t(e),Qt(e),Yt(e),en(e),Xt(e),Zt(e),tn(e),fn(e),vn(e),hn(e),mn(e);break;case\"edge\":if(!Kt||!Jt||!t.shimEdge)return n(\"MS edge shim is not included in this adapter release.\"),i;n(\"adapter.js shimming edge.\"),i.browserShim=Kt,zt(e),Wt(e),Jt(e),qt(e),hn(e),mn(e);break;case\"safari\":if(!pn||!t.shimSafari)return n(\"Safari shim is not included in this adapter release.\"),i;n(\"adapter.js shimming safari.\"),i.browserShim=pn,un(e),ln(e),an(e),rn(e),on(e),dn(e),sn(e),fn(e),hn(e),mn(e),gn(e);break;default:n(\"Unsupported browser!\")}return i}({window:window});var Sn=function(e,t){var n=[][e];return!n||!c(function(){n.call(null,t||function(){throw 1},1)})},bn=le.indexOf,kn=[].indexOf,Cn=!!kn&&1/[1].indexOf(1,-0)<0,Tn=Sn(\"indexOf\");Ie({target:\"Array\",proto:1,forced:Cn||Tn},{indexOf:function(e){return Cn?kn.apply(this,arguments)||0:bn(this,e,arguments.length>1?arguments[1]:void 0)}});var wn=Ne(\"species\"),Rn=[].slice,En=Math.max;Ie({target:\"Array\",proto:1,forced:!Ve(\"slice\")},{slice:function(e,t){var n,r,i,o=y(this),a=ae(o.length),s=ue(e,a),c=ue(void 0===t?a:t,a);if(Pe(o)&&(\"function\"!=typeof(n=o.constructor)||n!==Array&&!Pe(n.prototype)?S(n)&&null===(n=n[wn])&&(n=void 0):n=void 0,n===Array||void 0===n))return Rn.call(o,s,c);for(r=new(void 0===n?Array:n)(En(c-s,0)),i=0;s<c;s++,i++)s in o&&Ae(r,i,o[s]);return r.length=i,r}});var In=[].slice,Pn={},xn=function(e,t,n){if(!(t in Pn)){for(var r=[],i=0;i<t;i++)r[i]=\"a[\"+i+\"]\";Pn[t]=Function(\"C,a\",\"return new C(\"+r.join(\",\")+\")\")}return Pn[t](e,n)},An=Function.bind||function(e){var t=ze(this),n=In.call(arguments,1),r=function(){var i=n.concat(In.call(arguments));return this instanceof r?xn(t,i.length,i):t.apply(e,i)};return S(t.prototype)&&(r.prototype=t.prototype),r};Ie({target:\"Function\",proto:1},{bind:An});var On=O.f,Dn=Function.prototype,Ln=Dn.toString,Nn=/^\\s*function ([^ (]*)/;!u||\"name\"in Dn||On(Dn,\"name\",{configurable:1,get:function(){try{return Ln.call(this).match(Nn)[1]}catch(e){return\"\"}}});var Mn=function(){var e=x(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t},jn=RegExp.prototype.exec,Un=String.prototype.replace,Vn=jn,Fn=function(){var e=/a/,t=/b*/g;return jn.call(e,\"a\"),jn.call(t,\"a\"),0!==e.lastIndex||0!==t.lastIndex}(),Gn=void 0!==/()??/.exec(\"\")[1];(Fn||Gn)&&(Vn=function(e){var t,n,r,i,o=this;return Gn&&(n=new RegExp(\"^\"+o.source+\"$(?!\\\\s)\",Mn.call(o))),Fn&&(t=o.lastIndex),r=jn.call(o,e),Fn&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),Gn&&r&&r.length>1&&Un.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var Bn=Vn;Ie({target:\"RegExp\",proto:1,forced:/./.exec!==Bn},{exec:Bn});var Hn=function(){var e=function(){},t=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"];function r(e,t){var n=e[t];if(\"function\"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function o(e,n,r){return function(){(\"undefined\"==typeof console?\"undefined\":Qe(console))!==t&&(i.call(this,n,r),this[e].apply(this,arguments))}}function a(n,i,a){return function(n){return\"debug\"===n&&(n=\"log\"),(\"undefined\"==typeof console?\"undefined\":Qe(console))===t?0:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,\"log\"):e}(n)||o.apply(this,arguments)}function s(e,r,o){var s,c=this,u=\"loglevel\";function d(){var e;if((\"undefined\"==typeof window?\"undefined\":Qe(window))!==t){try{e=window.localStorage[u]}catch(i){}if(Qe(e)===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+\"=\");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(i){}return void 0===c.levels[e]&&(e=void 0),e}}e&&(u+=\":\"+e),c.name=e,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=o||a,c.getLevel=function(){return s},c.setLevel=function(r,o){if(\"string\"==typeof r&&void 0!==c.levels[r.toUpperCase()]&&(r=c.levels[r.toUpperCase()]),!(\"number\"==typeof r&&r>=0&&r<=c.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+r;if(s=r,0!=o&&function(e){var r=(n[e]||\"silent\").toUpperCase();if((\"undefined\"==typeof window?\"undefined\":Qe(window))!==t){try{return void(window.localStorage[u]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(u)+\"=\"+r+\";\"}catch(i){}}}(r),i.call(c,r,e),(\"undefined\"==typeof console?\"undefined\":Qe(console))===t&&r<c.levels.SILENT)return\"No console available for logging\"},c.setDefaultLevel=function(e){d()||c.setLevel(e,0)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var l=d();null==l&&(l=null==r?\"WARN\":r),c.setLevel(l,0)}var c=new s,u={};c.getLogger=function(e){if(\"string\"!=typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=u[e];return t||(t=u[e]=new s(e,c.getLevel(),c.methodFactory)),t};var d=(\"undefined\"==typeof window?\"undefined\":Qe(window))!==t?window.log:void 0;return c.noConflict=function(){return(\"undefined\"==typeof window?\"undefined\":Qe(window))!==t&&window.log===c&&(window.log=d),c},c.getLoggers=function(){return u},c}();Ie({target:\"Array\",stat:1},{isArray:Pe});var zn=[].join,Wn=g!=Object,Jn=Sn(\"join\",\",\");Ie({target:\"Array\",proto:1,forced:Wn||Jn},{join:function(e){return zn.call(y(this),void 0===e?\",\":e)}});var qn=Ke.some;Ie({target:\"Array\",proto:1,forced:Sn(\"some\")},{some:function(e){return qn(this,e,arguments.length>1?arguments[1]:void 0)}});var Kn=Math.max,$n=Math.min;Ie({target:\"Array\",proto:1,forced:!Ve(\"splice\")},{splice:function(e,t){var n,r,i,o,a,s,c=xe(this),u=ae(c.length),d=ue(e,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-d):(n=l-2,r=$n(Kn(ie(t),0),u-d)),u+n-r>9007199254740991)throw TypeError(\"Maximum allowed length exceeded\");for(i=je(c,r),o=0;o<r;o++)(a=d+o)in c&&Ae(i,o,c[a]);if(i.length=r,n<r){for(o=d;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>d;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+d]=arguments[o+2];return c.length=u-r+n,i}});var Yn=\"\".repeat||function(e){var t=String(_(this)),n=\"\",r=ie(e);if(r<0||Infinity==r)throw RangeError(\"Wrong number of repetitions\");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Qn=Math.ceil,Xn=function(e){return function(t,n,r){var i,o,a=String(_(t)),s=a.length,c=void 0===r?\" \":String(r),u=ae(n);return u<=s||\"\"==c?a:(i=u-s,(o=Yn.call(c,Qn(i/c.length))).length>i&&(o=o.slice(0,i)),e?a+o:o+a)}},Zn={start:Xn(0),end:Xn(1)}.start,er=Math.abs,tr=Date.prototype,nr=tr.getTime,rr=tr.toISOString,ir=c(function(){return\"0385-07-25T07:06:39.999Z\"!=rr.call(new Date(-5e13-1))})||!c(function(){rr.call(new Date(NaN))})?function(){if(!isFinite(nr.call(this)))throw RangeError(\"Invalid time value\");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?\"-\":e>9999?\"+\":\"\";return n+Zn(er(e),n?6:4,0)+\"-\"+Zn(this.getUTCMonth()+1,2,0)+\"-\"+Zn(this.getUTCDate(),2,0)+\"T\"+Zn(this.getUTCHours(),2,0)+\":\"+Zn(this.getUTCMinutes(),2,0)+\":\"+Zn(this.getUTCSeconds(),2,0)+\".\"+Zn(t,3,0)+\"Z\"}:rr;Ie({target:\"Date\",proto:1,forced:Date.prototype.toISOString!==ir},{toISOString:ir});var or=Date.prototype,ar=or.toString,sr=or.getTime;new Date(NaN)+\"\"!=\"Invalid Date\"&&X(or,\"toString\",function(){var e=sr.call(this);return e==e?ar.call(this):\"Invalid Date\"});var cr=P.f,ur=c(function(){cr(1)});Ie({target:\"Object\",stat:1,forced:!u||ur,sham:!u},{getOwnPropertyDescriptor:function(e,t){return cr(y(e),t)}});var dr=!c(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),lr=H(\"IE_PROTO\"),pr=Object.prototype,fr=dr?Object.getPrototypeOf:function(e){return e=xe(e),C(e,lr)?e[lr]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?pr:null},hr=c(function(){fr(1)});Ie({target:\"Object\",stat:1,forced:hr,sham:!dr},{getPrototypeOf:function(e){return fr(xe(e))}});var mr=Ne(\"toStringTag\"),vr=\"Arguments\"==m(function(){return arguments}()),gr=function(e){var t,n,r;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),mr))?n:vr?m(t):\"Object\"==(r=m(t))&&\"function\"==typeof t.callee?\"Arguments\":r},_r={};_r[Ne(\"toStringTag\")]=\"z\";var yr=\"[object z]\"!==String(_r)?function(){return\"[object \"+gr(this)+\"]\"}:_r.toString,Sr=Object.prototype;yr!==Sr.toString&&X(Sr,\"toString\",yr,{unsafe:1});var br=RegExp.prototype,kr=br.toString,Cr=c(function(){return\"/a/b\"!=kr.call({source:\"a\",flags:\"b\"})}),Tr=\"toString\"!=kr.name;(Cr||Tr)&&X(RegExp.prototype,\"toString\",function(){var e=x(this),t=String(e.source),n=e.flags;return\"/\"+t+\"/\"+String(void 0===n&&e instanceof RegExp&&!(\"flags\"in br)?Mn.call(e):n)},{unsafe:1});var wr=Ne(\"species\"),Rr=!c(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")}),Er=!c(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n=\"ab\".split(e);return 2!==n.length||\"a\"!==n[0]||\"b\"!==n[1]}),Ir=function(e,t,n,r){var i=Ne(e),o=!c(function(){var t={};return t[i]=function(){return 7},7!=\"\"[e](t)}),a=o&&!c(function(){var t=0,n=/a/;return n.exec=function(){return t=1,null},\"split\"===e&&(n.constructor={},n.constructor[wr]=function(){return n}),n[i](\"\"),!t});if(!o||!a||\"replace\"===e&&!Rr||\"split\"===e&&!Er){var s=/./[i],u=n(i,\"\"[e],function(e,t,n,r,i){return t.exec===Bn?o&&!i?{done:1,value:s.call(t,n,r)}:{done:1,value:e.call(n,t,r)}:{done:0}}),d=u[0],l=u[1];X(String.prototype,e,d),X(RegExp.prototype,i,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)}),r&&D(RegExp.prototype[i],\"sham\",1)}},Pr=function(e){return function(t,n){var r,i,o=String(_(t)),a=ie(n),s=o.length;return a<0||a>=s?e?\"\":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},xr={codeAt:Pr(0),charAt:Pr(1)},Ar=xr.charAt,Or=function(e,t,n){return t+(n?Ar(e,t).length:1)},Dr=function(e,t){var n=e.exec;if(\"function\"==typeof n){var r=n.call(e,t);if(\"object\"!=typeof r)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return r}if(\"RegExp\"!==m(e))throw TypeError(\"RegExp#exec called on incompatible receiver\");return Bn.call(e,t)},Lr=Math.max,Nr=Math.min,Mr=Math.floor,jr=/\\$([$&'`]|\\d\\d?|<[^>]*>)/g,Ur=/\\$([$&'`]|\\d\\d?)/g;Ir(\"replace\",2,function(e,t,n){return[function(n,r){var i=_(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,i){var o=n(t,e,this,i);if(o.done)return o.value;var a=x(e),s=String(this),c=\"function\"==typeof i;c||(i=String(i));var u=a.global;if(u){var d=a.unicode;a.lastIndex=0}for(var l=[];;){var p=Dr(a,s);if(null===p)break;if(l.push(p),!u)break;\"\"===String(p[0])&&(a.lastIndex=Or(s,ae(a.lastIndex),d))}for(var f,h=\"\",m=0,v=0;v<l.length;v++){p=l[v];for(var g=String(p[0]),_=Lr(Nr(ie(p.index),s.length),0),y=[],S=1;S<p.length;S++)y.push(void 0===(f=p[S])?f:String(f));var b=p.groups;if(c){var k=[g].concat(y,_,s);void 0!==b&&k.push(b);var C=String(i.apply(void 0,k))}else C=r(g,s,_,y,b,i);_>=m&&(h+=s.slice(m,_)+C,m=_+g.length)}return h+s.slice(m)}];function r(e,n,r,i,o,a){var s=r+e.length,c=i.length,u=Ur;return void 0!==o&&(o=xe(o),u=jr),t.call(a,u,function(t,a){var u;switch(a.charAt(0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return n.slice(0,r);case\"'\":return n.slice(s);case\"<\":u=o[a.slice(1,-1)];break;default:var d=+a;if(0===d)return t;if(d>c){var l=Mr(d/10);return 0===l?t:l<=c?void 0===i[l-1]?a.charAt(1):i[l-1]+a.charAt(1):t}u=i[d-1]}return void 0===u?\"\":u})}});var Vr=Ne(\"match\"),Fr=function(e){var t;return S(e)&&(void 0!==(t=e[Vr])?!!t:\"RegExp\"==m(e))},Gr=Ne(\"species\"),Br=function(e,t){var n,r=x(e).constructor;return void 0===r||null==(n=x(r)[Gr])?t:ze(n)},Hr=[].push,zr=Math.min,Wr=!c(function(){return!RegExp(4294967295,\"y\")});Ir(\"split\",2,function(e,t,n){var r;return r=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,n){var r=String(_(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!Fr(e))return t.call(r,e,i);for(var o,a,s,c=[],u=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),d=0,l=new RegExp(e.source,u+\"g\");(o=Bn.call(l,r))&&!((a=l.lastIndex)>d&&(c.push(r.slice(d,o.index)),o.length>1&&o.index<r.length&&Hr.apply(c,o.slice(1)),s=o[0].length,d=a,c.length>=i));)l.lastIndex===o.index&&l.lastIndex++;return d===r.length?!s&&l.test(\"\")||c.push(\"\"):c.push(r.slice(d)),c.length>i?c.slice(0,i):c}:\"0\".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=_(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var a=x(e),s=String(this),c=Br(a,RegExp),u=a.unicode,d=(a.ignoreCase?\"i\":\"\")+(a.multiline?\"m\":\"\")+(a.unicode?\"u\":\"\")+(Wr?\"y\":\"g\"),l=new c(Wr?a:\"^(?:\"+a.source+\")\",d),p=void 0===i?4294967295:i>>>0;if(0===p)return[];if(0===s.length)return null===Dr(l,s)?[s]:[];for(var f=0,h=0,m=[];h<s.length;){l.lastIndex=Wr?h:0;var v,g=Dr(l,Wr?s:s.slice(h));if(null===g||(v=zr(ae(l.lastIndex+(Wr?0:h)),s.length))===f)h=Or(s,h,u);else{if(m.push(s.slice(f,h)),m.length===p)return m;for(var _=1;_<=g.length-1;_++)if(m.push(g[_]),m.length===p)return m;h=f=v}}return m.push(s.slice(f)),m}]},!Wr);var Jr=te(\"navigator\",\"userAgent\")||\"\",qr=[].slice,Kr=/MSIE .\\./.test(Jr),$r=function(e){return function(t,n){var r=arguments.length>2,i=r?qr.call(arguments,2):void 0;return e(r?function(){(\"function\"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};Ie({global:1,bind:1,forced:Kr},{setTimeout:$r(s.setTimeout),setInterval:$r(s.setInterval)});var Yr=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Qr=Object.prototype.toString;function Xr(e){return\"[object Array]\"===Qr.call(e)}function Zr(e){return null!==e&&\"object\"==typeof e}function ei(e){return\"[object Function]\"===Qr.call(e)}function ti(e,t){if(null!=e)if(\"object\"!=typeof e&&(e=[e]),Xr(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var ni={isArray:Xr,isArrayBuffer:function(e){return\"[object ArrayBuffer]\"===Qr.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&\"function\"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return\"undefined\"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return\"undefined\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return\"string\"==typeof e},isNumber:function(e){return\"number\"==typeof e},isObject:Zr,isUndefined:function(e){return void 0===e},isDate:function(e){return\"[object Date]\"===Qr.call(e)},isFile:function(e){return\"[object File]\"===Qr.call(e)},isBlob:function(e){return\"[object Blob]\"===Qr.call(e)},isFunction:ei,isStream:function(e){return Zr(e)&&ei(e.pipe)},isURLSearchParams:function(e){return\"undefined\"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return\"undefined\"==typeof navigator||\"ReactNative\"!==navigator.product&&\"NativeScript\"!==navigator.product&&\"NS\"!==navigator.product?\"undefined\"!=typeof window&&\"undefined\"!=typeof document:0},forEach:ti,merge:function e(){var t={};function n(n,r){\"object\"==typeof t[r]&&\"object\"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)ti(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){\"object\"==typeof t[r]&&\"object\"==typeof n?t[r]=e(t[r],n):t[r]=\"object\"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)ti(arguments[r],n);return t},extend:function(e,t,n){return ti(t,function(t,r){e[r]=n&&\"function\"==typeof t?Yr(t,n):t}),e},trim:function(e){return e.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\")}};function ri(e){return encodeURIComponent(e).replace(/%40/gi,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}var ii=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(ni.isURLSearchParams(t))r=t.toString();else{var i=[];ni.forEach(t,function(e,t){null!=e&&(ni.isArray(e)?t+=\"[]\":e=[e],ni.forEach(e,function(e){ni.isDate(e)?e=e.toISOString():ni.isObject(e)&&(e=JSON.stringify(e)),i.push(ri(t)+\"=\"+ri(e))}))}),r=i.join(\"&\")}if(r){var o=e.indexOf(\"#\");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+r}return e};function oi(){this.handlers=[]}oi.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},oi.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},oi.prototype.forEach=function(e){ni.forEach(this.handlers,function(t){null!==t&&e(t)})};var ai=oi,si=function(e,t,n){return ni.forEach(n,function(n){e=n(e,t)}),e},ci=function(e){return!(!e||!e.__CANCEL__)},ui=\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{};function di(){throw new Error(\"setTimeout has not been defined\")}function li(){throw new Error(\"clearTimeout has not been defined\")}var pi=di,fi=li;function hi(e){if(pi===setTimeout)return setTimeout(e,0);if((pi===di||!pi)&&setTimeout)return pi=setTimeout,setTimeout(e,0);try{return pi(e,0)}catch(t){try{return pi.call(null,e,0)}catch(t){return pi.call(this,e,0)}}}\"function\"==typeof ui.setTimeout&&(pi=setTimeout),\"function\"==typeof ui.clearTimeout&&(fi=clearTimeout);var mi,vi=[],gi=0,_i=-1;function yi(){gi&&mi&&(gi=0,mi.length?vi=mi.concat(vi):_i=-1,vi.length&&Si())}function Si(){if(!gi){var e=hi(yi);gi=1;for(var t=vi.length;t;){for(mi=vi,vi=[];++_i<t;)mi&&mi[_i].run();_i=-1,t=vi.length}mi=null,gi=0,function(e){if(fi===clearTimeout)return clearTimeout(e);if((fi===li||!fi)&&clearTimeout)return fi=clearTimeout,clearTimeout(e);try{fi(e)}catch(t){try{return fi.call(null,e)}catch(t){return fi.call(this,e)}}}(e)}}function bi(e,t){this.fun=e,this.array=t}bi.prototype.run=function(){this.fun.apply(null,this.array)};function ki(){}var Ci=ki,Ti=ki,wi=ki,Ri=ki,Ei=ki,Ii=ki,Pi=ki;var xi=ui.performance||{},Ai=xi.now||xi.mozNow||xi.msNow||xi.oNow||xi.webkitNow||function(){return(new Date).getTime()};var Oi=new Date;var Di={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];vi.push(new bi(e,t)),1!==vi.length||gi||hi(Si)},title:\"browser\",browser:1,env:{},argv:[],version:\"\",versions:{},on:Ci,addListener:Ti,once:wi,off:Ri,removeListener:Ei,removeAllListeners:Ii,emit:Pi,binding:function(e){throw new Error(\"process.binding is not supported\")},cwd:function(){return\"/\"},chdir:function(e){throw new Error(\"process.chdir is not supported\")},umask:function(){return 0},hrtime:function(e){var t=.001*Ai.call(xi),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:\"browser\",release:{},config:{},uptime:function(){return(new Date-Oi)/1e3}},Li=function(e,t){ni.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})},Ni=function(e,t,n,r,i){return function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=1,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,r,i)},Mi=[\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"],ji=ni.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement(\"a\");function r(e){var r=e;return t&&(n.setAttribute(\"href\",r),r=n.href),n.setAttribute(\"href\",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,\"\"):\"\",host:n.host,search:n.search?n.search.replace(/^\\?/,\"\"):\"\",hash:n.hash?n.hash.replace(/^#/,\"\"):\"\",hostname:n.hostname,port:n.port,pathname:\"/\"===n.pathname.charAt(0)?n.pathname:\"/\"+n.pathname}}return e=r(window.location.href),function(t){var n=ni.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return 1},Ui=ni.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+\"=\"+encodeURIComponent(t)),ni.isNumber(n)&&a.push(\"expires=\"+new Date(n).toGMTString()),ni.isString(r)&&a.push(\"path=\"+r),ni.isString(i)&&a.push(\"domain=\"+i),1==o&&a.push(\"secure\"),document.cookie=a.join(\"; \")},read:function(e){var t=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+e+\")=([^;]*)\"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,\"\",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Vi=function(e){return new Promise(function(t,n){var r=e.data,i=e.headers;ni.isFormData(r)&&delete i[\"Content-Type\"];var o=new XMLHttpRequest;if(e.auth){var a=e.auth.username||\"\",s=e.auth.password||\"\";i.Authorization=\"Basic \"+btoa(a+\":\"+s)}if(o.open(e.method.toUpperCase(),ii(e.url,e.params,e.paramsSerializer),1),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf(\"file:\"))){var r=\"getAllResponseHeaders\"in o?function(e){var t,n,r,i={};return e?(ni.forEach(e.split(\"\\n\"),function(e){if(r=e.indexOf(\":\"),t=ni.trim(e.substr(0,r)).toLowerCase(),n=ni.trim(e.substr(r+1)),t){if(i[t]&&Mi.indexOf(t)>=0)return;i[t]=\"set-cookie\"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+\", \"+n:n}}),i):i}(o.getAllResponseHeaders()):null,i={data:e.responseType&&\"text\"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};!function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(Ni(\"Request failed with status code \"+n.status,n.config,null,n.request,n))}(t,n,i),o=null}},o.onabort=function(){o&&(n(Ni(\"Request aborted\",e,\"ECONNABORTED\",o)),o=null)},o.onerror=function(){n(Ni(\"Network Error\",e,null,o)),o=null},o.ontimeout=function(){n(Ni(\"timeout of \"+e.timeout+\"ms exceeded\",e,\"ECONNABORTED\",o)),o=null},ni.isStandardBrowserEnv()){var c=Ui,u=(e.withCredentials||ji(e.url))&&e.xsrfCookieName?c.read(e.xsrfCookieName):void 0;u&&(i[e.xsrfHeaderName]=u)}if(\"setRequestHeader\"in o&&ni.forEach(i,function(e,t){void 0===r&&\"content-type\"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)}),e.withCredentials&&(o.withCredentials=1),e.responseType)try{o.responseType=e.responseType}catch(d){if(\"json\"!==e.responseType)throw d}\"function\"==typeof e.onDownloadProgress&&o.addEventListener(\"progress\",e.onDownloadProgress),\"function\"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener(\"progress\",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){o&&(o.abort(),n(e),o=null)}),void 0===r&&(r=null),o.send(r)})},Fi={\"Content-Type\":\"application/x-www-form-urlencoded\"};function Gi(e,t){!ni.isUndefined(e)&&ni.isUndefined(e[\"Content-Type\"])&&(e[\"Content-Type\"]=t)}var Bi={adapter:function(){var e;return void 0!==Di&&\"[object process]\"===Object.prototype.toString.call(Di)?e=Vi:\"undefined\"!=typeof XMLHttpRequest&&(e=Vi),e}(),transformRequest:[function(e,t){return Li(t,\"Accept\"),Li(t,\"Content-Type\"),ni.isFormData(e)||ni.isArrayBuffer(e)||ni.isBuffer(e)||ni.isStream(e)||ni.isFile(e)||ni.isBlob(e)?e:ni.isArrayBufferView(e)?e.buffer:ni.isURLSearchParams(e)?(Gi(t,\"application/x-www-form-urlencoded;charset=utf-8\"),e.toString()):ni.isObject(e)?(Gi(t,\"application/json;charset=utf-8\"),JSON.stringify(e)):e}],transformResponse:[function(e){if(\"string\"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:\"application/json, text/plain, */*\"}}};ni.forEach([\"delete\",\"get\",\"head\"],function(e){Bi.headers[e]={}}),ni.forEach([\"post\",\"put\",\"patch\"],function(e){Bi.headers[e]=ni.merge(Fi)});var Hi=Bi;function zi(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Wi=function(e){var t,n;return zi(e),e.baseURL&&!function(e){return/^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(e)}(e.url)&&(e.url=(t=e.baseURL,(n=e.url)?t.replace(/\\/+$/,\"\")+\"/\"+n.replace(/^\\/+/,\"\"):t)),e.headers=e.headers||{},e.data=si(e.data,e.headers,e.transformRequest),e.headers=ni.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),ni.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],function(t){delete e.headers[t]}),(e.adapter||Hi.adapter)(e).then(function(t){return zi(e),t.data=si(t.data,t.headers,e.transformResponse),t},function(t){return ci(t)||(zi(e),t&&t.response&&(t.response.data=si(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},Ji=function(e,t){t=t||{};var n={};return ni.forEach([\"url\",\"method\",\"params\",\"data\"],function(e){void 0!==t[e]&&(n[e]=t[e])}),ni.forEach([\"headers\",\"auth\",\"proxy\"],function(r){ni.isObject(t[r])?n[r]=ni.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:ni.isObject(e[r])?n[r]=ni.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])}),ni.forEach([\"baseURL\",\"transformRequest\",\"transformResponse\",\"paramsSerializer\",\"timeout\",\"withCredentials\",\"adapter\",\"responseType\",\"xsrfCookieName\",\"xsrfHeaderName\",\"onUploadProgress\",\"onDownloadProgress\",\"maxContentLength\",\"validateStatus\",\"maxRedirects\",\"httpAgent\",\"httpsAgent\",\"cancelToken\",\"socketPath\"],function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}),n};function qi(e){this.defaults=e,this.interceptors={request:new ai,response:new ai}}qi.prototype.request=function(e){\"string\"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Ji(this.defaults,e)).method=e.method?e.method.toLowerCase():\"get\";var t=[Wi,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},qi.prototype.getUri=function(e){return e=Ji(this.defaults,e),ii(e.url,e.params,e.paramsSerializer).replace(/^\\?/,\"\")},ni.forEach([\"delete\",\"get\",\"head\",\"options\"],function(e){qi.prototype[e]=function(t,n){return this.request(ni.merge(n||{},{method:e,url:t}))}}),ni.forEach([\"post\",\"put\",\"patch\"],function(e){qi.prototype[e]=function(t,n,r){return this.request(ni.merge(r||{},{method:e,url:t,data:n}))}});var Ki=qi;function $i(e){this.message=e}$i.prototype.toString=function(){return\"Cancel\"+(this.message?\": \"+this.message:\"\")},$i.prototype.__CANCEL__=1;var Yi=$i;function Qi(e){if(\"function\"!=typeof e)throw new TypeError(\"executor must be a function.\");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new Yi(e),t(n.reason))})}Qi.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Qi.source=function(){var e;return{token:new Qi(function(t){e=t}),cancel:e}};var Xi=Qi;function Zi(e){var t=new Ki(e),n=Yr(Ki.prototype.request,t);return ni.extend(n,Ki.prototype,t),ni.extend(n,t),n}var eo=Zi(Hi);eo.Axios=Ki,eo.create=function(e){return Zi(Ji(eo.defaults,e))},eo.Cancel=Yi,eo.CancelToken=Xi,eo.isCancel=ci,eo.all=function(e){return Promise.all(e)},eo.spread=function(e){return function(t){return e.apply(null,t)}};var to=eo,no=eo;to.default=no;var ro,io=to;function oo(e){try{return JSON.stringify(e)}catch(n){if(!ro)try{var t={};t.a=t,JSON.stringify(t)}catch(r){ro=r.message}if(n.message===ro)return\"[Circular]\";throw n}}function ao(e){var t=\"\",n=0;return e.length>1&&\"string\"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,r,i,o){if(!r){var a=e[n+=1],s=\"\";switch(o){case\"s\":s+=a;break;case\"d\":s+=+a;break;case\"j\":s=oo(a);break;case\"o\":var c=oo(a);\"{\"!==c[0]&&\"[\"!==c[0]&&(c=\"<\".concat(c,\">\")),s=function(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,\"constructor\");if(void 0!==t&&\"function\"==typeof t.value&&\"\"!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return\"\"}(a)+c}return s}return t})).replace(/%{2,2}/g,\"%\"),n+=1),e.length>n&&(t&&(t+=\" \"),t+=e.slice(n).join(\" \")),t}var so=Object.prototype.hasOwnProperty;function co(){try{throw new Error}catch(e){return e.stack}}function uo(e){var t=this,n=[],r=[];this.length=function(){return n.length},this.sent=function(){return r.length},this.push=function(t){n.push(t),n.length>e&&n.shift()},this.send=function(){return r.length||(r=n,n=[]),r},this.confirm=function(){r=[],t.content=\"\"},this.fail=function(){var i=1+n.length+r.length-e;i>0&&(r.splice(0,i),n=r.concat(n),t.confirm())}}var lo,po,fo,ho=!!co();function mo(e){return\"[\".concat(e.timestamp,\"] <\").concat(e.level.label.toUpperCase(),\">\").concat(e.logger?\" (\".concat(e.logger,\")\"):\"\",\": \").concat(e.message).concat(e.stacktrace?\"\\n\".concat(e.stacktrace):\"\")}var vo={url:\"https://yun.tim.qq.com/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_log\",interval:1e3,level:\"trace\",capacity:0,stacktrace:{levels:[\"trace\",\"warn\",\"error\"],depth:3,excess:0},timestamp:function(){return(new Date).toISOString()},format:mo},go=-1,_o=0,yo=\"\",So=\"\",bo=\"\",ko=function(e){_o||(yo=\"\".concat(e.sdkAppId),So=\"\".concat(e.userId),bo=\"\".concat(e.version),_o=1)},Co=function(e,t){if(!e||!e.getLogger)throw new TypeError(\"Argument is not a root loglevel object\");if(lo)throw new Error(\"You can assign a plugin only one time\");lo=e;var n=function e(){for(var t={},n=0;n<arguments.length;n+=1){var r=Object(arguments[n]);for(var i in r)so.call(r,i)&&(t[i]=\"object\"!==Qe(r[i])||Array.isArray(r[i])?r[i]:e(t[i],r[i]))}return t}(vo,t);n.capacity=n.capacity||500;var r,i=n.interval;go=setInterval(function(){if(!_o)return;if(!o.sent()){if(!o.length())return;var e=o.send();o.content=r?'{\"logs\":['.concat(e.join(\",\"),\"]}\"):e.join(\"\\n\"),function(e){if(!_o)return;var t=JSON.stringify({timestamp:vo.timestamp(),sdkAppId:yo,userId:So,version:bo,log:e});io.post(n.url,t).then(function(e){o.confirm()}).catch(function(e){console.log(e),o.fail()})}(o.content)}},i);var o=new uo(n.capacity);return po=e.methodFactory,fo=function(e,t,i){var a=po(e,t,i),s=ho&&n.stacktrace.levels.some(function(t){return t===e}),c=lo.levels[e.toUpperCase()],u=c>=lo.levels[n.level.toUpperCase()];return function(){for(var t=arguments.length,d=new Array(t),l=0;l<t;l++)d[l]=arguments[l];var p=ao(d);if(u){var f=(new Date).toLocaleString(),h=s?co():\"\";if(h){var m=h.split(\"\\n\");m.splice(0,n.stacktrace.excess+3);var v=n.stacktrace.depth;if(v&&m.length!==v+1){var g=m.splice(0,v);h=g.join(\"\\n\"),m.length&&(h+=\"\\n    and \".concat(m.length,\" more\"))}else h=m.join(\"\\n\")}var _=n.format({message:p,level:{label:e,value:c},logger:i||\"\",timestamp:f,stacktrace:h});void 0===r&&(r=\"string\"!=typeof _);var y=\"\";if(r)try{y+=JSON.stringify(_)}catch(k){return a.apply(void 0,d),void lo.getLogger(\"logger\").error(k)}else y+=_;o.push(y)}var S=(new Date).toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/,\"$1\"),b=\"[\"+S+\"] <\"+e.toUpperCase()+\"> \"+p;a.apply(void 0,[b])}},e.methodFactory=fo,e.setLevel(e.getLevel()),e},To=function(){if(!lo)throw new Error(\"You can't disable a not appled plugin\");if(fo!==lo.methodFactory)throw new Error(\"You can't disable a plugin after appling another plugin\");lo.methodFactory=po,lo.setLevel(lo.getLevel()),lo=void 0,clearInterval(go)},wo=0;Hn.setConfig=function(e){ko(e)},Hn.setLogLevel=function(e){Hn.info(\"TRTC LogLevel was set to: \"+e),Hn.setLevel(e)},Hn.enableUploadLog=function(){wo||(Hn.info(\"enable upload log\"),Co(Hn),wo=1)},Hn.disableUploadLog=function(){wo&&(Hn.warn(\"disable upload log! Without log we are difficult to help you triage the issue you might run into!\"),To(),wo=0)},Hn.enableUploadLog(),Hn.setLevel(\"INFO\");var Ro=Object.keys||function(e){return fe(e,he)},Eo=u?Object.defineProperties:function(e,t){x(e);for(var n,r=Ro(t),i=r.length,o=0;i>o;)O.f(e,n=r[o++],t[n]);return e},Io=te(\"document\",\"documentElement\"),Po=H(\"IE_PROTO\"),xo=function(){},Ao=function(){var e,t=R(\"iframe\"),n=he.length;for(t.style.display=\"none\",Io.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),Ao=e.F;n--;)delete Ao.prototype[he[n]];return Ao()},Oo=Object.create||function(e,t){var n;return null!==e?(xo.prototype=x(e),n=new xo,xo.prototype=null,n[Po]=e):n=Ao(),void 0===t?n:Eo(n,t)};z[Po]=1;var Do=ve.f,Lo={}.toString,No=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Mo={f:function(e){return No&&\"[object Window]\"==Lo.call(e)?function(e){try{return Do(e)}catch(t){return No.slice()}}(e):Do(y(e))}},jo={f:Ne},Uo=O.f,Vo=function(e){var t=Z.Symbol||(Z.Symbol={});C(t,e)||Uo(t,e,{value:jo.f(e)})},Fo=O.f,Go=Ne(\"toStringTag\"),Bo=function(e,t,n){e&&!C(e=n?e:e.prototype,Go)&&Fo(e,Go,{configurable:1,value:t})},Ho=Ke.forEach,zo=H(\"hidden\"),Wo=Ne(\"toPrimitive\"),Jo=Q.set,qo=Q.getterFor(\"Symbol\"),Ko=Object.prototype,$o=s.Symbol,Yo=s.JSON,Qo=Yo&&Yo.stringify,Xo=P.f,Zo=O.f,ea=Mo.f,ta=p.f,na=N(\"symbols\"),ra=N(\"op-symbols\"),ia=N(\"string-to-symbol-registry\"),oa=N(\"symbol-to-string-registry\"),aa=N(\"wks\"),sa=s.QObject,ca=!sa||!sa.prototype||!sa.prototype.findChild,ua=u&&c(function(){return 7!=Oo(Zo({},\"a\",{get:function(){return Zo(this,\"a\",{value:7}).a}})).a})?function(e,t,n){var r=Xo(Ko,t);r&&delete Ko[t],Zo(e,t,n),r&&e!==Ko&&Zo(Ko,t,r)}:Zo,da=function(e,t){var n=na[e]=Oo($o.prototype);return Jo(n,{type:\"Symbol\",tag:e,description:t}),u||(n.description=t),n},la=Oe&&\"symbol\"==typeof $o.iterator?function(e){return\"symbol\"==typeof e}:function(e){return Object(e)instanceof $o},pa=function(e,t,n){e===Ko&&pa(ra,t,n),x(e);var r=b(t,1);return x(n),C(na,r)?(n.enumerable?(C(e,zo)&&e[zo][r]&&(e[zo][r]=0),n=Oo(n,{enumerable:f(0,0)})):(C(e,zo)||Zo(e,zo,f(1,{})),e[zo][r]=1),ua(e,r,n)):Zo(e,r,n)},fa=function(e,t){x(e);var n=y(t),r=Ro(n).concat(ga(n));return Ho(r,function(t){u&&!ha.call(n,t)||pa(e,t,n[t])}),e},ha=function(e){var t=b(e,1),n=ta.call(this,t);return this===Ko&&C(na,t)&&!C(ra,t)?0:n||!C(this,t)||!C(na,t)||C(this,zo)&&this[zo][t]?n:1},ma=function(e,t){var n=y(e),r=b(t,1);if(n!==Ko||!C(na,r)||C(ra,r)){var i=Xo(n,r);return!i||!C(na,r)||C(n,zo)&&n[zo][r]||(i.enumerable=1),i}},va=function(e){var t=ea(y(e)),n=[];return Ho(t,function(e){C(na,e)||C(z,e)||n.push(e)}),n},ga=function(e){var t=e===Ko,n=ea(t?ra:y(e)),r=[];return Ho(n,function(e){!C(na,e)||t&&!C(Ko,e)||r.push(na[e])}),r};Oe||(X(($o=function(){if(this instanceof $o)throw TypeError(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=G(e),n=function(e){this===Ko&&n.call(ra,e),C(this,zo)&&C(this[zo],t)&&(this[zo][t]=0),ua(this,t,f(1,e))};return u&&ca&&ua(Ko,t,{configurable:1,set:n}),da(t,e)}).prototype,\"toString\",function(){return qo(this).tag}),p.f=ha,O.f=pa,P.f=ma,ve.f=Mo.f=va,ge.f=ga,u&&(Zo($o.prototype,\"description\",{configurable:1,get:function(){return qo(this).description}}),X(Ko,\"propertyIsEnumerable\",ha,{unsafe:1})),jo.f=function(e){return da(Ne(e),e)}),Ie({global:1,wrap:1,forced:!Oe,sham:!Oe},{Symbol:$o}),Ho(Ro(aa),function(e){Vo(e)}),Ie({target:\"Symbol\",stat:1,forced:!Oe},{for:function(e){var t=String(e);if(C(ia,t))return ia[t];var n=$o(t);return ia[t]=n,oa[n]=t,n},keyFor:function(e){if(!la(e))throw TypeError(e+\" is not a symbol\");if(C(oa,e))return oa[e]},useSetter:function(){ca=1},useSimple:function(){ca=0}}),Ie({target:\"Object\",stat:1,forced:!Oe,sham:!u},{create:function(e,t){return void 0===t?Oo(e):fa(Oo(e),t)},defineProperty:pa,defineProperties:fa,getOwnPropertyDescriptor:ma}),Ie({target:\"Object\",stat:1,forced:!Oe},{getOwnPropertyNames:va,getOwnPropertySymbols:ga}),Ie({target:\"Object\",stat:1,forced:c(function(){ge.f(1)})},{getOwnPropertySymbols:function(e){return ge.f(xe(e))}}),Yo&&Ie({target:\"JSON\",stat:1,forced:!Oe||c(function(){var e=$o();return\"[null]\"!=Qo([e])||\"{}\"!=Qo({a:e})||\"{}\"!=Qo(Object(e))})},{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(S(t)||void 0!==e)&&!la(e))return Pe(t)||(t=function(e,t){if(\"function\"==typeof n&&(t=n.call(this,e,t)),!la(t))return t}),r[1]=t,Qo.apply(Yo,r)}}),$o.prototype[Wo]||D($o.prototype,Wo,$o.prototype.valueOf),Bo($o,\"Symbol\"),z[zo]=1;var _a=O.f,ya=s.Symbol;if(u&&\"function\"==typeof ya&&(!(\"description\"in ya.prototype)||void 0!==ya().description)){var Sa={},ba=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof ba?new ya(e):void 0===e?ya():ya(e);return\"\"===e&&(Sa[t]=1),t};ye(ba,ya);var ka=ba.prototype=ya.prototype;ka.constructor=ba;var Ca=ka.toString,Ta=\"Symbol(test)\"==String(ya(\"test\")),wa=/^Symbol\\((.*)\\)[^)]+$/;_a(ka,\"description\",{configurable:1,get:function(){var e=S(this)?this.valueOf():this,t=Ca.call(e);if(C(Sa,e))return\"\";var n=Ta?t.slice(7,-1):t.replace(wa,\"$1\");return\"\"===n?void 0:n}}),Ie({global:1,forced:1},{Symbol:ba})}Vo(\"iterator\");var Ra=Ke.forEach,Ea=Sn(\"forEach\")?function(e){return Ra(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach;Ie({target:\"Array\",proto:1,forced:[].forEach!=Ea},{forEach:Ea});var Ia=Ne(\"unscopables\"),Pa=Array.prototype;null==Pa[Ia]&&D(Pa,Ia,Oo(null));var xa,Aa,Oa,Da=function(e){Pa[Ia][e]=1},La={},Na=Ne(\"iterator\"),Ma=0;[].keys&&(\"next\"in(Oa=[].keys())?(Aa=fr(fr(Oa)))!==Object.prototype&&(xa=Aa):Ma=1),null==xa&&(xa={}),C(xa,Na)||D(xa,Na,function(){return this});var ja={IteratorPrototype:xa,BUGGY_SAFARI_ITERATORS:Ma},Ua=ja.IteratorPrototype,Va=function(){return this},Fa=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=0,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return x(n),function(e){if(!S(e)&&null!==e)throw TypeError(\"Can't set \"+String(e)+\" as a prototype\")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Ga=ja.IteratorPrototype,Ba=ja.BUGGY_SAFARI_ITERATORS,Ha=Ne(\"iterator\"),za=function(){return this},Wa=function(e,t,n,r,i,o,a){!function(e,t,n){var r=t+\" Iterator\";e.prototype=Oo(Ua,{next:f(1,n)}),Bo(e,r,0),La[r]=Va}(n,t,r);var s,c,u,d=function(e){if(e===i&&v)return v;if(!Ba&&e in h)return h[e];switch(e){case\"keys\":case\"values\":case\"entries\":return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+\" Iterator\",p=0,h=e.prototype,m=h[Ha]||h[\"@@iterator\"]||i&&h[i],v=!Ba&&m||d(i),g=\"Array\"==t&&h.entries||m;if(g&&(s=fr(g.call(new e)),Ga!==Object.prototype&&s.next&&(fr(s)!==Ga&&(Fa?Fa(s,Ga):\"function\"!=typeof s[Ha]&&D(s,Ha,za)),Bo(s,l,1))),\"values\"==i&&m&&\"values\"!==m.name&&(p=1,v=function(){return m.call(this)}),h[Ha]!==v&&D(h,Ha,v),La[t]=v,i)if(c={values:d(\"values\"),keys:o?v:d(\"keys\"),entries:d(\"entries\")},a)for(u in c)!Ba&&!p&&u in h||X(h,u,c[u]);else Ie({target:t,proto:1,forced:Ba||p},c);return c},Ja=Q.set,qa=Q.getterFor(\"Array Iterator\"),Ka=Wa(Array,\"Array\",function(e,t){Ja(this,{type:\"Array Iterator\",target:y(e),index:0,kind:t})},function(){var e=qa(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:1}):\"keys\"==n?{value:r,done:0}:\"values\"==n?{value:t[r],done:0}:{value:[r,t[r]],done:0}},\"values\");La.Arguments=La.Array,Da(\"keys\"),Da(\"values\"),Da(\"entries\");var $a=!c(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ya=t(function(e){var t=O.f,n=G(\"meta\"),r=0,i=Object.isExtensible||function(){return 1},o=function(e){t(e,n,{value:{objectID:\"O\"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:0,fastKey:function(e,t){if(!S(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!C(e,n)){if(!i(e))return\"F\";if(!t)return\"E\";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!C(e,n)){if(!i(e))return 1;if(!t)return 0;o(e)}return e[n].weakData},onFreeze:function(e){return $a&&a.REQUIRED&&i(e)&&!C(e,n)&&o(e),e}};z[n]=1}),Qa=(Ya.REQUIRED,Ya.fastKey,Ya.getWeakData,Ya.onFreeze,Ne(\"iterator\")),Xa=Array.prototype,Za=Ne(\"iterator\"),es=function(e,t,n,r){try{return r?t(x(n)[0],n[1]):t(n)}catch(o){var i=e.return;throw void 0!==i&&x(i.call(e)),o}},ts=t(function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,i,o){var a,s,c,u,d,l,p,f=We(n,r,i?2:1);if(o)a=e;else{if(\"function\"!=typeof(s=function(e){if(null!=e)return e[Za]||e[\"@@iterator\"]||La[gr(e)]}(e)))throw TypeError(\"Target is not iterable\");if(void 0!==(p=s)&&(La.Array===p||Xa[Qa]===p)){for(c=0,u=ae(e.length);u>c;c++)if((d=i?f(x(l=e[c])[0],l[1]):f(e[c]))&&d instanceof t)return d;return new t(0)}a=s.call(e)}for(;!(l=a.next()).done;)if((d=es(a,f,l.value,i))&&d instanceof t)return d;return new t(0)}).stop=function(e){return new t(1,e)}}),ns=function(e,t,n){if(!(e instanceof t))throw TypeError(\"Incorrect \"+(n?n+\" \":\"\")+\"invocation\");return e},rs=Ne(\"iterator\"),is=0;try{var os=0,as={next:function(){return{done:!!os++}},return:function(){is=1}};as[rs]=function(){return this},Array.from(as,function(){throw 2})}catch(Np){}var ss=function(e,t){if(!t&&!is)return 0;var n=0;try{var r={};r[rs]=function(){return{next:function(){return{done:n=1}}}},e(r)}catch(Np){}return n},cs=function(e,t,n){var r,i;return Fa&&\"function\"==typeof(r=t.constructor)&&r!==n&&S(i=r.prototype)&&i!==n.prototype&&Fa(e,i),e},us=function(e,t,n){for(var r in t)X(e,r,t[r],n);return e},ds=Ne(\"species\"),ls=function(e){var t=te(e),n=O.f;u&&t&&!t[ds]&&n(t,ds,{configurable:1,get:function(){return this}})},ps=O.f,fs=Ya.fastKey,hs=Q.set,ms=Q.getterFor,vs=(function(e,t,n,r,i){var o=s[e],a=o&&o.prototype,u=o,d=r?\"set\":\"add\",l={},p=function(e){var t=a[e];X(a,e,\"add\"==e?function(e){return t.call(this,0===e?0:e),this}:\"delete\"==e?function(e){return i&&!S(e)?0:t.call(this,0===e?0:e)}:\"get\"==e?function(e){return i&&!S(e)?void 0:t.call(this,0===e?0:e)}:\"has\"==e?function(e){return i&&!S(e)?0:t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Re(e,\"function\"!=typeof o||!(i||a.forEach&&!c(function(){(new o).entries().next()}))))u=n.getConstructor(t,e,r,d),Ya.REQUIRED=1;else if(Re(e,1)){var f=new u,h=f[d](i?{}:-0,1)!=f,m=c(function(){f.has(1)}),v=ss(function(e){new o(e)}),g=!i&&c(function(){for(var e=new o,t=5;t--;)e[d](t,t);return!e.has(-0)});v||((u=t(function(t,n){ns(t,u,e);var i=cs(new o,t,u);return null!=n&&ts(n,i[d],i,r),i})).prototype=a,a.constructor=u),(m||g)&&(p(\"delete\"),p(\"has\"),r&&p(\"get\")),(g||h)&&p(d),i&&a.clear&&delete a.clear}l[e]=u,Ie({global:1,forced:u!=o},l),Bo(u,e),i||n.setStrong(u,e,r)}(\"Map\",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(e,t,n,r){var i=e(function(e,o){ns(e,i,t),hs(e,{type:t,index:Oo(null),first:void 0,last:void 0,size:0}),u||(e.size=0),null!=o&&ts(o,e[r],e,n)}),o=ms(t),a=function(e,t,n){var r,i,a=o(e),c=s(e,t);return c?c.value=n:(a.last=c={index:i=fs(t,1),key:t,value:n,previous:r=a.last,next:void 0,removed:0},a.first||(a.first=c),r&&(r.next=c),u?a.size++:e.size++,\"F\"!==i&&(a.index[i]=c)),e},s=function(e,t){var n,r=o(e),i=fs(t);if(\"F\"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return us(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=1,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,u?e.size=0:this.size=0},delete:function(e){var t=o(this),n=s(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=1,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),u?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=o(this),r=We(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),us(i.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),u&&ps(i.prototype,\"size\",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+\" Iterator\",i=ms(t),o=ms(r);Wa(e,t,function(e,t){hs(this,{type:r,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?\"keys\"==t?{value:n.key,done:0}:\"values\"==t?{value:n.value,done:0}:{value:[n.key,n.value],done:0}:(e.target=void 0,{value:void 0,done:1})},n?\"entries\":\"values\",!n,1),ls(t)}},1),\"\\t\\n\\v\\f\\r                　\\u2028\\u2029\\ufeff\"),gs=\"[\"+vs+\"]\",_s=RegExp(\"^\"+gs+gs+\"*\"),ys=RegExp(gs+gs+\"*$\"),Ss=function(e){return function(t){var n=String(_(t));return 1&e&&(n=n.replace(_s,\"\")),2&e&&(n=n.replace(ys,\"\")),n}},bs={start:Ss(1),end:Ss(2),trim:Ss(3)},ks=ve.f,Cs=P.f,Ts=O.f,ws=bs.trim,Rs=s.Number,Es=Rs.prototype,Is=\"Number\"==m(Oo(Es)),Ps=function(e){var t,n,r,i,o,a,s,c,u=b(e,0);if(\"string\"==typeof u&&u.length>2)if(43===(t=(u=ws(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(Re(\"Number\",!Rs(\" 0o1\")||!Rs(\"0b1\")||Rs(\"+0x1\"))){for(var xs,As=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof As&&(Is?c(function(){Es.valueOf.call(n)}):\"Number\"!=m(n))?cs(new Rs(Ps(t)),n,As):Ps(t)},Os=u?ks(Rs):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),Ds=0;Os.length>Ds;Ds++)C(Rs,xs=Os[Ds])&&!C(As,xs)&&Ts(As,xs,Cs(Rs,xs));As.prototype=Es,Es.constructor=As,X(s,\"Number\",As)}var Ls=Math.floor;Ie({target:\"Number\",stat:1},{isInteger:function(e){return!S(e)&&isFinite(e)&&Ls(e)===e}});var Ns=bs.trim,Ms=s.parseInt,js=/^[+-]?0[Xx]/,Us=8!==Ms(vs+\"08\")||22!==Ms(vs+\"0x16\")?function(e,t){var n=Ns(String(e));return Ms(n,t>>>0||(js.test(n)?16:10))}:Ms;Ie({global:1,forced:parseInt!=Us},{parseInt:Us});var Vs,Fs,Gs,Bs=s.location,Hs=s.setImmediate,zs=s.clearImmediate,Ws=s.process,Js=s.MessageChannel,qs=s.Dispatch,Ks=0,$s={},Ys=function(e){if($s.hasOwnProperty(e)){var t=$s[e];delete $s[e],t()}},Qs=function(e){return function(){Ys(e)}},Xs=function(e){Ys(e.data)},Zs=function(e){s.postMessage(e+\"\",Bs.protocol+\"//\"+Bs.host)};Hs&&zs||(Hs=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return $s[++Ks]=function(){(\"function\"==typeof e?e:Function(e)).apply(void 0,t)},Vs(Ks),Ks},zs=function(e){delete $s[e]},\"process\"==m(Ws)?Vs=function(e){Ws.nextTick(Qs(e))}:qs&&qs.now?Vs=function(e){qs.now(Qs(e))}:Js?(Gs=(Fs=new Js).port2,Fs.port1.onmessage=Xs,Vs=We(Gs.postMessage,Gs,1)):!s.addEventListener||\"function\"!=typeof postMessage||s.importScripts||c(Zs)?Vs=\"onreadystatechange\"in R(\"script\")?function(e){Io.appendChild(R(\"script\")).onreadystatechange=function(){Io.removeChild(this),Ys(e)}}:function(e){setTimeout(Qs(e),0)}:(Vs=Zs,s.addEventListener(\"message\",Xs,0)));var ec,tc,nc,rc,ic,oc,ac,sc={set:Hs,clear:zs},cc=P.f,uc=sc.set,dc=s.MutationObserver||s.WebKitMutationObserver,lc=s.process,pc=s.Promise,fc=\"process\"==m(lc),hc=cc(s,\"queueMicrotask\"),mc=hc&&hc.value;mc||(ec=function(){var e,t;for(fc&&(e=lc.domain)&&e.exit();tc;){t=tc.fn,tc=tc.next;try{t()}catch(Np){throw tc?rc():nc=void 0,Np}}nc=void 0,e&&e.enter()},fc?rc=function(){lc.nextTick(ec)}:dc&&!/(iphone|ipod|ipad).*applewebkit/i.test(Jr)?(ic=1,oc=document.createTextNode(\"\"),new dc(ec).observe(oc,{characterData:1}),rc=function(){oc.data=ic=!ic}):pc&&pc.resolve?(ac=pc.resolve(void 0),rc=function(){ac.then(ec)}):rc=function(){uc.call(s,ec)});var vc,gc,_c,yc=mc||function(e){var t={fn:e,next:void 0};nc&&(nc.next=t),tc||(tc=t,rc()),nc=t},Sc=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=r}),this.resolve=ze(t),this.reject=ze(n)},bc={f:function(e){return new Sc(e)}},kc=function(e,t){if(x(e),S(t)&&t.constructor===e)return t;var n=bc.f(e);return(0,n.resolve)(t),n.promise},Cc=function(e){try{return{error:0,value:e()}}catch(Np){return{error:1,value:Np}}},Tc=sc.set,wc=Ne(\"species\"),Rc=\"Promise\",Ec=Q.get,Ic=Q.set,Pc=Q.getterFor(Rc),xc=s.Promise,Ac=s.TypeError,Oc=s.document,Dc=s.process,Lc=s.fetch,Nc=Dc&&Dc.versions,Mc=Nc&&Nc.v8||\"\",jc=bc.f,Uc=jc,Vc=\"process\"==m(Dc),Fc=!!(Oc&&Oc.createEvent&&s.dispatchEvent),Gc=Re(Rc,function(){var e=xc.resolve(1),t=function(){},n=(e.constructor={})[wc]=function(e){e(t,t)};return!((Vc||\"function\"==typeof PromiseRejectionEvent)&&e.then(t)instanceof n&&0!==Mc.indexOf(\"6.6\")&&-1===Jr.indexOf(\"Chrome/66\"))}),Bc=Gc||!ss(function(e){xc.all(e).catch(function(){})}),Hc=function(e){var t;return S(e)&&\"function\"==typeof(t=e.then)?t:0},zc=function(e,t,n){if(!t.notified){t.notified=1;var r=t.reactions;yc(function(){for(var i=t.value,o=1==t.state,a=0;r.length>a;){var s,c,u,d=r[a++],l=o?d.ok:d.fail,p=d.resolve,f=d.reject,h=d.domain;try{l?(o||(2===t.rejection&&Kc(e,t),t.rejection=1),1==l?s=i:(h&&h.enter(),s=l(i),h&&(h.exit(),u=1)),s===d.promise?f(Ac(\"Promise-chain cycle\")):(c=Hc(s))?c.call(s,p,f):p(s)):f(i)}catch(Np){h&&!u&&h.exit(),f(Np)}}t.reactions=[],t.notified=0,n&&!t.rejection&&Jc(e,t)})}},Wc=function(e,t,n){var r,i;Fc?((r=Oc.createEvent(\"Event\")).promise=t,r.reason=n,r.initEvent(e,0,1),s.dispatchEvent(r)):r={promise:t,reason:n},(i=s[\"on\"+e])?i(r):\"unhandledrejection\"===e&&function(e,t){var n=s.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}(\"Unhandled promise rejection\",n)},Jc=function(e,t){Tc.call(s,function(){var n,r=t.value;if(qc(t)&&(n=Cc(function(){Vc?Dc.emit(\"unhandledRejection\",r,e):Wc(\"unhandledrejection\",e,r)}),t.rejection=Vc||qc(t)?2:1,n.error))throw n.value})},qc=function(e){return 1!==e.rejection&&!e.parent},Kc=function(e,t){Tc.call(s,function(){Vc?Dc.emit(\"rejectionHandled\",e):Wc(\"rejectionhandled\",e,t.value)})},$c=function(e,t,n,r){return function(i){e(t,n,i,r)}},Yc=function(e,t,n,r){t.done||(t.done=1,r&&(t=r),t.value=n,t.state=2,zc(e,t,1))},Qc=function(e,t,n,r){if(!t.done){t.done=1,r&&(t=r);try{if(e===n)throw Ac(\"Promise can't be resolved itself\");var i=Hc(n);i?yc(function(){var r={done:0};try{i.call(n,$c(Qc,e,r,t),$c(Yc,e,r,t))}catch(Np){Yc(e,r,Np,t)}}):(t.value=n,t.state=1,zc(e,t,0))}catch(Np){Yc(e,{done:0},Np,t)}}};Gc&&(xc=function(e){ns(this,xc,Rc),ze(e),vc.call(this);var t=Ec(this);try{e($c(Qc,this,t),$c(Yc,this,t))}catch(Np){Yc(this,t,Np)}},(vc=function(e){Ic(this,{type:Rc,done:0,notified:0,parent:0,reactions:[],rejection:0,state:0,value:void 0})}).prototype=us(xc.prototype,{then:function(e,t){var n=Pc(this),r=jc(Br(this,xc));return r.ok=\"function\"==typeof e?e:1,r.fail=\"function\"==typeof t&&t,r.domain=Vc?Dc.domain:void 0,n.parent=1,n.reactions.push(r),0!=n.state&&zc(this,n,0),r.promise},catch:function(e){return this.then(void 0,e)}}),gc=function(){var e=new vc,t=Ec(e);this.promise=e,this.resolve=$c(Qc,e,t),this.reject=$c(Yc,e,t)},bc.f=jc=function(e){return e===xc||e===_c?new gc(e):Uc(e)},\"function\"==typeof Lc&&Ie({global:1,enumerable:1,forced:1},{fetch:function(e){return kc(xc,Lc.apply(s,arguments))}})),Ie({global:1,wrap:1,forced:Gc},{Promise:xc}),Bo(xc,Rc,0),ls(Rc),_c=Z.Promise,Ie({target:Rc,stat:1,forced:Gc},{reject:function(e){var t=jc(this);return t.reject.call(void 0,e),t.promise}}),Ie({target:Rc,stat:1,forced:Gc},{resolve:function(e){return kc(this,e)}}),Ie({target:Rc,stat:1,forced:Bc},{all:function(e){var t=this,n=jc(t),r=n.resolve,i=n.reject,o=Cc(function(){var n=ze(t.resolve),o=[],a=0,s=1;ts(e,function(e){var c=a++,u=0;o.push(void 0),s++,n.call(t,e).then(function(e){u||(u=1,o[c]=e,--s||r(o))},i)}),--s||r(o)});return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=jc(t),r=n.reject,i=Cc(function(){var i=ze(t.resolve);ts(e,function(e){i.call(t,e).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}}),Ie({target:\"Promise\",proto:1,real:1},{finally:function(e){var t=Br(this,te(\"Promise\")),n=\"function\"==typeof e;return this.then(n?function(n){return kc(t,e()).then(function(){return n})}:e,n?function(n){return kc(t,e()).then(function(){throw n})}:e)}});var Xc=xr.charAt,Zc=Q.set,eu=Q.getterFor(\"String Iterator\");Wa(String,\"String\",function(e){Zc(this,{type:\"String Iterator\",string:String(e),index:0})},function(){var e,t=eu(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:1}:(e=Xc(n,r),t.index+=e.length,{value:e,done:0})});var tu=function(e){if(Fr(e))throw TypeError(\"The method doesn't accept regular expressions\");return e},nu=Ne(\"match\"),ru=\"\".startsWith,iu=Math.min;Ie({target:\"String\",proto:1,forced:!function(e){var t=/./;try{\"/./\"[e](t)}catch(n){try{return t[nu]=0,\"/./\"[e](t)}catch(r){}}return 0}(\"startsWith\")},{startsWith:function(e){var t=String(_(this));tu(e);var n=ae(iu(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return ru?ru.call(t,r,n):t.slice(n,n+r.length)===r}});var ou={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var au in ou){var su=s[au],cu=su&&su.prototype;if(cu&&cu.forEach!==Ea)try{D(cu,\"forEach\",Ea)}catch(Np){cu.forEach=Ea}}var uu=Ne(\"iterator\"),du=Ne(\"toStringTag\"),lu=Ka.values;for(var pu in ou){var fu=s[pu],hu=fu&&fu.prototype;if(hu){if(hu[uu]!==lu)try{D(hu,uu,lu)}catch(Np){hu[uu]=lu}if(hu[du]||D(hu,du,pu),ou[pu])for(var mu in Ka)if(hu[mu]!==Ka[mu])try{D(hu,mu,Ka[mu])}catch(Np){hu[mu]=Ka[mu]}}}var vu=c(function(){Ro(1)});Ie({target:\"Object\",stat:1,forced:vu},{keys:function(e){return Ro(xe(e))}});var gu=p.f,_u=function(e){return function(t){for(var n,r=y(t),i=Ro(r),o=i.length,a=0,s=[];o>a;)n=i[a++],u&&!gu.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}},yu={entries:_u(1),values:_u(0)}.values;Ie({target:\"Object\",stat:1},{values:function(e){return yu(e)}});var Su=O.f,bu=ve.f,ku=Ne(\"match\"),Cu=s.RegExp,Tu=Cu.prototype,wu=/a/g,Ru=/a/g,Eu=new Cu(wu)!==wu;if(u&&Re(\"RegExp\",!Eu||c(function(){return Ru[ku]=0,Cu(wu)!=wu||Cu(Ru)==Ru||\"/a/i\"!=Cu(wu,\"i\")}))){for(var Iu=function(e,t){var n=this instanceof Iu,r=Fr(e),i=void 0===t;return!n&&r&&e.constructor===Iu&&i?e:cs(Eu?new Cu(r&&!i?e.source:e,t):Cu((r=e instanceof Iu)?e.source:e,r&&i?Mn.call(e):t),n?this:Tu,Iu)},Pu=function(e){e in Iu||Su(Iu,e,{configurable:1,get:function(){return Cu[e]},set:function(t){Cu[e]=t}})},xu=bu(Cu),Au=0;xu.length>Au;)Pu(xu[Au++]);Tu.constructor=Iu,Iu.prototype=Tu,X(s,\"RegExp\",Iu)}ls(\"RegExp\"),Ir(\"match\",1,function(e,t,n){return[function(t){var n=_(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=x(e),o=String(this);if(!i.global)return Dr(i,o);var a=i.unicode;i.lastIndex=0;for(var s,c=[],u=0;null!==(s=Dr(i,o));){var d=String(s[0]);c[u]=d,\"\"===d&&(i.lastIndex=Or(o,ae(i.lastIndex),a)),u++}return 0===u?null:c}]});var Ou=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Ir(\"search\",1,function(e,t,n){return[function(t){var n=_(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=x(e),o=String(this),a=i.lastIndex;Ou(a,0)||(i.lastIndex=0);var s=Dr(i,o);return Ou(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]});var Du=bs.trim,Lu=s.parseFloat,Nu=1/Lu(vs+\"-0\")!=-Infinity?function(e){var t=Du(String(e)),n=Lu(t);return 0===n&&\"-\"==t.charAt(0)?-0:n}:Lu;Ie({global:1,forced:parseFloat!=Nu},{parseFloat:Nu});var Mu,ju=window.navigator&&window.navigator.userAgent||\"\",Uu=/AppleWebKit\\/([\\d.]+)/i.exec(ju),Vu=(Uu&&parseFloat(Uu.pop()),/iPad/i.test(ju)),Fu=/iPhone/i.test(ju)&&!Vu,Gu=/iPod/i.test(ju),Bu=Fu||Vu||Gu,Hu=((Mu=ju.match(/OS (\\d+)_/i))&&Mu[1]&&Mu[1],/Android/i.test(ju)),zu=function(){var e=ju.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+\".\"+e[2]):t||null}(),Wu=(Hu&&/webkit/i.test(ju),/Firefox/i.test(ju)),Ju=/Edge/i.test(ju),qu=!Ju&&/Chrome/i.test(ju),Ku=(function(){var e=ju.match(/Chrome\\/(\\d+)/);e&&e[1]&&parseFloat(e[1])}(),function(){var e=ju.match(/Chrome\\/([\\d.]+)/);return e&&e[1]?e[1]:null}()),$u=(/MSIE\\s8\\.0/.test(ju),function(){var e=/MSIE\\s(\\d+)\\.\\d/.exec(ju),t=e&&parseFloat(e[1]);!t&&/Trident\\/7.0/i.test(ju)&&/rv:11.0/.test(ju)&&(t=11)}(),/Safari/i.test(ju)&&!qu&&!Hu&&!Ju),Yu=function(){var e=ju.match(/Version\\/([\\d.]+)/);return e&&e[1]?e[1]:null}(),Qu=/TBS\\/\\d+/i.test(ju),Xu=(function(){var e=ju.match(/TBS\\/(\\d+)/i);if(e&&e[1])e[1]}(),!Qu&&/MQQBrowser\\/\\d+/i.test(ju),!Qu&&/ QQBrowser\\/\\d+/i.test(ju),/(micromessenger|webbrowser)/i.test(ju),/Windows/i.test(ju)),Zu=/MAC OS X/i.test(ju),ed=/Linux/i.test(ju),td=(/MicroMessenger/i.test(ju),qu?\"Chrome/\"+Ku:$u?\"Safari/\"+Yu:\"NotSupportedBrowser\"),nd=function(e){var t=window.location.search.match(new RegExp(\"(\\\\?|&)\"+e+\"=([^&]*)(&|$)\"));return t?decodeURIComponent(t[2]):\"\"},rd=function(){return nd(\"trtc_env\")},id=function(e){var t=e,n=nd(\"trtc_env\");return n&&(t=\"wss://\"+n+\".rtc.qq.com:8687\"),t};var od=function(e){if(!e||\"object\"!==Qe(e)||\"[object Object]\"!=Object.prototype.toString.call(e))return 0;var t=Object.getPrototypeOf(e);if(null===t)return 1;var n=Object.prototype.hasOwnProperty.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)},ad=Object.prototype.hasOwnProperty;function sd(e){if(null==e)return 1;if(\"boolean\"==typeof e)return 0;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(od(e))switch(Object.prototype.toString.call(e)){case\"[object File]\":case\"[object Map]\":case\"[object Set]\":return 0===e.size;case\"[object Object]\":for(var t in e)if(ad.call(e,t))return 0;return 1}return 0}var cd,ud=t(function(e){var t=Object.prototype.hasOwnProperty,n=\"~\";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||0}function o(e,t,r,o,a){if(\"function\"!=typeof r)throw new TypeError(\"The listener must be a function\");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=0)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return 0;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,1),l){case 1:return d.fn.call(d.context),1;case 2:return d.fn.call(d.context,t),1;case 3:return d.fn.call(d.context,t,r),1;case 4:return d.fn.call(d.context,t,r,i),1;case 5:return d.fn.call(d.context,t,r,i,o),1;case 6:return d.fn.call(d.context,t,r,i,o,a),1}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var p,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,1),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,i);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];d[u].fn.apply(d[u].context,c)}}return 1},s.prototype.on=function(e,t,n){return o(this,e,t,n,0)},s.prototype.once=function(e,t,n){return o(this,e,t,n,1)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],d=s.length;c<d;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}),dd=\"connection-state-changed\",ld=\"error\",pd={DISCONNECTED:\"DISCONNECTED\",CONNECTING:\"CONNECTING\",RECONNECTING:\"RECONNECTING\",CONNECTED:\"CONNECTED\"},fd={NEW_REMOTE_SDP:2,NEW_ICE_CANDIDATE:4,CLINET_BANNDED:8,CHANNEL_SETUP_SUCCESS:19,CHANNEL_SETUP_FAILED:80,CHANNEL_RECONNECT_FAILED:514,JOIN_ROOM_RESULT:20,PEER_JOIN:16,PEER_LEAVE:18,UPDATE_REMOTE_SDP:48,UPDATE_AUDIO_SSRC:50,UPDATE_VIDEO_SSRC:52,UPDATE_REMOTE_MUTE_STAT:23,CLOSE_PEER_ACK:10,SUBSCRIBE_ACK:26},hd={NEW_REMOTE_SDP:\"new-remote-sdp\",NEW_ICE_CANDIDATE:\"new-ice-candidate\",CLINET_BANNDED:\"client-banned\",CHANNEL_SETUP_SUCCESS:\"channel-setup-success\",CHANNEL_SETUP_FAILED:\"channel-setup-failed\",CHANNEL_RECONNECT_FAILED:\"channel-reconnect-failed\",JOIN_ROOM_RESULT:\"join-room-result\",PEER_JOIN:\"peer-join\",PEER_LEAVE:\"peer-leave\",UPDATE_REMOTE_SDP:\"update-remote-sdp\",UPDATE_AUDIO_SSRC:\"update-audio-ssrc\",UPDATE_VIDEO_SSRC:\"update-video-ssrc\",UPDATE_REMOTE_MUTE_STAT:\"update-remote-mute-stat\",CLOSE_PEER_ACK:\"close-peer-ack\",SUBSCRIBE_ACK:\"subscribe-ack\",REQUEST_REBUILD_SESSION:\"request-rebuild-session\"},md=\"on_peer_sdp\",vd=\"on_reexchange_sdp\",gd=\"on_peer_candidate\",_d=\"on_create_room\",yd=\"on_close_peer\",Sd=\"on_quality_report\",bd=\"on_rebuild_session\",kd=\"on_change_av_state\",Cd=\"on_subscribe\",Td=\"on_constraints_config\",wd=\"on_test_ws_broken\",Rd={INVALID_PARAMETER:4096,INVALID_OPERATION:4097,SIGNAL_CAHNNEL_SETUP_FAILED:16385,SIGNAL_CHANNEL_ERROR:16386,ICE_TRANSPORT_ERROR:16387,JOIN_ROOM_FAILED:16388,CREATE_OFFER_FAILED:16389,CLIENT_BANNED:16448,SERVER_TIMEOUT:16449,SUBSCRIPTION_TIMEOUT:16450,PLAY_NOT_ALLOWED:16451,UNKOWN:65535},Ed=function(e){function t(e){var n,r=e.message,i=e.code,o=void 0===i?Rd.UNKOWN:i;return et(this,t),(n=dt(this,at(t).call(this,r))).code_=o,n.name=\"RtcError\",n}return ot(t,ut(Error)),nt(t,[{key:\"getCode\",value:function(){return this.code_}}]),t}(),Id={sdkAppId:\"\",userId:\"\",version:\"\",env:\"qcloud\"},Pd=function(e){Id.sdkAppId=\"\".concat(e.sdkAppId),Id.version=\"\".concat(e.version),Id.env=e.env,Id.userId=e.userId},xd=function(e){\"qcloud\"===Id.env&&function(e){var t=\"stat-\".concat(e.eventType,\"-\").concat(e.result);\"delta-join\"!==e.eventType&&\"delta-leave\"!==e.eventType&&\"delta-publish\"!==e.eventType||(t=\"\".concat(e.eventType,\":\").concat(e.delta));var n=JSON.stringify({timestamp:(new Date).toISOString(),sdkAppId:Id.sdkAppId,userId:Id.userId,version:Id.version,log:t});io.post(\"https://yun.tim.qq.com/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_log\",n).then(function(e){}).catch(function(e){console.log(e)})}(e);var t=it({},e,Id);io.post(\"https://yun.tim.qq.com/v5/AVQualityReportSvc/C2S?sdkappid=1&cmdtype=jssdk_event\",JSON.stringify(t)).then(function(e){}).catch(function(e){console.log(e)})},Ad=3,Od=function(){function e(t){et(this,e),this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.userSig_=t.userSig,this.url_=t.url,this.backupUrl_=t.backupUrl,this.version_=t.version,this.urlWithParam_=\"\".concat(this.url_,\"?sdkAppid=\").concat(this.sdkAppId_,\"&identifier=\").concat(this.userId_,\"&userSig=\").concat(this.userSig_),this.backupUrlWithParam_=\"\".concat(this.backupUrl_,\"?sdkAppid=\").concat(this.sdkAppId_,\"&identifier=\").concat(this.userId_,\"&userSig=\").concat(this.userSig_),this.isConnected_=0,this.isConnecting_=0,this.tryCount_=Ad,this.socketInUse_=null,this.socket_=null,this.backupSocket_=null,this.backupTimer_=-1,this.reconnectTimer_=-1,this.signalInfo_={},this.currentState_=pd.DISCONNECTED,this.emitter_=new ud}return nt(e,[{key:\"connect\",value:function(){var e=this;Hn.info(\"connect to url: \".concat(this.urlWithParam_)),this.emitter_.emit(dd,{prevState:this.currentState_,state:pd.CONNECTING}),this.currentState_=pd.CONNECTING,this.socket_=new WebSocket(this.urlWithParam_),this.bindSocket(this.socket_),this.backupTimer_=setTimeout(function(){e.isConnected_||(Hn.info(\"trying to connect to backupUrl\"),e.tryConnectBackup())},1e3)}},{key:\"tryConnectBackup\",value:function(){this.backupSocket_||(Hn.debug(\"try to connect to url: \".concat(this.backupUrlWithParam_)),this.backupSocket_=new WebSocket(this.backupUrlWithParam_),this.bindSocket(this.backupSocket_))}},{key:\"bindSocket\",value:function(e){e.onopen=this.onopen.bind(this),e.onclose=this.onclose.bind(this),e.onerror=this.onerror.bind(this),e.onmessage=this.onmessage.bind(this)}},{key:\"unbindSocket\",value:function(e){e.onopen=function(){},e.onclose=function(){},e.onerror=function(){},e.onmessage=function(){}}},{key:\"unbindAndCloseSocket\",value:function(e){if(\"main\"===e){if(this.socket_){this.unbindSocket(this.socket_);try{this.socket_.close(1e3)}catch(t){}this.socket_=null}}else if(this.backupSocket_){this.unbindSocket(this.backupSocket_);try{this.backupSocket_.close(1e3)}catch(t){}this.backupSocket_=null}}},{key:\"clearBackupTimer\",value:function(){-1!==this.backupTimer_&&(clearTimeout(this.backupTimer_),this.backupTimer_=-1)}},{key:\"onopen\",value:function(e){if(!this.isConnected_){this.isConnecting_?xd({eventType:\"websocketReconnectionState\",result:\"success\"}):xd({eventType:\"websocketConnectionState\",result:\"success\"}),this.isConnected_=1,this.isConnecting_=0,this.clearBackupTimer(),e.target===this.socket_?(this.unbindAndCloseSocket(\"backup\"),this.socketInUse_=this.socket_):(this.unbindAndCloseSocket(\"main\"),this.socketInUse_=this.backupSocket_);var t=e.target.url;Hn.info(\"[\".concat(this.userId_,\"] websocket[\").concat(t,\"] is connected\")),this.emitter_.emit(dd,{prevState:this.currentState_,state:pd.CONNECTED}),this.currentState_=pd.CONNECTED}}},{key:\"onclose\",value:function(e){var t=e.target.url,n=e.target===this.socketInUse_;Hn.info(\"[\".concat(this.userId_,\"] websocket[\").concat(t,\" InUse: \").concat(n,\"] is closed with code: \").concat(e.code)),e.target===this.socketInUse_&&(this.isConnected_=0,!e.wasClean||1e3!==e.code&&1005!==e.code?(Hn.warn(\"[\".concat(this.userId_,\"] onclose code:\").concat(e.code,\" reason:\").concat(e.reason)),this.isConnecting_&&this.tryCount_<=0?(this.isConnecting_=0,this.tryCount_=Ad,Hn.error(\"[\".concat(this.userId_,\"] reconnect failed\")),this.emitter_.emit(dd,{prevState:this.currentState_,state:pd.DISCONNECTED}),this.currentState_=pd.DISCONNECTED,xd({eventType:\"websocketReconnectionState\",result:\"failed\"}),this.emitter_.emit(ld,new Ed({code:Rd.SIGNAL_CHANNEL_ERROR,message:\"WebSocket reconnection failed\"}))):(Hn.warn(\"close current websocket and schedule a reconnect timeout\"),this.socketInUse_.onclose=function(){},this.socketInUse_.close(4011),this.socket_=this.backupSocket_=this.socketInUse_=null,this.reconnect(t))):(this.emitter_.emit(dd,{prevState:this.currentState_,state:pd.DISCONNECTED}),this.currentState_=pd.DISCONNECTED))}},{key:\"onerror\",value:function(e){var t=e.target.url;Hn.error(\"[\".concat(this.userId_,\"] websocket[\").concat(t,\"] error observed\")),this.isConnected_?e.target===this.socketInUse_&&(this.isConnected_=0,this.unbindAndCloseSocket(\"main\"),this.unbindAndCloseSocket(\"backup\"),this.socketInUse_=null,this.emitter_.emit(ld,new Ed({code:Rd.SIGNAL_CHANNEL_ERROR,message:\"WebSocket error observed\"}))):(e.target==this.socket_?(this.unbindAndCloseSocket(\"main\"),this.isConnecting_||(Hn.warn(\"main socket error observed, try connecting to backup domain\"),this.tryConnectBackup())):this.unbindAndCloseSocket(\"backup\"),null===this.socket_&&null===this.backupSocket_&&(this.isConnecting_?xd({eventType:\"websocketReconnectionState\",result:\"failed\"}):xd({eventType:\"websocketConnectionState\",result:\"failed\"}),Hn.error(\"SignalChannel setup failed\"),this.emitter_.emit(ld,new Ed({code:Rd.SIGNAL_CHANNEL_ERROR,message:\"failed to connect to remote server via websocket\"}))))}},{key:\"onmessage\",value:function(e){var t=this;if(this.isConnected_){var n=JSON.parse(e.data),r=n.cmd,i=n.content,o=Object.values(fd),a=Object.keys(fd)[o.indexOf(r)],s=hd[a];if(r!==fd.UPDATE_REMOTE_MUTE_STAT){var c=e.target==this.socket_?this.url_:this.backupUrl_;Hn.debug(\"[\".concat(this.userId_,\"] websocket[\").concat(c,\"] received message: \").concat(e.data)),Hn.info(\"[\".concat(this.userId_,\"] Received event: [ \").concat(s,\" ]\"))}switch(r){case fd.CHANNEL_SETUP_SUCCESS:this.signalInfo_.relayIp=i.relayip,this.signalInfo_.relayInnerIp=i.innerip,this.signalInfo_.signalIp=i.signalip,this.signalInfo_.localIp=i.localip,this.signalInfo_.dataPort=i.dataport,this.signalInfo_.stunPort=i.stunport,this.signalInfo_.checkSigSeq=i.checkSigSeq,this.signalInfo_.socketId=i.socketid,this.signalInfo_.tinyId=i.tinyid,this.signalInfo_.openId=i.openid,this.signalInfo_.stunPortList=i.stunportList,!i.stunportList||i.stunportList.length<=0?this.signalInfo_.stunServers=\"stun:\"+i.relayip+\":\"+i.stunport:(this.signalInfo_.stunServers=[],i.stunportList.forEach(function(e){var n=\"stun:\"+i.relayip+\":\"+e;t.signalInfo_.stunServers.push(n)})),i.cgiurl&&(this.signalInfo_.logCgiUrl=i.cgiurl),Hn.info(\"ChannelSetup Success: signalIp:\".concat(i.signalip,\" relayIp:\").concat(i.relayip,\" stunPort:\").concat(i.stunport)),1===(i.rc||0)?this.emitter_.emit(hd.REQUEST_REBUILD_SESSION,{signalInfo:this.signalInfo_}):this.emitter_.emit(s,{signalInfo:this.signalInfo_});break;case fd.CHANNEL_SETUP_FAILED:var u=\"sdkAppId invalid\",d=\"\";void 0!==i.errorCode&&(u=i.errorCode,d=i.errorMsg),this.emitter_.emit(ld,new Ed({code:Rd.CHANNEL_SETUP_FAILED,message:\"SignalChannel setup failure: ('errorCode': \".concat(u,\", 'errorMsg': \").concat(d,\" })\")}));break;default:this.emitter_.emit(s,{data:n})}}}},{key:\"reconnect\",value:function(e){var t=this;this.reconnectTimer_=setTimeout(function(){t.isConnecting_=1,t.tryCount_-=1;var n=e;sd(t.signalInfo_)||-1!==e.indexOf(\"&rc=1\")||(n=e+\"&iip=\"+t.signalInfo_.relayInnerIp+\"&dp=\"+t.signalInfo_.dataPort+\"&oip=\"+t.signalInfo_.relayIp+\"&sp=\"+t.signalInfo_.stunPort+\"&rc=1\"),t.emitter_.emit(dd,{prevState:t.currentState_,state:pd.RECONNECTING}),t.currentState_=pd.RECONNECTING,t.socket_=new WebSocket(n),t.bindSocket(t.socket_)},3e3)}},{key:\"send\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(this.isConnected_){var r=this.createSendMessage(e);r.data=t,void 0!==n&&(r.srctinyid=n),this.socketInUse_.send(JSON.stringify(r))}}},{key:\"sendWithReport\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2?arguments[2]:void 0;if(this.isConnected_){var r=this.createSendMessage(e);r.data=t,r.report=n,this.socketInUse_.send(JSON.stringify(r))}}},{key:\"createSendMessage\",value:function(e){return{tag_key:e,data:\"\",openid:this.userId_,tinyid:this.signalInfo_.tinyId,version:this.version_,ua:navigator.userAgent}}},{key:\"close\",value:function(){Hn.info(\"close SignalChannel\"),-1!==this.reconnectTimer_&&(clearTimeout(this.reconnectTimer_),this.reconnectTimer_=-1),this.clearBackupTimer(),this.isConnected_=0,this.socketInUse_=null,this.unbindAndCloseSocket(\"main\"),this.unbindAndCloseSocket(\"backup\")}},{key:\"on\",value:function(e,t,n){this.emitter_.on(e,t,n)}},{key:\"removeListener\",value:function(e,t,n){this.emitter_.removeListener(e,t,n)}},{key:\"once\",value:function(e,t){this.emitter_.once(e,t)}}]),e}();window.addEventListener(\"message\",function(e){e.origin==window.location.origin&&function(e){if(\"PermissionDeniedError\"==e){if(cd)return cd(\"PermissionDeniedError\");throw new Error(\"PermissionDeniedError\")}e.sourceId&&cd&&cd(e.sourceId,1==e.canRequestAudioTrack)}(e.data)});window.InstallTrigger;var Dd=!!window.opera||navigator.userAgent.indexOf(\" OPR/\")>=0,Ld=(window.chrome,function(){var e=0;return[\"RTCPeerConnection\",\"webkitRTCPeerConnection\",\"RTCIceGatherer\"].forEach(function(t){t in window&&(e=1)}),e}),Nd=function(){var e=Ze(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new RTCPeerConnection,\"\",n=0,e.prev=3,e.next=6,t.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1});case 6:-1!==e.sent.sdp.toLowerCase().indexOf(\"h264\")&&(n=1),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:return t.close(),e.abrupt(\"return\",n);case 14:case\"end\":return e.stop()}},e,null,[[3,10]])}));return function(){return e.apply(this,arguments)}}(),Md=function(){if(\"undefined\"==typeof RTCRtpTransceiver)return 0;if(!(\"currentDirection\"in RTCRtpTransceiver.prototype))return 0;var e=new RTCPeerConnection,t=0;try{e.addTransceiver(\"audio\"),t=1}catch(n){}return e.close(),t},jd=1,Ud=2,Vd=20,Fd=21,Gd=\"5Y2wZK8nANNAoVw6dSAHVjNxrD1ObBM2kBPV\",Bd=\"224d130c-7b5c-415b-aaa2-79c2eb5a6df2\",Hd=2,zd=7,Wd=Ke.find,Jd=1;\"find\"in[]&&Array(1).find(function(){Jd=0}),Ie({target:\"Array\",proto:1,forced:Jd},{find:function(e){return Wd(this,e,arguments.length>1?arguments[1]:void 0)}}),Da(\"find\");var qd=function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return(\"x\"==e?t:3&t|8).toString(16)})},Kd=\"stream-added\",$d=\"stream-removed\",Yd=\"stream-updated\",Qd=\"stream-published\",Xd=\"stream-subscribed\",Zd=\"stream-unsubscribed\",el=\"error\",tl=\"connection-state-changed\",nl=\"stream-added\",rl=\"stream-removed\",il=\"stream-updated\",ol=\"stream-subscribed\",al=\"connection-state-changed\",sl=\"peer-join\",cl=\"peer-leave\",ul=\"mute-audio\",dl=\"mute-video\",ll=\"unmute-audio\",pl=\"unmute-video\",fl=\"client-banned\",hl=\"error\",ml=\"player-state-changed\",vl=\"screen-sharing-stopped\",gl=\"player-state-changed\",_l=1..toFixed,yl=Math.floor,Sl=function(e,t,n){return 0===t?n:t%2==1?Sl(e,t-1,n*e):Sl(e*e,t/2,n)},bl=_l&&(\"0.000\"!==8e-5.toFixed(3)||\"1\"!==.9.toFixed(0)||\"1.25\"!==1.255.toFixed(2)||\"1000000000000000128\"!==(0xde0b6b3a7640080).toFixed(0))||!c(function(){_l.call({})});Ie({target:\"Number\",proto:1,forced:bl},{toFixed:function(e){var t,n,r,i,o=function(e){if(\"number\"!=typeof e&&\"Number\"!=m(e))throw TypeError(\"Incorrect invocation\");return+e}(this),a=ie(e),s=[0,0,0,0,0,0],c=\"\",u=\"0\",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=yl(r/1e7)},l=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=yl(n/e),n=n%e*1e7},p=function(){for(var e=6,t=\"\";--e>=0;)if(\"\"!==t||0===e||0!==s[e]){var n=String(s[e]);t=\"\"===t?n:t+Yn.call(\"0\",7-n.length)+n}return t};if(a<0||a>20)throw RangeError(\"Incorrect fraction digits\");if(o!=o)return\"NaN\";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c=\"-\",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*Sl(2,69,1))-69)<0?o*Sl(2,-t,1):o/Sl(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=a;r>=7;)d(1e7,0),r-=7;for(d(Sl(10,r,1),0),r=t-1;r>=23;)l(1<<23),r-=23;l(1<<r),d(1,1),l(2),u=p()}else d(0,n),d(1<<-t,0),u=p()+Yn.call(\"0\",a);return u=a>0?c+((i=u.length)<=a?\"0.\"+Yn.call(\"0\",a-i)+u:u.slice(0,i-a)+\".\"+u.slice(i-a)):c+u}});var kl=window.AudioContext||window.webkitAudioContext,Cl=null,Tl=function(){function e(){var t=this;et(this,e),Cl||(Cl=new kl),this.context_=Cl,this.instant_=0,this.slow_=0,this.clip_=0,this.script_=this.context_.createScriptProcessor(2048,1,1),this.script_.onaudioprocess=function(e){var n,r=e.inputBuffer.getChannelData(0),i=0,o=0;for(n=0;n<r.length;++n)i+=r[n]*r[n],Math.abs(r[n])>.99&&(o+=1);t.instant_=Math.sqrt(i/r.length),t.slow_=.95*t.slow_+.05*t.instant_,t.clip_=o/r.length}}return nt(e,[{key:\"connectToSource\",value:function(e,t){try{var n=new MediaStream;n.addTrack(e),this.mic_=this.context_.createMediaStreamSource(n),this.mic_.connect(this.script_),this.script_.connect(this.context_.destination),void 0!==t&&t(null)}catch(r){Hn.error(\"soundMeter connectoToSource error: \"+r),void 0!==t&&t(r)}}},{key:\"stop\",value:function(){this.mic_.disconnect(),this.script_.disconnect()}},{key:\"getVolume\",value:function(){return this.instant_.toFixed(2)}}]),e}(),wl=function(){function e(t){et(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getIDLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.outputDeviceId_=t.outputDeviceId,this.volume_=t.volume,this.element_=null,this.emitter_=new ud,this.state_=\"NONE\",this.soundMeter_=null}var t,n,r;return nt(e,[{key:\"play\",value:(r=Ze(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new MediaStream).addTrack(this.track_),(n=document.createElement(\"audio\")).srcObject=t,n.muted=this.muted_,n.setAttribute(\"id\",\"audio_\".concat(this.stream_.getId())),n.setAttribute(\"autoplay\",\"autoplay\"),n.setAttribute(\"playsinline\",\"playsinline\"),this.div_.appendChild(n),!this.outputDeviceId_){e.next=12;break}return e.next=12,n.setSinkId(this.outputDeviceId_);case 12:return this.element_=n,this.setVolume(this.volume_),this.handleEvents(),e.prev=15,e.next=18,n.play();case 18:e.next=26;break;case 20:if(e.prev=20,e.t0=e.catch(15),this.log_.warn(\"<audio> play() error: \"+e.t0),!(r=e.t0.toString()+\" <audio>\").startsWith(\"NotAllowedError\")){e.next=26;break}throw new Ed({code:Rd.PLAY_NOT_ALLOWED,message:r});case 26:case\"end\":return e.stop()}},e,this,[[15,20]])})),function(){return r.apply(this,arguments)})},{key:\"handleEvents\",value:function(){var e=this;this.element_.addEventListener(\"playing\",function(t){e.log_.info(\"stream - audio player is starting playing\"),e.state_=\"PLAYING\",e.emitter_.emit(gl,{state:e.state_,reason:\"playing\"})}),this.element_.addEventListener(\"ended\",function(t){e.log_.info(\"stream - audio player is ended\"),\"STOPPED\"!==e.state_&&(e.state_=\"STOPPED\",e.emitter_.emit(gl,{state:e.state_,reason:\"ended\"}))}),this.element_.addEventListener(\"pause\",function(t){e.log_.info(\"stream - audio player is paused\"),e.state_=\"PAUSED\",e.emitter_.emit(gl,{state:e.state_,reason:\"pause\"})}),this.track_.addEventListener(\"ended\",function(t){e.log_.info(\"stream - audio player track is ended\"),\"STOPPED\"!==e.state_&&(e.state_=\"STOPPED\",e.emitter_.emit(gl,{state:e.state_,reason:\"ended\"}))}),this.track_.addEventListener(\"mute\",function(t){e.log_.info(\"stream - audio track is muted\"),\"PAUSED\"!==e.state_&&(e.state_=\"PAUSED\",e.emitter_.emit(gl,{state:e.state_,reason:\"mute\"}))}),this.track_.addEventListener(\"unmute\",function(t){e.log_.info(\"stream - audio track is unmuted\"),\"PAUSED\"===e.state_&&(e.state_=\"PLAYING\",e.emitter_.emit(gl,{state:e.state_,reason:\"unmute\"}))})}},{key:\"setSinkId\",value:(n=Ze(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.outputDeviceId_===t){e.next=4;break}return e.next=3,this.element_.setSinkId(t);case 3:this.outputDeviceId_=t;case 4:case\"end\":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:\"setVolume\",value:function(e){this.log_.info(\"stream - audioElement setVolume to : \".concat(e)),this.element_.volume=e}},{key:\"getAudioLevel\",value:function(){return this.soundMeter_||(this.soundMeter_=new Tl,this.soundMeter_.connectToSource(this.track_)),this.soundMeter_.getVolume()}},{key:\"stop\",value:function(){this.div_.removeChild(this.element_),this.soundMeter_&&(this.soundMeter_.stop(),this.soundMeter_=null)}},{key:\"resume\",value:(t=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),this.log_.warn(\"<audio> play() error: \"+e.t0),!(t=e.t0.toString()+\" <audio>\").startsWith(\"NotAllowedError\")){e.next=11;break}throw new Ed({code:Rd.PLAY_NOT_ALLOWED,message:t});case 11:case\"end\":return e.stop()}},e,this,[[0,5]])})),function(){return t.apply(this,arguments)})},{key:\"on\",value:function(e,t){this.emitter_.on(e,t)}}]),e}(),Rl=function(){function e(t){et(this,e),this.stream_=t.stream,this.userId_=t.stream.getUserId(),this.log_=this.stream_.getIDLogger(),this.track_=t.track,this.div_=t.div,this.muted_=t.muted,this.objectFit_=t.objectFit,this.mirror_=t.mirror,this.element_=null,this.emitter_=new ud,this.state_=\"NONE\"}var t,n;return nt(e,[{key:\"play\",value:(n=Ze(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new MediaStream).addTrack(this.track_),(n=document.createElement(\"video\")).srcObject=t,n.muted=1,r=0,this.mirror_&&(r=\"180deg\"),n.setAttribute(\"id\",\"video_\".concat(this.stream_.getId())),n.setAttribute(\"style\",\"width: 100%; height: 100%; position: absolute; transform: rotateY(\".concat(r,\"); object-fit: \").concat(this.objectFit_)),n.setAttribute(\"autoplay\",\"autoplay\"),n.setAttribute(\"playsinline\",\"playsinline\"),this.div_.appendChild(n),this.element_=n,this.handleEvents(),e.prev=14,e.next=17,n.play();case 17:e.next=25;break;case 19:if(e.prev=19,e.t0=e.catch(14),this.log_.warn(\"<video> play() error: \"+e.t0),!(i=e.t0.toString()+\" <video>\").startsWith(\"NotAllowedError\")){e.next=25;break}throw new Ed({code:Rd.PLAY_NOT_ALLOWED,message:i});case 25:case\"end\":return e.stop()}},e,this,[[14,19]])})),function(){return n.apply(this,arguments)})},{key:\"handleEvents\",value:function(){var e=this;this.element_.addEventListener(\"playing\",function(t){e.log_.info(\"stream - video player is starting playing\"),e.state_=\"PLAYING\",e.emitter_.emit(gl,{state:e.state_,reason:\"playing\"})}),this.element_.addEventListener(\"ended\",function(t){e.log_.info(\"stream - video player is ended\"),\"STOPPED\"!==e.state_&&(e.state_=\"STOPPED\",e.emitter_.emit(gl,{state:e.state_,reason:\"ended\"}))}),this.element_.addEventListener(\"pause\",function(t){e.log_.info(\"stream - video player is paused\"),e.state_=\"PAUSED\",e.emitter_.emit(gl,{state:e.state_,reason:\"pause\"})}),this.track_.addEventListener(\"ended\",function(t){e.log_.info(\"stream - video player track is ended\"),\"STOPPED\"!==e.state_&&(e.state_=\"STOPPED\",e.emitter_.emit(gl,{state:e.state_,reason:\"ended\"}))}),this.track_.addEventListener(\"mute\",function(t){e.log_.info(\"stream - video track is muted\"),\"PAUSED\"!==e.state_&&(e.state_=\"PAUSED\",e.emitter_.emit(gl,{state:e.state_,reason:\"mute\"}))}),this.track_.addEventListener(\"unmute\",function(t){e.log_.info(\"stream - video track is unmuted\"),\"PAUSED\"===e.state_&&(e.state_=\"PLAYING\",e.emitter_.emit(gl,{state:e.state_,reason:\"unmute\"}))})}},{key:\"stop\",value:function(){this.div_.removeChild(this.element_)}},{key:\"resume\",value:(t=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.element_.play();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),this.log_.warn(\"<video> play() error: \"+e.t0),!(t=e.t0.toString()+\" <video>\").startsWith(\"NotAllowedError\")){e.next=11;break}throw new Ed({code:Rd.PLAY_NOT_ALLOWED,message:t});case 11:case\"end\":return e.stop()}},e,this,[[0,5]])})),function(){return t.apply(this,arguments)})},{key:\"getVideoFrame\",value:function(){var e=document.createElement(\"canvas\");return e.width=this.element_.videoWidth,e.height=this.element_.videoHeight,e.getContext(\"2d\").drawImage(this.element_,0,0),e.toDataURL(\"image/png\")}},{key:\"on\",value:function(e,t){this.emitter_.on(e,t)}}]),e}(),El=function(){function e(t){et(this,e),this.id_=t.id,this.direction_=t.direction,this.type_=t.type,this.directionPrefix_=\"local\"===this.direction_?\"\":\"*\"}return nt(e,[{key:\"log\",value:function(e,t){Hn[e](\"[\".concat(this.directionPrefix_).concat(this.id_,\"] \").concat(this.type_,\" \").concat(t))}},{key:\"info\",value:function(e){this.log(\"info\",e)}},{key:\"debug\",value:function(e){this.log(\"debug\",e)}},{key:\"warn\",value:function(e){this.log(\"warn\",e)}},{key:\"error\",value:function(e){this.log(\"error\",e)}}]),e}(),Il=32768,Pl=32769,xl=32770,Al=32771,Ol=32772,Dl=32773,Ll=32774,Nl=32775,Ml=32776,jl=32777,Ul=32778,Vl=32779,Fl=32780,Gl=32781,Bl=32782,Hl=32783,zl=32784,Wl=32785,Jl=32786,ql=32787,Kl=new Map,$l=function(e,t){var n=Kl.get(e);n||(Kl.set(e,[]),n=Kl.get(e)),n.push(t)},Yl=function(e){var t=Kl.get(e);return t?Kl.delete(e):t=[],t},Ql=function(){function e(t){et(this,e),this.userId_=t.userId,this.isRemote_=t.isRemote,this.type_=t.type,this.log_=new El({id:\"s|\"+this.userId_,direction:this.isRemote_?\"remote\":\"local\",type:this.isRemote_?this.type_:\"\"}),this.mirror_=0,this.isRemote_||(this.mirror_=1),void 0!==t.mirror&&(this.mirror_=t.mirror),this.client_=null,void 0!==t.client&&(this.client_=t.client),this.mediaStream_=null,this.div_=null,this.isPlaying_=0,this.connection_=null,this.hasAudio_=0,this.hasVideo_=0,this.audioPlayer_=null,this.videoPlayer_=null,this.muted_=0,this.objectFit_=\"cover\",this.id_=qd(),this.audioOutputDeviceId_=0,this.audioVolume_=1,this.emitter_=new ud}var t,n,r,i,o;return nt(e,[{key:\"getType\",value:function(){return this.type_}},{key:\"getIDLogger\",value:function(){return this.log_}},{key:\"setConnection\",value:function(e){this.connection_!==e&&(this.connection_=e)}},{key:\"getConnection\",value:function(){return this.connection_}},{key:\"play\",value:(o=Ze(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlaying_){e.next=2;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"duplicated play() call observed, please stop() firstly\"});case 2:if(this.isPlaying_=1,this.log_.info(\"stream start to play with options: \".concat(JSON.stringify(n))),(r=document.createElement(\"div\")).setAttribute(\"id\",\"player_\".concat(this.id_)),r.setAttribute(\"style\",\"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;\"),i=t,\"object\"!==Qe(t)&&(i=document.getElementById(t)),i.appendChild(r),this.div_=r,this.isRemote_||(this.muted_=1),n&&void 0!==n.muted&&(this.muted_=n.muted),this.isRemote_&&\"auxiliary\"===this.getType()&&(this.objectFit_=\"contain\"),n&&void 0!==n.objectFit&&(this.objectFit_=n.objectFit),!this.hasVideo_){e.next=18;break}return e.next=18,this.playVideo();case 18:if(!this.hasAudio_){e.next=21;break}return e.next=21,this.playAudio();case 21:case\"end\":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:\"playAudio\",value:(i=Ze(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getAudioTrack(),this.audioPlayer_||!t){e.next=7;break}return this.log_.info(\"stream - create AudioPlayer and play\"),this.audioPlayer_=new wl({stream:this,track:t,div:this.div_,muted:this.muted_,outputDeviceId:this.audioOutputDeviceId_,volume:this.audioVolume_}),this.audioPlayer_.on(gl,function(e){n.emitter_.emit(ml,{type:\"audio\",state:e.state,reason:e.reason})}),e.next=7,this.audioPlayer_.play();case 7:case\"end\":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:\"playVideo\",value:(r=Ze(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getVideoTrack(),this.videoPlayer_||!t){e.next=7;break}return this.log_.info(\"stream - create VideoPlayer and play\"),this.videoPlayer_=new Rl({stream:this,track:t,div:this.div_,muted:this.muted_,objectFit:this.objectFit_,mirror:this.mirror_}),this.videoPlayer_.on(gl,function(e){n.emitter_.emit(ml,{type:\"video\",state:e.state,reason:e.reason})}),e.next=7,this.videoPlayer_.play();case 7:case\"end\":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:\"stopAudio\",value:function(){this.audioPlayer_&&(this.log_.info(\"stream - stop AudioPlayer\"),this.audioPlayer_.stop(),this.audioPlayer_=null)}},{key:\"stopVideo\",value:function(){this.videoPlayer_&&(this.log_.info(\"stream - stop VideoPlayer\"),this.videoPlayer_.stop(),this.videoPlayer_=null)}},{key:\"restartAudio\",value:function(){this.isPlaying_&&(this.stopAudio(),this.playAudio())}},{key:\"restartVideo\",value:function(){this.isPlaying_&&(this.stopVideo(),this.playVideo())}},{key:\"stop\",value:function(){this.isPlaying_&&(this.isPlaying_=0,this.stopAudio(),this.stopVideo(),this.div_.parentNode.removeChild(this.div_))}},{key:\"resume\",value:(n=Ze(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPlaying_){e.next=2;break}return e.abrupt(\"return\");case 2:if(this.log_.info(\"stream - resume\"),!this.videoPlayer_){e.next=6;break}return e.next=6,this.videoPlayer_.resume();case 6:if(!this.audioPlayer_){e.next=9;break}return e.next=9,this.audioPlayer_.resume();case 9:case\"end\":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:\"close\",value:function(){this.isPlaying_&&this.stop(),this.mediaStream_&&(this.mediaStream_.preventEvent=1,this.mediaStream_.getTracks().forEach(function(e){e.stop()}),this.mediaStream_=null)}},{key:\"muteAudio\",value:function(){return this.addRemoteEvent(1,\"audio\"),this.doEnableTrack(\"audio\",0)}},{key:\"muteVideo\",value:function(){return this.addRemoteEvent(1,\"video\"),this.doEnableTrack(\"video\",0)}},{key:\"unmuteAudio\",value:function(){return this.addRemoteEvent(0,\"audio\"),this.doEnableTrack(\"audio\",1)}},{key:\"unmuteVideo\",value:function(){return this.addRemoteEvent(0,\"video\"),this.doEnableTrack(\"video\",1)}},{key:\"addRemoteEvent\",value:function(e,t){if(this.isRemote_&&this.client_){var n=this.client_.getUserId(),r=\"\".concat(e?\"mute\":\"unmute\",\" remote \").concat(t);$l(n,{eventId:\"audio\"===t?e?Wl:ql:e?zl:Jl,eventDesc:r,timestamp:(new Date).getTime(),userId:n,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.connection_.getTinyId()})}}},{key:\"doEnableTrack\",value:function(e,t){var n=0;return\"audio\"===e?this.mediaStream_.getAudioTracks().forEach(function(e){n=1,e.enabled=t}):this.mediaStream_.getVideoTracks().forEach(function(e){n=1,e.enabled=t}),n}},{key:\"getId\",value:function(){return this.id_}},{key:\"getUserId\",value:function(){return this.userId_}},{key:\"isPlaying\",value:function(){return this.isPlaying_}},{key:\"setAudioOutput\",value:(t=Ze(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.audioOutputDeviceId_=t,!this.audioPlayer_){e.next=4;break}return e.next=4,this.audioPlayer_.setSinkId(t);case 4:case\"end\":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:\"setAudioVolume\",value:function(e){this.audioVolume_=e,this.log_.info(\"setAudioVolume to \".concat(e)),this.audioPlayer_&&this.audioPlayer_.setVolume(e)}},{key:\"getAudioLevel\",value:function(){var e=0;return this.audioPlayer_&&(e=this.audioPlayer_.getAudioLevel()),e}},{key:\"hasAudio\",value:function(){return this.hasAudio_}},{key:\"hasVideo\",value:function(){return this.hasVideo_}},{key:\"getAudioTrack\",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getAudioTracks();t.length>0&&(e=t[0])}return e}},{key:\"getVideoTrack\",value:function(){var e=null;if(this.mediaStream_){var t=this.mediaStream_.getVideoTracks();t.length>0&&(e=t[0])}return e}},{key:\"getVideoFrame\",value:function(){return this.videoPlayer_?this.videoPlayer_.getVideoFrame():null}},{key:\"getMediaStream\",value:function(){return this.mediaStream_}},{key:\"setMediaStream\",value:function(e){e!==this.mediaStream_&&(this.mediaStream_=e)}},{key:\"setHasVideo\",value:function(e){this.hasVideo_=e,this.isPlaying_&&(e?(this.log_.info(\"stream updated, play video\"),this.playVideo()):(this.log_.info(\"stream updated, stop video\"),this.stopVideo()))}},{key:\"setHasAudio\",value:function(e){this.hasAudio_=e,this.isPlaying_&&(e?(this.log_.info(\"stream updated, play audio\"),this.playAudio()):(this.log_.info(\"stream updated, stop audio\"),this.stopAudio()))}},{key:\"on\",value:function(e,t){this.emitter_.on(e,t)}},{key:\"isRemote\",value:function(){return this.isRemote_}}]),e}(),Xl=function(e){function t(e){var n;et(this,t);var r=it({},e,{isRemote:1,type:e.type});return(n=dt(this,at(t).call(this,r))).isInSubscriptionCycle_=0,n}return ot(t,Ql),nt(t,[{key:\"getType\",value:function(){return lt(at(t.prototype),\"getType\",this).call(this)}},{key:\"setInSubscriptionCycle\",value:function(e){this.isInSubscriptionCycle_=e}},{key:\"isInSubscriptionCycle\",value:function(){return this.isInSubscriptionCycle_}}]),t}(),Zl={HOST:\"host\",SRFLX:\"srflx\",PRFLX:\"prflx\",RELAY:\"relay\"},ep={TCP:\"tcp\",UDP:\"udp\"},tp=function(e){var t=new RegExp(\"(?:a=)?candidate:([a-zA-Z0-9\\\\+\\\\/]+)\\\\s([0-9]{1,5})\\\\s([0-9a-zA-Z\\\\-\\\\.!\\\\%\\\\*_\\\\+\\\\`\\\\'\\\\~]+)\\\\s([0-9]{1,10})\\\\s((?:[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3})|(?:\\\\:?(?:[0-9a-fA-F]{0,4}\\\\:?)+))\\\\s([0-9]{1,5})\\\\styp\\\\s([0-9a-zA-Z\\\\-\\\\.!\\\\%\\\\*_\\\\+\\\\`\\\\'\\\\~]+)(?:\\\\sraddr\\\\s((?:[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3})|(?:\\\\:?(?:[0-9a-fA-F]{0,4}\\\\:?)+))\\\\srport\\\\s([0-9]{1,5}))?(?:\\\\sgeneration\\\\s(\\\\d+))?\"),n=e.match(t);if(!n)return Hn.warn(\"parseIceCandidate(): parsed is empty: \"+n),null;for(var r=[\"foundation\",\"component_id\",\"transport\",\"priority\",\"localIP\",\"localPort\",\"type\",\"remoteIP\",\"remotePort\",\"generation\"],i={},o=0;o<r.length;o++)i[r[o]]=n[o+1];return function(e){e.type.toUpperCase()in Zl&&e.transport.toUpperCase()}(i),i},np=function(e){var t=e.split(\".\");return 256*parseInt(t[0])*256*256+256*parseInt(t[1])*256+256*parseInt(t[2])+parseInt(t[3])},rp=function(e,t,n){return e>=t&&e<=n},ip=t(function(e){var t=e.exports={v:[{name:\"version\",reg:/^(\\d*)$/}],o:[{name:\"origin\",reg:/^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,names:[\"username\",\"sessionId\",\"sessionVersion\",\"netType\",\"ipVer\",\"address\"],format:\"%s %s %d %s IP%d %s\"}],s:[{name:\"name\"}],i:[{name:\"description\"}],u:[{name:\"uri\"}],e:[{name:\"email\"}],p:[{name:\"phone\"}],z:[{name:\"timezones\"}],r:[{name:\"repeats\"}],t:[{name:\"timing\",reg:/^(\\d*) (\\d*)/,names:[\"start\",\"stop\"],format:\"%d %d\"}],c:[{name:\"connection\",reg:/^IN IP(\\d) (\\S*)/,names:[\"version\",\"ip\"],format:\"IN IP%d %s\"}],b:[{push:\"bandwidth\",reg:/^(TIAS|AS|CT|RR|RS):(\\d*)/,names:[\"type\",\"limit\"],format:\"%s:%s\"}],m:[{reg:/^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,names:[\"type\",\"port\",\"protocol\",\"payloads\"],format:\"%s %d %s %s\"}],a:[{push:\"rtp\",reg:/^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,names:[\"payload\",\"codec\",\"rate\",\"encoding\"],format:function(e){return e.encoding?\"rtpmap:%d %s/%s/%s\":e.rate?\"rtpmap:%d %s/%s\":\"rtpmap:%d %s\"}},{push:\"fmtp\",reg:/^fmtp:(\\d*) ([\\S| ]*)/,names:[\"payload\",\"config\"],format:\"fmtp:%d %s\"},{name:\"control\",reg:/^control:(.*)/,format:\"control:%s\"},{name:\"rtcp\",reg:/^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,names:[\"port\",\"netType\",\"ipVer\",\"address\"],format:function(e){return null!=e.address?\"rtcp:%d %s IP%d %s\":\"rtcp:%d\"}},{push:\"rtcpFbTrrInt\",reg:/^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,names:[\"payload\",\"value\"],format:\"rtcp-fb:%d trr-int %d\"},{push:\"rtcpFb\",reg:/^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,names:[\"payload\",\"type\",\"subtype\"],format:function(e){return null!=e.subtype?\"rtcp-fb:%s %s %s\":\"rtcp-fb:%s %s\"}},{push:\"ext\",reg:/^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,names:[\"value\",\"direction\",\"encrypt-uri\",\"uri\",\"config\"],format:function(e){return\"extmap:%d\"+(e.direction?\"/%s\":\"%v\")+(e[\"encrypt-uri\"]?\" %s\":\"%v\")+\" %s\"+(e.config?\" %s\":\"\")}},{push:\"crypto\",reg:/^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,names:[\"id\",\"suite\",\"config\",\"sessionConfig\"],format:function(e){return null!=e.sessionConfig?\"crypto:%d %s %s %s\":\"crypto:%d %s %s\"}},{name:\"setup\",reg:/^setup:(\\w*)/,format:\"setup:%s\"},{name:\"mid\",reg:/^mid:([^\\s]*)/,format:\"mid:%s\"},{name:\"msid\",reg:/^msid:(.*)/,format:\"msid:%s\"},{name:\"ptime\",reg:/^ptime:(\\d*)/,format:\"ptime:%d\"},{name:\"maxptime\",reg:/^maxptime:(\\d*)/,format:\"maxptime:%d\"},{name:\"direction\",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:\"icelite\",reg:/^(ice-lite)/},{name:\"iceUfrag\",reg:/^ice-ufrag:(\\S*)/,format:\"ice-ufrag:%s\"},{name:\"icePwd\",reg:/^ice-pwd:(\\S*)/,format:\"ice-pwd:%s\"},{name:\"fingerprint\",reg:/^fingerprint:(\\S*) (\\S*)/,names:[\"type\",\"hash\"],format:\"fingerprint:%s %s\"},{push:\"candidates\",reg:/^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,names:[\"foundation\",\"component\",\"transport\",\"priority\",\"ip\",\"port\",\"type\",\"raddr\",\"rport\",\"tcptype\",\"generation\",\"network-id\",\"network-cost\"],format:function(e){var t=\"candidate:%s %d %s %d %s %d typ %s\";return t+=null!=e.raddr?\" raddr %s rport %d\":\"%v%v\",t+=null!=e.tcptype?\" tcptype %s\":\"%v\",null!=e.generation&&(t+=\" generation %d\"),t+=null!=e[\"network-id\"]?\" network-id %d\":\"%v\",t+=null!=e[\"network-cost\"]?\" network-cost %d\":\"%v\"}},{name:\"endOfCandidates\",reg:/^(end-of-candidates)/},{name:\"remoteCandidates\",reg:/^remote-candidates:(.*)/,format:\"remote-candidates:%s\"},{name:\"iceOptions\",reg:/^ice-options:(\\S*)/,format:\"ice-options:%s\"},{push:\"ssrcs\",reg:/^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,names:[\"id\",\"attribute\",\"value\"],format:function(e){var t=\"ssrc:%d\";return null!=e.attribute&&(t+=\" %s\",null!=e.value&&(t+=\":%s\")),t}},{push:\"ssrcGroups\",reg:/^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,names:[\"semantics\",\"ssrcs\"],format:\"ssrc-group:%s %s\"},{name:\"msidSemantic\",reg:/^msid-semantic:\\s?(\\w*) (\\S*)/,names:[\"semantic\",\"token\"],format:\"msid-semantic: %s %s\"},{push:\"groups\",reg:/^group:(\\w*) (.*)/,names:[\"type\",\"mids\"],format:\"group:%s %s\"},{name:\"rtcpMux\",reg:/^(rtcp-mux)/},{name:\"rtcpRsize\",reg:/^(rtcp-rsize)/},{name:\"sctpmap\",reg:/^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,names:[\"sctpmapNumber\",\"app\",\"maxMessageSize\"],format:function(e){return null!=e.maxMessageSize?\"sctpmap:%s %s %s\":\"sctpmap:%s %s\"}},{name:\"xGoogleFlag\",reg:/^x-google-flag:([^\\s]*)/,format:\"x-google-flag:%s\"},{push:\"rids\",reg:/^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,names:[\"id\",\"direction\",\"params\"],format:function(e){return e.params?\"rid:%s %s %s\":\"rid:%s %s\"}},{push:\"imageattrs\",reg:new RegExp(\"^imageattr:(\\\\d+|\\\\*)[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?\"),names:[\"pt\",\"dir1\",\"attrs1\",\"dir2\",\"attrs2\"],format:function(e){return\"imageattr:%s %s %s\"+(e.dir2?\" %s %s\":\"\")}},{name:\"simulcast\",reg:new RegExp(\"^simulcast:(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?$\"),names:[\"dir1\",\"list1\",\"dir2\",\"list2\"],format:function(e){return\"simulcast:%s %s\"+(e.dir2?\" %s %s\":\"\")}},{name:\"simulcast_03\",reg:/^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,names:[\"value\"],format:\"simulcast: %s\"},{name:\"framerate\",reg:/^framerate:(\\d+(?:$|\\.\\d+))/,format:\"framerate:%s\"},{name:\"sourceFilter\",reg:/^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,names:[\"filterMode\",\"netType\",\"addressTypes\",\"destAddress\",\"srcList\"],format:\"source-filter: %s %s %s %s %s\"},{name:\"bundleOnly\",reg:/^(bundle-only)/},{name:\"label\",reg:/^label:(.+)/,format:\"label:%s\"},{name:\"sctpPort\",reg:/^sctp-port:(\\d+)$/,format:\"sctp-port:%s\"},{name:\"maxMessageSize\",reg:/^max-message-size:(\\d+)$/,format:\"max-message-size:%s\"},{push:\"invalid\",names:[\"value\"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format=\"%s\")})})}),op=(ip.v,ip.o,ip.s,ip.i,ip.u,ip.e,ip.p,ip.z,ip.r,ip.t,ip.c,ip.b,ip.m,ip.a,t(function(e,t){var n=function(e){return String(Number(e))===e?Number(e):e},r=function(e,t,r){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,r,i){if(i&&!r)t[i]=n(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(t[r[o]]=n(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],o=t;return e.split(/(\\r\\n|\\r|\\n)/).filter(i).forEach(function(e){var t=e[0],i=e.slice(2);\"m\"===t&&(n.push({rtp:[],fmtp:[]}),o=n[n.length-1]);for(var a=0;a<(ip[t]||[]).length;a+=1){var s=ip[t][a];if(s.reg.test(i))return r(s,o,i)}}),t.media=n,t};var o=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(\" \").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(\" \").map(n),i=0;i<r.length;i+=3)t.push({component:r[i],ip:r[i+1],port:r[i+2]});return t},t.parseImageAttributes=function(e){return e.split(\" \").map(function(e){return e.substring(1,e.length-1).split(\",\").reduce(o,{})})},t.parseSimulcastStreamList=function(e){return e.split(\";\").map(function(e){return e.split(\",\").map(function(e){var t,r=0;return\"~\"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=1),{scid:t,paused:r}})})}})),ap=(op.parse,op.parseParams,op.parseFmtpConfig,op.parsePayloads,op.parseRemoteCandidates,op.parseImageAttributes,op.parseSimulcastStreamList,/%[sdv%]/g),sp=function(e){var t=1,n=arguments,r=n.length;return e.replace(ap,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case\"%%\":return\"%\";case\"%s\":return String(i);case\"%d\":return Number(i);case\"%v\":return\"\"}})},cp=function(e,t,n){var r=[e+\"=\"+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return sp.apply(null,r)},up=[\"v\",\"o\",\"s\",\"i\",\"u\",\"e\",\"p\",\"c\",\"b\",\"t\",\"r\",\"z\",\"a\"],dp=[\"i\",\"c\",\"b\",\"a\"],lp={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=\" \"),e.media.forEach(function(e){null==e.payloads&&(e.payloads=\"\")});var n=t.outerOrder||up,r=t.innerOrder||dp,i=[];return n.forEach(function(t){ip[t].forEach(function(n){n.name in e&&null!=e[n.name]?i.push(cp(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){i.push(cp(t,n,e))})})}),e.media.forEach(function(e){i.push(cp(\"m\",ip.m[0],e)),r.forEach(function(t){ip[t].forEach(function(n){n.name in e&&null!=e[n.name]?i.push(cp(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){i.push(cp(t,n,e))})})})}),i.join(\"\\r\\n\")+\"\\r\\n\"},parse:op.parse,parseFmtpConfig:op.parseFmtpConfig,parseParams:op.parseParams,parsePayloads:op.parsePayloads,parseRemoteCandidates:op.parseRemoteCandidates,parseImageAttributes:op.parseImageAttributes,parseSimulcastStreamList:op.parseSimulcastStreamList},pp=function(e){return lp.parse(e)},fp=function(e){return e>>16&255},hp={voiceActivityDetection:0},mp=function(){function e(t){et(this,e),this.userId_=t.userId,this.tinyId_=t.tinyId,this.client_=t.client,this.sdpSemantics_=t.client.getSdpSemantics(),this.iceServers_=t.iceServers,this.isUplink_=t.isUplink,this.log_=new El({id:\"n|\"+this.userId_,direction:this.isUplink_?\"local\":\"remote\",type:\"\"}),this.signalChannel_=t.signalChannel,this.peerConnection_=null,this.connectTimer_=-1,this.remoteStreams_=new Map,this.localStream_=null,this.iceCandidates_=[],this.isIceCandidateSent_=0,this.isIceProbeEnded_=0,this.isSdpExchanged_=0,this.waitForUpdatedAnswer_=0,this.mutedState_=0,this.subscribeState_={audio:1,video:1,auxiliary:1},this.pendingSubscription_=[],this.pendingStreams_=[],this.subscriptionTimeout_=-1,this.subscriptionRetryCount_=0,this.isSubscriptionPending_=0,this.sentSubscriptionAfterConnected_=0,this.emitter_=new ud}var t,n,r,i,o,a;return nt(e,[{key:\"initialize\",value:function(){var e={sdpSemantics:this.sdpSemantics_,iceServers:this.client_.getIceServers(),bundlePolicy:\"max-bundle\",rtcpMuxPolicy:\"require\",tcpCandidatePolicy:\"disable\",IceTransportsType:\"nohost\"};this.peerConnection_=new RTCPeerConnection(e),this.peerConnection_.onicecandidate=this.onIceCandidate.bind(this),this.peerConnection_.oniceconnectionstatechange=this.onIceConnectionStateChange.bind(this),this.peerConnection_.onconnectionstatechange=this.onConnectionStateChange.bind(this),this.peerConnection_.onicegatheringstatechange=this.onIceGatheringStateChange.bind(this),this.isUplink_||(this.peerConnection_.ontrack=this.onTrack.bind(this)),this.installSignalChannelEvents()}},{key:\"publish\",value:function(e,t){var n=this;this.localStream_=e;var r=e.getMediaStream();this.log_.info(\"is publishing stream: \".concat(e.getId())),r.getTracks().forEach(function(e){n.peerConnection_.addTrack(e,r)}),this.updateMediaSettings(r),this.exchangeOffer(t)}},{key:\"updateMediaSettings\",value:function(e){var t=this,n={EncVideoCodec:\"H264\",EncVideoWidth:0,EncVideoHeight:0,EncVideoBr:\"0\",EncVideoFps:0,EncAudioCodec:\"opus\",EncAudioFS:0,EncAudioCh:0,EncAudioBr:\"0\"};\"getSettings\"in MediaStreamTrack.prototype?e.getTracks().forEach(function(e){var r=e.getSettings();if(\"audio\"===e.kind){var i=1;r.channelCount&&(i=r.channelCount),n.EncAudioCh=i,n.EncAudioBr=\"\".concat(1e3*t.localStream_.getAudioBitrate()),n.EncAudioFS=r.sampleRate}else\"video\"===e.kind&&(n.EncVideoWidth=r.width,n.EncVideoHeight=r.height,n.EncVideoFps=r.frameRate,n.EncVideoBr=\"\".concat(1e3*t.localStream_.getVideoBitrate()))}):n=this.getMediaSettingsFromProfile(n),this.log_.info(\"updateMediaSettings: \"+JSON.stringify(n)),this.signalChannel_.send(Td,n)}},{key:\"getMediaSettingsFromProfile\",value:function(e){var t=this.localStream_;if(t){if(t.getAudioTrack()){var n=t.getAudioProfile();e.EncAudioCh=n.channelCount,e.EncAudioBr=\"\".concat(1e3*n.bitrate),e.EncAudioFS=n.sampleRate}if(t.getVideoTrack()){var r=t.getVideoProfile();e.EncVideoWidth=r.width,e.EncVideoHeight=r.height,e.EncVideoFps=r.frameRate,e.EncVideoBr=\"\".concat(1e3*r.bitrate)}}return e}},{key:\"replaceStream\",value:(a=Ze(regeneratorRuntime.mark(function e(t){var n,r,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.peerConnection_){e.next=8;break}return n=t.getVideoTracks(),r=t.getAudioTracks(),(this.peerConnection_.getSenders()||[]).forEach(function(e){e.track&&(\"video\"===e.track.kind?e.replaceTrack&&n.length>0?e.replaceTrack(n[0]):(i.peerConnection_.removeTrack(e),n.length>0&&i.peerConnection_.addTrack(n[0],t)):\"audio\"===e.track.kind&&(e.replaceTrack&&r.length>0?e.replaceTrack(r[0]):(i.peerConnection_.removeTrack(e),r.length>0&&i.peerConnection_.addTrack(r[0],t))))}),this.updateMediaSettings(t),e.next=8,this.updateOffer();case 8:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:\"addTrack\",value:(o=Ze(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.peerConnection_){e.next=7;break}return this.log_.info(\"is adding \".concat(t.kind,\" track to current published local stream\")),n=this.localStream_.getMediaStream(),this.peerConnection_.addTrack(t,n),this.updateMediaSettings(n),e.next=7,this.updateOffer();case 7:case\"end\":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:\"removeTrack\",value:(i=Ze(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.peerConnection_){e.next=8;break}if(this.log_.info(\"is removing \".concat(t.kind,\" track from current published local stream\")),!(n=this.peerConnection_.getSenders().find(function(e){return e.track===t}))){e.next=8;break}return this.peerConnection_.removeTrack(n),this.updateMediaSettings(this.localStream_.getMediaStream()),e.next=8,this.updateOffer();case 8:case\"end\":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:\"isReplaceTrackAvailable\",value:function(){return\"RTCRtpSender\"in window&&\"replaceTrack\"in window.RTCRtpSender.prototype}},{key:\"replaceTrack\",value:(r=Ze(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isReplaceTrackAvailable()){e.next=2;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"replaceTrack is not supported in this browser, please use switchDevice or addTrack instead\"});case 2:if(this.peerConnection_){e.next=4;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"replaceTrack() is only valid after the LocalStream has been published\"});case 4:if(0!==(n=this.peerConnection_.getSenders()).length){e.next=7;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"replaceTrack() is only valid after the LocalStream has been published\"});case 7:n.forEach(function(e){e.track&&e.track.kind===t.kind&&(r.log_.info(\"is replacing \".concat(t.kind,\" track to current published local stream\")),e.replaceTrack(t))});case 8:case\"end\":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:\"close\",value:function(){var e=this;this.log_.info(\"closing connection\"),-1!==this.connectTimer_&&(clearTimeout(this.connectTimer_),this.connectTimer_=-1),-1!==this.subscriptionTimeout_&&(clearTimeout(this.subscriptionTimeout_),this.subscriptionTimeout_=-1),this.peerConnection_&&(this.peerConnection_.close(),this.peerConnection_=null),this.isUplink_||(this.remoteStreams_.forEach(function(t,n,r){var i=t;i.setConnection(null),e.emitter_.emit($d,{stream:i})}),this.remoteStreams_.clear()),this.uninstallSignalChannelEvents()}},{key:\"installSignalChannelEvents\",value:function(){this.isUplink_&&this.signalChannel_.on(hd.NEW_REMOTE_SDP,this.onNewRemoteSdp,this),this.signalChannel_.on(hd.NEW_ICE_CANDIDATE,this.onNewIceCandidate,this),this.isUplink_||(this.signalChannel_.on(hd.UPDATE_REMOTE_SDP,this.onUpdateRemoteSdp,this),this.signalChannel_.on(hd.UPDATE_AUDIO_SSRC,this.onUpdateAudioSSRC,this),this.signalChannel_.on(hd.UPDATE_VIDEO_SSRC,this.onUpdateVideoSSRC,this),this.signalChannel_.on(hd.SUBSCRIBE_ACK,this.onSubscription,this))}},{key:\"uninstallSignalChannelEvents\",value:function(){this.isUplink_&&this.signalChannel_.removeListener(hd.NEW_REMOTE_SDP,this.onNewRemoteSdp,this),this.signalChannel_.removeListener(hd.NEW_ICE_CANDIDATE,this.onNewIceCandidate,this),this.isUplink_||(this.signalChannel_.removeListener(hd.UPDATE_REMOTE_SDP,this.onUpdateRemoteSdp,this),this.signalChannel_.removeListener(hd.UPDATE_AUDIO_SSRC,this.onUpdateAudioSSRC,this),this.signalChannel_.removeListener(hd.UPDATE_VIDEO_SSRC,this.onUpdateVideoSSRC,this),this.signalChannel_.removeListener(hd.SUBSCRIBE_ACK,this.onSubscription,this))}},{key:\"onNewRemoteSdp\",value:function(e){if(this.hitTest(e.data.srctinyid)){var t=e.data.content;this.acceptAnswer(t)}}},{key:\"onNewIceCandidate\",value:function(e){this.hitTest(e.data.srctinyid)&&this.addIceCandidate(e.data.content)}},{key:\"onUpdateRemoteSdp\",value:function(e){var t=e.data.content;if(this.hitTest(t.srctinyid)){this.log_.info(\"is updating remote sdp offer\");var n=t.newSdp;this.updateRemoteDescription(n)}}},{key:\"onUpdateAudioSSRC\",value:function(e){var t=e.data.content;if(this.hitTest(t.srctinyid)){this.log_.info(\"is updating audio ssrc\");var n=t.newSdp;this.updateRemoteDescription(n)}}},{key:\"onUpdateVideoSSRC\",value:function(e){var t=e.data.content;if(this.hitTest(t.srctinyid)){this.log_.info(\"is updating video ssrc\");var n=t.newSdp;this.updateRemoteDescription(n)}}},{key:\"onTrack\",value:function(e){var t=e.streams[0],n=e.track;if(this.log_.info(\"ontrack() kind: \".concat(n.kind,\" id: \").concat(n.id,\" streamId: \").concat(t.id)),\"unified-plan\"===this.sdpSemantics_){var r=function(e){var t=lp.parse(e),n={audio:[],video:[]};return t.media.forEach(function(e){if(e.ssrcs){var t=e.ssrcs[0].id>>16&255;if(\"audio\"===e.type)n.audio.push(Gd);else if(\"video\"==e.type){var r=t===Hd?Gd:Bd;n.video.push(r)}}}),n}(this.peerConnection_.remoteDescription.sdp);if(\"audio\"===n.kind){if(0===r.audio.length||t.id!==Gd)return void this.log_.debug(\"skip this invalid audio track\")}else if(-1===r.video.indexOf(t.id))return void this.log_.debug(\"skip this invalid video track: \".concat(n.id,\"  msid: \").concat(t.id))}xd({eventType:\"ontrack\",kind:n.kind});var i=0,o=this.remoteStreams_.get(t.id);if(void 0===o){var a=t.id===Gd?\"main\":\"auxiliary\";(o=new Xl({type:a,userId:this.userId_,client:this.client_})).setConnection(this),this.remoteStreams_.set(t.id,o),i=1}o.setMediaStream(t),\"audio\"===n.kind?(o.hasAudio()&&o.isPlaying()&&(this.log_.debug(\"already has an audio track, restart audio player with the new track\"),o.restartAudio()),o.setHasAudio(1)):(o.hasVideo()&&o.isPlaying()&&(this.log_.debug(\"already has an video track, restart video player with the new track\"),o.restartVideo()),o.setHasVideo(1)),i?this.emitter_.emit(Kd,{stream:o}):this.emitter_.emit(Yd,{stream:o})}},{key:\"isRtpSenderAvailable\",value:function(){return\"RTCRtpSender\"in window&&\"setParameters\"in window.RTCRtpSender.prototype}},{key:\"setBandwidth\",value:(n=Ze(regeneratorRuntime.mark(function e(t,n){var r,i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUplink_){e.next=2;break}return e.abrupt(\"return\");case 2:void 0===n&&(n=\"video\"),this.isRtpSenderAvailable()&&(r=this.peerConnection_.getSenders().find(function(e){return e.track&&e.track.kind===n}))&&((i=r.getParameters()).encodings||(i.encodings=[{}]),\"unlimited\"===t?delete i.encodings[0].maxBitrate:i.encodings[0].maxBitrate=1e3*t,r.setParameters(i).then(function(){o.log_.debug(n+\" bandwidth was set to \"+t+\" kbps\")}).catch(function(e){return o.log_.error(\"failed to set bandwidth: \"+e)}));case 4:case\"end\":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:\"updateVideoBandwidthRestriction\",value:function(e,t){return e=-1===e.indexOf(\"b=AS:\")?e.replace(/m=video (.*)\\r\\nc=IN (.*)\\r\\n/,\"m=video $1\\r\\nc=IN $2\\r\\nb=AS:\"+t+\"\\r\\n\"):e.replace(new RegExp(\"b=AS:.*\\r\\n\"),\"b=AS:\"+t+\"\\r\\n\")}},{key:\"updateAudioBandwidthRestriction\",value:function(e,t){return e=e.replace(/m=audio (.*)\\r\\nc=IN (.*)\\r\\n/,\"m=audio $1\\r\\nc=IN $2\\r\\nb=AS:\"+t+\"\\r\\n\")}},{key:\"removeBandwidthRestriction\",value:function(e){return e.replace(/b=AS:.*\\r\\n/,\"\").replace(/b=TIAS:.*\\r\\n/,\"\")}},{key:\"exchangeOffer\",value:function(e){var t=this;this.peerConnection_.createOffer(hp).then(function(e){return t.peerConnection_.setLocalDescription(e)}).then(function(){t.log_.info(\"createOffer success, sending offer to remote server\");var e=t.peerConnection_.localDescription;t.log_.debug(\"sending sdp offer: \"+e.sdp),t.signalChannel_.send(md,e,0),xd({eventType:\"setLocalDescription\",kind:\"offer\",result:\"success\"})}).catch(function(n){xd({eventType:\"setLocalDescription\",kind:\"offer\",result:\"failed\"}),t.log_.error(\"failed to create offer\"),e(new Ed({code:Rd.CREATE_OFFER_FAILED,message:\"failed to create offer\"}))})}},{key:\"updateOffer\",value:(t=Ze(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=\"\",e.prev=1,e.next=4,this.peerConnection_.createOffer(hp);case 4:return t=e.sent,e.next=7,this.peerConnection_.setLocalDescription(t);case 7:n=this.peerConnection_.localDescription,this.log_.info(\"createOffer success, sending updated offer to remote server\"),this.log_.debug(\"updatedOffer: \"+n.sdp),this.signalChannel_.send(vd,n,0),this.waitForUpdatedAnswer_=1,xd({eventType:\"setLocalDescription\",kind:\"offer\",result:\"success\"}),e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(1),xd({eventType:\"setLocalDescription\",kind:\"offer\",result:\"failed\"}),this.log_.error(\"failed to create updated sdp offer\"),new Ed({code:Rd.CREATE_OFFER_FAILED,message:\"failed to create updated sdp offer\"});case 20:case\"end\":return e.stop()}},e,this,[[1,15]])})),function(){return t.apply(this,arguments)})},{key:\"acceptAnswer\",value:function(e){var t=this,n=this.localStream_.getVideoBitrate(),r=this.updateVideoBandwidthRestriction(e.sdp,n),i=this.localStream_.getAudioBitrate();r=this.updateAudioBandwidthRestriction(r,i);var o={type:e.type,sdp:r};this.peerConnection_.setRemoteDescription(o).then(function(){t.log_.debug(\"accepted anwswer: \"+r),t.setBandwidth(i,\"audio\"),t.setBandwidth(n,\"video\"),t.waitForUpdatedAnswer_||(t.log_.info(\"accepted remote answer, fired stream-published event\"),t.emitter_.emit(Qd,{stream:t.localStream_}),t.isSdpExchanged_=1,t.sendIceCandidate()),t.waitForUpdatedAnswer_&&(t.waitForUpdatedAnswer_=0),xd({eventType:\"setRemoteDescription\",kind:\"answer\",result:\"success\"})},function(e){xd({eventType:\"setRemoteDescription\",kind:\"answer\",result:\"failed\"}),t.log_.error(\"failed to accept remote answer \"+e)})}},{key:\"onIceCandidate\",value:function(e){if(e.candidate){var t,n,r,i,o,a,s,c,u,d,l=e.candidate;if(this.log_.info(\"onIceCandidate() sdpMLineIndex: \"+l.sdpMLineIndex+\" sdpMid: \"+l.sdpMid+\" candidate: \"+l.candidate),l.candidate){var p=tp(l.candidate);!p||p.transport!==ep.UDP||p.type!==Zl.SRFLX&&(p.type!==Zl.HOST||-1!==p.localIP.indexOf(\":\")||(t=p.localIP,n=np(t),r=np(\"10.0.0.0\"),i=np(\"10.255.255.255\"),o=np(\"172.16.0.0\"),a=np(\"172.31.255.255\"),s=np(\"192.168.0.0\"),c=np(\"192.168.255.255\"),u=np(\"127.0.0.0\"),d=np(\"127.255.255.255\"),rp(n,r,i)||rp(n,o,a)||rp(n,s,c)||rp(n,u,d)))||(this.iceCandidates_.push({candidate:l,type:p.type}),this.sendIceCandidate())}}else if(this.log_.debug(\"onIceCandidate ended\"),this.isIceProbeEnded_=1,0===this.iceCandidates_.length){var f=\"no valid ice candidate found\";xd({eventType:\"getIceCandidate\",result:\"failed\"}),this.log_.error(f),this.emitter_.emit(el,new Ed({message:f,code:Rd.ICE_TRANSPORT_ERROR}))}else this.sendIceCandidate()}},{key:\"findCandidate\",value:function(e){var t=this.iceCandidates_.find(function(t){return t.type===e});if(t)return t.candidate}},{key:\"sendIceCandidate\",value:function(){if(!this.isIceCandidateSent_&&this.isSdpExchanged_){var e=this.findCandidate(Zl.SRFLX);if(e){this.log_.info(\"send ice-candidate to remote server: \"+e.candidate);var t=this.isUplink_?0:this.tinyId_;this.signalChannel_.send(gd,e,t),this.isIceCandidateSent_=1,xd({eventType:\"getIceCandidate\",result:\"success\"})}if(!this.isIceCandidateSent_&&(e=this.findCandidate(Zl.HOST))){this.log_.info(\"send ice-candidate to remote server: \"+e.candidate);var n=this.isUplink_?0:this.tinyId_;this.signalChannel_.send(gd,e,n),this.isIceCandidateSent_=1,xd({eventType:\"getIceCandidate\",result:\"success\"})}}}},{key:\"onIceConnectionStateChange\",value:function(e){this.log_.info(\"onIceConnectionStateChange() iceConnectionState: \"+e.target.iceConnectionState+\" iceGatheringState: \"+e.target.iceGatheringState)}},{key:\"failIceConnectionForTest\",value:function(){this.log_.warn(\"failIceConnectionForTest()\"),this.emitter_.emit(el,new Ed({message:\"fake ICE failure fired\",code:Rd.ICE_TRANSPORT_ERROR}))}},{key:\"onConnectionStateChange\",value:function(e){var t=this;if(this.log_.info(\"onConnectionStateChange() connectionState: \"+e.target.connectionState),\"connecting\"===e.target.connectionState){this.connectTimer_=setTimeout(function(){var e=\"DTLS Transport connection timeout (\".concat(10,\"s)\");xd({eventType:\"iceConnectionState\",result:\"failed\"}),t.log_.error(e),t.emitter_.emit(el,new Ed({message:e,code:Rd.ICE_TRANSPORT_ERROR}))},1e4),this.emitter_.emit(tl,{state:\"connecting\"})}else clearTimeout(this.connectTimer_),this.connectTimer_=-1;if(\"failed\"===e.target.connectionState){var n=\"ICE/DTLS Transport connection failed\";xd({eventType:\"iceConnectionState\",result:\"failed\"}),this.log_.error(n),this.emitter_.emit(el,new Ed({message:n,code:Rd.ICE_TRANSPORT_ERROR}))}if((\"connected\"===e.target.connectionState||\"completed\"===e.target.connectionState)&&(xd({eventType:\"iceConnectionState\",result:\"success\"}),this.emitter_.emit(tl,{state:\"connected\"}),!this.sentSubscriptionAfterConnected_&&this.pendingSubscription_.length>0)){this.log_.info(\"send pending subscription after RTCPeerConnection is connected\");var r=this.pendingSubscription_[0];this.doSendSubscription(r.data,r.stream),this.sentSubscriptionAfterConnected_=1}}},{key:\"onIceGatheringStateChange\",value:function(e){this.log_.debug(\"onIceGatheringStateChange() iceGatheringState: \"+e.target.iceGatheringState)}},{key:\"addIceCandidate\",value:function(e){var t=this;this.log_.info(\"add remote ice candidate: \"+e.candidate),this.peerConnection_.addIceCandidate(e).then(function(){xd({eventType:\"addIceCandidate\",result:\"success\"})}).catch(function(e){xd({eventType:\"addIceCandidate\",result:\"failed\"}),t.log_.error(\"failed to addIceCandidate \"+e)})}},{key:\"hitTest\",value:function(e){return(0===e||\"0\"===e)&&this.isUplink_||e===this.tinyId_}},{key:\"updateRemoteDescription\",value:function(e){var t=this;this.log_.debug(\"updateRemoteDescription() \".concat(e.sdp));var n=this.peerConnection_.remoteDescription.sdp;this.peerConnection_.setRemoteDescription(e).then(function(){if(xd({eventType:\"setRemoteDescription\",kind:\"offer\",result:\"success\"}),t.log_.info(\"updateRemoteDescription success\"),\"unified-plan\"===t.sdpSemantics_){var r=function(e,t){var n=lp.parse(e).media,r=lp.parse(t).media;return{added:r.filter(function(e){var t=n.find(function(t){return t.mid===e.mid});return(void 0===t||void 0===t.ssrcs)&&e.ssrcs}),removed:n.filter(function(e){var t=r.find(function(t){return t.mid===e.mid});return(void 0===t||void 0===t.ssrcs)&&e.ssrcs})}}(n,e.sdp);t.addRemoteTrack(r.added),t.removeRemoteTrack(r.removed)}else t.removeRemoteTrackLegacy(n,e.sdp);var i=t.pendingStreams_.shift();i&&(t.log_.debug(\"mark \".concat(i.getType(),\" stream exit subscription cycle\")),i.setInSubscriptionCycle(0))}).catch(function(e){xd({eventType:\"setRemoteDescription\",kind:\"offer\",result:\"failed\"}),t.log_.error(\"updateRemoteDescription failed \".concat(e))})}},{key:\"addRemoteTrack\",value:function(e){var t=this;e.forEach(function(e){var n=e.mid,r=fp(e.ssrcs[0].id)===zd?Bd:Gd,i=t.peerConnection_.getReceivers()[n];if(i&&i.track){t.log_.info(\"add \".concat(i.track.kind,\" track \").concat(i.track.id));var o=t.remoteStreams_.get(r);if(o)o.getMediaStream().addTrack(i.track),\"audio\"===i.track.kind?o.setHasAudio(1):o.setHasVideo(1),t.emitter_.emit(Yd,{stream:o});else{t.log_.debug(\"remoteStream for msid:\".concat(r,\" not exist\"));var a=new MediaStream;a.addTrack(i.track),(o=new Xl({type:r===Gd?\"main\":\"auxiliary\",userId:t.userId_,client:t.client_})).setMediaStream(a),o.setConnection(t),t.remoteStreams_.set(r,o),\"audio\"===i.track.kind?o.setHasAudio(1):o.setHasVideo(1),t.emitter_.emit(\"stream-added\",{stream:o})}}})}},{key:\"removeRemoteTrack\",value:function(e){var t=this;e.forEach(function(e){var n=fp(e.ssrcs[0].id),r=n===Hd?\"video\":n===zd?\"auxVideo\":\"audio\";t.log_.info(\"[\".concat(r,\"] track was removed\"));var i=\"auxVideo\"===r?Bd:Gd,o=t.remoteStreams_.get(i);o&&(i!==Bd&&0!==o.getMediaStream().getTracks().length||o.isInSubscriptionCycle()?(\"audio\"===r?o.setHasAudio(0):o.setHasVideo(0),t.emitter_.emit(Yd,{stream:o})):(t.log_.info(\"remote stream \".concat(i,\" removed\")),t.remoteStreams_.delete(i),t.emitter_.emit($d,{stream:o})))})}},{key:\"removeRemoteTrackLegacy\",value:function(e,t){var n=this,r=pp(e).media,i=pp(t).media;r.filter(function(e){var t,r=i.find(function(t){return t.type===e.type}),o=Hd;if(\"audio\"===e.type)void 0!==r&&void 0!==r.ssrcs||!e.ssrcs||(n.log_.info(\"[audio] track was removed\"),(t=n.remoteStreams_.get(o))&&(0===t.getMediaStream().getTracks().length?t.isInSubscriptionCycle()||(n.log_.info(\"remote stream \".concat(o,\" removed\")),n.remoteStreams_.delete(o),n.emitter_.emit($d,{stream:t})):(t.setHasAudio(0),n.emitter_.emit(Yd,{stream:t}))));else if((void 0===r||void 0===r.ssrcs)&&e.ssrcs||r.ssrcGroups&&e.ssrcGroups&&r.ssrcGroups.length<e.ssrcGroups.length){var a=0,s=0;void 0===r.ssrcs&&2===e.ssrcGroups.length?(n.log_.info(\"[main & aux video] tracks were removed\"),a=1,s=1):void 0===r.ssrcs&&1===e.ssrcGroups.length?(n.log_.info(\"[main video] track was removed\"),a=1):e.ssrcGroups.length>r.ssrcGroups.length&&(n.log_.info(\"[auxiliary video] track was removed\"),s=1),s&&(o=Bd,n.log_.info(\"remote stream \".concat(o,\" removed\")),(t=n.remoteStreams_.get(o))&&!t.isInSubscriptionCycle()&&(n.remoteStreams_.delete(o),n.emitter_.emit($d,{stream:t}))),a&&(o=Gd,(t=n.remoteStreams_.get(o))&&(0===t.getMediaStream().getTracks().length?t.isInSubscriptionCycle()||(n.log_.info(\"remote stream \".concat(o,\" removed\")),n.remoteStreams_.delete(o),n.emitter_.emit($d,{stream:t})):(t.setHasVideo(0),n.emitter_.emit(Yd,{stream:t}))))}})}},{key:\"setRemoteOffer\",value:function(e){var t=this;this.peerConnection_.setRemoteDescription(e).then(function(){return xd({eventType:\"setRemoteDescription\",kind:\"offer\",result:\"success\"}),t.peerConnection_.createAnswer()}).then(function(e){return t.peerConnection_.setLocalDescription(e)}).then(function(){var e=t.peerConnection_.localDescription;t.signalChannel_.send(md,e,t.tinyId_),t.log_.info(\"accepted remote offer and acknowledged answer\"),t.isSdpExchanged_=1,t.sendIceCandidate()}).catch(function(e){xd({eventType:\"setRemoteDescription\",kind:\"offer\",result:\"failed\"}),t.log_.error(\"failed to accept remote offer \"+e)})}},{key:\"setMutedState\",value:function(e,t){if(this.isUplink_){\"audio\"===e?t?this.mutedState_|=4:this.mutedState_&=-5:t?this.mutedState_|=1:this.mutedState_&=-2;var n={srctinyid:0,userid:this.userId_,flag:this.mutedState_};this.log_.info(\"set \".concat(e,\" muted state: [\").concat(t?\"mute\":\"unmute\",\"]\")),this.signalChannel_.send(kd,n)}}},{key:\"onSubscription\",value:function(e){var t=e.data.content,n=t.srctinyid;if(this.hitTest(n)){var r=0===t.errCode?1:0,i=this.pendingSubscription_.shift();if(void 0!==i){this.subscriptionRetryCount_=0,this.isSubscriptionPending_=0,-1!==this.subscriptionTimeout_&&(clearTimeout(this.subscriptionTimeout_),this.subscriptionTimeout_=-1);var o=i.stream;this.log_.info(\"\".concat(o.getType(),\" stream \").concat(i.type,\" result: \").concat(r?\"success\":\"failure\")),\"subscribe\"===i.type?(xd({eventType:\"subscribe\",result:0===t.errCode?\"success\":\"failed\"}),this.emitter_.emit(Xd,{result:r,stream:o})):(xd({eventType:\"unsubscribe\",result:0===t.errCode?\"success\":\"failed\"}),this.emitter_.emit(Zd,{result:r,stream:o}))}if(this.pendingSubscription_.length>0){var a=this.pendingSubscription_[0];this.log_.info(\"schedule a pending subscription\"),this.doSendSubscription(a.data,a.stream)}}}},{key:\"subscribe\",value:function(e,t){if(void 0===t||\"main\"===e.getType()&&void 0!==t.audio&&void 0!==t.video&&t.audio===this.subscribeState_.audio&&t.video===this.subscribeState_.video||\"auxiliary\"===e.getType()&&void 0!==t.video&&this.subscribeState_.auxiliary===t.video)this.emitter_.emit(Xd,{stream:e,result:1});else{var n,r;if(\"main\"===e.getType())void 0!==t.audio&&(this.subscribeState_.audio=t.audio),void 0!==t.video&&(this.subscribeState_.video=t.video),this.subscribeState_.audio?(n=jl,r=\"subscribe audio\"):(n=Vl,r=\"unsubscribe audio\"),this.addSubscriptionEvent(n,r),this.subscribeState_.video?(n=Ml,r=\"subscribe video\"):(n=Ul,r=\"unsubscribe video\"),this.addSubscriptionEvent(n,r);else void 0!==t.video&&(this.subscribeState_.auxiliary=t.video);this.log_.info(\"subscribe \".concat(e.getType(),\" stream with options \").concat(JSON.stringify(t),\" current state: \").concat(JSON.stringify(this.subscribeState_))),this.sendSubscription(e,\"subscribe\")}}},{key:\"unsubscribe\",value:function(e){\"main\"===e.getType()?(this.subscribeState_.audio=0,this.subscribeState_.video=0):this.subscribeState_.auxiliary=0,this.log_.info(\"unsubscribe \".concat(e.getType(),\" stream with \").concat(JSON.stringify(this.subscribeState_))),this.sendSubscription(e,\"unsubscribe\"),this.addSubscriptionEvent(Vl,\"unsubscribe audio\"),this.addSubscriptionEvent(Ul,\"unsubscribe video\")}},{key:\"addSubscriptionEvent\",value:function(e,t){var n=this.client_.getUserId();$l(n,{eventId:e,eventDesc:t,timestamp:(new Date).getTime(),userId:n,tinyId:this.client_.getTinyId(),remoteUserId:this.userId_,remoteTinyId:this.tinyId_})}},{key:\"sendSubscription\",value:function(e,t){var n={srctinyid:this.tinyId_,userid:this.userId_,audio:this.subscribeState_.audio,bigVideo:this.subscribeState_.video,auxVideo:this.subscribeState_.auxiliary};this.pendingSubscription_.length>0?this.log_.debug(\"queue the subscription for later handling\"):this.doSendSubscription(n,e),this.pendingSubscription_.push({stream:e,type:t,data:n}),e.setInSubscriptionCycle(1)}},{key:\"doSendSubscription\",value:function(e,t){var n=this;\"connected\"===this.peerConnection_.connectionState||\"completed\"===this.peerConnection_.connectionState?(t&&this.pendingStreams_.push(t),this.log_.debug(\"doSendSubscription() send SUBSCRIBE command with data: \".concat(JSON.stringify(e))),this.signalChannel_.send(Cd,e),this.isSubscriptionPending_=1,this.subscriptionTimeout_=setTimeout(function(){if(n.isSubscriptionPending_)if(n.log_.debug(\"subscription timeout\"),n.subscriptionRetryCount_+=1,n.subscriptionRetryCount_<=3){n.log_.debug(\"resend subscription\");var e=n.pendingSubscription_[0].data;n.doSendSubscription(e)}else n.log_.error(\"remote server not response to subscription\"),n.pendingSubscription_.shift(),n.pendingStreams_.shift(),n.isSubscriptionPending_=0,n.subscriptionRetryCount_=0,n.emitter_.emit(el,new Ed({code:Rd.SUBSCRIPTION_TIMEOUT,message:\"remote server not response to subscription\"}))},5e3)):this.log_.debug(\"try to send subscription when connectionState \".concat(this.peerConnection_.connectionState))}},{key:\"getPeerConnection\",value:function(){return this.peerConnection_}},{key:\"getUserId\",value:function(){return this.userId_}},{key:\"getTinyId\",value:function(){return this.tinyId_}},{key:\"on\",value:function(e,t){this.emitter_.on(e,t)}}]),e}(),vp=function(){function e(t){et(this,e),this.prevReport_={}}var t,n,r,i;return nt(e,[{key:\"getSenderStats\",value:(i=Ze(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={audio:{bytesSent:0,packetsSent:0,audioLevel:0,totalAudioEnergy:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,frameWidth:0,frameHeight:0,framesSent:0},rtt:0},!(r=t.getPeerConnection())){e.next=13;break}return e.prev=3,e.next=6,r.getStats();case 6:e.sent.forEach(function(e){\"outbound-rtp\"===e.type?\"video\"===e.mediaType?(n.video.bytesSent=e.bytesSent,n.video.packetsSent=e.packetsSent,n.video.framesEncoded=e.framesEncoded):\"audio\"===e.mediaType&&(n.audio.bytesSent=e.bytesSent,n.audio.packetsSent=e.packetsSent):\"candidate-pair\"===e.type?n.rtt=1e3*e.currentRoundTripTime:\"track\"===e.type?(-1!==e.id.indexOf(\"_sender_\")&&void 0!==e.frameWidth&&(n.video.frameWidth=e.frameWidth,n.video.frameHeight=e.frameHeight,n.video.framesSent=e.framesSent),void 0!==e.audioLevel&&(n.audio.audioLevel=e.audioLevel||0)):\"media-source\"===e.type&&\"audio\"===e.kind&&(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Hn.warn(\"failed to getStats on sender connection\");case 13:return e.abrupt(\"return\",n);case 14:case\"end\":return e.stop()}},e,null,[[3,10]])})),function(e){return i.apply(this,arguments)})},{key:\"getReceiverStats\",value:(r=Ze(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={tinyId:t.getTinyId(),userId:t.getUserId(),hasAudio:0,hasVideo:0,audio:{bytesReceived:0,packetsReceived:0,packetsLost:0,jitter:0,audioLevel:0,totalAudioEnergy:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesDecoded:0,frameWidth:0,frameHeight:0}},!(r=t.getPeerConnection())){e.next=13;break}return e.prev=3,e.next=6,r.getStats();case 6:e.sent.forEach(function(e){\"inbound-rtp\"===e.type?\"audio\"===e.mediaType?(n.audio.packetsReceived=e.packetsReceived,n.audio.bytesReceived=e.bytesReceived,n.audio.packetsLost=e.packetsLost,n.audio.jitter=e.jitter,n.hasAudio=1):\"video\"===e.mediaType&&(n.video.packetsReceived=e.packetsReceived,n.video.bytesReceived=e.bytesReceived,n.video.packetsLost=e.packetsLost,n.video.framesDecoded=e.framesDecoded,n.hasVideo=1):\"track\"===e.type&&(-1!==e.id.indexOf(\"_receiver_\")&&void 0!==e.frameWidth&&(n.video.frameWidth=e.frameWidth,n.video.frameHeight=e.frameHeight),\"audio\"===e.kind&&(n.audio.audioLevel=e.audioLevel||0,n.audio.totalAudioEnergy=e.totalAudioEnergy||0))}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Hn.warn(\"failed to getStats on receiver connection\");case 13:return e.abrupt(\"return\",n);case 14:case\"end\":return e.stop()}},e,null,[[3,10]])})),function(e){return r.apply(this,arguments)})},{key:\"getStats\",value:(n=Ze(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,c,u,d,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!t){e.next=5;break}return e.next=4,this.getSenderStats(t);case 4:r=e.sent;case 5:i=[],o=1,a=0,s=void 0,e.prev=9,c=n[Symbol.iterator]();case 11:if(o=(u=c.next()).done){e.next=20;break}return(d=pt(u.value,2))[0],l=d[1],e.next=15,this.getReceiverStats(l);case 15:p=e.sent,i.push(p);case 17:o=1,e.next=11;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),a=1,s=e.t0;case 26:e.prev=26,e.prev=27,o||null==c.return||c.return();case 29:if(e.prev=29,!a){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt(\"return\",{senderStats:r,receiverStats:i});case 35:case\"end\":return e.stop()}},e,this,[[9,22,26,34],[27,,29,33]])})),function(e,t){return n.apply(this,arguments)})},{key:\"prepareReport\",value:function(e,t){sd(e.senderStats)||(t.uint32_delay=e.senderStats.rtt,t.AudioReportState.sentAudioLevel=e.senderStats.audio.audioLevel,t.AudioReportState.sentAudioEnergy=e.senderStats.audio.totalAudioEnergy,t.AudioReportState.uint32_audio_enc_pkg_br=e.senderStats.audio.bytesSent,t.VideoReportState.uint32_video_snd_br=e.senderStats.video.bytesSent,t.VideoReportState.uint32_send_total_pkg=e.senderStats.video.packetsSent,t.VideoReportState.VideoEncState[0].uint32_enc_width=e.senderStats.video.frameWidth,t.VideoReportState.VideoEncState[0].uint32_enc_height=e.senderStats.video.frameHeight,t.VideoReportState.VideoEncState[0].uint32_enc_fps=e.senderStats.video.framesSent),e.receiverStats.forEach(function(e){e.hasAudio&&(t.AudioReportState.AudioDecState.push({uint32_audio_delay:0,uint32_audio_jitter:e.audio.jitter,uint32_audio_real_recv_pkg:e.audio.packetsReceived,uint32_audio_flow:e.audio.bytesReceived,uint32_audio_real_recv_br:0,uint64_sender_uin:e.tinyId,packetsLost:e.audio.packetsLost,audioLevel:e.audio.audioLevel,audioEnergy:e.audio.totalAudioEnergy}),t.AudioReportState.uint32_audio_real_recv_pkg+=e.audio.packetsReceived,t.AudioReportState.uint32_audio_flow+=e.audio.bytesReceived,t.uint32_real_num+=e.audio.packetsReceived),e.hasVideo&&(t.VideoReportState.VideoDecState.push({uint32_video_recv_fps:e.video.framesDecoded,uint32_video_recv_br:e.video.bytesReceived,uint32_video_real_recv_pkg:e.video.packetsReceived,uint32_dec_height:e.video.frameHeight,uint32_dec_width:e.video.frameWidth,uint32_video_jitter:0,uint64_sender_uin:e.tinyId,packetsLost:e.video.packetsLost}),t.VideoReportState.uint32_video_total_real_recv_pkg+=e.video.packetsReceived,t.VideoReportState.uint32_video_rcv_br+=e.video.bytesReceived)}),t.uint64_end_utime=(new Date).getTime();var n=this.prevReport_;if(this.prevReport_=JSON.parse(JSON.stringify(t)),sd(n))t.AudioReportState.uint32_audio_enc_pkg_br=8*t.AudioReportState.uint32_audio_enc_pkg_br/2,t.VideoReportState.uint32_video_rcv_br=8*t.VideoReportState.uint32_video_rcv_br/2,t.VideoReportState.uint32_video_snd_br=8*t.VideoReportState.uint32_video_snd_br/2,t.VideoReportState.VideoDecState.forEach(function(e){e.uint32_video_recv_br=8*e.uint32_video_recv_br/2,t.uint32_total_send_bps=t.AudioReportState.uint32_audio_enc_pkg_br+t.VideoReportState.uint32_video_snd_br});else{t.uint64_begine_utime=n.uint64_end_utime,t.uint32_real_num-=n.uint32_real_num,t.uint32_real_num<=0&&(t.uint32_real_num=0),t.AudioReportState.uint32_audio_real_recv_pkg-=n.AudioReportState.uint32_audio_real_recv_pkg,t.AudioReportState.uint32_audio_real_recv_pkg<=0&&(t.AudioReportState.uint32_audio_real_recv_pkg=0),t.AudioReportState.uint32_audio_enc_pkg_br-=n.AudioReportState.uint32_audio_enc_pkg_br,t.AudioReportState.uint32_audio_enc_pkg_br<=0&&(t.AudioReportState.uint32_audio_enc_pkg_br=0),t.AudioReportState.uint32_audio_enc_pkg_br=8*t.AudioReportState.uint32_audio_enc_pkg_br/2,t.VideoReportState.uint32_video_snd_br-=n.VideoReportState.uint32_video_snd_br,t.VideoReportState.uint32_video_snd_br<=0&&(t.VideoReportState.uint32_video_snd_br=0),t.VideoReportState.uint32_video_snd_br=8*t.VideoReportState.uint32_video_snd_br/2,t.AudioReportState.uint32_audio_flow-=n.AudioReportState.uint32_audio_flow,t.AudioReportState.uint32_audio_flow<=0&&(t.AudioReportState.uint32_audio_flow=0),t.VideoReportState.uint32_send_total_pkg-=n.VideoReportState.uint32_send_total_pkg,t.VideoReportState.uint32_send_total_pkg<=0&&(t.VideoReportState.uint32_send_total_pkg=0),t.VideoReportState.uint32_video_rcv_br-=n.VideoReportState.uint32_video_rcv_br,t.VideoReportState.uint32_video_rcv_br<=0&&(t.VideoReportState.uint32_video_rcv_br=0),t.VideoReportState.uint32_video_rcv_br=8*t.VideoReportState.uint32_video_rcv_br/2,t.VideoReportState.uint32_video_total_real_recv_pkg-=n.VideoReportState.uint32_video_total_real_recv_pkg,t.VideoReportState.uint32_video_total_real_recv_pkg<=0&&(t.VideoReportState.uint32_video_total_real_recv_pkg=0),t.VideoReportState.VideoEncState[0].uint32_enc_fps-=n.VideoReportState.VideoEncState[0].uint32_enc_fps,t.VideoReportState.VideoEncState[0].uint32_enc_fps<0&&(t.VideoReportState.VideoEncState[0].uint32_enc_fps=0),t.VideoReportState.VideoEncState[0].uint32_enc_fps=t.VideoReportState.VideoEncState[0].uint32_enc_fps/2;for(var r=t.VideoReportState.VideoDecState.length,i=0;i<r;i++){for(var o=t.VideoReportState.VideoDecState[i],a=o.uint64_sender_uin,s=o.uint32_video_real_recv_pkg,c=o.uint32_video_recv_br,u=o.uint32_video_recv_fps,d=0;d<n.VideoReportState.VideoDecState.length;d++){var l=n.VideoReportState.VideoDecState[d];if(l.uint64_sender_uin===a){(s-=l.uint32_video_real_recv_pkg)<=0&&(s=0),(c-=l.uint32_video_recv_br)<=0&&(c=0),(u-=l.uint32_video_recv_fps)<0&&(u=0);break}}t.VideoReportState.VideoDecState[i].uint32_video_real_recv_pkg=s,t.VideoReportState.VideoDecState[i].uint32_video_recv_br=8*c/2,t.VideoReportState.VideoDecState[i].uint32_video_recv_fps=u/2}r=t.AudioReportState.AudioDecState.length;for(var p=0;p<r;p++){for(var f=t.AudioReportState.AudioDecState[p],h=f.uint32_audio_real_recv_pkg,m=f.uint32_audio_flow,v=f.uint64_sender_uin,g=0;g<n.AudioReportState.AudioDecState.length;g++){var _=n.AudioReportState.AudioDecState[g];if(_.uint64_sender_uin===v){(h-=_.uint32_audio_real_recv_pkg)<=0&&(h=0),(m-=_.uint32_audio_flow)<=0&&(m=0);break}}t.AudioReportState.AudioDecState[p].uint32_audio_real_recv_pkg=h,t.AudioReportState.AudioDecState[p].uint32_audio_flow=m,t.AudioReportState.AudioDecState[p].uint32_audio_real_recv_br=8*m/2}t.AudioReportState.uint32_audio_real_recv_br=8*t.AudioReportState.uint32_audio_flow/2,t.uint32_real_num=t.AudioReportState.uint32_audio_real_recv_pkg+t.VideoReportState.uint32_video_total_real_recv_pkg,t.uint32_total_send_bps=t.AudioReportState.uint32_audio_enc_pkg_br+t.VideoReportState.uint32_video_snd_br,t.uint32_total_recv_bps=t.AudioReportState.uint32_audio_real_recv_br+t.VideoReportState.uint32_video_rcv_br}return t}},{key:\"getStatsReport\",value:(t=Ze(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={uint64_begine_utime:(new Date).getTime(),uint64_end_utime:0,uint32_real_num:0,uint32_delay:0,uint32_CPU_curfreq:0,uint32_total_send_bps:0,uint32_total_recv_bps:0,AudioReportState:{uint32_audio_enc_pkg_br:0,uint32_audio_real_recv_pkg:0,uint32_audio_flow:0,uint32_audio_real_recv_br:0,uint32_audio_delay:0,uint32_audio_jitter:0,uint32_microphone_status:1,sentAudioLevel:0,sentAudioEnergy:0,AudioDecState:[]},VideoReportState:{uint32_video_delay:0,uint32_video_snd_br:0,uint32_video_total_real_recv_pkg:0,uint32_video_rcv_br:0,uint32_send_total_pkg:0,VideoEncState:[{uint32_enc_width:0,uint32_enc_height:0,uint32_capture_fps:0,uint32_enc_fps:0}],VideoDecState:[]}},e.next=3,this.getStats(t,n);case 3:return i=e.sent,this.prepareReport(i,r),e.abrupt(\"return\",r);case 6:case\"end\":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})}]),e}(),gp=function(){function e(t){if(et(this,e),this.mode_=t.mode,this.sdpSemantics_=\"plan-b\",void 0!==t.sdpSemantics?this.sdpSemantics_=t.sdpSemantics:Md()&&(this.sdpSemantics_=\"unified-plan\"),this.sdkAppId_=t.sdkAppId,this.userId_=t.userId,this.log_=new El({id:\"c|\"+this.userId_,direction:\"local\",type:\"\"}),this.userSig_=t.userSig,this.roomId_=0,this.useStringRoomId_=t.useStringRoomId,this.recordId_=null,this.pureAudioPushMode_=null,this.version_=t.version,this.log_.info(\"using sdpSemantics: \"+this.sdpSemantics_),Hn.setConfig({sdkAppId:this.sdkAppId_,userId:this.userId_,version:this.version_}),void 0!==t.recordId){if(!Number.isInteger(Number(t.recordId)))throw new Ed({code:Rd.INVALID_PARAM,message:\"recordId must be an integer number\"});this.recordId_=t.recordId}if(void 0!==t.pureAudioPushMode){if(!Number.isInteger(Number(t.pureAudioPushMode)))throw new Ed({code:Rd.INVALID_PARAM,message:\"pureAudioPushMode must be an integer number\"});this.pureAudioPushMode_=t.pureAudioPushMode}this.disableReceiver_=0,this.signalChannel_=null,this.role_=\"anchor\",this.privateMapKey_=\"\",this.tinyId_=0,this.proxy_=null,this.turnServer_=null,this.connections_=new Map,this.connectionsRefreshCount_=new Map,this.mutedStates_=new Map,this.localStream_=null,this.isPublishing_=0,this.uplinkConnection_=null,this.emitter_=new ud,this.signalInfo_={},this.isInitialized_=0,this.isJoined_=0,this.heartbeat_=-1,this.stats_=new vp,this.joinTimeout_=-1,this.publishTimeout_=-1,this.unpublishTimeout_=-1,this.publishRetryCount_=0,this.startJoinTimestamp_=new Date,this.joinedTimestamp_=new Date}var t,n,r,i,o,a,s,c;return nt(e,[{key:\"setProxyServer\",value:function(e){if(!e.startsWith(\"wss://\"))throw new Ed({code:Rd.INVALID_PARAMETER,message:'proxy server url shall be started with \"wss://\"'});this.proxy_=e}},{key:\"getUrl\",value:function(e){var t=id(e);return!rd()&&this.proxy_&&(t=this.proxy_),t}},{key:\"getBackupUrl\",value:function(){return this.proxy_?this.proxy_:id(\"wss://bk.rtc.qq.com:8687\")}},{key:\"getUserId\",value:function(){return this.userId_}},{key:\"getTinyId\",value:function(){return this.tinyId_}},{key:\"setTurnServer\",value:function(e){this.turnServer_={},this.turnServer_.urls=\"turn://\"+e.url,void 0!==e.username&&void 0!==e.credential&&(this.turnServer_.username=e.username,this.turnServer_.credential=e.credential,this.turnServer_.credentialType=\"password\",void 0!==this.turnServer_.credentialType&&(this.turnServer_.credentialType=e.credentialType))}},{key:\"initialize\",value:function(){var e=this;return new Promise(function(t,n){e.log_.info(\"setup signal channel\"),e.signalChannel_=new Od({sdkAppId:e.sdkAppId_,userId:e.userId_,userSig:e.userSig_,url:e.getUrl(\"wss://qcloud.rtc.qq.com:8687\"),backupUrl:e.getUrl(\"wss://bk.rtc.qq.com:8687\"),version:e.version_}),e.signalChannel_.on(dd,function(t){e.log_.info(\"SignalChannel state changed from \".concat(t.prevState,\" to \").concat(t.state)),e.emitter_.emit(al,t)}),e.signalChannel_.on(ld,function(t){e.isInitialized_?(e.closeUplink(),e.emitter_.emit(hl,t)):n(t)}),e.signalChannel_.on(hd.CHANNEL_SETUP_FAILED,function(t){e.log_.error(\"signal channel setup failed\"),n(t)}),e.signalChannel_.on(hd.CHANNEL_SETUP_SUCCESS,function(n){e.signalInfo_=n.signalInfo,e.tinyId_=e.signalInfo_.tinyId,e.isInitialized_=1,t()}),e.signalChannel_.on(hd.PEER_JOIN,function(t){e.disableReceiver_||e.onPeerJoin(t.data)}),e.signalChannel_.on(hd.PEER_LEAVE,function(t){e.onPeerLeave(t.data)}),e.signalChannel_.on(hd.UPDATE_REMOTE_MUTE_STAT,function(t){e.onUpdateRemoteMuteStat(t.data)}),e.signalChannel_.on(hd.CLINET_BANNDED,function(t){var n=t.data.content;if(e.closeUplink(),\"banned\"===n.type){var r=\"you got banned by account admin\";e.log_.error(\"user was banned because of \"+r),e.onClientBanned(r)}else if(\"kick\"===n.type){var i=\"duplicated userId joining the room\";e.log_.error(\"user was banned because of \"+i),e.onClientBanned(i)}else e.log_.error(\"Relay server timeout observed\"),e.emitter_.emit(hl,new Ed({code:Rd.SERVER_TIMEOUT,message:\"Relay server timeout observed\"}))}),e.signalChannel_.on(hd.REQUEST_REBUILD_SESSION,function(t){e.signalInfo_=t.signalInfo;var n=[];e.connections_&&n.push(0);var r=[],i=1,o=0,a=void 0;try{for(var s,c=e.connections_[Symbol.iterator]();!(i=(s=c.next()).done);i=1){var u=pt(s.value,2),d=u[0],l=u[1];n.push(d);var p=l.getPeerConnection().remoteDescription;p&&r.push(p.sdp)}}catch(h){o=1,a=h}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var f={socketid:e.signalInfo_.socketId,tinyid:e.tinyId_,appid:e.sdkAppId_,openid:e.userId_,sessionid:e.roomId_,sids:n,relayInfo:e.signalInfo_.relayInnerIp,remotesdp:r};try{e.log_.info(\"reconnect - rebuild session with data: \".concat(JSON.stringify(f))),e.signalChannel_.send(bd,f)}catch(Np){e.log_.error(\"reconnect failed because rebuild session failed\")}}),e.signalChannel_.connect()})}},{key:\"join\",value:(c=Ze(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.startJoinTimestamp_=new Date,(n=rd())||(n=\"qcloud\",this.proxy_&&this.proxy_.startsWith(\"wss://trtc.rtc.qq.com\")&&(n=\"trtc\")),Pd({env:n,sdkAppId:this.sdkAppId_,userId:this.userId_,version:this.version_}),e.prev=4,e.next=7,this.initialize();case 7:return e.next=9,this.doJoin(t);case 9:this.joinedTimestamp_=new Date,r=this.joinedTimestamp_-this.startJoinTimestamp_,xd({eventType:\"delta-join\",result:\"success\",delta:r}),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(4),xd({eventType:\"join\",result:\"failed\"}),e.t0;case 18:xd({eventType:\"join\",result:\"success\"});case 19:case\"end\":return e.stop()}},e,this,[[4,14]])})),function(e){return c.apply(this,arguments)})},{key:\"getVersion\",value:function(){var e=this.version_.split(\".\");return 1e3*parseInt(e[0])+100*parseInt(e[1])+parseInt(e[2])}},{key:\"doJoin\",value:function(e){var t=this;return new Promise(function(n,r){if(!t.isInitialized_)throw new Ed({code:Rd.INVALID_OPERATION,message:\"SignalChannel is not ready yet\"});if(t.isJoined_)throw new Ed({code:Rd.INVALID_OPERATION,message:\"duplicate join() called\"});t.roomId_=e.roomId,void 0!==e.role&&(t.role_=e.role);var i=\"\";void 0!==e.privateMapKey&&(i=e.privateMapKey),t.privateMapKey_=i,t.log_.info(\"Join() => joining room: \".concat(e.roomId,\" mode: \").concat(t.mode_,\" role: \").concat(t.role_));var o,a=t.signalInfo_,s={openid:a.openId,tinyid:a.tinyId,peerconnectionport:\"\",useStrRoomid:t.useStringRoomId_?1:0,roomid:String(e.roomId),sdkAppID:String(t.sdkAppId_),socketid:a.socketId,userSig:t.userSig_,privMapEncrypt:i,privMap:\"\",relayip:a.relayInnerIp,dataport:a.dataPort,stunport:a.stunPort,checkSigSeq:a.checkSigSeq,pstnBizType:0,pstnPhoneNumber:null,recordId:t.recordId_,pureAudioPushMod:t.pureAudioPushMode_,role:\"user\",jsSdkVersion:String(t.getVersion()),sdpSemantics:t.sdpSemantics_,browserVersion:td,closeLocalMedia:1,trtcscene:\"live\"===t.mode_?Ud:jd,trtcrole:\"anchor\"===t.role_?Vd:Fd};t.joinTimeout_=setTimeout(function(){t.log_.error(\"join room timeout observed\"),r(new Ed({code:Rd.JOIN_ROOM_FAILED,message:\"join room timeout\"}))},5e3),t.signalChannel_.sendWithReport(_d,s,(o=0,navigator&&navigator.connection&&navigator.connection.effectiveType&&(o=\"4g\"===navigator.connection.effectiveType?1:4),navigator&&navigator.connection&&navigator.connection.type&&(\"wifi\"===navigator.connection.type?o=1:\"cellular\"===navigator.connection.type&&(o=4)),{AbilityOption:{GeneralLimit:{CPULimit:{uint32_CPU_num:String(navigator.hardwareConcurrency||0),str_CPU_name:String(navigator.platform),uint32_CPU_maxfreq:String(0),model:\"\",uint32_total_memory:String(0)},uint32_terminal_type:String(Hu?4:Fu?2:Vu?3:Zu?12:Xu?5:ed?13:1),uint32_device_type:String(0),str_os_verion:Hu?\"Android\":Fu?\"iPhone\":Vu?\"iPad\":Zu?\"Mac\":Xu?\"Windows\":ed?\"Linux\":\"unknown\",uint32_link_type:String(1),str_client_version:\"4.3.1\",uint32_net_type:String(o),ua:navigator.userAgent,version:\"\"}}})),t.signalChannel_.once(hd.JOIN_ROOM_RESULT,function(e){clearTimeout(t.joinTimeout_),t.joinTimeout_=-1;var i=e.data.content.ret;i?(t.log_.error(\"Join room failed result: \"+i+\" error: \"+e.data.content.error),r(new Ed({code:Rd.JOIN_ROOM_FAILED,message:\"Failed to join room - \"+e.data.content.error}))):(t.isJoined_=1,t.log_.info(\"Join room success, start heartbeat\"),t.startHeartbeat(),n())})})}},{key:\"leave\",value:(s=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.doLeave();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:this.isJoined_=0,this.destroy(),xd({eventType:\"leave\",result:\"success\"}),t=Math.floor((new Date-this.joinedTimestamp_)/1e3),xd({eventType:\"delta-leave\",result:\"success\",delta:t});case 12:case\"end\":return e.stop()}},e,this,[[0,5]])})),function(){return s.apply(this,arguments)})},{key:\"doLeave\",value:function(){var e=this;return new Promise(function(t,n){return e.isJoined_?(e.log_.info(\"leave() => leaving room\"),e.stopHeartbeat(),e.closeConnections(),e.mutedStates_.clear(),e.clearPublishTimeout(),e.clearUnpublishTimeout(),e.closeUplink(),t()):t()})}},{key:\"clearPublishTimeout\",value:function(){-1!==this.publishTimeout_&&(clearTimeout(this.publishTimeout_),this.publishTimeout_=-1)}},{key:\"clearUnpublishTimeout\",value:function(){this.unpublishTimeout_&&(clearTimeout(this.unpublishTimeout_),this.unpublishTimeout_=-1)}},{key:\"closeConnections\",value:function(){this.connections_.forEach(function(e){e.close()}),this.connections_.clear(),this.connectionsRefreshCount_.clear()}},{key:\"destroy\",value:function(){if(this.isJoined_)throw this.log_.warn(\"please call leave() before destroy() client\"),new Ed({code:Rd.INVALID_OPERATION,message:\"Please call leave() before destory() the client\"});this.log_.info(\"destroying SignalChannel\"),this.signalChannel_&&(this.signalChannel_.close(),this.signalChannel_=null)}},{key:\"publish\",value:function(e){var t=this;return new Promise(function(n,r){if(!t.isJoined_)throw new Ed({code:Rd.INVALID_OPERATION,message:\"please call join() before publish()\"});if(\"live\"===t.mode_&&\"audience\"===t.role_)throw new Ed({code:Rd.INVALID_OPERATION,message:'no permission to publish() under live/audience, please call swithRole(\"anchor\") firstly before publish()'});if(t.localStream_)throw new Ed({code:Rd.INVALID_OPERATION,message:\"duplicate publishing, please unpublish and then re-publish\"});if(t.isPublishing_)throw new Ed({code:Rd.INVALID_OPERATION,message:\"previous publishing is ongoing, please avod re-publishing\"});t.isPublishing_=1;var i=new Date;t.log_.info(\"publish() => publishing local stream\");var o=new mp({userId:t.userId_,tinyId:t.tinyId_,client:t,iceServers:t.signalInfo_.stunServers,isUplink:1,signalChannel:t.signalChannel_});o.initialize(),t.publishTimeout_=setTimeout(function(){t.log_.error(\"failed to publish because of timeout\"),xd({eventType:\"publish\",result:\"failed\"}),r(new Ed({code:Rd.UNKNOWN,message:\"publish timeout\"}))},5e3),o.publish(e,function(e){t.clearPublishTimeout(),t.isPublishing_=0,t.log_.error(\"failed to publish stream\"),xd({eventType:\"publish\",result:\"failed\"}),r(e)}),o.on(Qd,function(r){t.clearPublishTimeout(),t.isPublishing_=0,t.localStream_=r.stream,t.localStream_.setConnection(o),t.uplinkConnection_=o,xd({eventType:\"publish\",result:\"success\"});var a=new Date;xd({eventType:\"delta-publish\",result:\"success\",delta:a-i}),e.hasAudio()&&$l(t.userId_,{eventId:Pl,eventDesc:\"publish audio track\",timestamp:(new Date).getTime(),userId:t.userId_,tinyId:t.tinyId_}),e.hasVideo()&&$l(t.userId_,{eventId:Il,eventDesc:\"publish video track\",timestamp:(new Date).getTime(),userId:t.userId_,tinyId:t.tinyId_}),n()}),o.on(el,function(n){if(n.getCode()===Rd.ICE_TRANSPORT_ERROR&&t.publishRetryCount_<3&&t.localStream_===e)return t.publishRetryCount_+=1,t.log_.warn(\"try to re-plublish the stream due to ice failure observed\"),void t.unpublish(e).finally(function(){t.log_.warn(\"trying re-publish\"),t.publish(e).finally(function(){t.log_.warn(\"re-publish success\"),t.publishRetryCount_=0})});t.emitter_.emit(hl,n)})})}},{key:\"unpublish\",value:function(e){var t=this;return new Promise(function(n,r){if(t.isPublishing_)throw new Ed({code:Rd.INVALID_OPERATION,message:\"unpublish() is being called during publish() is ongoing\"});if(e!==t.localStream_)throw new Ed({code:Rd.INVALID_PARAMETER,message:\"stream has not been published yet\"});t.log_.info(\"unpublish() => unpublishing local stream\"),t.doUnpublish().then(function(){xd({eventType:\"unpublish\",result:\"success\"}),n()}).catch(function(e){xd({eventType:\"unpublish\",result:\"failed\"}),r()})})}},{key:\"doUnpublish\",value:function(){var e=this;return new Promise(function(t,n){e.signalChannel_.send(yd),e.unpublishTimeout_=setTimeout(function(){e.log_.warn(\"unpublish() timeout\"),e.closeUplink()},5e3),e.signalChannel_.once(hd.CLOSE_PEER_ACK,function(n){return e.clearUnpublishTimeout(),e.log_.info(\"received CLOSE_PEER_ACK, close uplink connection\"),e.closeUplink(),t()})})}},{key:\"closeUplink\",value:function(){this.uplinkConnection_&&(this.uplinkConnection_.close(),this.uplinkConnection_=null,this.localStream_.hasAudio()&&$l(this.userId_,{eventId:Al,eventDesc:\"unpublish audio track\",timestamp:(new Date).getTime(),userId:this.userId_,tinyId:this.tinyId_}),this.localStream_.hasVideo()&&$l(this.userId_,{eventId:xl,eventDesc:\"unpublish video track\",timestamp:(new Date).getTime(),userId:this.userId_,tinyId:this.tinyId_}),this.localStream_.setConnection(null),this.localStream_=null)}},{key:\"subscribe\",value:function(e,t){if(!e.isRemote())throw new Ed({code:Rd.INVALID_PARAMETER,message:\"try to subscribe a local stream\"});this.log_.info(\"subscribe() => subscribe to [\".concat(e.getUserId(),\"] \").concat(e.getType(),\" stream with options: \").concat(JSON.stringify(t))),e.getConnection().subscribe(e,t)}},{key:\"unsubscribe\",value:function(e){if(!e.isRemote())throw new Ed({code:Rd.INVALID_PARAMETER,message:\"try to unsubscribe a local stream\"});this.log_.info(\"unsubscribe() => unsubscribe to [\".concat(e.getUserId(),\"] \").concat(e.getType(),\" stream\")),e.getConnection().unsubscribe(e)}},{key:\"switchRole\",value:(a=Ze(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(\"live\"===this.mode_){e.next=2;break}return e.abrupt(\"return\");case 2:if(this.role_===t){e.next=11;break}if(this.role_=t,this.log_.info(\"switchRole() => switch role to: \"+t),this.isJoined_){e.next=7;break}return e.abrupt(\"return\");case 7:return e.next=9,this.leave();case 9:return e.next=11,this.join({role:t,roomId:this.roomId_,privateMapKey:this.privateMapKey_});case 11:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:\"on\",value:function(e,t){this.emitter_.on(e,t)}},{key:\"off\",value:function(e,t){\"*\"===e?this.emitter_.removeAllListeners():this.emitter_.off(e,t)}},{key:\"getRemoteMutedState\",value:function(){var e=this,t=[];return this.mutedStates_.forEach(function(n,r,i){var o=e.connections_.get(r);o&&t.push(it({userId:o.getUserId()},n))}),t}},{key:\"setDefaultMuteRemoteStreams\",value:function(e){this.log_.info(\"setDefaultMuteRemoteStreams muted: \"+e),this.disableReceiver_=e}},{key:\"getTransportStats\",value:(o=Ze(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={rtt:0},!this.uplinkConnection_){e.next=6;break}return e.next=4,this.stats_.getSenderStats(this.uplinkConnection_);case 4:n=e.sent,t.rtt=n.rtt;case 6:return e.abrupt(\"return\",t);case 7:case\"end\":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:\"getLocalAudioStats\",value:(i=Ze(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.audio.bytesSent,packetsSent:n.audio.packetsSent};case 7:return e.abrupt(\"return\",t);case 8:case\"end\":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:\"getLocalVideoStats\",value:(r=Ze(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t={})[this.userId_]={bytesSent:0,packetsSent:0,framesEncoded:0,framesSent:0,frameWidth:0,frameHeight:0},!this.uplinkConnection_){e.next=7;break}return e.next=5,this.stats_.getSenderStats(this.uplinkConnection_);case 5:n=e.sent,t[this.userId_]={bytesSent:n.video.bytesSent,packetsSent:n.video.packetsSent,framesEncoded:n.video.framesEncoded,framesSent:n.video.framesSent,frameWidth:n.video.frameWidth,frameHeight:n.video.frameHeight};case 7:return e.abrupt(\"return\",t);case 8:case\"end\":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:\"getRemoteAudioStats\",value:(n=Ze(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=1,r=0,i=void 0,e.prev=4,o=this.connections_[Symbol.iterator]();case 6:if(n=(a=o.next()).done){e.next=15;break}return(s=pt(a.value,2))[0],c=s[1],e.next=10,this.stats_.getReceiverStats(c);case 10:(u=e.sent).hasAudio&&(t[u.userId]={bytesReceived:u.audio.bytesReceived,packetsReceived:u.audio.packetsReceived,packetsLost:u.audio.packetsLost});case 12:n=1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=1,i=e.t0;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt(\"return\",t);case 30:case\"end\":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])})),function(){return n.apply(this,arguments)})},{key:\"getRemoteVideoStats\",value:(t=Ze(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=1,r=0,i=void 0,e.prev=4,o=this.connections_[Symbol.iterator]();case 6:if(n=(a=o.next()).done){e.next=15;break}return(s=pt(a.value,2))[0],c=s[1],e.next=10,this.stats_.getReceiverStats(c);case 10:(u=e.sent).hasVideo&&(t[u.userId]={bytesReceived:u.video.bytesReceived,packetsReceived:u.video.packetsReceived,packetsLost:u.video.packetsLost,framesDecoded:u.video.framesDecoded,frameWidth:u.video.frameWidth,frameHeight:u.video.frameHeight});case 12:n=1,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=1,i=e.t0;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt(\"return\",t);case 30:case\"end\":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])})),function(){return t.apply(this,arguments)})},{key:\"getSdpSemantics\",value:function(){return this.sdpSemantics_}},{key:\"getIceServers\",value:function(){var e=[];return e.push({urls:this.signalInfo_.stunServers}),this.turnServer_&&e.push(this.turnServer_),e}},{key:\"startHeartbeat\",value:function(){if(-1===this.heartbeat_){this.log_.info(\"startHeartbeat...\"),this.heartbeat_=setInterval(this.doHeartbeat.bind(this),2e3)}}},{key:\"stopHeartbeat\",value:function(){-1!==this.heartbeat_&&(this.log_.info(\"stopHeartbeat\"),clearInterval(this.heartbeat_),this.heartbeat_=-1)}},{key:\"doHeartbeat\",value:function(){var e=this;this.stats_.getStatsReport(this.uplinkConnection_,this.connections_).then(function(t){var n={WebRTCQualityReq:t,eventList:Yl(e.userId_),sdkAppId:e.sdkAppId_,tinyid:e.tinyId_,roomid:e.roomId_,socketid:e.signalInfo_.socketId,clientip:e.signalInfo_.localIp,serverip:e.signalInfo_.relayIp,cpunumber:navigator.hardwareConcurrency||0,cpudevice:navigator.platform,devicename:navigator.platform,ostype:navigator.platform},r=0;if(e.localStream_&&e.localStream_.getMediaStream()){var i=e.localStream_.getMediaStream().getAudioTracks();r=i.length>0&&i[0].muted?3:1}n.WebRTCQualityReq.AudioReportState.uint32_microphone_status=r,e.signalChannel_.send(Sd,n)})}},{key:\"onPeerJoin\",value:function(e){var t=this,n=e.content,r=n.srcopenid,i=n.srctinyid,o=n.remoteoffer,a=this.connections_.get(i);a&&(this.log_.warn(\"duplicated peer-join observed, rebuild the connection\"),this.log_.info(\"remote peer [\".concat(r,\"] is leaving\")),this.emitter_.emit(cl,{userId:r}),a.close(),this.connections_.delete(i)),this.log_.info(\"remote peer [\".concat(r,\"] is online\")),this.emitter_.emit(sl,{userId:r});var s=new mp({userId:r,tinyId:i,client:this,iceServers:this.signalInfo_.stunServers,isUplink:0,signalChannel:this.signalChannel_});this.connections_.set(i,s),s.initialize(),s.setRemoteOffer(o),s.on(Kd,function(e){t.emitter_.emit(nl,{stream:e.stream})}),s.on($d,function(e){t.emitter_.emit(rl,{stream:e.stream})}),s.on(Yd,function(e){t.emitter_.emit(il,{stream:e.stream})}),s.on(Xd,function(e){t.emitter_.emit(ol,{stream:e.stream})}),s.on(el,function(e){t.emitter_.emit(hl,e)}),s.on(tl,function(e){\"connected\"===e.state&&t.connectionsRefreshCount_.set(i,0)})}},{key:\"onPeerLeave\",value:function(e){var t=e.content,n=t.srctinyid,r=t.srcopenid,i=this.connections_.get(n);i&&(void 0===r&&(r=i.getUserId()),this.log_.info(\"remote peer [\".concat(r,\"] is leaving\")),this.emitter_.emit(cl,{userId:r}),i.close(),this.connections_.delete(n),this.connectionsRefreshCount_.delete(n))}},{key:\"onUpdateRemoteMuteStat\",value:function(e){var t=this,n=e.content;n.userlist.forEach(function(e){var n=e.srctinyid,r=e.userid;if(0!==n&&n!==t.tinyId_)if(t.connections_.get(n)){var i=!!(1&e.flag),o=!!(8&e.flag),a=!!(64&e.flag),s=!!(16&e.flag),c=t.mutedStates_.get(n);if(void 0===c)return t.mutedStates_.set(n,{hasAudio:o,hasVideo:i,audioMuted:a,videoMuted:s}),i&&(s?t.emitter_.emit(dl,{userId:r}):t.emitter_.emit(pl,{userId:r})),void(o&&(a?t.emitter_.emit(ul,{userId:r}):t.emitter_.emit(ll,{userId:r})));o&&c.audioMuted!==a&&(a?t.emitter_.emit(ul,{userId:r}):t.emitter_.emit(ll,{userId:r}));var u=!s&&i;(!c.videoMuted&&c.hasVideo)!==u&&(u?t.emitter_.emit(pl,{userId:r}):t.emitter_.emit(dl,{userId:r})),t.mutedStates_.set(n,{hasAudio:o,hasVideo:i,audioMuted:a,videoMuted:s})}else t.mutedStates_.delete(n)})}},{key:\"onClientBanned\",value:function(e){this.emitter_.emit(fl,new Ed({code:Rd.CLIENT_BANNED,message:\"client was banned because of \"+e}))}},{key:\"triggerReconnectForTest\",value:function(e){var t={exitcode:e};this.log_.warn(\"triggerReconnectForTest exitcode: \"+e),this.signalChannel_.send(wd,t)}},{key:\"setBandwidthForTest\",value:function(e){this.uplinkConnection_&&this.uplinkConnection_.setBandwidth(e)}}]),e}(),_p=function(){var e=Ze(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=yp(t),Hn.info(\"getUserMedia with contraints: \"+JSON.stringify(n)),e.next=4,navigator.mediaDevices.getUserMedia(n);case 4:return e.abrupt(\"return\",e.sent);case 5:case\"end\":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function yp(e){return{audio:e.audio?void 0!==e.microphoneId?{deviceId:{exact:e.microphoneId},sampleRate:e.sampleRate,channelCount:e.channelCount}:{sampleRate:e.sampleRate,channelCount:e.channelCount}:0,video:void 0!==e.facingMode&&e.video?{facingMode:e.facingMode,width:e.width,height:e.height,frameRate:e.frameRate}:void 0!==e.cameraId&&e.video?{deviceId:{exact:e.cameraId},width:e.width,height:e.height,frameRate:e.frameRate}:e.video?void 0!==e.width?{width:e.width,height:e.height,frameRate:e.frameRate}:1:0}}var Sp=function(){var e=Ze(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!t.audio){e.next=7;break}return r=bp(t),Hn.info(\"getUserMedia with constraints: \"+JSON.stringify(r)),e.next=6,navigator.mediaDevices.getUserMedia(r);case 6:n=e.sent;case 7:return i=kp(t),Hn.info(\"getDisplayMedia with contraints: \"+JSON.stringify(i)),e.next=11,navigator.mediaDevices.getDisplayMedia(i);case 11:return o=e.sent,n&&o.addTrack(n.getAudioTracks()[0]),e.abrupt(\"return\",o);case 14:case\"end\":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function bp(e){return{audio:void 0!==e.microphoneId?{deviceId:{exact:e.microphoneId},sampleRate:e.sampleRate,channelCount:e.channelCount}:{sampleRate:e.sampleRate,channelCount:e.channelCount},video:0}}function kp(e){var t={width:e.width,height:e.height,frameRate:e.frameRate};return void 0!==e.screenSource&&(t.displaySurface=e.screenSource),{video:t}}var Cp=new Map;Cp.set(\"120p\",{width:160,height:120,frameRate:15,bitrate:200}),Cp.set(\"180p\",{width:320,height:180,frameRate:15,bitrate:350}),Cp.set(\"240p\",{width:320,height:240,frameRate:15,bitrate:400}),Cp.set(\"360p\",{width:640,height:360,frameRate:15,bitrate:800}),Cp.set(\"480p\",{width:640,height:480,frameRate:15,bitrate:900}),Cp.set(\"720p\",{width:1280,height:720,frameRate:15,bitrate:1500}),Cp.set(\"1080p\",{width:1920,height:1080,frameRate:15,bitrate:2e3}),Cp.set(\"1440p\",{width:2560,height:1440,frameRate:30,bitrate:4860}),Cp.set(\"4K\",{width:3840,height:2160,frameRate:30,bitrate:9e3});var Tp=new Map;Tp.set(\"480p\",{width:640,height:480,frameRate:5,bitrate:900}),Tp.set(\"480p_2\",{width:640,height:480,frameRate:30,bitrate:1e3}),Tp.set(\"720p\",{width:1280,height:720,frameRate:5,bitrate:1200}),Tp.set(\"720p_2\",{width:1280,height:720,frameRate:30,bitrate:3e3}),Tp.set(\"1080p\",{width:1920,height:1080,frameRate:5,bitrate:1600}),Cp.set(\"1080p_2\",{width:1920,height:1080,frameRate:30,bitrate:4e3});var wp=new Map;wp.set(\"standard\",{sampleRate:48e3,channelCount:1,bitrate:40}),wp.set(\"high\",{sampleRate:48e3,channelCount:1,bitrate:128});var Rp=function(e){function t(e){var n;et(this,t);var r=it({},e,{isRemote:0,type:\"local\"});return e.screen&&(r.mirror=0),(n=dt(this,at(t).call(this,r))).video_=e.video,n.audio_=e.audio,n.cameraId_=e.cameraId,n.facingMode_=e.facingMode,n.microphoneId_=e.microphoneId,n.videoSource_=e.videoSource,n.audioSource_=e.audioSource,n.screen_=e.screen,n.screenSource_=e.screenSource,n.audioProfile_={sampleRate:48e3,channelCount:1,bitrate:40},n.videoProfile_={width:640,height:480,frameRate:15,bitrate:900},n.screenProfile_={width:1920,height:1080,frameRate:5,bitrate:1600},n.videoBitrate_=n.screen_?1600:900,n}var n,r,i,o;return ot(t,Ql),nt(t,[{key:\"initialize\",value:function(){var e=this;return new Promise(function(t,n){if(void 0===e.audio_){var r=new MediaStream;return void 0!==e.audioSource_&&(r.addTrack(e.audioSource_),e.setHasAudio(1)),void 0!==e.videoSource_&&(r.addTrack(e.videoSource_),e.setHasVideo(1)),e.setMediaStream(r),xd({eventType:\"stream-initialize\",kind:\"custom\",result:\"success\"}),t()}e.screen_?(e.log_.info(\"initialize stream audio: \"+e.audio_+\" screen: \"+e.screen_),Sp({audio:e.audio_,microphoneId:e.microphoneId_,screenSource:e.screenSource_,width:e.screenProfile_.width,height:e.screenProfile_.height,frameRate:e.screenProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount}).catch(function(t){xd({eventType:\"stream-initialize\",kind:\"getDisplayMedia\",result:\"failed\"}),e.log_.error(\"getDisplayMedia error observed \"+t),n(t)}).then(function(n){return e.setMediaStream(n),e.setHasAudio(e.audio_),e.setHasVideo(1),e.listenForScreenSharingStopped(e.getVideoTrack()),e.setVideoContentHint(\"detail\"),xd({eventType:\"stream-initialize\",kind:\"getDisplayMedia\",result:\"success\"}),t()})):(e.log_.info(\"initialize stream audio: \"+e.audio_+\" video: \"+e.video_),_p({audio:e.audio_,video:e.video_,facingMode:e.facingMode_,cameraId:e.cameraId_,microphoneId:e.microphoneId_,width:e.videoProfile_.width,height:e.videoProfile_.height,frameRate:e.videoProfile_.frameRate,sampleRate:e.audioProfile_.sampleRate,channelCount:e.audioProfile_.channelCount}).catch(function(t){xd({eventType:\"stream-initialize\",kind:\"getUserMedia\",result:\"failed\"}),e.log_.error(\"getUserMedia error observed \"+t),n(t)}).then(function(n){return e.setMediaStream(n),e.setHasAudio(e.audio_),e.setHasVideo(e.video_),e.log_.debug(\"gotStream hasAudio: \"+e.hasAudio_+\" hasVideo: \"+e.hasVideo_),xd({eventType:\"stream-initialize\",kind:\"getUserMedia\",result:\"success\"}),t()}))})}},{key:\"listenForScreenSharingStopped\",value:function(e){var t=this;e.addEventListener(\"ended\",function(e){t.log_.info(\"screensharing was stopped because the video track is ended\"),t.emitter_.emit(vl)})}},{key:\"muteAudio\",value:function(){var e=lt(at(t.prototype),\"muteAudio\",this).call(this);if(e){this.log_.info(\"localStream mute audio\");var n=this.getConnection();if(n){n.setMutedState(\"audio\",1);var r=n.getUserId(),i=n.getTinyId();$l(r,{eventId:Ol,eventDesc:\"mute local audio track\",timestamp:(new Date).getTime(),userId:r,tinyId:i})}}return e}},{key:\"muteVideo\",value:function(){this.log_.info(\"localStream mute video\");var e=lt(at(t.prototype),\"muteVideo\",this).call(this);if(e){var n=this.getConnection();if(n){n.setMutedState(\"video\",1);var r=n.getUserId(),i=n.getTinyId();$l(r,{eventId:Dl,eventDesc:\"mute local video track\",timestamp:(new Date).getTime(),userId:r,tinyId:i})}}return e}},{key:\"unmuteAudio\",value:function(){var e=lt(at(t.prototype),\"unmuteAudio\",this).call(this);if(e){this.log_.info(\"localStream unmute audio\");var n=this.getConnection();if(n){n.setMutedState(\"audio\",0);var r=n.getUserId(),i=n.getTinyId();$l(r,{eventId:Ll,eventDesc:\"unmute local audio track\",timestamp:(new Date).getTime(),userId:r,tinyId:i})}}return e}},{key:\"unmuteVideo\",value:function(){this.log_.info(\"localStream unmute video\");var e=lt(at(t.prototype),\"unmuteVideo\",this).call(this);if(e){var n=this.getConnection();if(n){n.setMutedState(\"video\",0);var r=n.getUserId(),i=n.getTinyId();$l(r,{eventId:Nl,eventDesc:\"unmute local video track\",timestamp:(new Date).getTime(),userId:r,tinyId:i})}}return e}},{key:\"setAudioProfile\",value:function(e){var t;\"object\"===Qe(e)?t=e:void 0===(t=wp.get(e))&&(t=wp.get(\"standard\")),this.log_.info(\"setAudioProfile: \"+JSON.stringify(t)),this.audioProfile_=t}},{key:\"setVideoProfile\",value:function(e){var t;\"object\"===Qe(e)?t=e:void 0===(t=Cp.get(e))&&(t=Cp.get(\"480p\")),this.log_.info(\"setVideoProfile \"+JSON.stringify(t)),this.videoProfile_=t,this.videoBitrate_=t.bitrate}},{key:\"getVideoBitrate\",value:function(){return this.videoBitrate_}},{key:\"getAudioBitrate\",value:function(){return this.audioProfile_.bitrate}},{key:\"setScreenProfile\",value:function(e){var t=e;\"object\"!==Qe(e)&&void 0===(t=Tp.get(e))&&(t=Tp.get(\"1080p\")),this.log_.info(\"setScreenProfile \"+JSON.stringify(e)),this.screenProfile_=t,this.videoBitrate_=t.bitrate}},{key:\"getVideoProfile\",value:function(){return this.screen_?this.screenProfile_:this.videoProfile_}},{key:\"getAudioProfile\",value:function(){return this.audioProfile_}},{key:\"setVideoContentHint\",value:function(e){var t=this.getVideoTrack();t&&\"contentHint\"in t&&(this.log_.info(\"set video track contentHint to: \"+e),t.contentHint=e,t.contentHint!==e&&this.log_.warn(\"Invalid video track contentHint: \"+e))}},{key:\"switchDevice\",value:(o=Ze(regeneratorRuntime.mark(function e(n,r){var i,o,a,s,c,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(\"audio\"===n&&this.microphoneId_===r||\"video\"===n&&this.cameraId_===r||this.audioSource_||this.videoSource_||this.screen_)){e.next=2;break}return e.abrupt(\"return\");case 2:if(\"audio\"===n&&(this.microphoneId_=r,this.audio_||(this.audio_=1)),\"video\"===n&&(\"user\"===r||\"environment\"===r?this.facingMode_=r:this.cameraId_=r,this.video_||(this.video_=1)),this.getMediaStream()){e.next=6;break}return e.abrupt(\"return\");case 6:return this.log_.info(\"switchDevice \"+n+\" to: \"+r),\"video\"===n&&(Hu||Bu)&&(i=this.getVideoTrack())&&i.stop(),e.next=10,_p({audio:this.audio_,video:this.video_,facingMode:this.facingMode_,cameraId:this.cameraId_,microphoneId:this.microphoneId_,width:this.videoProfile_.width,height:this.videoProfile_.height,frameRate:this.videoProfile_.frameRate,sampleRate:this.audioProfile_.sampleRate,channelCount:this.audioProfile_.channelCount});case 10:if(o=e.sent,this.setMediaStream(o),!(a=this.getConnection())){e.next=22;break}return e.next=16,a.replaceStream(o);case 16:s=a.getUserId(),c=a.getTinyId(),u=Fl,d=\"switch camera\",\"audio\"===n&&(u=Gl,d=\"switch microphone\"),$l(s,{eventId:u,eventDesc:d,timestamp:(new Date).getTime(),userId:s,tinyId:c});case 22:return this.log_.info(\"swichDevice - restart audio/video player\"),lt(at(t.prototype),\"restartAudio\",this).call(this),lt(at(t.prototype),\"restartVideo\",this).call(this),e.abrupt(\"return\");case 26:case\"end\":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:\"addTrack\",value:(i=Ze(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getMediaStream()){e.next=3;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"the local stream is not initialized yet\"});case 3:if(!(\"audio\"===t.kind&&n.getAudioTracks().length>0||\"video\"===t.kind&&n.getVideoTracks().length>0)){e.next=5;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"A Stream has at most one audio track and one video track\"});case 5:if(\"video\"!==t.kind){e.next=10;break}if(!(\"getSettings\"in MediaStreamTrack.prototype)){e.next=10;break}if((r=t.getSettings()).width===this.videoProfile_.width&&r.height===this.videoProfile_.height){e.next=10;break}throw new Ed({code:Rd.INVALID_PARAMETER,message:\"video resolution of the track (\".concat(r.width,\" x \").concat(r.height,\") shall be kept the same as the one defined via setVideoProfile(): \").concat(this.videoProfile_.width,\" x \").concat(this.videoProfile_.height)});case 10:if(n.addTrack(t),\"audio\"===t.kind?this.setHasAudio(1):this.setHasVideo(1),!(i=this.getConnection())){e.next=22;break}return e.next=16,i.addTrack(t);case 16:o=i.getUserId(),a=i.getTinyId(),s=Il,c=\"add video track to current published stream\",\"audio\"===t.kind&&(s=Pl,c=\"add audio track to current published stream\"),$l(o,{eventId:s,eventDesc:c,timestamp:(new Date).getTime(),userId:o,tinyId:a});case 22:case\"end\":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:\"removeTrack\",value:(r=Ze(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(\"audio\"!==t.kind){e.next=2;break}throw new Ed({code:Rd.INVALID_PARAMETER,message:\"remove audio track is not supported\"});case 2:if(n=this.getMediaStream()){e.next=5;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"the local stream is not initialized yet\"});case 5:if(-1!==n.getTracks().indexOf(t)){e.next=7;break}throw new Ed({code:Rd.INVALID_PARAMETER,message:\"the track to be removed is not being publishing\"});case 7:if(n.removeTrack(t),\"audio\"===t.kind?this.setHasAudio(0):this.setHasVideo(0),!(r=this.getConnection())){e.next=19;break}return e.next=13,r.removeTrack(t);case 13:i=r.getUserId(),o=r.getTinyId(),a=xl,s=\"remove video track from current published stream\",\"audio\"===t.kind&&(a=Al,s=\"remove audio track from current published stream\"),$l(i,{eventId:a,eventDesc:s,timestamp:(new Date).getTime(),userId:i,tinyId:o});case 19:case\"end\":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:\"replaceTrack\",value:(n=Ze(regeneratorRuntime.mark(function e(n){var r,i,o,a,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getMediaStream()){e.next=3;break}throw new Ed({code:Rd.INVALID_OPERATION,message:\"the local stream is not initialized yet\"});case 3:if(!(\"audio\"===n.kind&&r.getAudioTracks().length<=0||\"video\"===n.kind&&r.getVideoTracks().length<=0)){e.next=5;break}throw new Ed({code:Rd.INVALID_PARAMETER,message:\"try to replace \".concat(n.kind,\" track but there's no previous \").concat(n.kind,\" being published\")});case 5:if(\"video\"!==n.kind){e.next=10;break}if(!(\"getSettings\"in MediaStreamTrack.prototype)){e.next=10;break}if((i=n.getSettings()).width===this.videoProfile_.width&&i.height===this.videoProfile_.height){e.next=10;break}throw new Ed({code:Rd.INVALID_PARAMETER,message:\"video resolution of the track (\".concat(i.width,\" x \").concat(i.height,\") shall be kept the same as the one defined via setVideoProfile(): \").concat(this.videoProfile_.width,\" x \").concat(this.videoProfile_.height)});case 10:if(\"audio\"===n.kind?(r.removeTrack(r.getAudioTracks()[0]),r.addTrack(n),lt(at(t.prototype),\"restartAudio\",this).call(this)):(r.removeTrack(r.getVideoTracks()[0]),r.addTrack(n),lt(at(t.prototype),\"restartVideo\",this).call(this)),!(o=this.getConnection())){e.next=21;break}return e.next=15,o.replaceTrack(n);case 15:a=o.getUserId(),s=o.getTinyId(),c=Bl,u=\"replace video track from current published stream\",\"audio\"===n.kind&&(c=Hl,u=\"replace audio track from current published stream\"),$l(a,{eventId:c,eventDesc:u,timestamp:(new Date).getTime(),userId:a,tinyId:s});case 21:case\"end\":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(),Ep=function(){function e(){et(this,e),this.cache=[],this.init()}return nt(e,[{key:\"report\",value:function(e,t){var n=this;try{window.MtaH5?(window.MtaH5.clickStat(e,t),this.cache.forEach(function(e){var t=e.name,r=e.param;window.MtaH5.clickStat(t,r),n.cache.shift()})):this.cache.push({name:e,param:t})}catch(Np){}}},{key:\"stat\",value:function(){try{window.MtaH5&&window.MtaH5.pgv()}catch(Np){}}},{key:\"init\",value:function(){try{window._mtac={autoReport:1};var e=document.createElement(\"script\");e.src=\"https://pingjs.qq.com/h5/stats.js?v2.0.4\",e.setAttribute(\"name\",\"MTAH5\"),e.setAttribute(\"sid\",\"500699039\"),e.setAttribute(\"cid\",\"500699088\");var t=document.getElementsByTagName(\"script\")[0];t.parentNode.insertBefore(e,t)}catch(Np){}}}]),e}();console.log(\"WebRTC-adapter \".concat(yn.browserDetails.browser,\"/\").concat(yn.browserDetails.version));var Ip,Pp,xp,Ap,Op,Dp=new Ep,Lp={VERSION:\"4.3.1\",Logger:{LogLevel:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5},setLogLevel:function(e){Hn.setLogLevel(e)},enableUploadLog:function(){Hn.enableUploadLog()},disableUploadLog:function(){Hn.disableUploadLog()}},checkSystemRequirements:(Op=Ze(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ld(),e.next=3,Nd();case 3:return n=e.sent,(r=!Wu&&t&&n)||Hn.error(\"\".concat(td,\" isWebRTCSupported: \").concat(t,\" isH264Supported: \").concat(n)),e.abrupt(\"return\",r);case 7:case\"end\":return e.stop()}},e)})),function(){return Op.apply(this,arguments)}),isScreenShareSupported:function(){return e=0,navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&(e=1),e;var e},getDevices:(Ap=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt(\"return\",t.map(function(e,t){var n=e.label;return e.label||(n=e.kind+\"_\"+t),{label:n,deviceId:e.deviceId,kind:e.kind}}));case 4:case\"end\":return e.stop()}},e)})),function(){return Ap.apply(this,arguments)}),getCameras:(xp=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt(\"return\",t.filter(function(e){return\"videoinput\"===e.kind}).map(function(e,t){var n=e.label;return e.label||(n=\"camera_\"+t),{label:n,deviceId:e.deviceId,kind:e.kind}}));case 4:case\"end\":return e.stop()}},e)})),function(){return xp.apply(this,arguments)}),getMicrophones:(Pp=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt(\"return\",t.filter(function(e){return\"audioinput\"===e.kind}).map(function(e,t){var n=e.label;return e.label||(n=\"microphone_\"+t),{label:n,deviceId:e.deviceId,kind:e.kind}}));case 4:case\"end\":return e.stop()}},e)})),function(){return Pp.apply(this,arguments)}),getSpeakers:(Ip=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,e.abrupt(\"return\",t.filter(function(e){return\"audiooutput\"===e.kind}).map(function(e,t){var n=e.label;return e.label||(n=\"speaker_\"+t),{label:n,deviceId:e.deviceId,kind:e.kind}}));case 4:case\"end\":return e.stop()}},e)})),function(){return Ip.apply(this,arguments)}),createClient:function(e){Dp.report(\"sdkAppID\",{value:e.sdkAppId}),Dp.report(\"version\",{value:this.VERSION});var t={version:this.VERSION};return new gp(it({},t,e))},createStream:function(e){if(!(void 0===e.audio&&void 0===e.video||void 0===e.audioSource&&void 0===e.videoSource))throw new Ed({code:Rd.INVALID_PARAMETER,message:\"LocalStream must be created by createStream() with either audio/video or audioSource/videoSourcebut can not be mixed with audio/video and audioSource/videoSource\"});if(void 0!==e.screen&&1==e.screen&&1==e.video)throw new Ed({code:Rd.INVALID_PARAMETER,message:\"screen/video options are mutually exclusive, they can not be both true\"});if(void 0!==e.screen&&1==e.screen&&!this.isScreenShareSupported())throw new Ed({code:Rd.INVALID_OPERATION,message:\"screen capture is not supported, please use the latest chrome browser\"});return new Rp(e)}};return Hn.info(\"TRTC Web SDK Version: \"+Lp.VERSION),Hn.info(\"UserAgent: \"+navigator.userAgent),Hn.info(\"URL of current page: \"+location.href),Lp});\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://TIC/./node_modules/trtc-js-sdk/trtc.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n\n/* WEBPACK VAR INJECTION */}.call(this, {}))\n\n//# sourceURL=webpack://TIC/(webpack)/buildin/amd-options.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack://TIC/(webpack)/buildin/global.js?");

/***/ }),

/***/ "./src/TIC.js":
/*!********************!*\
  !*** ./src/TIC.js ***!
  \********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.regexp.to-string */ \"./node_modules/core-js/modules/es6.regexp.to-string.js\");\n/* harmony import */ var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es6.date.to-string */ \"./node_modules/core-js/modules/es6.date.to-string.js\");\n/* harmony import */ var core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _constant_Constant__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constant/Constant */ \"./src/constant/Constant.js\");\n/* harmony import */ var _webim_WebIM__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webim/WebIM */ \"./src/webim/WebIM.js\");\n/* harmony import */ var _webboard_webBoard__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./webboard/webBoard */ \"./src/webboard/webBoard.js\");\n/* harmony import */ var _webrtc_WebRTC__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./webrtc/WebRTC */ \"./src/webrtc/WebRTC.js\");\n/* harmony import */ var _event_MessageListener__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./event/MessageListener */ \"./src/event/MessageListener.js\");\n/* harmony import */ var _event_EventListener__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./event/EventListener */ \"./src/event/EventListener.js\");\n/* harmony import */ var _event_StatusListener__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./event/StatusListener */ \"./src/event/StatusListener.js\");\n/* harmony import */ var _model_AccountModel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./model/AccountModel */ \"./src/model/AccountModel.js\");\n/* harmony import */ var _model_BoardOptionModel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./model/BoardOptionModel */ \"./src/model/BoardOptionModel.js\");\n/* harmony import */ var _model_WebRTCOptionModel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./model/WebRTCOptionModel */ \"./src/model/WebRTCOptionModel.js\");\n/* harmony import */ var _config_Config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./config/Config */ \"./src/config/Config.js\");\n/* harmony import */ var _log_LogReport__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./log/LogReport */ \"./src/log/LogReport.js\");\n/* harmony import */ var _model_ClassModel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./model/ClassModel */ \"./src/model/ClassModel.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction TIC() {\n  this.accountModel = new _model_AccountModel__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n  this.boardOptionModel = new _model_BoardOptionModel__WEBPACK_IMPORTED_MODULE_11__[\"default\"]();\n  this.webRTCOptionModel = new _model_WebRTCOptionModel__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n  this.classModel = new _model_ClassModel__WEBPACK_IMPORTED_MODULE_15__[\"default\"]();\n  this.messageListener = new _event_MessageListener__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n  this.eventListener = new _event_EventListener__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n  this.statusListener = new _event_StatusListener__WEBPACK_IMPORTED_MODULE_9__[\"default\"]();\n  this.ticVersion = _config_Config__WEBPACK_IMPORTED_MODULE_13__[\"default\"].version;\n  this.log = new _log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"]();\n  this.log.setSdkVersion(_config_Config__WEBPACK_IMPORTED_MODULE_13__[\"default\"].version);\n  this._disableAllModule = false; // 禁用所有模块\n\n  this._disableTRTCModule = false; // 禁用TRTC模块\n}\n/** @constant {string} */\n\n\nTIC.CONSTANT = _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"];\nTIC.prototype = {\n  /**\r\n   * 初始化;\r\n   * @param sdkAppId\t\t\t在腾讯云申请的sdkAppId\r\n   * @param callback\t\t\t回调\r\n   * @return 错误码, 0表示成功\r\n   */\n  init: function init(sdkAppId, disableModule, callback) {\n    var cb = null;\n\n    if (arguments.length == 2) {\n      cb = disableModule;\n    } else if (arguments.length == 3) {\n      cb = callback; // 不禁用所有模块\n\n      if (disableModule === _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICDisableModule.TIC_DISABLE_MODULE_NONE) {\n        this._disableAllModule = false;\n      } else if (disableModule >> 1 & 1 === 1) {\n        // 禁用TRTC模块\n        this._disableAllModule = false;\n        this._disableTRTCModule = true; // 禁用TRTC模块\n      }\n    }\n\n    this.log.setSdkAppId(sdkAppId);\n    var startTime = Date.now(); // 初始化开始\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITSDK_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: '',\n      ext: ''\n    });\n\n    if (sdkAppId) {\n      this.accountModel.sdkAppId = sdkAppId;\n      cb && cb({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      }); // 初始化完成\n\n      this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITSDK_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n    } else {\n      cb && cb({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: -7,\n        desc: 'sdkAppId is illegal'\n      }); // 初始化\n\n      this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITSDK_END, {\n        errorCode: -7,\n        errorDesc: 'sdkAppId is illegal',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n    }\n  },\n  // 保留接口\n  uninit: function uninit() {},\n\n  /**\r\n   * 登录\r\n   * @param loginConfig\t\tuserid, usersig鉴权信息\r\n   * @param callback\t\t\t回调\r\n   */\n  login: function login(loginConfig, callback) {\n    var _this = this;\n\n    var startTime = Date.now();\n    this.accountModel.userId = loginConfig.userId;\n    this.accountModel.userSig = loginConfig.userSig;\n    this.ticWebIm = new _webim_WebIM__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n    this.ticWebIm.setLog(this.log);\n    this.log.setUserId(loginConfig.userId); // 登录-start\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.LOGIN_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: '',\n      ext: ''\n    });\n    this.ticWebIm.login(this.accountModel, this.classModel).then(function (res) {\n      _this.ticWebIm.setMessageListener(_this.messageListener);\n\n      _this.ticWebIm.setEventListener(_this.eventListener);\n\n      _this.ticWebIm.setStatusListener(_this.statusListener);\n\n      _this.addTICStatusListener({\n        // 监听被踢下线\n        onTICForceOffline: function onTICForceOffline() {\n          _this.ticWebRTC && _this.ticWebRTC.quit();\n          _this.ticBoard && _this.ticBoard.quit();\n\n          _this.removeTICEventListener();\n\n          _this.removeTICMessageListener();\n\n          _this.removeTICStatusListener();\n        }\n      }); // 登录- end\n\n\n      _this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.LOGIN_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }, function (error) {\n      // 登录- end\n      _this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.LOGIN_END, {\n        errorCode: error.ErrorCode,\n        errorDesc: error.ErrorInfo,\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 登出\r\n   * @param callback\t\t\t回调\r\n   */\n  logout: function logout(callback) {\n    var _this2 = this;\n\n    var startTime = Date.now(); // 登出-start\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.LOGOUT_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: '',\n      ext: ''\n    });\n    this.ticWebIm.logout().then(function (res) {\n      // 登出-end\n      _this2.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.LOGOUT_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }).catch(function (error) {\n      // 登出-end\n      _this2.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.LOGOUT_END, {\n        errorCode: error.ErrorCode,\n        errorDesc: error.ErrorInfo,\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 创建课堂\r\n   * @param classObj\t\t\t课堂ID，由业务生成和维护\r\n   * @param callback\t\t\t回调\r\n   */\n  createClassroom: function createClassroom(classObj, callback) {\n    var _this3 = this;\n\n    // 默认是实时通话场景\n    var scene = _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICClassScene.TIC_CLASS_SCENE_VIDEO_CALL; // 0 实时通话场景  1 直播场景\n\n    var classId = classObj; // 如果是对象，则要拆一下classId\n\n    if (Object.prototype.toString.call(classObj) === '[object Object]') {\n      classId = classObj.classId;\n      scene = classObj.classScene || _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICClassScene.TIC_CLASS_SCENE_VIDEO_CALL; // 场景\n    }\n\n    var startTime = Date.now(); // 创建课堂-start\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.CREATEGROUP_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: classId + '',\n      ext: '' + scene // 将场景上报\n\n    }); // WebIM加入聊天房间\n\n    this.ticWebIm.createRoom(classId, scene).then(function (res) {\n      // 创建课堂-end\n      _this3.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.CREATEGROUP_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: classId + '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }, function (error) {\n      // 创建课堂-end\n      _this3.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.CREATEGROUP_END, {\n        errorCode: error.ErrorCode,\n        errorDesc: error.ErrorInfo,\n        timeCost: Date.now() - startTime,\n        data: classId + '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 加入课堂\r\n   * @param classId\t\t课堂ID\r\n   * @param webRTCOption\t\tWebRTC相关参数\r\n   * @param boardOption\t白板相关参数\r\n   * @param callback\t\t\t回调\r\n   */\n  joinClassroom: function joinClassroom(classOption, webRTCOption, boardOption, callback) {\n    var _this4 = this;\n\n    var classId = null;\n\n    if (Object.prototype.toString.call(classOption) === '[object Object]') {\n      this.classModel.compatSaas = !!classOption.compatSaas;\n      classId = classOption.classId;\n    } else {\n      classId = classOption;\n    }\n\n    this.log.setRoomId(classId);\n    var startTime = Date.now(); // 加入课堂-start\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINGROUP_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: '',\n      ext: JSON.stringify({\n        webRTCOption: webRTCOption,\n        boardOption: boardOption\n      })\n    });\n    this.accountModel.classId = classId; // 是否需要与saas同步\n\n    if (this.classModel.compatSaas) {\n      this.accountModel.classChatId = classId + '_chat';\n    } else {\n      this.classModel.classChatId = classId;\n    }\n\n    this.ticWebIm.joinRoom().then(function (res) {\n      // 加入课堂-end\n      _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINGROUP_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n\n      _this4.ticWebIm.setReceiveBoardNotifyCallback(function (msg) {\n        if (_this4.ticBoard && _this4.ticBoard.getInstance()) {\n          var elems = msg.elems;\n          elems.forEach(function (elem) {\n            if (elem.type === 'TIMCustomElem' && elem.content.ext === 'TXWhiteBoardExt') {\n              _this4.ticBoard.getInstance().addSyncData(JSON.parse(elem.content.data));\n            }\n          });\n        }\n      }); // 如果禁用了所有模块 || 禁用了TRTC模块 || 进房参数传了false\n\n\n      if (_this4._disableAllModule || _this4._disableTRTCModule || !webRTCOption) {\n        // 白板初始化\n        _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITBOARD_START, {\n          errorCode: 0,\n          errorDesc: '',\n          timeCost: Date.now() - startTime,\n          data: '',\n          ext: ''\n        });\n\n        _this4.boardOptionModel.setData(boardOption);\n\n        _this4.ticBoard = new _webboard_webBoard__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_this4.accountModel, _this4.boardOptionModel);\n\n        _this4.ticBoard.setLog(_this4.log);\n\n        _this4.ticBoard.render(); // 白板初始化\n\n\n        _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITBOARD_END, {\n          errorCode: 0,\n          errorDesc: '',\n          timeCost: Date.now() - startTime,\n          data: '',\n          ext: ''\n        }); // 设置白板的监听回调\n\n\n        _this4.ticBoard.addSyncDataEventCallback(function (data) {\n          _this4.ticWebIm.sendBoardGroupCustomMessage(data);\n        });\n\n        callback && callback({\n          module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n          code: 0\n        });\n      } else {\n        _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.ENTERROOM_START, {\n          errorCode: 0,\n          errorDesc: '',\n          timeCost: Date.now() - startTime,\n          data: '',\n          ext: ''\n        });\n\n        _this4.webRTCOptionModel.setData(webRTCOption);\n\n        _this4.ticWebRTC = new _webrtc_WebRTC__WEBPACK_IMPORTED_MODULE_6__[\"default\"](_this4.accountModel, _this4.webRTCOptionModel);\n\n        _this4.ticWebRTC.setLog(_this4.log);\n\n        _this4.ticWebRTC.joinAvRoom(function () {\n          // 加入AV房间-end\n          _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.ENTERROOM_END, {\n            errorCode: 0,\n            errorDesc: '',\n            timeCost: Date.now() - startTime,\n            data: '',\n            ext: ''\n          });\n\n          _this4.ticWebRTC.setStatusListener(_this4.statusListener); // 白板初始化\n\n\n          _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITBOARD_START, {\n            errorCode: 0,\n            errorDesc: '',\n            timeCost: Date.now() - startTime,\n            data: '',\n            ext: ''\n          });\n\n          _this4.boardOptionModel.setData(boardOption);\n\n          _this4.ticBoard = new _webboard_webBoard__WEBPACK_IMPORTED_MODULE_5__[\"default\"](_this4.accountModel, _this4.boardOptionModel);\n\n          _this4.ticBoard.setLog(_this4.log);\n\n          _this4.ticBoard.render(); // 白板初始化\n\n\n          _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.INITBOARD_END, {\n            errorCode: 0,\n            errorDesc: '',\n            timeCost: Date.now() - startTime,\n            data: '',\n            ext: ''\n          }); // 设置白板的监听回调\n\n\n          _this4.ticBoard.addSyncDataEventCallback(function (data) {\n            _this4.ticWebIm.sendBoardGroupCustomMessage(data);\n          });\n\n          callback && callback({\n            module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n            code: 0\n          });\n        }, function (error) {\n          // 加入AV房间-end\n          _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.ENTERROOM_END, {\n            errorCode: error.errorCode,\n            errorDesc: JSON.stringify(error),\n            timeCost: Date.now() - startTime,\n            data: '',\n            ext: ''\n          });\n\n          callback && callback({\n            module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_TRTC,\n            code: error.errorCode,\n            desc: JSON.stringify(error)\n          });\n        });\n      }\n    }, function (error) {\n      // 加入课堂-end\n      _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINGROUP_END, {\n        errorCode: error.ErrorCode,\n        errorDesc: error.ErrorInfo,\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    }); // 如果需要与saas同步\n\n    if (this.classModel.compatSaas) {\n      // 加入聊天群-start\n      this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINCHATGROUP_START, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      });\n      this.ticWebIm.joinSaasChatRoom().then(function (res) {\n        // 加入聊天群-end\n        _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINCHATGROUP_END, {\n          errorCode: 0,\n          errorDesc: '',\n          timeCost: Date.now() - startTime,\n          data: '',\n          ext: ''\n        });\n      }, function () {\n        // 重试一次\n        _this4.ticWebIm.joinSaasChatRoom().then(function () {\n          // 加入聊天群-end\n          _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINCHATGROUP_END, {\n            errorCode: 0,\n            errorDesc: '',\n            timeCost: Date.now() - startTime,\n            data: '',\n            ext: ''\n          });\n        }, function (error) {\n          // 加入聊天群-end\n          _this4.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.JOINCHATGROUP_END, {\n            errorCode: error.ErrorCode,\n            errorDesc: error.ErrorInfo,\n            timeCost: Date.now() - startTime,\n            data: '',\n            ext: ''\n          });\n        });\n      });\n    }\n  },\n\n  /**\r\n   * 退出课堂\r\n   * @param callback\t\t\t回调\r\n   */\n  quitClassroom: function quitClassroom(callback) {\n    var _this5 = this;\n\n    var startTime = Date.now(); // 退出课堂-start\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.QUITGROUP_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: '',\n      ext: ''\n    });\n    this.ticWebIm.quitGroup().then(function () {\n      _this5.ticWebRTC && _this5.ticWebRTC.quit();\n      _this5.ticBoard && _this5.ticBoard.quit();\n\n      _this5.removeTICEventListener();\n\n      _this5.removeTICMessageListener();\n\n      _this5.removeTICStatusListener(); // 退出课堂-end\n\n\n      _this5.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.QUITGROUP_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: '',\n        ext: ''\n      }); // 退出成功\n\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }).catch(function (error) {\n      // 群不存在 或者 不在群里了 或者 群id不合法（一般这种情况是课堂销毁了groupId被重置后发生）(都认为成功)\n      if (error.ErrorCode === 10010 || error.ErrorCode === 10007 || error.ErrorCode === 10015) {\n        _this5.ticWebRTC && _this5.ticWebRTC.quit();\n        _this5.ticBoard && _this5.ticBoard.quit();\n\n        _this5.removeTICEventListener();\n\n        _this5.removeTICMessageListener();\n\n        _this5.removeTICStatusListener(); // 退出课堂-end\n\n\n        _this5.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.QUITGROUP_END, {\n          errorCode: 0,\n          errorDesc: '',\n          timeCost: Date.now() - startTime,\n          data: '',\n          ext: ''\n        }); // 退出成功\n\n\n        callback && callback({\n          module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n          code: 0\n        });\n      } else {\n        // 退出课堂-end\n        _this5.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.QUITGROUP_END, {\n          errorCode: error.ErrorCode,\n          errorDesc: error.ErrorInfo,\n          timeCost: Date.now() - startTime,\n          data: '',\n          ext: ''\n        }); // 退出失败\n\n\n        callback && callback({\n          module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n          code: error.ErrorCode,\n          desc: error.ErrorInfo\n        });\n      }\n    }); // 如果与互动课堂互通\n\n    if (this.classModel.compatSaas) {\n      this.ticWebIm.quitChatGroup();\n    }\n  },\n\n  /**\r\n   * 销毁课堂\r\n   * @param classId\t\t\t课堂ID，由业务生成和维护\r\n   * @param callback\t\t\t回调\r\n   */\n  destroyClassroom: function destroyClassroom(classId, callback) {\n    var _this6 = this;\n\n    var startTime = Date.now(); // 销毁课堂-start\n\n    this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.DELETEGROUP_START, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: Date.now() - startTime,\n      data: classId + '',\n      ext: ''\n    });\n    this.ticWebIm.destroyGroup(classId).then(function (data) {\n      _this6.ticWebRTC && _this6.ticWebRTC.quit();\n      _this6.ticBoard && _this6.ticBoard.clearAll();\n      _this6.ticBoard && _this6.ticBoard.quit();\n\n      _this6.removeTICEventListener();\n\n      _this6.removeTICMessageListener();\n\n      _this6.removeTICStatusListener(); // 销毁课堂-start\n\n\n      _this6.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.DELETEGROUP_END, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: Date.now() - startTime,\n        data: classId + '',\n        ext: ''\n      }); // 销毁成功\n\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }).catch(function (error) {\n      // 销毁课堂-end\n      _this6.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_14__[\"default\"].EVENT_NAME.DELETEGROUP_END, {\n        errorCode: error.ErrorCode,\n        errorDesc: error.ErrorInfo,\n        timeCost: Date.now() - startTime,\n        data: classId + '',\n        ext: ''\n      }); // 销毁失败\n\n\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 发送C2C文本消息\r\n   * @param userId\t\t\t消息接收者\r\n   * @param text\t\t\t\t文本消息内容\r\n   * @param callback\t\t\t回调\r\n   */\n  sendTextMessage: function sendTextMessage(userId, text, callback) {\n    this.ticWebIm.sendC2CTextMessage(userId, text, function () {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }, function (error) {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 发送C2C自定义消息\r\n   * @param userId\t\t\t消息接收者\r\n   * @param data\t\t\t\t自定义消息内容\r\n   * @param callback\t\t\t回调\r\n   */\n  sendCustomMessage: function sendCustomMessage(userId, data, callback) {\n    this.ticWebIm.sendC2CCustomMessage(userId, data, function () {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }, function (error) {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 发送群文本消息\r\n   * @param text\t\t\t\t文本消息内容\r\n   * @param callback\t\t\t回调\r\n   */\n  sendGroupTextMessage: function sendGroupTextMessage(text, callback) {\n    this.ticWebIm.sendGroupTextMessage(text, function () {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }, function (error) {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * 发送群自定义消息\r\n   * @param data\t\t\t\t自定义消息内容\r\n   * @param callback\t\t\t回调\r\n   */\n  sendGroupCustomMessage: function sendGroupCustomMessage(text, callback) {\n    this.ticWebIm.sendGroupCustomMessage(text, function () {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: 0\n      });\n    }, function (error) {\n      callback && callback({\n        module: _constant_Constant__WEBPACK_IMPORTED_MODULE_3__[\"default\"].TICModule.TICMODULE_IMSDK,\n        code: error.ErrorCode,\n        desc: error.ErrorInfo\n      });\n    });\n  },\n\n  /**\r\n   * @desc 获取白板实例\r\n   * @return {Board} board 返回白板实例\r\n   */\n  getBoardInstance: function getBoardInstance() {\n    return this.ticBoard.getInstance();\n  },\n\n  /**\r\n   * @desc 获取IM实例, 初始化TICKSDK后即可获得IM实例\r\n   * @return {webim} im 返回IM实例\r\n   */\n  getImInstance: function getImInstance() {\n    return webim;\n  },\n\n  /**\r\n   * @desc  获取trtc client 实例\r\n   * @return {WebRTC} cos 返回WebRTC实例\r\n   */\n  getTrtcClient: function getTrtcClient() {\n    return this.ticWebRTC && this.ticWebRTC.getInstance();\n  },\n\n  /**\r\n   * 添加IM消息监听回调\r\n   * @param listener\t\t\t回调\r\n   */\n  addTICMessageListener: function addTICMessageListener(listener) {\n    this.messageListener.addTICMessageListener(listener);\n  },\n\n  /**\r\n   * 移除IM消息监听回调\r\n   * @param listener\t\t\t回调\r\n   */\n  removeTICMessageListener: function removeTICMessageListener(listener) {\n    this.messageListener.removeTICMessageListener(listener);\n  },\n\n  /**\r\n   * 添加事件监听回调\r\n   * @param listener\t\t\t回调\r\n   */\n  addTICEventListener: function addTICEventListener(listener) {\n    this.eventListener.addTICEventListener(listener);\n  },\n\n  /**\r\n   * 移除事件监听回调\r\n   * @param listener\t\t\t回调\r\n   */\n  removeTICEventListener: function removeTICEventListener(listener) {\n    this.eventListener.removeTICEventListener(listener);\n  },\n\n  /**\r\n   * 添加IM状态监听回调\r\n   * @param listener\t\t\t回调\r\n   */\n  addTICStatusListener: function addTICStatusListener(listener) {\n    this.statusListener.addTICStatusListener(listener);\n  },\n\n  /**\r\n   * 移除IM状态监听回调\r\n   * @param listener\t\t\t回调\r\n   */\n  removeTICStatusListener: function removeTICStatusListener(listener) {\n    this.statusListener.removeTICStatusListener(listener);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TIC);\n\n//# sourceURL=webpack://TIC/./src/TIC.js?");

/***/ }),

/***/ "./src/config/Config.js":
/*!******************************!*\
  !*** ./src/config/Config.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  version: '2.4.0'\n});\n\n//# sourceURL=webpack://TIC/./src/config/Config.js?");

/***/ }),

/***/ "./src/constant/Constant.js":
/*!**********************************!*\
  !*** ./src/constant/Constant.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Constant = {\n  TICModule: {\n    TICMODULE_IMSDK: 0,\n    //IMSDK模块\n    TICMODULE_TRTC: 1,\n    //TRTC模块\n    TICMODULE_BOARD: 2,\n    //BOARD模块\n    TICMODULE_TIC: 3 //TIC模块\n\n  },\n\n  /**\r\n   * 课堂场景\r\n   **/\n  TICClassScene: {\n    TIC_CLASS_SCENE_VIDEO_CALL: 0,\n    //实时通话模式，支持1000人以下场景，低延时\n    TIC_CLASS_SCENE_LIVE: 1 //直播模式，支持1000人以上场景，会增加600ms左右延时\n\n  },\n\n  /**\r\n   * 房间角色\r\n   * 仅适用于直播模式（TIC_CLASS_SCENE_LIVE），角色TIC_ROLE_TYPE_ANCHOR具有上行权限\r\n   **/\n  TICRoleType: {\n    TIC_ROLE_TYPE_ANCHOR: 20,\n    //主播\n    TIC_ROLE_TYPE_AUDIENCE: 21 //观众\n\n  },\n  TICDisableModule: {\n    TIC_DISABLE_MODULE_NONE: 0,\n    //默认全部启用\n    TIC_DISABLE_MODULE_TRTC: 1 << 1 //禁用TRTC\n\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Constant);\n\n//# sourceURL=webpack://TIC/./src/constant/Constant.js?");

/***/ }),

/***/ "./src/event/EventListener.js":
/*!************************************!*\
  !*** ./src/event/EventListener.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction EventListener() {\n  this.listenerList = [];\n}\n\nEventListener.prototype.addTICEventListener = function (listener) {\n  this.listenerList.push(listener);\n};\n\nEventListener.prototype.removeTICEventListener = function (listener) {\n  if (listener) {\n    var index = -1;\n\n    for (var i = 0, len = this.listenerList.length; i < len; i++) {\n      if (listener == this.listenerList[i]) {\n        index = i;\n      }\n    }\n\n    if (index > -1) {\n      this.listenerList.splice(index, 1);\n    }\n  } else {\n    this.listenerList = [];\n  }\n};\n\nEventListener.prototype.fireEvent = function (eventName) {\n  for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    data[_key - 1] = arguments[_key];\n  }\n\n  this.listenerList.forEach(function (listener) {\n    var callback = listener[eventName];\n    callback && callback.apply(void 0, data);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EventListener);\n\n//# sourceURL=webpack://TIC/./src/event/EventListener.js?");

/***/ }),

/***/ "./src/event/MessageListener.js":
/*!**************************************!*\
  !*** ./src/event/MessageListener.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction MessageListener() {\n  this.listenerList = [];\n} // 增加消息监听\n\n\nMessageListener.prototype.addTICMessageListener = function (listener) {\n  this.listenerList.push(listener);\n};\n\nMessageListener.prototype.removeTICMessageListener = function (listener) {\n  if (listener) {\n    var index = -1;\n\n    for (var i = 0, len = this.listenerList.length; i < len; i++) {\n      if (listener == this.listenerList[i]) {\n        index = i;\n      }\n    }\n\n    if (index > -1) {\n      this.listenerList.splice(index, 1);\n    }\n  } else {\n    this.listenerList = [];\n  }\n};\n\nMessageListener.prototype.fireEvent = function (eventName) {\n  for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    data[_key - 1] = arguments[_key];\n  }\n\n  this.listenerList.forEach(function (listener) {\n    var callback = listener[eventName];\n    callback && callback.apply(void 0, data);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (MessageListener);\n\n//# sourceURL=webpack://TIC/./src/event/MessageListener.js?");

/***/ }),

/***/ "./src/event/StatusListener.js":
/*!*************************************!*\
  !*** ./src/event/StatusListener.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction StatusListener() {\n  this.listenerList = [];\n} // 增加消息监听\n\n\nStatusListener.prototype.addTICStatusListener = function (listener) {\n  this.listenerList.push(listener);\n};\n\nStatusListener.prototype.removeTICStatusListener = function (listener) {\n  if (listener) {\n    var index = -1;\n\n    for (var i = 0, len = this.listenerList.length; i < len; i++) {\n      if (listener == this.listenerList[i]) {\n        index = i;\n      }\n    }\n\n    if (index > -1) {\n      this.listenerList.splice(index, 1);\n    }\n  } else {\n    this.listenerList = [];\n  }\n};\n\nStatusListener.prototype.fireEvent = function (eventName) {\n  for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    data[_key - 1] = arguments[_key];\n  }\n\n  this.listenerList.forEach(function (listener) {\n    var callback = listener[eventName];\n    callback && callback.apply(void 0, data);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (StatusListener);\n\n//# sourceURL=webpack://TIC/./src/event/StatusListener.js?");

/***/ }),

/***/ "./src/log/LogReport.js":
/*!******************************!*\
  !*** ./src/log/LogReport.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.object.assign */ \"./node_modules/core-js/modules/es6.object.assign.js\");\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_md5__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-md5 */ \"./node_modules/js-md5/src/md5.js\");\n/* harmony import */ var js_md5__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(js_md5__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar LogReport =\n/*#__PURE__*/\nfunction () {\n  function LogReport() {\n    _classCallCheck(this, LogReport);\n\n    this.reportApi = 'https://ilivelog.qcloud.com/log/report';\n    this.reportData = {\n      business: 'tic2.0',\n      dcid: 'dc0000',\n      version: 0,\n      kv_str: ''\n    };\n    this.businessData = {\n      sdkAppId: '',\n      //int\t应用标识\n      userId: '',\n      //String\t用户Id\n      sdkVersion: '',\n      //String\tsdk版本号\n      devId: '',\n      //String\t设备Id\n      devType: '',\n      //String\t设备型号\n      netType: '',\n      //String\t网络类型，\"Wifi\",\"4G\",\"3G\",\"2G\"\n      platform: 'Web',\n      //String\t平台，\"iOS\",\"Android\",\"macOS\",\"Windows\",\"Web\",\"小程序\"\n      sysVersion: navigator.userAgent,\n      //String\t系统版本\n      roomId: '',\n      //String\t房间号\n      event: '',\n      //String\t事件\n      errorCode: '',\n      //int\t错误码\n      errorDesc: '',\n      //String\t错误信息\n      timeCost: '',\n      //int\t耗时（ms）\n      timestamp: '',\n      //int64\t时间戳（ms）\n      data: '',\n      //String\t事件数据\n      ext: '' //String\t扩展字段\n\n    };\n  }\n\n  _createClass(LogReport, [{\n    key: \"setSdkAppId\",\n    value: function setSdkAppId(sdkAppId) {\n      this.businessData.sdkAppId = sdkAppId;\n    }\n  }, {\n    key: \"setUserId\",\n    value: function setUserId(userId) {\n      this.businessData.userId = userId;\n    }\n  }, {\n    key: \"setSdkVersion\",\n    value: function setSdkVersion(sdkVersion) {\n      this.businessData.sdkVersion = sdkVersion;\n    }\n  }, {\n    key: \"setRoomId\",\n    value: function setRoomId(roomId) {\n      this.businessData.roomId = roomId;\n    }\n  }, {\n    key: \"getXHR\",\n    value: function getXHR() {\n      var xmlhttp = null;\n\n      if (window.XMLHttpRequest) {\n        xmlhttp = new XMLHttpRequest();\n      } else if (window.ActiveXObject) {\n        try {\n          xmlhttp = new ActiveXObject(\"Msxml2.XMLHTTP\");\n        } catch (e) {\n          try {\n            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n          } catch (e) {}\n        }\n      }\n\n      if (xmlhttp == null) {\n        return;\n      }\n\n      return xmlhttp;\n    }\n  }, {\n    key: \"post\",\n    value: function post() {\n      var arr = [];\n\n      for (var p in this.businessData) {\n        if (p === 'errorDesc') {\n          arr.push(\"\".concat(p, \"=\").concat(encodeURIComponent(this.businessData[p])));\n        } else {\n          arr.push(\"\".concat(p, \"=\").concat(this.businessData[p]));\n        }\n      }\n\n      this.reportData.kv_str = arr.join('&');\n      var xhr = this.getXHR();\n      xhr.open('POST', this.reportApi + '?sign=' + js_md5__WEBPACK_IMPORTED_MODULE_1___default()(JSON.stringify(this.reportData)), true);\n      xhr.setRequestHeader(\"Content-type\", \"application/json\");\n      xhr.send(JSON.stringify(this.reportData));\n    }\n  }, {\n    key: \"report\",\n    value: function report(eventName, data) {\n      this.businessData.event = eventName;\n      Object.assign(this.businessData, {\n        timestamp: Date.now()\n      }, data);\n      this.post();\n    }\n  }]);\n\n  return LogReport;\n}();\n\nLogReport.EVENT_NAME = {\n  INITSDK_START: 'initSdk_start',\n  //\tim初始化\t\n  INITSDK_END: 'initSdk_end',\n  //\tim初始化\t\n  LOGIN_START: 'login_start',\n  //\tim登陆\t\n  LOGIN_END: 'login_end',\n  //\tim登陆\t\n  LOGOUT_START: 'logout_start',\n  //\tim登出\t\n  LOGOUT_END: 'logout_end',\n  //\tim登出\t\n  CREATEGROUP_START: 'createGroup_start',\n  //\t创建群组\t\n  CREATEGROUP_END: 'createGroup_end',\n  //\t创建群组\t\n  DELETEGROUP_START: 'deleteGroup_start',\n  //\t销毁群组\t\n  DELETEGROUP_END: 'deleteGroup_end',\n  //\t销毁群组\t\n  JOINGROUP_START: 'joinGroup_start',\n  //\t加入群组\t\n  JOINGROUP_END: 'joinGroup_end',\n  //\t加入群组\t\n  JOINCHATGROUP_START: 'joinChatGroup_start',\n  //\t加入群组\t\n  JOINCHATGROUP_END: 'joinChatGroup_end',\n  //\t加入群组\t\n  INITBOARD_START: 'initBoard_start',\n  //\t初始化白板\t\n  INITBOARD_END: 'initBoard_end',\n  //\t初始化白板\t\n  SYNCBOARDHISTORY_END: 'syncBoardHistory_end',\n  //\t白板历史数据同步\t\n  ENTERROOM_START: 'enterRoom_start',\n  //\ttrtc进房\t\n  ENTERROOM_END: 'enterRoom_end',\n  //\ttrtc进房\t\n  QUITGROUP_START: 'quitGroup_start',\n  //\t退出群组\t\n  QUITGROUP_END: 'quitGroup_end',\n  //\t退出群组\t\n  SENDOFFLINERECORDINFO_START: 'sendOfflineRecordInfo_start',\n  //\t发送对时信息\t\n  SENDOFFLINERECORDINFO_END: 'sendOfflineRecordInfo_end',\n  //\t发送对时信息\t\n  ONUSERAUDIOAVAILABLE: 'onUserAudioAvailable',\n  //\t音频是否启用\t{userId:, available:}\n  ONUSERVIDEOAVAILABLE: 'onUserVideoAvailable',\n  //\t视频是否启用\t{userId:, available:}\n  ONUSERSUBSTREAMAVAILABLE: 'onUserSubStreamAvailable',\n  //\t辅流是否启用\t{userId:, available:}\n  ONFORCEOFFLINE: 'onForceOffline',\n  //\t被强制下线\t\n  ONUSERSIGEXPIRED: 'onUserSigExpired',\n  //\tuserSig过期\t\n  ONTEBERROR: 'onTEBError',\n  //\t错误信息\t\n  ONTEBWARNING: 'onTEBWarning' //\t警告信息\n\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (LogReport);\n\n//# sourceURL=webpack://TIC/./src/log/LogReport.js?");

/***/ }),

/***/ "./src/model/AccountModel.js":
/*!***********************************!*\
  !*** ./src/model/AccountModel.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction AccountModel() {\n  this.sdkAppId = null;\n  this.userId = null;\n  this.userSig = null;\n  this.userNick = null; // 昵称\n\n  this.userAvatar = null; // 头像\n\n  this.accountType = 1; // 帐号类型\n\n  this.classId = null; // 信令群ID\n\n  this.classChatId = null; // 聊天群ID\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AccountModel);\n\n//# sourceURL=webpack://TIC/./src/model/AccountModel.js?");

/***/ }),

/***/ "./src/model/BoardOptionModel.js":
/*!***************************************!*\
  !*** ./src/model/BoardOptionModel.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.object.assign */ \"./node_modules/core-js/modules/es6.object.assign.js\");\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction BoardOptionModel() {\n  this.id = null;\n  this.ratio = '16:9';\n  this.drawEnable = true;\n  this.textFamily = null;\n  this.textStyle = 0;\n  this.textSize = 320;\n  this.textColor = null;\n  this.brushColor = '#ff0000';\n  this.brushThin = 100;\n  this.toolType = 1;\n  this.globalBackgroundColor = '#ffffff';\n  this.boardFileFitMode = 0; // \n\n  this.scale = 100; // \n\n  this.smoothLevel = 0.1; // 平滑系数\n\n  this.preloadDepth = 5; // 预加载深度\n}\n\nBoardOptionModel.prototype.setData = function (data) {\n  Object.assign(this, data);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BoardOptionModel);\n\n//# sourceURL=webpack://TIC/./src/model/BoardOptionModel.js?");

/***/ }),

/***/ "./src/model/ClassModel.js":
/*!*********************************!*\
  !*** ./src/model/ClassModel.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction ClassModel() {\n  this.compatSaas = false; // 是否要与Saas互通\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ClassModel);\n\n//# sourceURL=webpack://TIC/./src/model/ClassModel.js?");

/***/ }),

/***/ "./src/model/WebRTCOptionModel.js":
/*!****************************************!*\
  !*** ./src/model/WebRTCOptionModel.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.object.assign */ \"./node_modules/core-js/modules/es6.object.assign.js\");\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction WebRTCOptionModel() {\n  this.role = null;\n  this.privateMapKey = null;\n  this.pureAudioPushMod = null;\n  this.recordId = null;\n  this.peerAddNotify = null;\n  this.classScene = null;\n}\n\nWebRTCOptionModel.prototype.setData = function (data) {\n  Object.assign(this, data);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebRTCOptionModel);\n\n//# sourceURL=webpack://TIC/./src/model/WebRTCOptionModel.js?");

/***/ }),

/***/ "./src/webboard/webBoard.js":
/*!**********************************!*\
  !*** ./src/webboard/webBoard.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.object.assign */ \"./node_modules/core-js/modules/es6.object.assign.js\");\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _log_LogReport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../log/LogReport */ \"./src/log/LogReport.js\");\n\n\n\nfunction WebBoard(accountModel, boardOptionModel) {\n  this.board = null;\n  this.accountModel = accountModel;\n  this.boardOptionModel = boardOptionModel;\n}\n\nWebBoard.prototype.getInstance = function () {\n  return this.board;\n};\n\nWebBoard.prototype.setLog = function (log) {\n  this.log = log;\n};\n\nWebBoard.prototype.render = function () {\n  var _this = this;\n\n  this.board = null;\n  this.board = new TEduBoard(Object.assign({}, this.boardOptionModel, {\n    classId: this.accountModel.classId,\n    sdkAppId: this.accountModel.sdkAppId,\n    userId: this.accountModel.userId + '',\n    userSig: this.accountModel.userSig\n  })); // 错误\n\n  this.board.on(TEduBoard.EVENT.TEB_ERROR, function (code, msg) {\n    _this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_1__[\"default\"].EVENT_NAME.ONTEBERROR, {\n      errorCode: code,\n      errorDesc: msg,\n      timeCost: 0,\n      data: '',\n      ext: ''\n    });\n  }); // 历史数据加载完成\n\n  this.board.on(TEduBoard.EVENT.TEB_WARNING, function (code, msg) {\n    _this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_1__[\"default\"].EVENT_NAME.ONTEBWARNING, {\n      errorCode: code,\n      errorDesc: msg,\n      timeCost: 0,\n      data: '',\n      ext: ''\n    });\n  }); // 历史数据加载完成\n\n  this.board.on(TEduBoard.EVENT.TEB_HISTROYDATA_SYNCCOMPLETED, function () {\n    _this.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_1__[\"default\"].EVENT_NAME.SYNCBOARDHISTORY_END, {\n      errorCode: 0,\n      errorDesc: '',\n      timeCost: 0,\n      data: '',\n      ext: ''\n    });\n  });\n};\n\nWebBoard.prototype.addSyncDataEventCallback = function (callback) {\n  this.board.on(TEduBoard.EVENT.TEB_SYNCDATA, function (data) {\n    callback && callback(data);\n  });\n};\n\nWebBoard.prototype.quit = function () {\n  if (this.board) {\n    this.board && this.board.off();\n    this.board = null;\n  }\n}; // 清空课堂数据\n\n\nWebBoard.prototype.clearAll = function () {\n  if (this.board) {\n    this.board && this.board.reset();\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WebBoard);\n\n//# sourceURL=webpack://TIC/./src/webboard/webBoard.js?");

/***/ }),

/***/ "./src/webim/ImHandler.js":
/*!********************************!*\
  !*** ./src/webim/ImHandler.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction ImHandler(accountModel, classModel) {\n  this.imBoardSession = null;\n  this.imChatSession = null;\n  this.accountModel = accountModel;\n  this.classModel = classModel;\n  this.sendMsgFailMap = {};\n}\n/**\r\n * 白板信令\r\n */\n\n\nImHandler.prototype.setIMBoardSession = function (imSession) {\n  this.imBoardSession = imSession;\n};\n\nImHandler.prototype.setIMChatSession = function (imChatSession) {\n  this.imChatSession = imChatSession;\n};\n/**\r\n * 传输白板数据\r\n * @param {*} content \r\n */\n\n\nImHandler.prototype.sendBoardGroupCustomMessage = function (content) {\n  var _this = this;\n\n  var msg = new webim.Msg(this.imBoardSession, true, -1, Math.round(Math.random() * 4294967296), new Date().getTime(), this.accountModel.userId, webim.GROUP_MSG_SUB_TYPE.REDPACKET, this.accountModel.userNick);\n  var custom = new webim.Msg.Elem.Custom(content, '', 'TXWhiteBoardExt');\n  msg.addCustom(custom);\n  msg.PushInfoBoolean = true;\n  msg.PushInfo = {\n    Ext: 'TXWhiteBoardExt',\n    PushFlag: 0\n  };\n  webim.sendMsg(msg, function (resp) {\n    console.log(resp);\n  }, function (error) {\n    _this.retrySendBoardGroupCustomMessage(msg);\n  });\n};\n/**\r\n * 重试逻辑\r\n * @param {*} msg \r\n */\n\n\nImHandler.prototype.retrySendBoardGroupCustomMessage = function (msg) {\n  var _this2 = this;\n\n  // 重试3次\n  if ((this.sendMsgFailMap[msg.seq + ''] || 0) > 1) {\n    return;\n  }\n\n  this.sendMsgFailMap[msg.seq + ''] = (this.sendMsgFailMap[msg.seq + ''] || 0) + 1;\n  webim.sendMsg(msg, function (resp) {\n    console.log(resp);\n  }, function (error) {\n    _this2.retrySendBoardGroupCustomMessage(msg);\n  });\n};\n/**\r\n * 发送普通文本消息\r\n * @param {*} selType 接收方类型（个人/群组）\r\n * @param {*} msgText 消息内容\r\n * @param {*} toUser 接收方ID\r\n */\n\n\nImHandler.prototype.sendTextMessage = function (selType, msgText, toUser, succ, fail) {\n  var selSess = null;\n  var subType; //消息子类型\n  // 如果是发给群组\n\n  if (selType == webim.SESSION_TYPE.GROUP) {\n    selSess = this.imChatSession;\n    subType = webim.GROUP_MSG_SUB_TYPE.COMMON;\n  } else {\n    subType = webim.C2C_MSG_SUB_TYPE.COMMON;\n    selSess = new webim.Session(selType, toUser, toUser, '', this.getUnixTimestamp());\n  }\n\n  var isSend = true; //是否为自己发送\n\n  var seq = -1; //消息序列，-1表示 SDK 自动生成，用于去重\n\n  var random = Math.round(Math.random() * 4294967296); //消息随机数，用于去重\n\n  var msgTime = this.getUnixTimestamp(); //消息时间戳\n\n  var msg = new webim.Msg(selSess, isSend, seq, random, msgTime, this.accountModel.userId, subType, this.accountModel.userNick);\n  var text_obj;\n  text_obj = new webim.Msg.Elem.Text(msgText);\n  msg.addText(text_obj);\n  webim.sendMsg(msg, function (resp) {\n    succ && succ();\n  }, function (err) {\n    fail && fail(err);\n  });\n};\n/**\r\n * 发送自定义消息\r\n * @param {*} selType 接收方类型（个人/群组）\r\n * @param {*} msgObj 消息内容\r\n * @param {*} toUser 接收方ID\r\n */\n\n\nImHandler.prototype.sendCustomMsg = function (selType, msgText, toUser, succ, fail) {\n  var selSess = null;\n  var subType; //消息子类型\n  // 如果是发给群组\n\n  if (selType == webim.SESSION_TYPE.GROUP) {\n    selSess = this.imChatSession;\n    subType = webim.GROUP_MSG_SUB_TYPE.COMMON;\n  } else {\n    selSess = new webim.Session(selType, toUser, toUser, '', this.getUnixTimestamp());\n    subType = webim.C2C_MSG_SUB_TYPE.COMMON;\n  }\n\n  var isSend = true; //是否为自己发送\n\n  var seq = -1; //消息序列，-1表示 SDK 自动生成，用于去重\n\n  var random = Math.round(Math.random() * 4294967296); //消息随机数，用于去重\n\n  var msgTime = this.getUnixTimestamp(); //消息时间戳\n\n  var msg = new webim.Msg(selSess, isSend, seq, random, msgTime, this.accountModel.userId, subType, this.accountModel.userNick);\n  var custom_obj = new webim.Msg.Elem.Custom(msgText);\n  msg.addCustom(custom_obj); //调用发送消息接口\n\n  webim.sendMsg(msg, function (resp) {\n    succ && succ();\n  }, function (err) {\n    fail && fail(err);\n  });\n};\n/**\r\n * 获取unixTimestamp时间戳\r\n */\n\n\nImHandler.prototype.getUnixTimestamp = function () {\n  return Math.round(new Date().getTime() / 1000);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ImHandler);\n\n//# sourceURL=webpack://TIC/./src/webim/ImHandler.js?");

/***/ }),

/***/ "./src/webim/WebIM.js":
/*!****************************!*\
  !*** ./src/webim/WebIM.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.promise */ \"./node_modules/core-js/modules/es6.promise.js\");\n/* harmony import */ var core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var tim_js_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tim-js-sdk */ \"./node_modules/tim-js-sdk/tim-js.js\");\n/* harmony import */ var tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _ImHandler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ImHandler */ \"./src/webim/ImHandler.js\");\n/* harmony import */ var _log_LogReport__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../log/LogReport */ \"./src/log/LogReport.js\");\n/* harmony import */ var _constant_Constant__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constant/Constant */ \"./src/constant/Constant.js\");\n\n\n\n\n\n\n\nfunction TICWebIM() {\n  this.accountModel = null;\n  this.classModel = null;\n  this.imListener = null;\n  this.boardNotifyCallback = null;\n  this.imHandler = null;\n}\n\nTICWebIM.prototype.setLog = function (log) {\n  this.log = log;\n};\n\nTICWebIM.prototype.login = function (accountModel, classModel) {\n  var _this = this;\n\n  this.accountModel = accountModel;\n  this.classModel = classModel;\n  this.listeners = this.initEvent();\n  return new Promise(function (resolve, reject) {\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.login({\n      'sdkAppID': accountModel.sdkAppId + '',\n      //用户所属应用id,必填\n      'appIDAt3rd': accountModel.sdkAppId + '',\n      //用户所属应用id，必填\n      'accountType': accountModel.accountType || 1,\n      //用户所属应用帐号类型，必填\n      'identifier': accountModel.userId,\n      //当前用户ID,必须是否字符串类型，选填\n      'identifierNick': accountModel.userNick || accountModel.userId,\n      //当前用户昵称，选填\n      'userSig': accountModel.userSig\n    }, _this.listeners, {\n      isAccessFormalEnv: true,\n      isLogOn: false\n    }, function (res) {\n      _this.imHandler = new _ImHandler__WEBPACK_IMPORTED_MODULE_3__[\"default\"](accountModel, classModel);\n      resolve(res);\n    }, reject);\n  });\n};\n\nTICWebIM.prototype.logout = function () {\n  return new Promise(function (resolve, reject) {\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.logout(resolve, reject);\n  });\n};\n\nTICWebIM.prototype.initEvent = function () {\n  var self = this;\n  return {\n    // 用于监听用户连接状态变化的函数，选填\n    onConnNotify: function onConnNotify(resp) {},\n    // 监听新消息(直播聊天室)事件，直播场景下必填\n    onBigGroupMsgNotify: function onBigGroupMsgNotify(msgs) {\n      self.messageHandler(msgs);\n    },\n    // 监听新消息函数，必填\n    onMsgNotify: function onMsgNotify(msgs) {\n      self.messageHandler(msgs);\n    },\n    // 监听（多终端同步）群系统消息事件，必填\n    onGroupSystemNotifys: {\n      // //申请加群请求（只有管理员会收到）\n      // \"1\": (notify) => {\n      // },\n      // //申请加群被同意（只有申请人能够收到）\n      // \"2\": (notify) => {\n      // },\n      // //申请加群被拒绝（只有申请人能够收到）\n      // \"3\": (notify) => {\n      // },\n      //被管理员踢出群(只有被踢者接收到)\n      \"4\": function _(notify) {\n        self.eventListener.fireEvent('onTICMemberQuit', [self.accountModel.userId]);\n      },\n      //群被解散(全员接收)\n      \"5\": function _(notify) {\n        self.eventListener.fireEvent('onTICClassroomDestroy');\n      },\n      // //创建群(创建者接收)\n      // \"6\": (notify) => {\n      // },\n      // //邀请加群(被邀请者接收)\n      // \"7\": (notify) => {\n      // },\n      // //主动退群(主动退出者接收)\n      // \"8\": (notify) => {\n      // },\n      // //设置管理员(被设置者接收)\n      // \"9\": (notify) => {\n      // },\n      // //取消管理员(被取消者接收)\n      // \"10\": (notify) => {\n      // },\n      // //群已被回收(全员接收)\n      \"11\": function _(notify) {\n        self.eventListener.fireEvent('onTICClassroomDestroy');\n      } // //用户自定义通知(默认全员接收)\n      // \"255\": (notify) => {\n      // }\n\n    },\n    // 监听群资料变化事件，选填\n    onGroupInfoChangeNotify: function onGroupInfoChangeNotify(groupInfo) {},\n    // 被踢下线的回调\n    onKickedEventCall: function onKickedEventCall() {\n      // 被强制下线\n      self.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_4__[\"default\"].EVENT_NAME.ONFORCEOFFLINE, {\n        errorCode: 0,\n        errorDesc: '',\n        timeCost: 0,\n        data: '',\n        ext: 'im onKickedEventCall'\n      });\n      self.statusListener.fireEvent('onTICForceOffline');\n    },\n    // 监听 C2C 消息通道的处理\n    onC2cEventNotifys: {\n      // 多终端互踢\n      \"96\": function _(notify) {\n        // 被强制下线\n        self.log.report(_log_LogReport__WEBPACK_IMPORTED_MODULE_4__[\"default\"].EVENT_NAME.ONFORCEOFFLINE, {\n          errorCode: 0,\n          errorDesc: '',\n          timeCost: 0,\n          data: '',\n          ext: 'im onC2cEventNotifys-96'\n        });\n        self.statusListener.fireEvent('onTICForceOffline');\n      }\n    }\n  };\n};\n\nTICWebIM.prototype.messageHandler = function (msgs) {\n  var self = this;\n\n  if (msgs.length) {\n    // 如果有消息才处理\n    msgs.forEach(function (msg) {\n      var sess = msg.getSession();\n      var msgType = sess.type(); // 如果是群组消息\n\n      if (msgType === tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP) {\n        var groupid = sess.id(); // 如果是信令群（如果不与saas同步，则同时也是聊天群）\n\n        if (groupid == self.accountModel.classId) {\n          var elems = msg.elems;\n\n          if (elems.length) {\n            // 白板消息\n            if (elems[0].type === 'TIMCustomElem' && elems[0].content.ext === 'TXWhiteBoardExt') {\n              if (msg.getFromAccount() != self.accountModel.userId) {\n                self.boardNotifyCallback && self.boardNotifyCallback(msg);\n              }\n            } else if (elems[0].type === 'TIMFileElem' && elems[0].content.ext === 'TXWhiteBoardExt') {\n              // 白板消息\n              if (msg.getFromAccount() != self.accountModel.userId) {\n                self.boardNotifyCallback && self.boardNotifyCallback(msg);\n              }\n            } else if (elems[0].type === 'TIMCustomElem' && elems[0].content.ext === 'TXConferenceExt') {// 对时消息过滤掉\n            } else {\n              self.resolveMessage(msg);\n            }\n          }\n        } else if (groupid == self.accountModel.classChatId) {\n          // 如果是聊天群\n          self.resolveMessage(msg);\n        } else {// 非本群通知，忽略\n        }\n      } else {\n        // 如果是C2C消息\n        self.resolveMessage(msg);\n      }\n    });\n  }\n};\n\nTICWebIM.prototype.resolveMessage = function (msg) {\n  var _this2 = this;\n\n  var elems = msg.elems;\n  this.messageListener.fireEvent('onTICRecvMessage', msg);\n  elems.forEach(function (elem) {\n    var content = elem.getContent();\n\n    if (msg.getFromAccount() === '@TIM#SYSTEM') {\n      // 接收到系统消息\n      var opType = content.getOpType(); // 通知类型\n\n      if (opType === tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.GROUP_TIP_TYPE.JOIN) {\n        // 加群通知\n        _this2.eventListener.fireEvent('onTICMemberJoin', elem.getContent().userIdList);\n      } else if (opType === tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.GROUP_TIP_TYPE.QUIT) {\n        // 退群通知\n        _this2.eventListener.fireEvent('onTICMemberQuit', [elem.getContent().opUserId]);\n      }\n    } else {\n      // 接收到群聊天/C2C消息\n      var type = elem.getType();\n\n      if (type === 'TIMTextElem') {\n        var text = '';\n\n        if (msg.getSession().type() === tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP) {\n          text = elem.getContent().getText() || '';\n\n          _this2.messageListener.fireEvent('onTICRecvGroupTextMessage', msg.getFromAccount(), text, text.length);\n        } else {\n          text = elem.getContent().getText() || '';\n\n          _this2.messageListener.fireEvent('onTICRecvTextMessage', msg.getFromAccount(), text, text.length);\n        }\n      } else if (type === 'TIMCustomElem') {\n        var data = '';\n\n        if (msg.getSession().type() === tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP) {\n          data = elem.getContent().getData() || '';\n\n          _this2.messageListener.fireEvent('onTICRecvGroupCustomMessage', msg.getFromAccount(), data, data.length);\n        } else {\n          data = elem.getContent().getData() || '';\n\n          _this2.messageListener.fireEvent('onTICRecvCustomMessage', msg.getFromAccount(), data, data.length);\n        }\n      }\n    }\n  });\n};\n/**\r\n * @classId 群组id\r\n * @scene 场景\r\n */\n\n\nTICWebIM.prototype.createRoom = function (classId, scene) {\n  classId = classId + '';\n  scene = scene * 1;\n  var groupType = scene === _constant_Constant__WEBPACK_IMPORTED_MODULE_5__[\"default\"].TICClassScene.TIC_CLASS_SCENE_VIDEO_CALL ? 'Public' : 'AVChatRoom';\n  var options = {\n    'GroupId': classId,\n    'Owner_Account': String(this.accountModel.userId),\n    'Type': groupType,\n    'ApplyJoinOption': 'FreeAccess',\n    'Name': classId,\n    'Notification': \"\",\n    'Introduction': \"\",\n    'MemberList': []\n  };\n  return new Promise(function (resolve, reject) {\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.createGroup(options, function (resp) {\n      resolve(resp);\n    }, function (err) {\n      if (err.ErrorCode == 10025) {\n        resolve(err);\n      } else if (err.ErrorCode == 10021) {\n        reject(err);\n      } else {\n        reject(err);\n      }\n    });\n  });\n};\n/**\r\n * 加入白板信令群\r\n */\n\n\nTICWebIM.prototype.joinRoom = function () {\n  var _this3 = this;\n\n  // 先创建群，成功后加入群\n  return new Promise(function (resolve, reject) {\n    var groupID = String(_this3.accountModel.classId);\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.applyJoinBigGroup({\n      GroupId: groupID\n    }, function (resp) {\n      //JoinedSuccess:加入成功; WaitAdminApproval:等待管理员审批\n      if (resp.JoinedStatus && resp.JoinedStatus == 'JoinedSuccess') {\n        _this3.imHandler.setIMBoardSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID)); // 如果不与saas互通\n\n\n        if (!_this3.classModel.compatSaas) {\n          _this3.imHandler.setIMChatSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID));\n        }\n\n        resolve(resp);\n      } else {\n        reject(resp);\n      }\n    }, function (err) {\n      if (err.ErrorCode == 10013) {\n        // 被邀请加入的用户已经是群成员,也表示成功\n        _this3.imHandler.setIMBoardSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID)); // 如果不与saas互通\n\n\n        if (!_this3.classModel.compatSaas) {\n          _this3.imHandler.setIMChatSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID));\n        }\n\n        resolve(err);\n      } else if (err.ErrorCode == -12) {\n        // Join Group succeed; But the type of group is not AVChatRoom\n        _this3.imHandler.setIMBoardSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID)); // 如果不与saas互通\n\n\n        if (!_this3.classModel.compatSaas) {\n          _this3.imHandler.setIMChatSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID));\n        }\n\n        resolve(err);\n      } else {\n        reject(err);\n      }\n    });\n  });\n};\n/**\r\n * 加入Saas聊天群\r\n */\n\n\nTICWebIM.prototype.joinSaasChatRoom = function () {\n  var _this4 = this;\n\n  // 先创建群，成功后加入群\n  return new Promise(function (resolve, reject) {\n    var groupID = String(_this4.accountModel.classChatId);\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.applyJoinBigGroup({\n      GroupId: groupID\n    }, function (resp) {\n      //JoinedSuccess:加入成功; WaitAdminApproval:等待管理员审批\n      if (resp.JoinedStatus && resp.JoinedStatus == 'JoinedSuccess') {\n        _this4.imHandler.setIMChatSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID));\n\n        resolve(resp);\n      } else {\n        reject(resp);\n      }\n    }, function (err) {\n      if (err.ErrorCode == 10013) {\n        // 被邀请加入的用户已经是群成员,也表示成功\n        _this4.imHandler.setIMChatSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID));\n\n        resolve(err);\n      } else if (err.ErrorCode == -12) {\n        // Join Group succeed; But the type of group is not AVChatRoom\n        _this4.imHandler.setIMChatSession(new tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.Session(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, groupID, groupID));\n\n        resolve(err);\n      } else {\n        reject(err);\n      }\n    });\n  });\n};\n/**\r\n * 销毁群组\r\n */\n\n\nTICWebIM.prototype.destroyGroup = function (groupID) {\n  return new Promise(function (resolve, reject) {\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.destroyGroup({\n      GroupId: groupID + ''\n    }, function (resp) {\n      resolve(resp);\n    }, function (err) {\n      reject(err);\n    });\n  });\n};\n/**\r\n * 退出群组\r\n */\n\n\nTICWebIM.prototype.quitGroup = function () {\n  var groupID = String(this.accountModel.classId);\n  return new Promise(function (resolve, reject) {\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.quitBigGroup({\n      GroupId: groupID\n    }, function (resp) {\n      resolve(resp);\n    }, function (err) {\n      // 群主想退群,则也认为成功\n      if (err.ErrorCode == 10009) {\n        resolve();\n        return;\n      }\n\n      reject(err);\n    });\n  });\n};\n/**\r\n * 退出chat群组\r\n */\n\n\nTICWebIM.prototype.quitChatGroup = function () {\n  var groupID = String(this.accountModel.classChatId);\n  return new Promise(function (resolve, reject) {\n    tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.quitBigGroup({\n      GroupId: groupID\n    }, function (resp) {\n      resolve(resp);\n    }, function (err) {\n      // 群主想退群,则也认为成功\n      if (err.ErrorCode == 10009) {\n        resolve();\n        return;\n      }\n\n      reject(err);\n    });\n  });\n};\n\nTICWebIM.prototype.setReceiveBoardNotifyCallback = function (callback) {\n  this.boardNotifyCallback = callback;\n};\n/**\r\n * 发送C2C文本消息\r\n */\n\n\nTICWebIM.prototype.sendC2CTextMessage = function (userId, msg, succ, fail) {\n  this.imHandler.sendTextMessage(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.C2C, msg, userId, succ, fail);\n};\n/**\r\n * 发送C2C自定义消息\r\n */\n\n\nTICWebIM.prototype.sendC2CCustomMessage = function (userId, msg, succ, fail) {\n  this.imHandler.sendCustomMsg(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.C2C, msg, userId, succ, fail);\n};\n/**\r\n * 发送群文本消息\r\n */\n\n\nTICWebIM.prototype.sendGroupTextMessage = function (msg, succ, fail) {\n  this.imHandler.sendTextMessage(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, msg, null, succ, fail);\n};\n/**\r\n * 发送群组自定义消息\r\n */\n\n\nTICWebIM.prototype.sendGroupCustomMessage = function (msg, succ, fail) {\n  this.imHandler.sendCustomMsg(tim_js_sdk__WEBPACK_IMPORTED_MODULE_2___default.a.SESSION_TYPE.GROUP, msg, null, succ, fail);\n}; // 发送白板数据\n\n\nTICWebIM.prototype.sendBoardGroupCustomMessage = function (msg) {\n  this.imHandler.sendBoardGroupCustomMessage(JSON.stringify(msg));\n};\n\nTICWebIM.prototype.setMessageListener = function (messageListener) {\n  this.messageListener = messageListener;\n};\n\nTICWebIM.prototype.setEventListener = function (eventListener) {\n  this.eventListener = eventListener;\n};\n\nTICWebIM.prototype.setStatusListener = function (statusListener) {\n  this.statusListener = statusListener;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TICWebIM);\n\n//# sourceURL=webpack://TIC/./src/webim/WebIM.js?");

/***/ }),

/***/ "./src/webrtc/WebRTC.js":
/*!******************************!*\
  !*** ./src/webrtc/WebRTC.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es7.symbol.async-iterator */ \"./node_modules/core-js/modules/es7.symbol.async-iterator.js\");\n/* harmony import */ var core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.symbol */ \"./node_modules/core-js/modules/es6.symbol.js\");\n/* harmony import */ var core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es6.number.constructor */ \"./node_modules/core-js/modules/es6.number.constructor.js\");\n/* harmony import */ var core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var trtc_js_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! trtc-js-sdk */ \"./node_modules/trtc-js-sdk/trtc.js\");\n/* harmony import */ var trtc_js_sdk__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(trtc_js_sdk__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _constant_Constant__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../constant/Constant */ \"./src/constant/Constant.js\");\n\n\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n\nfunction TICWebRTC(accountModel, webRTCOptionModel) {\n  this.accountModel = accountModel;\n  this.webRTCOptionModel = webRTCOptionModel;\n  this.trtcClient = null;\n}\n\nTICWebRTC.prototype.getInstance = function () {\n  return this.trtcClient;\n};\n\nTICWebRTC.prototype.setLog = function (log) {\n  return this.log = log;\n};\n\nTICWebRTC.prototype.quit = function (succ, fail) {\n  if (this.trtcClient) {\n    this.trtcClient.leave().then(succ).catch(fail);\n    this.trtcClient = null;\n  }\n};\n\nTICWebRTC.prototype.joinAvRoom = function () {\n  var succ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n  var fail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  var client = this.trtcClient = trtc_js_sdk__WEBPACK_IMPORTED_MODULE_3___default.a.createClient({\n    sdkAppId: this.accountModel.sdkAppId,\n    userId: this.accountModel.userId,\n    userSig: this.accountModel.userSig,\n    mode: this.webRTCOptionModel.mode === _constant_Constant__WEBPACK_IMPORTED_MODULE_4__[\"default\"].TICClassScene.TIC_CLASS_SCENE_LIVE ? 'live' : 'videoCall',\n    recordId: this.webRTCOptionModel.recordId,\n    pureAudioPushMod: this.webRTCOptionModel.pureAudioPushMod\n  });\n  this.initEvent();\n  var joinOption = {\n    roomId: Number(this.accountModel.classId),\n    privateMapKey: this.webRTCOptionModel.privateMapKey\n  };\n\n  if (this.webRTCOptionModel.mode === 1) {\n    // 大房间\n    // 如果是主播，则用主播角色，否则都是观众角色\n    if (this.webRTCOptionModel.role === _constant_Constant__WEBPACK_IMPORTED_MODULE_4__[\"default\"].TICRoleType.TIC_ROLE_TYPE_ANCHOR) {\n      joinOption['role'] = 'anchor';\n    } else {\n      joinOption['role'] = 'audience';\n    }\n  }\n\n  this.trtcClient.join(joinOption).then(succ).catch(fail);\n};\n\nTICWebRTC.prototype.initEvent = function () {\n  var _this = this;\n\n  // 通过监听‘stream-added’事件获得远端流对象\n  this.trtcClient.on('stream-added', function (event) {\n    var remoteStream = event.stream;\n\n    _this._reportTRTCEvent('stream-added', remoteStream);\n  }); // 监听‘stream-removed’事件\n\n  this.trtcClient.on('stream-removed', function (event) {\n    var remoteStream = event.stream;\n\n    _this._reportTRTCEvent('stream-removed', remoteStream);\n  }); // 监听‘stream-updated’事件\n\n  this.trtcClient.on('stream-updated', function (event) {\n    var remoteStream = event.stream;\n\n    _this._reportTRTCEvent('stream-updated', remoteStream);\n  }); // 监听‘stream-subscribed’事件\n\n  this.trtcClient.on('stream-subscribed', function (event) {\n    var remoteStream = event.stream;\n\n    _this._reportTRTCEvent('stream-subscribed', remoteStream);\n  });\n  this.trtcClient.on('connection-state-changed', function (event) {\n    _this._reportTRTCEvent('connection-state-changed', event);\n  });\n  this.trtcClient.on('peer-join', function (event) {\n    _this._reportTRTCEvent('peer-join', event);\n  });\n  this.trtcClient.on('peer-leave', function (event) {\n    _this._reportTRTCEvent('peer-leave', event);\n  });\n  this.trtcClient.on('mute-audio', function (event) {\n    _this._reportTRTCEvent('mute-audio', event);\n  });\n  this.trtcClient.on('mute-video', function (event) {\n    _this._reportTRTCEvent('mute-video', event);\n  });\n  this.trtcClient.on('unmute-audio', function (event) {\n    _this._reportTRTCEvent('unmute-audio', event);\n  });\n  this.trtcClient.on('unmute-video', function (event) {\n    _this._reportTRTCEvent('unmute-video', event);\n  });\n  this.trtcClient.on('client-banned', function (error) {\n    _this.statusListener.fireEvent('onTICForceOffline');\n\n    _this._reportTRTCEvent('client-banned', error);\n  });\n  this.trtcClient.on('error', function (error) {\n    _this._reportTRTCEvent('error', error);\n  });\n};\n\nTICWebRTC.prototype.setStatusListener = function (listener) {\n  this.statusListener = listener;\n};\n\nTICWebRTC.prototype._reportTRTCEvent = function (eventName, object) {\n  var extObj = {};\n\n  for (var key in object) {\n    var value = object[key];\n\n    if (_typeof(value) != 'object') {\n      extObj[key] = value;\n    }\n  }\n\n  this.log.report(eventName, {\n    errorCode: 0,\n    errorDesc: '',\n    timeCost: 0,\n    data: '',\n    ext: JSON.stringify(extObj)\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TICWebRTC);\n\n//# sourceURL=webpack://TIC/./src/webrtc/WebRTC.js?");

/***/ })

/******/ })["default"];
});